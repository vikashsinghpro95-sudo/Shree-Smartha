var __defProp = Object.defineProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __publicField = (obj, key, value) => {
  __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);
  return value;
};
(function() {
  "use strict";
  var __vite_style__ = document.createElement("style");
  __vite_style__.textContent = '@import url("https://fonts.googleapis.com/css2?family=Inter:slnt,wght@-10..0,100..900&display=swap");\n\n:root {\n  --primary-color: #3e3e3e;\n}\n\n.sidecart * {\n  margin: 0px;\n  box-sizing: border-box;\n}\n\n.sidecart button {\n  outline: none;\n  border: none;\n}\n\nshadow-dom-container {\n  display: block !important;\n}.font-medium-regular {\n  font-size: 14px;\n  font-weight: 400;\n}\n\n.font-medium-small {\n  font-size: 12px;\n  font-weight: 400;\n}\n\n.font-small-regular {\n  font-size: 12px;\n  font-weight: 400;\n}\n\n.font-regular-bold {\n  font-size: 14px;\n  font-weight: 600;\n}\n\n.font-large-bold {\n  font-size: 17px;\n  font-weight: 700;\n}\n\n.font-extra-small-bold {\n  font-size: 10px;\n  font-weight: 700;\n}\n\n:root {\n  /* fonts */\n  --font-light: InterLight;\n  --font-regular: Inter;\n  --font-bold: InterBold\n  	/* font sizes */\n  	--font-size-xs: 10px;\n  --font-size-s: 12px;\n  --font-size-m: 14px;\n  --font-size-regular: 16px;\n  --font-size-l: 18px;\n  --font-size-xl: 20px;\n  --font-family: Inter;\n  /* Colors */\n  --white: #fff;\n  --black: #000;\n  --dark-grey: #707070;\n  --error-red: #DD1D1D;\n  --green-text: #00B781;\n  --blue: #004B8D;\n  --light-blue-background: #E6EDF4;\n  --snow-white: #F1F1F1;\n  --semi-transparent-black: #00000080;\n  --light-grey: #DEDEDE;\n  --bright-red: #E92020;\n  --dark-blue: #021C41;\n  --blue-shade: #197cbd;\n  --medium-blue: #1773B0;\n  --pale-blue: #EFF5FF;\n  /* Gaps */\n  --gap-base: 4px;\n  --gap-regular: 8px;\n  --gap-loose: 12px;\n  --gap-fourteen: 14px;\n  --gap-extra-loose: 16px;\n  /* Paddings */\n  --padding-tight: 2px;\n  --padding-base: 4px;\n  --padding-regular: 6px;\n  --padding-loose: 8px;\n  --padding-extra-loose: 10px;\n  --padding-twelve: 12px;\n  --padding-fourteen: 14px;\n  --padding-sixteen: 16px;\n  --padding-rem: 1rem;\n  /* border radiuses */\n  --border-xs: 4px;\n  --border-s: 6px;\n  --border-regular: 8px;\n  --border-loose: 10px;\n  --border-extra-loose: 12px;\n  --border-huge: 16px;\n}\n\n.spacer {\n  height: 1rem;\n}\n\ninput,\ntextarea {\n  border: none;\n  outline: none;\n  background: none;\n}\n\n.text-small {\n  font-size: 12px;\n  font-weight: 300;\n}\n\n.text-normal {\n  font-size: 14px;\n  font-weight: 400;\n}\n\n.text-large {\n  font-size: 18px;\n  font-weight: 700;\n}\n\n.font-regular-regular {\n  font-size: 16px;\n  font-weight: 400;\n}\n\n.font-small-bold {\n  font-size: 12px;\n  font-weight: 600;\n}\n\n.font-medium-bold {\n  font-size: 13px;\n  font-weight: 600;\n}\n\n.font-medium-extra-bold {\n  font-size: 14px;\n  font-weight: 600;\n}\n\n.font-small-extra-bold {\n  font-size: 13px;\n  font-weight: 700;\n}\n\n.font-extra-small-extra-bold {\n  font-size: 11px;\n  font-weight: 700;\n}\n\n.font-extra-small-regular {\n  font-size: 11px;\n  font-weight: 400;\n}\n\n.font-small-medium {\n  font-size: 13px;\n  font-weight: 500;\n}\n\n.text-bold {\n  font-weight: 700;\n}\n\n.font-small-medium-regular {\n  font-size: 13px;\n  font-weight: 400;\n}\n\n.address-text-small-regular {\n  font-size: 12px;\n  font-weight: 400;\n  line-height: 1.3rem;\n}\n\n.address-text-small-bold {\n  font-size: 12px;\n  font-weight: 700;\n  line-height: 1rem;\n}\n\n.regular-input {\n  box-sizing: border-box;\n  font-size: 16px;\n  font-weight: 400;\n  line-height: 21px;\n  width: 100%;\n}\n\n.custom-regular-input {\n  box-sizing: border-box;\n  font-size: 16px;\n  font-weight: 400;\n  line-height: 21px;\n  width: 100%;\n  height: 2.7rem;\n  padding: 11px;\n  border: 1px solid var(--light-grey);\n  border-radius: var(--border-regular);\n  background: var(--snow-white);\n  font-family: var(--font-regular);\n}\n\n.half-width-input {\n  box-sizing: border-box;\n  font-size: 16px;\n  font-weight: 400;\n  line-height: 21px;\n  width: 100%;\n  height: 2.7rem;\n  padding: 11px;\n  border: 1px solid var(--light-grey);\n  border-radius: var(--border-regular);\n  background: var(--snow-white);\n  font-family: var(--font-regular);\n}\n\n.textbox-input {\n  box-sizing: border-box;\n  font-size: 16px;\n  font-weight: 400;\n  line-height: 21px;\n  width: 100%;\n  height: 5.4rem;\n  padding: 11px;\n  border: 1px solid var(--light-grey);\n  border-radius: var(--border-regular);\n  background: var(--snow-white);\n  font-family: var(--font-regular);\n}\n\n.main-container {\n  position: relative;\n  min-height: 100dvh;\n  /* Set height to 100% of viewport height */\n}\n\np {\n  margin: 0;\n  padding: 0;\n}\n\n.visually-hidden {\n  background: none;\n  border: none;\n  padding: 0;\n  margin: 0;\n  cursor: pointer;\n  display: block;\n}\n\n.no-pointer {\n  pointer-events: none;\n}\n\n@media only screen and (max-width: 767px) {\n  .desktop-only {\n    display: none !important;\n  }\n}\n@media only screen and (min-width: 767px) {\n  .mobile-only {\n    display: none !important;\n  }\n}';
  document.head.appendChild(__vite_style__);
  function noop() {
  }
  const identity = (x) => x;
  function assign(tar, src) {
    for (const k in src)
      tar[k] = src[k];
    return (
      /** @type {T & S} */
      tar
    );
  }
  function run(fn) {
    return fn();
  }
  function blank_object() {
    return /* @__PURE__ */ Object.create(null);
  }
  function run_all(fns) {
    fns.forEach(run);
  }
  function is_function(thing) {
    return typeof thing === "function";
  }
  function safe_not_equal(a, b) {
    return a != a ? b == b : a !== b || a && typeof a === "object" || typeof a === "function";
  }
  let src_url_equal_anchor;
  function src_url_equal(element_src, url) {
    if (element_src === url)
      return true;
    if (!src_url_equal_anchor) {
      src_url_equal_anchor = document.createElement("a");
    }
    src_url_equal_anchor.href = url;
    return element_src === src_url_equal_anchor.href;
  }
  function is_empty(obj) {
    return Object.keys(obj).length === 0;
  }
  function subscribe(store, ...callbacks) {
    if (store == null) {
      for (const callback of callbacks) {
        callback(void 0);
      }
      return noop;
    }
    const unsub = store.subscribe(...callbacks);
    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;
  }
  function get_store_value(store) {
    let value;
    subscribe(store, (_) => value = _)();
    return value;
  }
  function component_subscribe(component, store, callback) {
    component.$$.on_destroy.push(subscribe(store, callback));
  }
  function create_slot(definition, ctx, $$scope, fn) {
    if (definition) {
      const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);
      return definition[0](slot_ctx);
    }
  }
  function get_slot_context(definition, ctx, $$scope, fn) {
    return definition[1] && fn ? assign($$scope.ctx.slice(), definition[1](fn(ctx))) : $$scope.ctx;
  }
  function get_slot_changes(definition, $$scope, dirty, fn) {
    if (definition[2] && fn) {
      const lets = definition[2](fn(dirty));
      if ($$scope.dirty === void 0) {
        return lets;
      }
      if (typeof lets === "object") {
        const merged = [];
        const len = Math.max($$scope.dirty.length, lets.length);
        for (let i = 0; i < len; i += 1) {
          merged[i] = $$scope.dirty[i] | lets[i];
        }
        return merged;
      }
      return $$scope.dirty | lets;
    }
    return $$scope.dirty;
  }
  function update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {
    if (slot_changes) {
      const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);
      slot.p(slot_context, slot_changes);
    }
  }
  function get_all_dirty_from_scope($$scope) {
    if ($$scope.ctx.length > 32) {
      const dirty = [];
      const length = $$scope.ctx.length / 32;
      for (let i = 0; i < length; i++) {
        dirty[i] = -1;
      }
      return dirty;
    }
    return -1;
  }
  function exclude_internal_props(props) {
    const result = {};
    for (const k in props)
      if (k[0] !== "$")
        result[k] = props[k];
    return result;
  }
  function null_to_empty(value) {
    return value == null ? "" : value;
  }
  function set_store_value(store, ret, value) {
    store.set(value);
    return ret;
  }
  function split_css_unit(value) {
    const split = typeof value === "string" && value.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);
    return split ? [parseFloat(split[1]), split[2] || "px"] : [
      /** @type {number} */
      value,
      "px"
    ];
  }
  const is_client = typeof window !== "undefined";
  let now = is_client ? () => window.performance.now() : () => Date.now();
  let raf = is_client ? (cb) => requestAnimationFrame(cb) : noop;
  const tasks = /* @__PURE__ */ new Set();
  function run_tasks(now2) {
    tasks.forEach((task) => {
      if (!task.c(now2)) {
        tasks.delete(task);
        task.f();
      }
    });
    if (tasks.size !== 0)
      raf(run_tasks);
  }
  function loop(callback) {
    let task;
    if (tasks.size === 0)
      raf(run_tasks);
    return {
      promise: new Promise((fulfill) => {
        tasks.add(task = { c: callback, f: fulfill });
      }),
      abort() {
        tasks.delete(task);
      }
    };
  }
  function append(target, node) {
    target.appendChild(node);
  }
  function append_styles(target, style_sheet_id, styles) {
    const append_styles_to = get_root_for_style(target);
    if (!append_styles_to.getElementById(style_sheet_id)) {
      const style = element("style");
      style.id = style_sheet_id;
      style.textContent = styles;
      append_stylesheet(append_styles_to, style);
    }
  }
  function get_root_for_style(node) {
    if (!node)
      return document;
    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;
    if (root && /** @type {ShadowRoot} */
    root.host) {
      return (
        /** @type {ShadowRoot} */
        root
      );
    }
    return node.ownerDocument;
  }
  function append_empty_stylesheet(node) {
    const style_element = element("style");
    style_element.textContent = "/* empty */";
    append_stylesheet(get_root_for_style(node), style_element);
    return style_element.sheet;
  }
  function append_stylesheet(node, style) {
    append(
      /** @type {Document} */
      node.head || node,
      style
    );
    return style.sheet;
  }
  function insert(target, node, anchor) {
    target.insertBefore(node, anchor || null);
  }
  function detach(node) {
    if (node.parentNode) {
      node.parentNode.removeChild(node);
    }
  }
  function destroy_each(iterations, detaching) {
    for (let i = 0; i < iterations.length; i += 1) {
      if (iterations[i])
        iterations[i].d(detaching);
    }
  }
  function element(name) {
    return document.createElement(name);
  }
  function svg_element(name) {
    return document.createElementNS("http://www.w3.org/2000/svg", name);
  }
  function text(data) {
    return document.createTextNode(data);
  }
  function space() {
    return text(" ");
  }
  function empty() {
    return text("");
  }
  function listen(node, event, handler, options) {
    node.addEventListener(event, handler, options);
    return () => node.removeEventListener(event, handler, options);
  }
  function stop_propagation(fn) {
    return function(event) {
      event.stopPropagation();
      return fn.call(this, event);
    };
  }
  function attr(node, attribute, value) {
    if (value == null)
      node.removeAttribute(attribute);
    else if (node.getAttribute(attribute) !== value)
      node.setAttribute(attribute, value);
  }
  const always_set_through_set_attribute = ["width", "height"];
  function set_attributes(node, attributes) {
    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);
    for (const key in attributes) {
      if (attributes[key] == null) {
        node.removeAttribute(key);
      } else if (key === "style") {
        node.style.cssText = attributes[key];
      } else if (key === "__value") {
        node.value = node[key] = attributes[key];
      } else if (descriptors[key] && descriptors[key].set && always_set_through_set_attribute.indexOf(key) === -1) {
        node[key] = attributes[key];
      } else {
        attr(node, key, attributes[key]);
      }
    }
  }
  function set_svg_attributes(node, attributes) {
    for (const key in attributes) {
      attr(node, key, attributes[key]);
    }
  }
  function children(element2) {
    return Array.from(element2.childNodes);
  }
  function set_data(text2, data) {
    data = "" + data;
    if (text2.data === data)
      return;
    text2.data = /** @type {string} */
    data;
  }
  function set_input_value(input, value) {
    input.value = value == null ? "" : value;
  }
  function set_style(node, key, value, important) {
    if (value == null) {
      node.style.removeProperty(key);
    } else {
      node.style.setProperty(key, value, "");
    }
  }
  function select_option(select, value, mounting) {
    for (let i = 0; i < select.options.length; i += 1) {
      const option = select.options[i];
      if (option.__value === value) {
        option.selected = true;
        return;
      }
    }
    if (!mounting || value !== void 0) {
      select.selectedIndex = -1;
    }
  }
  function select_value(select) {
    const selected_option = select.querySelector(":checked");
    return selected_option && selected_option.__value;
  }
  function toggle_class(element2, name, toggle) {
    element2.classList.toggle(name, !!toggle);
  }
  function custom_event(type, detail, { bubbles = false, cancelable = false } = {}) {
    return new CustomEvent(type, { detail, bubbles, cancelable });
  }
  class HtmlTag {
    constructor(is_svg = false) {
      /**
       * @private
       * @default false
       */
      __publicField(this, "is_svg", false);
      /** parent for creating node */
      __publicField(this, "e");
      /** html tag nodes */
      __publicField(this, "n");
      /** target */
      __publicField(this, "t");
      /** anchor */
      __publicField(this, "a");
      this.is_svg = is_svg;
      this.e = this.n = null;
    }
    /**
     * @param {string} html
     * @returns {void}
     */
    c(html) {
      this.h(html);
    }
    /**
     * @param {string} html
     * @param {HTMLElement | SVGElement} target
     * @param {HTMLElement | SVGElement} anchor
     * @returns {void}
     */
    m(html, target, anchor = null) {
      if (!this.e) {
        if (this.is_svg)
          this.e = svg_element(
            /** @type {keyof SVGElementTagNameMap} */
            target.nodeName
          );
        else
          this.e = element(
            /** @type {keyof HTMLElementTagNameMap} */
            target.nodeType === 11 ? "TEMPLATE" : target.nodeName
          );
        this.t = target.tagName !== "TEMPLATE" ? target : (
          /** @type {HTMLTemplateElement} */
          target.content
        );
        this.c(html);
      }
      this.i(anchor);
    }
    /**
     * @param {string} html
     * @returns {void}
     */
    h(html) {
      this.e.innerHTML = html;
      this.n = Array.from(
        this.e.nodeName === "TEMPLATE" ? this.e.content.childNodes : this.e.childNodes
      );
    }
    /**
     * @returns {void} */
    i(anchor) {
      for (let i = 0; i < this.n.length; i += 1) {
        insert(this.t, this.n[i], anchor);
      }
    }
    /**
     * @param {string} html
     * @returns {void}
     */
    p(html) {
      this.d();
      this.h(html);
      this.i(this.a);
    }
    /**
     * @returns {void} */
    d() {
      this.n.forEach(detach);
    }
  }
  function construct_svelte_component(component, props) {
    return new component(props);
  }
  const managed_styles = /* @__PURE__ */ new Map();
  let active = 0;
  function hash(str) {
    let hash2 = 5381;
    let i = str.length;
    while (i--)
      hash2 = (hash2 << 5) - hash2 ^ str.charCodeAt(i);
    return hash2 >>> 0;
  }
  function create_style_information(doc, node) {
    const info = { stylesheet: append_empty_stylesheet(node), rules: {} };
    managed_styles.set(doc, info);
    return info;
  }
  function create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {
    const step = 16.666 / duration;
    let keyframes = "{\n";
    for (let p = 0; p <= 1; p += step) {
      const t = a + (b - a) * ease(p);
      keyframes += p * 100 + `%{${fn(t, 1 - t)}}
`;
    }
    const rule = keyframes + `100% {${fn(b, 1 - b)}}
}`;
    const name = `__svelte_${hash(rule)}_${uid}`;
    const doc = get_root_for_style(node);
    const { stylesheet, rules } = managed_styles.get(doc) || create_style_information(doc, node);
    if (!rules[name]) {
      rules[name] = true;
      stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);
    }
    const animation = node.style.animation || "";
    node.style.animation = `${animation ? `${animation}, ` : ""}${name} ${duration}ms linear ${delay}ms 1 both`;
    active += 1;
    return name;
  }
  function delete_rule(node, name) {
    const previous = (node.style.animation || "").split(", ");
    const next = previous.filter(
      name ? (anim) => anim.indexOf(name) < 0 : (anim) => anim.indexOf("__svelte") === -1
      // remove all Svelte animations
    );
    const deleted = previous.length - next.length;
    if (deleted) {
      node.style.animation = next.join(", ");
      active -= deleted;
      if (!active)
        clear_rules();
    }
  }
  function clear_rules() {
    raf(() => {
      if (active)
        return;
      managed_styles.forEach((info) => {
        const { ownerNode } = info.stylesheet;
        if (ownerNode)
          detach(ownerNode);
      });
      managed_styles.clear();
    });
  }
  let current_component;
  function set_current_component(component) {
    current_component = component;
  }
  function get_current_component() {
    if (!current_component)
      throw new Error("Function called outside component initialization");
    return current_component;
  }
  function onMount(fn) {
    get_current_component().$$.on_mount.push(fn);
  }
  function onDestroy(fn) {
    get_current_component().$$.on_destroy.push(fn);
  }
  function createEventDispatcher() {
    const component = get_current_component();
    return (type, detail, { cancelable = false } = {}) => {
      const callbacks = component.$$.callbacks[type];
      if (callbacks) {
        const event = custom_event(
          /** @type {string} */
          type,
          detail,
          { cancelable }
        );
        callbacks.slice().forEach((fn) => {
          fn.call(component, event);
        });
        return !event.defaultPrevented;
      }
      return true;
    };
  }
  function bubble(component, event) {
    const callbacks = component.$$.callbacks[event.type];
    if (callbacks) {
      callbacks.slice().forEach((fn) => fn.call(this, event));
    }
  }
  const dirty_components = [];
  const binding_callbacks = [];
  let render_callbacks = [];
  const flush_callbacks = [];
  const resolved_promise = /* @__PURE__ */ Promise.resolve();
  let update_scheduled = false;
  function schedule_update() {
    if (!update_scheduled) {
      update_scheduled = true;
      resolved_promise.then(flush);
    }
  }
  function tick() {
    schedule_update();
    return resolved_promise;
  }
  function add_render_callback(fn) {
    render_callbacks.push(fn);
  }
  function add_flush_callback(fn) {
    flush_callbacks.push(fn);
  }
  const seen_callbacks = /* @__PURE__ */ new Set();
  let flushidx = 0;
  function flush() {
    if (flushidx !== 0) {
      return;
    }
    const saved_component = current_component;
    do {
      try {
        while (flushidx < dirty_components.length) {
          const component = dirty_components[flushidx];
          flushidx++;
          set_current_component(component);
          update(component.$$);
        }
      } catch (e) {
        dirty_components.length = 0;
        flushidx = 0;
        throw e;
      }
      set_current_component(null);
      dirty_components.length = 0;
      flushidx = 0;
      while (binding_callbacks.length)
        binding_callbacks.pop()();
      for (let i = 0; i < render_callbacks.length; i += 1) {
        const callback = render_callbacks[i];
        if (!seen_callbacks.has(callback)) {
          seen_callbacks.add(callback);
          callback();
        }
      }
      render_callbacks.length = 0;
    } while (dirty_components.length);
    while (flush_callbacks.length) {
      flush_callbacks.pop()();
    }
    update_scheduled = false;
    seen_callbacks.clear();
    set_current_component(saved_component);
  }
  function update($$) {
    if ($$.fragment !== null) {
      $$.update();
      run_all($$.before_update);
      const dirty = $$.dirty;
      $$.dirty = [-1];
      $$.fragment && $$.fragment.p($$.ctx, dirty);
      $$.after_update.forEach(add_render_callback);
    }
  }
  function flush_render_callbacks(fns) {
    const filtered = [];
    const targets = [];
    render_callbacks.forEach((c) => fns.indexOf(c) === -1 ? filtered.push(c) : targets.push(c));
    targets.forEach((c) => c());
    render_callbacks = filtered;
  }
  let promise;
  function wait() {
    if (!promise) {
      promise = Promise.resolve();
      promise.then(() => {
        promise = null;
      });
    }
    return promise;
  }
  function dispatch(node, direction, kind) {
    node.dispatchEvent(custom_event(`${direction ? "intro" : "outro"}${kind}`));
  }
  const outroing = /* @__PURE__ */ new Set();
  let outros;
  function group_outros() {
    outros = {
      r: 0,
      c: [],
      p: outros
      // parent group
    };
  }
  function check_outros() {
    if (!outros.r) {
      run_all(outros.c);
    }
    outros = outros.p;
  }
  function transition_in(block, local) {
    if (block && block.i) {
      outroing.delete(block);
      block.i(local);
    }
  }
  function transition_out(block, local, detach2, callback) {
    if (block && block.o) {
      if (outroing.has(block))
        return;
      outroing.add(block);
      outros.c.push(() => {
        outroing.delete(block);
        if (callback) {
          if (detach2)
            block.d(1);
          callback();
        }
      });
      block.o(local);
    } else if (callback) {
      callback();
    }
  }
  const null_transition = { duration: 0 };
  function create_in_transition(node, fn, params) {
    const options = { direction: "in" };
    let config = fn(node, params, options);
    let running = false;
    let animation_name;
    let task;
    let uid = 0;
    function cleanup() {
      if (animation_name)
        delete_rule(node, animation_name);
    }
    function go() {
      const {
        delay = 0,
        duration = 300,
        easing = identity,
        tick: tick2 = noop,
        css
      } = config || null_transition;
      if (css)
        animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);
      tick2(0, 1);
      const start_time = now() + delay;
      const end_time = start_time + duration;
      if (task)
        task.abort();
      running = true;
      add_render_callback(() => dispatch(node, true, "start"));
      task = loop((now2) => {
        if (running) {
          if (now2 >= end_time) {
            tick2(1, 0);
            dispatch(node, true, "end");
            cleanup();
            return running = false;
          }
          if (now2 >= start_time) {
            const t = easing((now2 - start_time) / duration);
            tick2(t, 1 - t);
          }
        }
        return running;
      });
    }
    let started = false;
    return {
      start() {
        if (started)
          return;
        started = true;
        delete_rule(node);
        if (is_function(config)) {
          config = config(options);
          wait().then(go);
        } else {
          go();
        }
      },
      invalidate() {
        started = false;
      },
      end() {
        if (running) {
          cleanup();
          running = false;
        }
      }
    };
  }
  function create_out_transition(node, fn, params) {
    const options = { direction: "out" };
    let config = fn(node, params, options);
    let running = true;
    let animation_name;
    const group = outros;
    group.r += 1;
    let original_inert_value;
    function go() {
      const {
        delay = 0,
        duration = 300,
        easing = identity,
        tick: tick2 = noop,
        css
      } = config || null_transition;
      if (css)
        animation_name = create_rule(node, 1, 0, duration, delay, easing, css);
      const start_time = now() + delay;
      const end_time = start_time + duration;
      add_render_callback(() => dispatch(node, false, "start"));
      if ("inert" in node) {
        original_inert_value = /** @type {HTMLElement} */
        node.inert;
        node.inert = true;
      }
      loop((now2) => {
        if (running) {
          if (now2 >= end_time) {
            tick2(0, 1);
            dispatch(node, false, "end");
            if (!--group.r) {
              run_all(group.c);
            }
            return false;
          }
          if (now2 >= start_time) {
            const t = easing((now2 - start_time) / duration);
            tick2(1 - t, t);
          }
        }
        return running;
      });
    }
    if (is_function(config)) {
      wait().then(() => {
        config = config(options);
        go();
      });
    } else {
      go();
    }
    return {
      end(reset) {
        if (reset && "inert" in node) {
          node.inert = original_inert_value;
        }
        if (reset && config.tick) {
          config.tick(1, 0);
        }
        if (running) {
          if (animation_name)
            delete_rule(node, animation_name);
          running = false;
        }
      }
    };
  }
  function create_bidirectional_transition(node, fn, params, intro) {
    const options = { direction: "both" };
    let config = fn(node, params, options);
    let t = intro ? 0 : 1;
    let running_program = null;
    let pending_program = null;
    let animation_name = null;
    let original_inert_value;
    function clear_animation() {
      if (animation_name)
        delete_rule(node, animation_name);
    }
    function init2(program, duration) {
      const d = (
        /** @type {Program['d']} */
        program.b - t
      );
      duration *= Math.abs(d);
      return {
        a: t,
        b: program.b,
        d,
        duration,
        start: program.start,
        end: program.start + duration,
        group: program.group
      };
    }
    function go(b) {
      const {
        delay = 0,
        duration = 300,
        easing = identity,
        tick: tick2 = noop,
        css
      } = config || null_transition;
      const program = {
        start: now() + delay,
        b
      };
      if (!b) {
        program.group = outros;
        outros.r += 1;
      }
      if ("inert" in node) {
        if (b) {
          if (original_inert_value !== void 0) {
            node.inert = original_inert_value;
          }
        } else {
          original_inert_value = /** @type {HTMLElement} */
          node.inert;
          node.inert = true;
        }
      }
      if (running_program || pending_program) {
        pending_program = program;
      } else {
        if (css) {
          clear_animation();
          animation_name = create_rule(node, t, b, duration, delay, easing, css);
        }
        if (b)
          tick2(0, 1);
        running_program = init2(program, duration);
        add_render_callback(() => dispatch(node, b, "start"));
        loop((now2) => {
          if (pending_program && now2 > pending_program.start) {
            running_program = init2(pending_program, duration);
            pending_program = null;
            dispatch(node, running_program.b, "start");
            if (css) {
              clear_animation();
              animation_name = create_rule(
                node,
                t,
                running_program.b,
                running_program.duration,
                0,
                easing,
                config.css
              );
            }
          }
          if (running_program) {
            if (now2 >= running_program.end) {
              tick2(t = running_program.b, 1 - t);
              dispatch(node, running_program.b, "end");
              if (!pending_program) {
                if (running_program.b) {
                  clear_animation();
                } else {
                  if (!--running_program.group.r)
                    run_all(running_program.group.c);
                }
              }
              running_program = null;
            } else if (now2 >= running_program.start) {
              const p = now2 - running_program.start;
              t = running_program.a + running_program.d * easing(p / running_program.duration);
              tick2(t, 1 - t);
            }
          }
          return !!(running_program || pending_program);
        });
      }
    }
    return {
      run(b) {
        if (is_function(config)) {
          wait().then(() => {
            const opts = { direction: b ? "in" : "out" };
            config = config(opts);
            go(b);
          });
        } else {
          go(b);
        }
      },
      end() {
        clear_animation();
        running_program = pending_program = null;
      }
    };
  }
  function ensure_array_like(array_like_or_iterator) {
    return (array_like_or_iterator == null ? void 0 : array_like_or_iterator.length) !== void 0 ? array_like_or_iterator : Array.from(array_like_or_iterator);
  }
  function destroy_block(block, lookup) {
    block.d(1);
    lookup.delete(block.key);
  }
  function outro_and_destroy_block(block, lookup) {
    transition_out(block, 1, 1, () => {
      lookup.delete(block.key);
    });
  }
  function update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block2, next, get_context) {
    let o = old_blocks.length;
    let n = list.length;
    let i = o;
    const old_indexes = {};
    while (i--)
      old_indexes[old_blocks[i].key] = i;
    const new_blocks = [];
    const new_lookup = /* @__PURE__ */ new Map();
    const deltas = /* @__PURE__ */ new Map();
    const updates = [];
    i = n;
    while (i--) {
      const child_ctx = get_context(ctx, list, i);
      const key = get_key(child_ctx);
      let block = lookup.get(key);
      if (!block) {
        block = create_each_block2(key, child_ctx);
        block.c();
      } else {
        updates.push(() => block.p(child_ctx, dirty));
      }
      new_lookup.set(key, new_blocks[i] = block);
      if (key in old_indexes)
        deltas.set(key, Math.abs(i - old_indexes[key]));
    }
    const will_move = /* @__PURE__ */ new Set();
    const did_move = /* @__PURE__ */ new Set();
    function insert2(block) {
      transition_in(block, 1);
      block.m(node, next);
      lookup.set(block.key, block);
      next = block.first;
      n--;
    }
    while (o && n) {
      const new_block = new_blocks[n - 1];
      const old_block = old_blocks[o - 1];
      const new_key = new_block.key;
      const old_key = old_block.key;
      if (new_block === old_block) {
        next = new_block.first;
        o--;
        n--;
      } else if (!new_lookup.has(old_key)) {
        destroy(old_block, lookup);
        o--;
      } else if (!lookup.has(new_key) || will_move.has(new_key)) {
        insert2(new_block);
      } else if (did_move.has(old_key)) {
        o--;
      } else if (deltas.get(new_key) > deltas.get(old_key)) {
        did_move.add(new_key);
        insert2(new_block);
      } else {
        will_move.add(old_key);
        o--;
      }
    }
    while (o--) {
      const old_block = old_blocks[o];
      if (!new_lookup.has(old_block.key))
        destroy(old_block, lookup);
    }
    while (n)
      insert2(new_blocks[n - 1]);
    run_all(updates);
    return new_blocks;
  }
  function get_spread_update(levels, updates) {
    const update2 = {};
    const to_null_out = {};
    const accounted_for = { $$scope: 1 };
    let i = levels.length;
    while (i--) {
      const o = levels[i];
      const n = updates[i];
      if (n) {
        for (const key in o) {
          if (!(key in n))
            to_null_out[key] = 1;
        }
        for (const key in n) {
          if (!accounted_for[key]) {
            update2[key] = n[key];
            accounted_for[key] = 1;
          }
        }
        levels[i] = n;
      } else {
        for (const key in o) {
          accounted_for[key] = 1;
        }
      }
    }
    for (const key in to_null_out) {
      if (!(key in update2))
        update2[key] = void 0;
    }
    return update2;
  }
  function get_spread_object(spread_props) {
    return typeof spread_props === "object" && spread_props !== null ? spread_props : {};
  }
  function bind(component, name, callback) {
    const index = component.$$.props[name];
    if (index !== void 0) {
      component.$$.bound[index] = callback;
      callback(component.$$.ctx[index]);
    }
  }
  function create_component(block) {
    block && block.c();
  }
  function mount_component(component, target, anchor) {
    const { fragment, after_update } = component.$$;
    fragment && fragment.m(target, anchor);
    add_render_callback(() => {
      const new_on_destroy = component.$$.on_mount.map(run).filter(is_function);
      if (component.$$.on_destroy) {
        component.$$.on_destroy.push(...new_on_destroy);
      } else {
        run_all(new_on_destroy);
      }
      component.$$.on_mount = [];
    });
    after_update.forEach(add_render_callback);
  }
  function destroy_component(component, detaching) {
    const $$ = component.$$;
    if ($$.fragment !== null) {
      flush_render_callbacks($$.after_update);
      run_all($$.on_destroy);
      $$.fragment && $$.fragment.d(detaching);
      $$.on_destroy = $$.fragment = null;
      $$.ctx = [];
    }
  }
  function make_dirty(component, i) {
    if (component.$$.dirty[0] === -1) {
      dirty_components.push(component);
      schedule_update();
      component.$$.dirty.fill(0);
    }
    component.$$.dirty[i / 31 | 0] |= 1 << i % 31;
  }
  function init(component, options, instance2, create_fragment2, not_equal, props, append_styles2 = null, dirty = [-1]) {
    const parent_component = current_component;
    set_current_component(component);
    const $$ = component.$$ = {
      fragment: null,
      ctx: [],
      // state
      props,
      update: noop,
      not_equal,
      bound: blank_object(),
      // lifecycle
      on_mount: [],
      on_destroy: [],
      on_disconnect: [],
      before_update: [],
      after_update: [],
      context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),
      // everything else
      callbacks: blank_object(),
      dirty,
      skip_bound: false,
      root: options.target || parent_component.$$.root
    };
    append_styles2 && append_styles2($$.root);
    let ready = false;
    $$.ctx = instance2 ? instance2(component, options.props || {}, (i, ret, ...rest) => {
      const value = rest.length ? rest[0] : ret;
      if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {
        if (!$$.skip_bound && $$.bound[i])
          $$.bound[i](value);
        if (ready)
          make_dirty(component, i);
      }
      return ret;
    }) : [];
    $$.update();
    ready = true;
    run_all($$.before_update);
    $$.fragment = create_fragment2 ? create_fragment2($$.ctx) : false;
    if (options.target) {
      if (options.hydrate) {
        const nodes = children(options.target);
        $$.fragment && $$.fragment.l(nodes);
        nodes.forEach(detach);
      } else {
        $$.fragment && $$.fragment.c();
      }
      if (options.intro)
        transition_in(component.$$.fragment);
      mount_component(component, options.target, options.anchor);
      flush();
    }
    set_current_component(parent_component);
  }
  class SvelteComponent {
    constructor() {
      /**
       * ### PRIVATE API
       *
       * Do not use, may change at any time
       *
       * @type {any}
       */
      __publicField(this, "$$");
      /**
       * ### PRIVATE API
       *
       * Do not use, may change at any time
       *
       * @type {any}
       */
      __publicField(this, "$$set");
    }
    /** @returns {void} */
    $destroy() {
      destroy_component(this, 1);
      this.$destroy = noop;
    }
    /**
     * @template {Extract<keyof Events, string>} K
     * @param {K} type
     * @param {((e: Events[K]) => void) | null | undefined} callback
     * @returns {() => void}
     */
    $on(type, callback) {
      if (!is_function(callback)) {
        return noop;
      }
      const callbacks = this.$$.callbacks[type] || (this.$$.callbacks[type] = []);
      callbacks.push(callback);
      return () => {
        const index = callbacks.indexOf(callback);
        if (index !== -1)
          callbacks.splice(index, 1);
      };
    }
    /**
     * @param {Partial<Props>} props
     * @returns {void}
     */
    $set(props) {
      if (this.$$set && !is_empty(props)) {
        this.$$.skip_bound = true;
        this.$$set(props);
        this.$$.skip_bound = false;
      }
    }
  }
  const PUBLIC_VERSION = "4";
  if (typeof window !== "undefined")
    (window.__svelte || (window.__svelte = { v: /* @__PURE__ */ new Set() })).v.add(PUBLIC_VERSION);
  function create_fragment$10(ctx) {
    let svg;
    let g;
    let path0;
    let path1;
    let path2;
    let path3;
    let defs;
    let clipPath;
    let rect;
    return {
      c() {
        svg = svg_element("svg");
        g = svg_element("g");
        path0 = svg_element("path");
        path1 = svg_element("path");
        path2 = svg_element("path");
        path3 = svg_element("path");
        defs = svg_element("defs");
        clipPath = svg_element("clipPath");
        rect = svg_element("rect");
        attr(path0, "d", "M6.5 10L10.5 6");
        attr(
          path0,
          "stroke",
          /*strokeColor*/
          ctx[0]
        );
        attr(path0, "stroke-width", "1.2");
        attr(path0, "stroke-linecap", "round");
        attr(path0, "stroke-linejoin", "round");
        attr(path1, "d", "M6.83333 6.66667C7.01743 6.66667 7.16667 6.51743 7.16667 6.33333C7.16667 6.14924 7.01743 6 6.83333 6C6.64924 6 6.5 6.14924 6.5 6.33333C6.5 6.51743 6.64924 6.66667 6.83333 6.66667Z");
        attr(
          path1,
          "fill",
          /*fillColor*/
          ctx[1]
        );
        attr(
          path1,
          "stroke",
          /*strokeColor*/
          ctx[0]
        );
        attr(path1, "stroke-width", "1.2");
        attr(path1, "stroke-linecap", "round");
        attr(path1, "stroke-linejoin", "round");
        attr(path2, "d", "M10.1668 10.0002C10.3509 10.0002 10.5002 9.85092 10.5002 9.66683C10.5002 9.48273 10.3509 9.3335 10.1668 9.3335C9.98273 9.3335 9.8335 9.48273 9.8335 9.66683C9.8335 9.85092 9.98273 10.0002 10.1668 10.0002Z");
        attr(
          path2,
          "fill",
          /*fillColor*/
          ctx[1]
        );
        attr(
          path2,
          "stroke",
          /*strokeColor*/
          ctx[0]
        );
        attr(path2, "stroke-width", "1.2");
        attr(path2, "stroke-linecap", "round");
        attr(path2, "stroke-linejoin", "round");
        attr(path3, "d", "M3.83315 4.79982C3.83315 4.41083 3.98768 4.03778 4.26273 3.76273C4.53778 3.48768 4.91083 3.33315 5.29982 3.33315H5.96649C6.35375 3.33293 6.72521 3.17955 6.99982 2.90649L7.46649 2.43982C7.60278 2.30275 7.76483 2.19398 7.94331 2.11976C8.12179 2.04553 8.31319 2.00732 8.50649 2.00732C8.69978 2.00732 8.89118 2.04553 9.06966 2.11976C9.24814 2.19398 9.41019 2.30275 9.54649 2.43982L10.0132 2.90649C10.2878 3.17955 10.6592 3.33293 11.0465 3.33315H11.7132C12.1021 3.33315 12.4752 3.48768 12.7502 3.76273C13.0253 4.03778 13.1798 4.41083 13.1798 4.79982V5.46649C13.18 5.85375 13.3334 6.22521 13.6065 6.49982L14.0732 6.96649C14.2102 7.10278 14.319 7.26483 14.3932 7.44331C14.4674 7.62179 14.5056 7.81319 14.5056 8.00649C14.5056 8.19978 14.4674 8.39118 14.3932 8.56966C14.319 8.74814 14.2102 8.91019 14.0732 9.04649L13.6065 9.51315C13.3334 9.78776 13.18 10.1592 13.1798 10.5465V11.2132C13.1798 11.6021 13.0253 11.9752 12.7502 12.2502C12.4752 12.5253 12.1021 12.6798 11.7132 12.6798H11.0465C10.6592 12.68 10.2878 12.8334 10.0132 13.1065L9.54649 13.5732C9.41019 13.7102 9.24814 13.819 9.06966 13.8932C8.89118 13.9674 8.69978 14.0056 8.50649 14.0056C8.31319 14.0056 8.12179 13.9674 7.94331 13.8932C7.76483 13.819 7.60278 13.7102 7.46649 13.5732L6.99982 13.1065C6.72521 12.8334 6.35375 12.68 5.96649 12.6798H5.29982C4.91083 12.6798 4.53778 12.5253 4.26273 12.2502C3.98768 11.9752 3.83315 11.6021 3.83315 11.2132V10.5465C3.83293 10.1592 3.67955 9.78776 3.40649 9.51315L2.93982 9.04649C2.80275 8.91019 2.69398 8.74814 2.61976 8.56966C2.54553 8.39118 2.50732 8.19978 2.50732 8.00649C2.50732 7.81319 2.54553 7.62179 2.61976 7.44331C2.69398 7.26483 2.80275 7.10278 2.93982 6.96649L3.40649 6.49982C3.67955 6.22521 3.83293 5.85375 3.83315 5.46649V4.79982Z");
        attr(
          path3,
          "stroke",
          /*strokeColor*/
          ctx[0]
        );
        attr(path3, "stroke-width", "1.2");
        attr(path3, "stroke-linecap", "round");
        attr(path3, "stroke-linejoin", "round");
        attr(g, "clip-path", "url(#clip0_887_20838)");
        attr(rect, "width", "16");
        attr(rect, "height", "16");
        attr(
          rect,
          "fill",
          /*fillColor*/
          ctx[1]
        );
        attr(rect, "transform", "translate(0.5)");
        attr(clipPath, "id", "clip0_887_20838");
        attr(svg, "width", "40");
        attr(svg, "height", "16");
        attr(svg, "viewBox", "0 0 17 16");
        attr(svg, "fill", "none");
        attr(svg, "xmlns", "http://www.w3.org/2000/svg");
      },
      m(target, anchor) {
        insert(target, svg, anchor);
        append(svg, g);
        append(g, path0);
        append(g, path1);
        append(g, path2);
        append(g, path3);
        append(svg, defs);
        append(defs, clipPath);
        append(clipPath, rect);
      },
      p(ctx2, [dirty]) {
        if (dirty & /*strokeColor*/
        1) {
          attr(
            path0,
            "stroke",
            /*strokeColor*/
            ctx2[0]
          );
        }
        if (dirty & /*fillColor*/
        2) {
          attr(
            path1,
            "fill",
            /*fillColor*/
            ctx2[1]
          );
        }
        if (dirty & /*strokeColor*/
        1) {
          attr(
            path1,
            "stroke",
            /*strokeColor*/
            ctx2[0]
          );
        }
        if (dirty & /*fillColor*/
        2) {
          attr(
            path2,
            "fill",
            /*fillColor*/
            ctx2[1]
          );
        }
        if (dirty & /*strokeColor*/
        1) {
          attr(
            path2,
            "stroke",
            /*strokeColor*/
            ctx2[0]
          );
        }
        if (dirty & /*strokeColor*/
        1) {
          attr(
            path3,
            "stroke",
            /*strokeColor*/
            ctx2[0]
          );
        }
        if (dirty & /*fillColor*/
        2) {
          attr(
            rect,
            "fill",
            /*fillColor*/
            ctx2[1]
          );
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(svg);
        }
      }
    };
  }
  function instance$Z($$self, $$props, $$invalidate) {
    let { strokeColor = "black" } = $$props;
    let { fillColor = "none" } = $$props;
    $$self.$$set = ($$props2) => {
      if ("strokeColor" in $$props2)
        $$invalidate(0, strokeColor = $$props2.strokeColor);
      if ("fillColor" in $$props2)
        $$invalidate(1, fillColor = $$props2.fillColor);
    };
    return [strokeColor, fillColor];
  }
  class Discount extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$Z, create_fragment$10, safe_not_equal, { strokeColor: 0, fillColor: 1 });
    }
  }
  function create_fragment$$(ctx) {
    let svg;
    let g;
    let path0;
    let path1;
    let path2;
    let path3;
    let defs;
    let clipPath;
    let rect;
    return {
      c() {
        svg = svg_element("svg");
        g = svg_element("g");
        path0 = svg_element("path");
        path1 = svg_element("path");
        path2 = svg_element("path");
        path3 = svg_element("path");
        defs = svg_element("defs");
        clipPath = svg_element("clipPath");
        rect = svg_element("rect");
        attr(path0, "d", "M2.5 6.00016C2.5 5.82335 2.57024 5.65378 2.69526 5.52876C2.82029 5.40373 2.98986 5.3335 3.16667 5.3335H13.8333C14.0101 5.3335 14.1797 5.40373 14.3047 5.52876C14.4298 5.65378 14.5 5.82335 14.5 6.00016V7.3335C14.5 7.51031 14.4298 7.67988 14.3047 7.8049C14.1797 7.92992 14.0101 8.00016 13.8333 8.00016H3.16667C2.98986 8.00016 2.82029 7.92992 2.69526 7.8049C2.57024 7.67988 2.5 7.51031 2.5 7.3335V6.00016Z");
        attr(
          path0,
          "stroke",
          /*strokeColor*/
          ctx[0]
        );
        attr(path0, "stroke-width", "1.2");
        attr(path0, "stroke-linecap", "round");
        attr(path0, "stroke-linejoin", "round");
        attr(path1, "d", "M8.5 5.3335V14.0002");
        attr(
          path1,
          "stroke",
          /*strokeColor*/
          ctx[0]
        );
        attr(path1, "stroke-width", "1.2");
        attr(path1, "stroke-linecap", "round");
        attr(path1, "stroke-linejoin", "round");
        attr(path2, "d", "M13.1668 8V12.6667C13.1668 13.0203 13.0264 13.3594 12.7763 13.6095C12.5263 13.8595 12.1871 14 11.8335 14H5.16683C4.81321 14 4.47407 13.8595 4.22402 13.6095C3.97397 13.3594 3.8335 13.0203 3.8335 12.6667V8");
        attr(
          path2,
          "stroke",
          /*strokeColor*/
          ctx[0]
        );
        attr(path2, "stroke-width", "1.2");
        attr(path2, "stroke-linecap", "round");
        attr(path2, "stroke-linejoin", "round");
        attr(path3, "d", "M5.50016 5.33314C5.05814 5.33314 4.63421 5.15754 4.32165 4.84498C4.00909 4.53242 3.8335 4.1085 3.8335 3.66647C3.8335 3.22444 4.00909 2.80052 4.32165 2.48796C4.63421 2.1754 5.05814 1.9998 5.50016 1.9998C6.14329 1.9886 6.77351 2.30064 7.30865 2.89524C7.84379 3.48984 8.25901 4.33941 8.50016 5.33314C8.74131 4.33941 9.15653 3.48984 9.69167 2.89524C10.2268 2.30064 10.857 1.9886 11.5002 1.9998C11.9422 1.9998 12.3661 2.1754 12.6787 2.48796C12.9912 2.80052 13.1668 3.22444 13.1668 3.66647C13.1668 4.1085 12.9912 4.53242 12.6787 4.84498C12.3661 5.15754 11.9422 5.33314 11.5002 5.33314");
        attr(
          path3,
          "stroke",
          /*strokeColor*/
          ctx[0]
        );
        attr(path3, "stroke-width", "1.2");
        attr(path3, "stroke-linecap", "round");
        attr(path3, "stroke-linejoin", "round");
        attr(g, "clip-path", "url(#clip0_887_20826)");
        attr(rect, "width", "16");
        attr(rect, "height", "16");
        attr(
          rect,
          "fill",
          /*fillColor*/
          ctx[1]
        );
        attr(rect, "transform", "translate(0.5)");
        attr(clipPath, "id", "clip0_887_20826");
        attr(svg, "width", "40");
        attr(svg, "height", "16");
        attr(svg, "viewBox", "0 0 17 16");
        attr(svg, "fill", "none");
        attr(svg, "xmlns", "http://www.w3.org/2000/svg");
      },
      m(target, anchor) {
        insert(target, svg, anchor);
        append(svg, g);
        append(g, path0);
        append(g, path1);
        append(g, path2);
        append(g, path3);
        append(svg, defs);
        append(defs, clipPath);
        append(clipPath, rect);
      },
      p(ctx2, [dirty]) {
        if (dirty & /*strokeColor*/
        1) {
          attr(
            path0,
            "stroke",
            /*strokeColor*/
            ctx2[0]
          );
        }
        if (dirty & /*strokeColor*/
        1) {
          attr(
            path1,
            "stroke",
            /*strokeColor*/
            ctx2[0]
          );
        }
        if (dirty & /*strokeColor*/
        1) {
          attr(
            path2,
            "stroke",
            /*strokeColor*/
            ctx2[0]
          );
        }
        if (dirty & /*strokeColor*/
        1) {
          attr(
            path3,
            "stroke",
            /*strokeColor*/
            ctx2[0]
          );
        }
        if (dirty & /*fillColor*/
        2) {
          attr(
            rect,
            "fill",
            /*fillColor*/
            ctx2[1]
          );
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(svg);
        }
      }
    };
  }
  function instance$Y($$self, $$props, $$invalidate) {
    let { strokeColor = "black" } = $$props;
    let { fillColor = "none" } = $$props;
    $$self.$$set = ($$props2) => {
      if ("strokeColor" in $$props2)
        $$invalidate(0, strokeColor = $$props2.strokeColor);
      if ("fillColor" in $$props2)
        $$invalidate(1, fillColor = $$props2.fillColor);
    };
    return [strokeColor, fillColor];
  }
  class Gift extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$Y, create_fragment$$, safe_not_equal, { strokeColor: 0, fillColor: 1 });
    }
  }
  function create_fragment$_(ctx) {
    let svg;
    let g;
    let path0;
    let path1;
    let path2;
    let path3;
    let defs;
    let clipPath;
    let rect;
    return {
      c() {
        svg = svg_element("svg");
        g = svg_element("g");
        path0 = svg_element("path");
        path1 = svg_element("path");
        path2 = svg_element("path");
        path3 = svg_element("path");
        defs = svg_element("defs");
        clipPath = svg_element("clipPath");
        rect = svg_element("rect");
        attr(path0, "d", "M3.8335 11.3333C3.8335 11.687 3.97397 12.0261 4.22402 12.2761C4.47407 12.5262 4.81321 12.6667 5.16683 12.6667C5.52045 12.6667 5.85959 12.5262 6.10964 12.2761C6.35969 12.0261 6.50016 11.687 6.50016 11.3333C6.50016 10.9797 6.35969 10.6406 6.10964 10.3905C5.85959 10.1405 5.52045 10 5.16683 10C4.81321 10 4.47407 10.1405 4.22402 10.3905C3.97397 10.6406 3.8335 10.9797 3.8335 11.3333Z");
        attr(
          path0,
          "stroke",
          /*strokeColor*/
          ctx[0]
        );
        attr(path0, "stroke-width", "1.2");
        attr(path0, "stroke-linecap", "round");
        attr(path0, "stroke-linejoin", "round");
        attr(path1, "d", "M10.5 11.3333C10.5 11.687 10.6405 12.0261 10.8905 12.2761C11.1406 12.5262 11.4797 12.6667 11.8333 12.6667C12.187 12.6667 12.5261 12.5262 12.7761 12.2761C13.0262 12.0261 13.1667 11.687 13.1667 11.3333C13.1667 10.9797 13.0262 10.6406 12.7761 10.3905C12.5261 10.1405 12.187 10 11.8333 10C11.4797 10 11.1406 10.1405 10.8905 10.3905C10.6405 10.6406 10.5 10.9797 10.5 11.3333Z");
        attr(
          path1,
          "stroke",
          /*strokeColor*/
          ctx[0]
        );
        attr(path1, "stroke-width", "1.2");
        attr(path1, "stroke-linecap", "round");
        attr(path1, "stroke-linejoin", "round");
        attr(path2, "d", "M3.8335 11.3335H2.50016V8.66683M1.8335 3.3335H9.16683V11.3335M6.50016 11.3335H10.5002M13.1668 11.3335H14.5002V7.3335M14.5002 7.3335H9.16683M14.5002 7.3335L12.5002 4.00016H9.16683");
        attr(
          path2,
          "stroke",
          /*strokeColor*/
          ctx[0]
        );
        attr(path2, "stroke-width", "1.2");
        attr(path2, "stroke-linecap", "round");
        attr(path2, "stroke-linejoin", "round");
        attr(path3, "d", "M2.5 6H5.16667");
        attr(
          path3,
          "stroke",
          /*strokeColor*/
          ctx[0]
        );
        attr(path3, "stroke-width", "1.2");
        attr(path3, "stroke-linecap", "round");
        attr(path3, "stroke-linejoin", "round");
        attr(g, "clip-path", "url(#clip0_887_20814)");
        attr(rect, "width", "16");
        attr(rect, "height", "16");
        attr(rect, "fill", "white");
        attr(rect, "transform", "translate(0.5)");
        attr(clipPath, "id", "clip0_887_20814");
        attr(svg, "width", "40");
        attr(svg, "height", "16");
        attr(svg, "viewBox", "0 0 17 16");
        attr(
          svg,
          "fill",
          /*fillColor*/
          ctx[1]
        );
        attr(svg, "xmlns", "http://www.w3.org/2000/svg");
      },
      m(target, anchor) {
        insert(target, svg, anchor);
        append(svg, g);
        append(g, path0);
        append(g, path1);
        append(g, path2);
        append(g, path3);
        append(svg, defs);
        append(defs, clipPath);
        append(clipPath, rect);
      },
      p(ctx2, [dirty]) {
        if (dirty & /*strokeColor*/
        1) {
          attr(
            path0,
            "stroke",
            /*strokeColor*/
            ctx2[0]
          );
        }
        if (dirty & /*strokeColor*/
        1) {
          attr(
            path1,
            "stroke",
            /*strokeColor*/
            ctx2[0]
          );
        }
        if (dirty & /*strokeColor*/
        1) {
          attr(
            path2,
            "stroke",
            /*strokeColor*/
            ctx2[0]
          );
        }
        if (dirty & /*strokeColor*/
        1) {
          attr(
            path3,
            "stroke",
            /*strokeColor*/
            ctx2[0]
          );
        }
        if (dirty & /*fillColor*/
        2) {
          attr(
            svg,
            "fill",
            /*fillColor*/
            ctx2[1]
          );
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(svg);
        }
      }
    };
  }
  function instance$X($$self, $$props, $$invalidate) {
    let { strokeColor = "black" } = $$props;
    let { fillColor = "none" } = $$props;
    $$self.$$set = ($$props2) => {
      if ("strokeColor" in $$props2)
        $$invalidate(0, strokeColor = $$props2.strokeColor);
      if ("fillColor" in $$props2)
        $$invalidate(1, fillColor = $$props2.fillColor);
    };
    return [strokeColor, fillColor];
  }
  class Shipping extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$X, create_fragment$_, safe_not_equal, { strokeColor: 0, fillColor: 1 });
    }
  }
  function create_fragment$Z(ctx) {
    let svg;
    let g;
    let path0;
    let path1;
    let defs;
    let clipPath;
    let rect;
    return {
      c() {
        svg = svg_element("svg");
        g = svg_element("g");
        path0 = svg_element("path");
        path1 = svg_element("path");
        defs = svg_element("defs");
        clipPath = svg_element("clipPath");
        rect = svg_element("rect");
        attr(path0, "d", "M4.8335 5.00016C4.8335 5.17697 4.90373 5.34654 5.02876 5.47157C5.15378 5.59659 5.32335 5.66683 5.50016 5.66683C5.67697 5.66683 5.84654 5.59659 5.97157 5.47157C6.09659 5.34654 6.16683 5.17697 6.16683 5.00016C6.16683 4.82335 6.09659 4.65378 5.97157 4.52876C5.84654 4.40373 5.67697 4.3335 5.50016 4.3335C5.32335 4.3335 5.15378 4.40373 5.02876 4.52876C4.90373 4.65378 4.8335 4.82335 4.8335 5.00016Z");
        attr(
          path0,
          "stroke",
          /*strokeColor*/
          ctx[0]
        );
        attr(path0, "stroke-width", "1.2");
        attr(path0, "stroke-linecap", "round");
        attr(path0, "stroke-linejoin", "round");
        attr(
          path0,
          "fill",
          /*fillColor*/
          ctx[1]
        );
        attr(path1, "d", "M2.5 4V7.448C2.50008 7.80159 2.6406 8.14068 2.89067 8.39067L8.03067 13.5307C8.33197 13.8319 8.74059 14.0012 9.16667 14.0012C9.59274 14.0012 10.0014 13.8319 10.3027 13.5307L14.0307 9.80267C14.3319 9.50137 14.5012 9.09274 14.5012 8.66667C14.5012 8.24059 14.3319 7.83197 14.0307 7.53067L8.89067 2.39067C8.64068 2.1406 8.30159 2.00008 7.948 2H4.5C3.96957 2 3.46086 2.21071 3.08579 2.58579C2.71071 2.96086 2.5 3.46957 2.5 4Z");
        attr(
          path1,
          "stroke",
          /*strokeColor*/
          ctx[0]
        );
        attr(path1, "stroke-width", "1.2");
        attr(path1, "stroke-linecap", "round");
        attr(path1, "stroke-linejoin", "round");
        attr(
          path1,
          "fill",
          /*fillColor*/
          ctx[1]
        );
        attr(g, "clip-path", "url(#clip0_887_20850)");
        attr(rect, "width", "16");
        attr(rect, "height", "16");
        attr(
          rect,
          "fill",
          /*fillColor*/
          ctx[1]
        );
        attr(rect, "transform", "translate(0.5)");
        attr(clipPath, "id", "clip0_887_20850");
        attr(svg, "width", "40");
        attr(svg, "height", "16");
        attr(svg, "viewBox", "0 0 17 16");
        attr(svg, "fill", "none");
        attr(svg, "xmlns", "http://www.w3.org/2000/svg");
      },
      m(target, anchor) {
        insert(target, svg, anchor);
        append(svg, g);
        append(g, path0);
        append(g, path1);
        append(svg, defs);
        append(defs, clipPath);
        append(clipPath, rect);
      },
      p(ctx2, [dirty]) {
        if (dirty & /*strokeColor*/
        1) {
          attr(
            path0,
            "stroke",
            /*strokeColor*/
            ctx2[0]
          );
        }
        if (dirty & /*fillColor*/
        2) {
          attr(
            path0,
            "fill",
            /*fillColor*/
            ctx2[1]
          );
        }
        if (dirty & /*strokeColor*/
        1) {
          attr(
            path1,
            "stroke",
            /*strokeColor*/
            ctx2[0]
          );
        }
        if (dirty & /*fillColor*/
        2) {
          attr(
            path1,
            "fill",
            /*fillColor*/
            ctx2[1]
          );
        }
        if (dirty & /*fillColor*/
        2) {
          attr(
            rect,
            "fill",
            /*fillColor*/
            ctx2[1]
          );
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(svg);
        }
      }
    };
  }
  function instance$W($$self, $$props, $$invalidate) {
    let { strokeColor = "black" } = $$props;
    let { fillColor = "none" } = $$props;
    $$self.$$set = ($$props2) => {
      if ("strokeColor" in $$props2)
        $$invalidate(0, strokeColor = $$props2.strokeColor);
      if ("fillColor" in $$props2)
        $$invalidate(1, fillColor = $$props2.fillColor);
    };
    return [strokeColor, fillColor];
  }
  class Special_offer extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$W, create_fragment$Z, safe_not_equal, { strokeColor: 0, fillColor: 1 });
    }
  }
  const defaultValueConfigurableText = {
    discounts: {
      title: "Coupons"
    },
    gift_cards: {
      title: "Gift Cards"
    },
    address: {
      title: "Deliver To",
      cta: "Proceed To Payment",
      shipping_title: "Delivery Options"
    },
    login: {
      cta: "Proceed",
      title: "Phone Number",
      privacy_banner: "We need your phone number to solely validate your account and fetch your <b>previously used addresses.</b>",
      checkbox_text: "Keep me posted about new deals",
      privacy_text: `By proceeding, I accept GoKwik's <a href="https://www.gokwik.co/data-policy" target="_blank"><b>Privacy Policy</b></a> and <a href="https://www.gokwik.co/terms" target="_blank"><b>TnC</b></a>`,
      guest_checkout_title: "Continue as Guest",
      otp_title: "Verify Mobile Number"
    },
    order_summary: {
      title: "Order Summary"
    },
    other_sections: {
      brand_banner: []
    }
  };
  const OtpInputTexts = {
    didnotReceiveOtp: "Didn't receive an OTP?",
    resend: "Resend",
    text1: "Please wait",
    text2: "seconds to",
    enterOtpInfo: "Enter the otp to view your address",
    inValidOtp: "Please enter valid OTP"
  };
  const addressTexts = {
    addAddress: "Add New Address",
    deliveryETA: "Estimated total order delivery by",
    address: "ADDRESS",
    freeShipping: "Yay! Free shipping applied on your order",
    changeAddress: "Change Address",
    personalDetails: "Personal Details",
    deleteAddress: "Delete Address"
  };
  const PhoneInputTexts = {
    error: "Error occured while sending OTP",
    inValidPhoneNumber: "Please enter a valid phone number",
    placeHolder: "Add Phone Number"
  };
  const existingPhoneNumberKey = "kpExistingPhoneNumber";
  const btnTexts = {
    proceedToPay: "Proceed to Payment",
    saveAddress: "Save Address",
    saveChanges: "Save Changes",
    proceed: "Proceed",
    done: "Done",
    logout: "Logout",
    yesLogout: "Yes, Logout",
    cancel: "No, Cancel",
    changePhoneNumber: "Change phone number",
    accountDetails: "Account Details",
    gokwikTC: "GokwikT&C",
    termsOfUse: "Terms of Use",
    PrivacyPolicy: "Privacy Policy"
  };
  const defaultErrorMessage = "Oops! Something went wrong, please try again!";
  const cartIconQuerySelectors = [
    "[href='/cart']",
    ".header-cart-icon",
    ".site-header__cart",
    "a.cart-mobile[href^='javascript']",
    ".cart-count-bubble",
    ".header__icon--cart",
    "[aria-controls='site-cart-sidebar']",
    ".hdt-site-nav_cart",
    "[aria-controls='CartDrawer']"
  ];
  const otherSideCarts = [
    "cart-drawer",
    "#monster-upsell-cart",
    ".halo-cart-sidebar",
    "#halo-cart-sidebar",
    "#CartDrawer",
    "#site-cart-sidebar",
    ".shopify-section.shopify-section-group-group-overlay",
    ".js-drawer-open",
    ".mm-ajaxcart",
    ".mm-ajaxcart-overlay.has--active",
    ".mm-ajaxcart-overlay",
    ".background-overlay"
  ];
  const rupeeSymbol = "";
  const eventNames = {
    sidecart_open: "sc_loaded",
    sidecart_close: "close_sc",
    view_offers_shown: "view_offers_shown_sc",
    view_offers_clicked: "view_offers_clicked_sc",
    coupon_applied: "coupon_code_applied_sc",
    view_offers_closed: "view_offers_closed_sc",
    remove_offer: "remove_applied_offer_sc",
    change_quantity: "change_quantity_sc",
    quantity_increase_sc: "quantity_increase_sc",
    quantity_reduce_sc: "quantity_reduce_sc",
    product_removed_sc: "product_removed_sc",
    view_cart_clicked: "view_cart_clicked",
    sticky_cart_clicked: "sticky_cart_clicked",
    add_to_cart_clicked: "add_to_cart_clicked",
    auto_add_to_cart: "auto_add_to_cart"
  };
  const cssConstants = {
    primaryColor: "#0365d6",
    fontStyle: "Inter"
  };
  const platforms = {
    ShopifyApps: "shopifyApps",
    Checkout1_0: "checkout_1.0",
    NativeCheckout: "nativeCheckout"
  };
  const environment_constants = {
    local: "local",
    dashboard: "dashboard"
  };
  const misc_text = {
    dashboard_preview_message: "kwik-cart-preview"
  };
  const currencies = {
    USD: "$",
    EUR: "",
    GBP: "",
    JPY: "",
    AUD: "A$",
    CAD: "C$",
    CHF: "CHF",
    CNY: "",
    SEK: "kr",
    NZD: "NZ$",
    MXN: "$",
    SGD: "S$",
    HKD: "HK$",
    NOK: "kr",
    KRW: "",
    TRY: "",
    INR: "",
    RUB: "",
    BRL: "R$",
    ZAR: "R",
    PHP: "",
    PLN: "z",
    IDR: "Rp",
    MYR: "RM",
    THB: "",
    VND: "",
    DKK: "kr",
    EGP: "",
    NGN: "",
    ARS: "$",
    CLP: "$",
    COP: "$",
    PEN: "S/",
    PKR: "",
    UAH: "",
    SAR: "",
    AED: "AED",
    BDT: "",
    KWD: ".",
    LKR: "Rs",
    ZMW: "ZK",
    QAR: "",
    OMR: "",
    KES: "KSh",
    TWD: "NT$",
    MAD: "..",
    ILS: "",
    CZK: "K",
    HUF: "Ft",
    RON: "lei",
    BGN: "",
    HRK: "kn",
    ISK: "kr",
    GHS: "GH",
    JOD: "."
  };
  const recommendationTypes = {
    AI_POWERED: "AI_POWERED",
    STANDARD: "STANDARD",
    RULE_BASED: "RULE_BASED"
  };
  const Icons = {
    SHIPPING: Shipping,
    FREE_GIFT: Gift,
    DISCOUNT: Discount,
    CUSTOM: Special_offer
  };
  const atcButtonSelectors = [
    "form[action='/cart/add'] button[name='add']",
    "form[action$='/cart/add'] button[name='add']",
    "form[action='/cart/add'] button[data-checkout='same']",
    "form[action='/cart/add'] button[type='submit']",
    "form[action='/cart/add'] input[type='submit']",
    "form[action='/cart/add'] button[data-add-to-cart]",
    "form[action='/cart/add'] label[role='submit']",
    "form[data-zp-product-url='/cart'] button[type='submit']",
    "form[action='/cart/add'] a[role='submit']"
  ];
  const TextConstants = {
    cartIconQuerySelectors,
    rupeeSymbol,
    eventNames,
    cssConstants,
    platforms,
    environment_constants,
    misc_text,
    otherSideCarts,
    currencies,
    recommendationTypes,
    Icons,
    atcButtonSelectors
  };
  let configurableTexts = defaultValueConfigurableText;
  const subscriber_queue = [];
  function readable(value, start) {
    return {
      subscribe: writable(value, start).subscribe
    };
  }
  function writable(value, start = noop) {
    let stop;
    const subscribers = /* @__PURE__ */ new Set();
    function set(new_value) {
      if (safe_not_equal(value, new_value)) {
        value = new_value;
        if (stop) {
          const run_queue = !subscriber_queue.length;
          for (const subscriber of subscribers) {
            subscriber[1]();
            subscriber_queue.push(subscriber, value);
          }
          if (run_queue) {
            for (let i = 0; i < subscriber_queue.length; i += 2) {
              subscriber_queue[i][0](subscriber_queue[i + 1]);
            }
            subscriber_queue.length = 0;
          }
        }
      }
    }
    function update2(fn) {
      set(fn(value));
    }
    function subscribe2(run2, invalidate = noop) {
      const subscriber = [run2, invalidate];
      subscribers.add(subscriber);
      if (subscribers.size === 1) {
        stop = start(set, update2) || noop;
      }
      run2(value);
      return () => {
        subscribers.delete(subscriber);
        if (subscribers.size === 0 && stop) {
          stop();
          stop = null;
        }
      };
    }
    return { set, update: update2, subscribe: subscribe2 };
  }
  function derived(stores, fn, initial_value) {
    const single = !Array.isArray(stores);
    const stores_array = single ? [stores] : stores;
    if (!stores_array.every(Boolean)) {
      throw new Error("derived() expects stores as input, got a falsy value");
    }
    const auto = fn.length < 2;
    return readable(initial_value, (set, update2) => {
      let started = false;
      const values = [];
      let pending = 0;
      let cleanup = noop;
      const sync = () => {
        if (pending) {
          return;
        }
        cleanup();
        const result = fn(single ? values[0] : values, set, update2);
        if (auto) {
          set(result);
        } else {
          cleanup = is_function(result) ? result : noop;
        }
      };
      const unsubscribers = stores_array.map(
        (store, i) => subscribe(
          store,
          (value) => {
            values[i] = value;
            pending &= ~(1 << i);
            if (started) {
              sync();
            }
          },
          () => {
            pending |= 1 << i;
          }
        )
      );
      started = true;
      sync();
      return function stop() {
        run_all(unsubscribers);
        cleanup();
        started = false;
      };
    });
  }
  var store_sideCartOpen = writable(false);
  var store_cart = writable({});
  var store_offerPopup = writable(false);
  const store_offers = writable({
    available: [],
    unavailable: [],
    hasPaymentOffer: false,
    hasBrandOffer: false
  });
  var store_appliedManualDiscount = writable(null);
  var store_appliedAutomaticDiscounts = writable([]);
  var store_sidecartLoader = writable(0);
  var store_freeGiftLoading = writable(false);
  var store_requestId = writable("");
  var store_token = writable("");
  var store_userEventDetails = writable({});
  var store_snackbar = writable({});
  const store_showAddressAppliedPopup = writable(false);
  var store_bottomSheet = writable({
    show: false,
    type: "",
    title: "",
    component: null,
    selfDestruct: 0
  });
  var store_configurations = writable({
    appearance: {
      textStyle: "theme",
      atcBehaviour: {
        type: "OPENCART"
      },
      stickyBar: {
        enable: false
      },
      emptyCart: {
        titleText: "Your Cart is Empty",
        ctaText: "Continue Shopping",
        ctaRedirectionLink: "/collections/all"
      },
      checkoutButtons: {
        primary: {
          text: "Checkout",
          bgColor: "#000000",
          textColor: "#ffffff",
          subText: "",
          textAlignment: "left",
          gokwikCheckout: false,
          subTextEnabled: false,
          showPaymentIcons: true
        }
      },
      savingsBanner: {
        enable: true
      },
      variantNameOnProduct: {
        enable: true
      },
      quantityChangeOnFreeItems: {
        enable: false
      },
      announcementBar: {
        advancedConditionsEnabled: false,
        banners: [],
        enable: false
      },
      showAllProducts: {
        enable: false
      },
      tNC: {
        enable: false,
        text: "",
        selected: true
      }
    },
    freeGifts: null,
    upSell: {
      enable: false
    },
    discountDisplayConfig: {
      showInputOnly: false,
      showOfferList: false,
      enabled: false
    },
    orderNotes: {
      enable: false
    },
    tieredRewards: {
      enable: true,
      primaryColor: "#FF5733",
      secondaryColor: "#33C4FF",
      showConfetti: false,
      condition: "CART_SUBTOTAL",
      rewards: []
    }
  });
  var store_shopDomain = writable("");
  var store_merchantId = writable("");
  var store_currency = writable({
    symbol: TextConstants.currencies.INR,
    short_name: "INR"
  });
  var store_totalPayableAmount = writable(0);
  var store_totalSavings = writable(0);
  var store_oneClickCoupon = writable({});
  var store_hideUpsellFlow = writable(false);
  var store_showAllProducts = writable(false);
  var store_productDetails = writable({});
  const store_variantAvailabilityMap = derived(store_productDetails, ($store_productDetails) => {
    var _a;
    const availabilityMap = {};
    for (const key in $store_productDetails) {
      availabilityMap[key] = ((_a = $store_productDetails[key]) == null ? void 0 : _a.available) ?? true;
    }
    return availabilityMap;
  });
  var store_showConfetti = writable(false);
  var store_aiProductRecommendations = writable(
    []
  );
  var store_isOneTickUpsellVisible = writable(false);
  var store_sideCartRef = writable(null);
  var store_previousTieredRewardsCartValue = writable(0);
  var store_pauseInterceptorExecution = writable(false);
  var store_removeFreebies = writable(false);
  var store_apiLoader = writable(false);
  const store_cartFreebieVariantCount = writable({});
  const store_toastMsgConfig = writable({
    showToast: false,
    msg: "",
    type: "",
    backgroundColor: "",
    textColor: ""
  });
  const store_isEmailOptional$1 = writable(false);
  const store_addressLazyLoad = writable(true);
  const store_userType = writable("");
  const store_showTextarea = writable(false);
  const store_loaderArray = writable([]);
  const store_page = writable("login");
  const store_jwtToken = writable("");
  const store_showCheckoutOnCart = writable(false);
  const store_overLayScreen = writable(false);
  const store_isShippingAndPrepaidDiscountLoading = writable(false);
  const store_autoGiftAddFailedGifts = writable([]);
  const store_platform = writable("");
  const store_isInitialConfettiShown = writable(false);
  const store_originalCartJS = writable({});
  const store_isBuyNowFreebieProcessing = writable(false);
  const store_isBuyNowCartDataLoading = writable(false);
  const closeBottomSheet = () => {
    store_showTextarea.set(false);
    store_bottomSheet.set({
      title: "",
      component: null,
      componentData: null,
      show: false,
      type: ""
    });
  };
  const formatCurrencyDisplay = (price) => {
    const numericPrice = typeof price === "string" ? Number(price) : price;
    if (Number.isNaN(numericPrice))
      return String(price ?? "");
    const currency = get_store_value(store_currency);
    const currencyCode = (currency == null ? void 0 : currency.short_name) || "INR";
    const locale = typeof window !== "undefined" ? window.gk_currency_format : void 0;
    let formattedPrice;
    if (locale) {
      try {
        formattedPrice = `${numericPrice.toLocaleString(locale, { style: "currency", currency: currencyCode })}`;
      } catch (err) {
        console.log(err);
        formattedPrice = `${(currency == null ? void 0 : currency.symbol) ?? ""}${numericPrice.toFixed(2)}`;
      }
    } else
      formattedPrice = `${(currency == null ? void 0 : currency.symbol) ?? ""}${numericPrice.toFixed(2)}`;
    return formattedPrice;
  };
  const store_confirmDeletePopup = writable(false);
  const store_isFormValid = writable(false);
  const store_newAddress = writable();
  const store_editedAddress = writable();
  const store_isEmailOptional = writable(false);
  const store_enableSaveAddress = writable(false);
  const store_isInvalidAddress = writable(false);
  const store_modifySelectedAddress = writable();
  const store_geographicData = writable();
  const store_addressList = writable();
  const store_addingNewAddress = writable(false);
  const store_isCompleteForm = writable(false);
  const store_isAddressEditing = writable(false);
  const store_selectedShippingOption = writable({
    presentmentName: "",
    service_code: "",
    total_price: 0,
    currency: "",
    minDeliveryDate: "",
    maxDeliveryDate: ""
  });
  const store_editClicked = writable(false);
  const store_userSelectedAddress = writable();
  const store_queryParamAid = writable("");
  const store_newlyAddedAddresses = writable([]);
  const store_addressStepReached = writable(false);
  const store_callAddressChanged = writable(false);
  const store_isAddressAutoUpdated = writable(false);
  function add_css$S(target) {
    append_styles(target, "svelte-rehfm1", ".loader.svelte-rehfm1{width:16px;height:16px;border:2px solid;border-radius:50%;animation:svelte-rehfm1-spin 0.8s linear infinite}@keyframes svelte-rehfm1-spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}");
  }
  function create_fragment$Y(ctx) {
    let span;
    return {
      c() {
        span = element("span");
        attr(span, "class", "loader svelte-rehfm1");
        set_style(span, "border-top-color", "transparent");
      },
      m(target, anchor) {
        insert(target, span, anchor);
      },
      p: noop,
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  class ButtonLoader extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, null, create_fragment$Y, safe_not_equal, {}, add_css$S);
    }
  }
  function add_css$R(target) {
    append_styles(target, "svelte-48k8kr", ".button.svelte-48k8kr{padding:16px 18px;border-radius:var(--border-regular);cursor:pointer;width:100%;text-align:center;display:inline-flex;align-items:center;justify-content:center;position:relative}.btn-text.svelte-48k8kr{font-family:var(--font-family);font-size:12px;flex-grow:1}.button.svelte-48k8kr:disabled{opacity:0.6;cursor:not-allowed}");
  }
  function create_else_block$k(ctx) {
    let span;
    let t;
    return {
      c() {
        span = element("span");
        t = text(
          /*btnText*/
          ctx[2]
        );
        attr(span, "class", "btn-text svelte-48k8kr");
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t);
      },
      p(ctx2, dirty) {
        if (dirty & /*btnText*/
        4)
          set_data(
            t,
            /*btnText*/
            ctx2[2]
          );
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_if_block$E(ctx) {
    let buttonloader;
    let current;
    buttonloader = new ButtonLoader({});
    return {
      c() {
        create_component(buttonloader.$$.fragment);
      },
      m(target, anchor) {
        mount_component(buttonloader, target, anchor);
        current = true;
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(buttonloader.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(buttonloader.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(buttonloader, detaching);
      }
    };
  }
  function create_fragment$X(ctx) {
    let button;
    let current_block_type_index;
    let if_block;
    let button_disabled_value;
    let current;
    let mounted;
    let dispose;
    const if_block_creators = [create_if_block$E, create_else_block$k];
    const if_blocks = [];
    function select_block_type(ctx2, dirty) {
      if (
        /*$store_loaderArray*/
        ctx2[3].length
      )
        return 0;
      return 1;
    }
    current_block_type_index = select_block_type(ctx);
    if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
    return {
      c() {
        button = element("button");
        if_block.c();
        attr(button, "class", "button font-medium-extra-bold svelte-48k8kr");
        button.disabled = button_disabled_value = /*disabled*/
        ctx[0] || /*$store_loaderArray*/
        ctx[3].length > 0;
      },
      m(target, anchor) {
        insert(target, button, anchor);
        if_blocks[current_block_type_index].m(button, null);
        current = true;
        if (!mounted) {
          dispose = listen(button, "click", function() {
            if (is_function(
              /*onClick*/
              ctx[1]
            ))
              ctx[1].apply(this, arguments);
          });
          mounted = true;
        }
      },
      p(new_ctx, [dirty]) {
        ctx = new_ctx;
        let previous_block_index = current_block_type_index;
        current_block_type_index = select_block_type(ctx);
        if (current_block_type_index === previous_block_index) {
          if_blocks[current_block_type_index].p(ctx, dirty);
        } else {
          group_outros();
          transition_out(if_blocks[previous_block_index], 1, 1, () => {
            if_blocks[previous_block_index] = null;
          });
          check_outros();
          if_block = if_blocks[current_block_type_index];
          if (!if_block) {
            if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
            if_block.c();
          } else {
            if_block.p(ctx, dirty);
          }
          transition_in(if_block, 1);
          if_block.m(button, null);
        }
        if (!current || dirty & /*disabled, $store_loaderArray*/
        9 && button_disabled_value !== (button_disabled_value = /*disabled*/
        ctx[0] || /*$store_loaderArray*/
        ctx[3].length > 0)) {
          button.disabled = button_disabled_value;
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        if_blocks[current_block_type_index].d();
        mounted = false;
        dispose();
      }
    };
  }
  function instance$V($$self, $$props, $$invalidate) {
    let $store_loaderArray;
    component_subscribe($$self, store_loaderArray, ($$value) => $$invalidate(3, $store_loaderArray = $$value));
    let { kind = "primary" } = $$props;
    let { disabled = false } = $$props;
    let { onClick = () => {
    } } = $$props;
    let { btnText = "" } = $$props;
    $$self.$$set = ($$props2) => {
      if ("kind" in $$props2)
        $$invalidate(4, kind = $$props2.kind);
      if ("disabled" in $$props2)
        $$invalidate(0, disabled = $$props2.disabled);
      if ("onClick" in $$props2)
        $$invalidate(1, onClick = $$props2.onClick);
      if ("btnText" in $$props2)
        $$invalidate(2, btnText = $$props2.btnText);
    };
    return [disabled, onClick, btnText, $store_loaderArray, kind];
  }
  class CustomButton extends SvelteComponent {
    constructor(options) {
      super();
      init(
        this,
        options,
        instance$V,
        create_fragment$X,
        safe_not_equal,
        {
          kind: 4,
          disabled: 0,
          onClick: 1,
          btnText: 2
        },
        add_css$R
      );
    }
  }
  function cubicOut(t) {
    const f = t - 1;
    return f * f * f + 1;
  }
  function fade(node, { delay = 0, duration = 400, easing = identity } = {}) {
    const o = +getComputedStyle(node).opacity;
    return {
      delay,
      duration,
      easing,
      css: (t) => `opacity: ${t * o}`
    };
  }
  function fly(node, { delay = 0, duration = 400, easing = cubicOut, x = 0, y = 0, opacity = 0 } = {}) {
    const style = getComputedStyle(node);
    const target_opacity = +style.opacity;
    const transform = style.transform === "none" ? "" : style.transform;
    const od = target_opacity * (1 - opacity);
    const [xValue, xUnit] = split_css_unit(x);
    const [yValue, yUnit] = split_css_unit(y);
    return {
      delay,
      duration,
      easing,
      css: (t, u) => `
			transform: ${transform} translate(${(1 - t) * xValue}${xUnit}, ${(1 - t) * yValue}${yUnit});
			opacity: ${target_opacity - od * u}`
    };
  }
  function add_css$Q(target) {
    append_styles(target, "svelte-5jz58i", ".custom-regular-input.svelte-5jz58i.svelte-5jz58i{box-sizing:border-box;font-size:16px;font-weight:400;line-height:21px;width:100%;height:2.7rem;padding:11px;border:1px solid var(--light-grey);border-radius:var(--border-regular);background:var(--snow-white);font-family:var(--font-regular)}.half-width-input.svelte-5jz58i.svelte-5jz58i{box-sizing:border-box;font-size:16px;font-weight:400;line-height:21px;width:100%;height:2.7rem;padding:11px;border:1px solid var(--light-grey);border-radius:var(--border-regular);background:var(--snow-white);font-family:var(--font-regular)}.textbox-input.svelte-5jz58i.svelte-5jz58i{box-sizing:border-box;font-size:16px;font-weight:400;line-height:21px;width:100%;height:5.4rem;padding:11px;border:1px solid var(--light-grey);border-radius:var(--border-regular);background:var(--snow-white);font-family:var(--font-regular)}.input-field.svelte-5jz58i.svelte-5jz58i{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;width:100%}.input-field.svelte-5jz58i .input-label.svelte-5jz58i{font-size:12px;color:#00192f;font-family:var(--font-family);margin-bottom:10px}.input-field.svelte-5jz58i .error-message.svelte-5jz58i{font-family:var(--font-family);margin-top:0.125rem;color:var(--error-red)}.input-field.svelte-5jz58i .error-border.svelte-5jz58i{border:1px solid var(--error-red)}.address-section-container.svelte-5jz58i.svelte-5jz58i{width:100%}.suggested-addresses-container.svelte-5jz58i.svelte-5jz58i{background-color:var(--snow-white);position:absolute;width:93%;box-sizing:border-box;max-height:200px;height:auto;overflow:auto;z-index:10}.suggested-address.svelte-5jz58i.svelte-5jz58i{all:unset;cursor:pointer;padding:11px;min-width:-webkit-fill-available}.suggested-address.svelte-5jz58i.svelte-5jz58i:hover{background-color:white}.suggestion-item.svelte-5jz58i.svelte-5jz58i{display:flex;align-items:center;justify-content:space-between}.font-small-medium.svelte-5jz58i.svelte-5jz58i{font-size:13px;font-weight:500}.number-input.svelte-5jz58i.svelte-5jz58i{font-size:12px;font-weight:500;color:#00192f;font-family:var(--font-family)}");
  }
  function create_if_block_4$a(ctx) {
    let t;
    return {
      c() {
        t = text("*");
      },
      m(target, anchor) {
        insert(target, t, anchor);
      },
      d(detaching) {
        if (detaching) {
          detach(t);
        }
      }
    };
  }
  function create_else_block$j(ctx) {
    let input;
    let input_class_value;
    let mounted;
    let dispose;
    return {
      c() {
        input = element("input");
        attr(
          input,
          "id",
          /*id*/
          ctx[3]
        );
        attr(
          input,
          "placeholder",
          /*placeholder*/
          ctx[5]
        );
        attr(input, "type", "text");
        attr(
          input,
          "maxlength",
          /*maxlength*/
          ctx[8]
        );
        attr(
          input,
          "inputmode",
          /*inputmode*/
          ctx[9]
        );
        attr(
          input,
          "autocomplete",
          /*autocomplete*/
          ctx[10]
        );
        attr(input, "class", input_class_value = null_to_empty(
          /*className*/
          ctx[6]
        ) + " svelte-5jz58i");
        set_style(
          input,
          "background",
          /*readonly*/
          ctx[11] && "#ededed"
        );
        input.readOnly = /*readonly*/
        ctx[11];
        toggle_class(input, "error-border", (!/*validate*/
        ctx[7](
          /*value*/
          ctx[0]
        ) || /*id*/
        ctx[3] === "pincode" && !/*$store_enableSaveAddress*/
        ctx[16]) && !/*isEmpty*/
        ctx[12]);
      },
      m(target, anchor) {
        insert(target, input, anchor);
        ctx[21](input);
        set_input_value(
          input,
          /*value*/
          ctx[0]
        );
        if (!mounted) {
          dispose = [
            listen(
              input,
              "input",
              /*input_input_handler*/
              ctx[22]
            ),
            listen(
              input,
              "input",
              /*handleChange*/
              ctx[17]
            )
          ];
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        if (dirty & /*id*/
        8) {
          attr(
            input,
            "id",
            /*id*/
            ctx2[3]
          );
        }
        if (dirty & /*placeholder*/
        32) {
          attr(
            input,
            "placeholder",
            /*placeholder*/
            ctx2[5]
          );
        }
        if (dirty & /*maxlength*/
        256) {
          attr(
            input,
            "maxlength",
            /*maxlength*/
            ctx2[8]
          );
        }
        if (dirty & /*inputmode*/
        512) {
          attr(
            input,
            "inputmode",
            /*inputmode*/
            ctx2[9]
          );
        }
        if (dirty & /*autocomplete*/
        1024) {
          attr(
            input,
            "autocomplete",
            /*autocomplete*/
            ctx2[10]
          );
        }
        if (dirty & /*className*/
        64 && input_class_value !== (input_class_value = null_to_empty(
          /*className*/
          ctx2[6]
        ) + " svelte-5jz58i")) {
          attr(input, "class", input_class_value);
        }
        if (dirty & /*readonly*/
        2048) {
          set_style(
            input,
            "background",
            /*readonly*/
            ctx2[11] && "#ededed"
          );
        }
        if (dirty & /*readonly*/
        2048) {
          input.readOnly = /*readonly*/
          ctx2[11];
        }
        if (dirty & /*value*/
        1 && input.value !== /*value*/
        ctx2[0]) {
          set_input_value(
            input,
            /*value*/
            ctx2[0]
          );
        }
        if (dirty & /*className, validate, value, id, $store_enableSaveAddress, isEmpty*/
        69833) {
          toggle_class(input, "error-border", (!/*validate*/
          ctx2[7](
            /*value*/
            ctx2[0]
          ) || /*id*/
          ctx2[3] === "pincode" && !/*$store_enableSaveAddress*/
          ctx2[16]) && !/*isEmpty*/
          ctx2[12]);
        }
      },
      d(detaching) {
        if (detaching) {
          detach(input);
        }
        ctx[21](null);
        mounted = false;
        run_all(dispose);
      }
    };
  }
  function create_if_block_3$f(ctx) {
    let div;
    let textarea;
    let textarea_class_value;
    let mounted;
    let dispose;
    return {
      c() {
        div = element("div");
        textarea = element("textarea");
        attr(
          textarea,
          "id",
          /*id*/
          ctx[3]
        );
        attr(
          textarea,
          "placeholder",
          /*placeholder*/
          ctx[5]
        );
        attr(
          textarea,
          "maxlength",
          /*maxlength*/
          ctx[8]
        );
        attr(
          textarea,
          "inputmode",
          /*inputmode*/
          ctx[9]
        );
        attr(
          textarea,
          "autocomplete",
          /*autocomplete*/
          ctx[10]
        );
        attr(textarea, "class", textarea_class_value = null_to_empty(
          /*className*/
          ctx[6]
        ) + " svelte-5jz58i");
        toggle_class(textarea, "error-border", (!/*validate*/
        ctx[7](
          /*value*/
          ctx[0]
        ) || /*id*/
        ctx[3] === "address1" && /*$store_isInvalidAddress*/
        ctx[15]) && !/*isEmpty*/
        ctx[12]);
        attr(div, "class", "address-section-container svelte-5jz58i");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, textarea);
        ctx[19](textarea);
        set_input_value(
          textarea,
          /*value*/
          ctx[0]
        );
        if (!mounted) {
          dispose = [
            listen(
              textarea,
              "input",
              /*textarea_input_handler*/
              ctx[20]
            ),
            listen(
              textarea,
              "input",
              /*handleChange*/
              ctx[17]
            )
          ];
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        if (dirty & /*id*/
        8) {
          attr(
            textarea,
            "id",
            /*id*/
            ctx2[3]
          );
        }
        if (dirty & /*placeholder*/
        32) {
          attr(
            textarea,
            "placeholder",
            /*placeholder*/
            ctx2[5]
          );
        }
        if (dirty & /*maxlength*/
        256) {
          attr(
            textarea,
            "maxlength",
            /*maxlength*/
            ctx2[8]
          );
        }
        if (dirty & /*inputmode*/
        512) {
          attr(
            textarea,
            "inputmode",
            /*inputmode*/
            ctx2[9]
          );
        }
        if (dirty & /*autocomplete*/
        1024) {
          attr(
            textarea,
            "autocomplete",
            /*autocomplete*/
            ctx2[10]
          );
        }
        if (dirty & /*className*/
        64 && textarea_class_value !== (textarea_class_value = null_to_empty(
          /*className*/
          ctx2[6]
        ) + " svelte-5jz58i")) {
          attr(textarea, "class", textarea_class_value);
        }
        if (dirty & /*value*/
        1) {
          set_input_value(
            textarea,
            /*value*/
            ctx2[0]
          );
        }
        if (dirty & /*className, validate, value, id, $store_isInvalidAddress, isEmpty*/
        37065) {
          toggle_class(textarea, "error-border", (!/*validate*/
          ctx2[7](
            /*value*/
            ctx2[0]
          ) || /*id*/
          ctx2[3] === "address1" && /*$store_isInvalidAddress*/
          ctx2[15]) && !/*isEmpty*/
          ctx2[12]);
        }
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        ctx[19](null);
        mounted = false;
        run_all(dispose);
      }
    };
  }
  function create_if_block_2$n(ctx) {
    let div;
    return {
      c() {
        div = element("div");
        div.textContent = "Invalid Pincode";
        attr(div, "class", "error-message font-small-medium svelte-5jz58i");
      },
      m(target, anchor) {
        insert(target, div, anchor);
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(div);
        }
      }
    };
  }
  function create_if_block_1$w(ctx) {
    let div;
    return {
      c() {
        div = element("div");
        div.textContent = "Enter complete address including house, street, area & landmark";
        attr(div, "class", "error-message font-small-medium svelte-5jz58i");
      },
      m(target, anchor) {
        insert(target, div, anchor);
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(div);
        }
      }
    };
  }
  function create_if_block$D(ctx) {
    let div;
    let t;
    return {
      c() {
        div = element("div");
        t = text(
          /*errorMessage*/
          ctx[1]
        );
        attr(div, "class", "error-message font-small-medium svelte-5jz58i");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, t);
      },
      p(ctx2, dirty) {
        if (dirty & /*errorMessage*/
        2)
          set_data(
            t,
            /*errorMessage*/
            ctx2[1]
          );
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
      }
    };
  }
  function create_fragment$W(ctx) {
    let div;
    let label_1;
    let t0;
    let sup;
    let t1;
    let t2;
    let if_block0 = !/*id*/
    (ctx[3] === "email" && /*$store_isEmailOptional*/
    ctx[14]) && create_if_block_4$a();
    function select_block_type(ctx2, dirty) {
      if (
        /*id*/
        ctx2[3] === "address1"
      )
        return create_if_block_3$f;
      return create_else_block$j;
    }
    let current_block_type = select_block_type(ctx);
    let if_block1 = current_block_type(ctx);
    function select_block_type_1(ctx2, dirty) {
      if (!/*isValid*/
      ctx2[13] && !/*isEmpty*/
      ctx2[12])
        return create_if_block$D;
      if (
        /*id*/
        ctx2[3] === "address1" && /*$store_isInvalidAddress*/
        ctx2[15] && !/*isEmpty*/
        ctx2[12]
      )
        return create_if_block_1$w;
      if (
        /*id*/
        ctx2[3] === "pincode" && !/*$store_enableSaveAddress*/
        ctx2[16] && !/*isEmpty*/
        ctx2[12]
      )
        return create_if_block_2$n;
    }
    let current_block_type_1 = select_block_type_1(ctx);
    let if_block2 = current_block_type_1 && current_block_type_1(ctx);
    return {
      c() {
        div = element("div");
        label_1 = element("label");
        t0 = text(
          /*label*/
          ctx[4]
        );
        sup = element("sup");
        if (if_block0)
          if_block0.c();
        t1 = space();
        if_block1.c();
        t2 = space();
        if (if_block2)
          if_block2.c();
        set_style(sup, "vertical-align", "top");
        set_style(sup, "font-size", "smaller");
        attr(label_1, "class", "input-label font-medium-regular svelte-5jz58i");
        attr(
          label_1,
          "for",
          /*id*/
          ctx[3]
        );
        attr(div, "class", "input-field svelte-5jz58i");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, label_1);
        append(label_1, t0);
        append(label_1, sup);
        if (if_block0)
          if_block0.m(sup, null);
        append(div, t1);
        if_block1.m(div, null);
        append(div, t2);
        if (if_block2)
          if_block2.m(div, null);
      },
      p(ctx2, [dirty]) {
        if (dirty & /*label*/
        16)
          set_data(
            t0,
            /*label*/
            ctx2[4]
          );
        if (!/*id*/
        (ctx2[3] === "email" && /*$store_isEmailOptional*/
        ctx2[14])) {
          if (if_block0)
            ;
          else {
            if_block0 = create_if_block_4$a();
            if_block0.c();
            if_block0.m(sup, null);
          }
        } else if (if_block0) {
          if_block0.d(1);
          if_block0 = null;
        }
        if (dirty & /*id*/
        8) {
          attr(
            label_1,
            "for",
            /*id*/
            ctx2[3]
          );
        }
        if (current_block_type === (current_block_type = select_block_type(ctx2)) && if_block1) {
          if_block1.p(ctx2, dirty);
        } else {
          if_block1.d(1);
          if_block1 = current_block_type(ctx2);
          if (if_block1) {
            if_block1.c();
            if_block1.m(div, t2);
          }
        }
        if (current_block_type_1 === (current_block_type_1 = select_block_type_1(ctx2)) && if_block2) {
          if_block2.p(ctx2, dirty);
        } else {
          if (if_block2)
            if_block2.d(1);
          if_block2 = current_block_type_1 && current_block_type_1(ctx2);
          if (if_block2) {
            if_block2.c();
            if_block2.m(div, null);
          }
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        if (if_block0)
          if_block0.d();
        if_block1.d();
        if (if_block2) {
          if_block2.d();
        }
      }
    };
  }
  function instance$U($$self, $$props, $$invalidate) {
    let $store_isEmailOptional;
    let $store_isInvalidAddress;
    let $store_enableSaveAddress;
    component_subscribe($$self, store_isEmailOptional, ($$value) => $$invalidate(14, $store_isEmailOptional = $$value));
    component_subscribe($$self, store_isInvalidAddress, ($$value) => $$invalidate(15, $store_isInvalidAddress = $$value));
    component_subscribe($$self, store_enableSaveAddress, ($$value) => $$invalidate(16, $store_enableSaveAddress = $$value));
    let { id } = $$props;
    let { label } = $$props;
    let { placeholder } = $$props;
    let { value = "" } = $$props;
    let { className = "" } = $$props;
    let { validate = (value2) => true } = $$props;
    let { errorMessage = "" } = $$props;
    let { pattern } = $$props;
    let { maxlength } = $$props;
    let { inputmode } = $$props;
    let { autocomplete } = $$props;
    let { readonly } = $$props;
    let { inputElement } = $$props;
    let isEmpty = true;
    let isValid = true;
    const dispatch2 = createEventDispatcher();
    function handleChange(event) {
      $$invalidate(12, isEmpty = false);
      let enteredValue = event.target.value;
      if (enteredValue.length === 0) {
        $$invalidate(1, errorMessage = `${label} is required`);
      } else if (id === "address1" && enteredValue.replace(/ /g, "").length < 12) {
        $$invalidate(1, errorMessage = "Address is too short");
      } else if (id === "fullName" && enteredValue.replace(/ /g, "").length < 3) {
        $$invalidate(1, errorMessage = "Name is too short");
      } else {
        $$invalidate(1, errorMessage = `Invalid ${label}`);
      }
      if (pattern) {
        const regex2 = new RegExp(pattern);
        if (!regex2.test(enteredValue)) {
          const replacementPattern = pattern.replace(/[\^\$\[\]]/g, "");
          const replacementRegex = new RegExp(`[^${replacementPattern}]`, "g");
          enteredValue = enteredValue.replace(replacementRegex, "");
          $$invalidate(2, inputElement.value = enteredValue, inputElement);
        }
      }
      $$invalidate(13, isValid = validate(enteredValue));
      dispatch2("change", { enteredValue });
    }
    function textarea_binding($$value) {
      binding_callbacks[$$value ? "unshift" : "push"](() => {
        inputElement = $$value;
        $$invalidate(2, inputElement);
      });
    }
    function textarea_input_handler() {
      value = this.value;
      $$invalidate(0, value);
    }
    function input_binding($$value) {
      binding_callbacks[$$value ? "unshift" : "push"](() => {
        inputElement = $$value;
        $$invalidate(2, inputElement);
      });
    }
    function input_input_handler() {
      value = this.value;
      $$invalidate(0, value);
    }
    $$self.$$set = ($$props2) => {
      if ("id" in $$props2)
        $$invalidate(3, id = $$props2.id);
      if ("label" in $$props2)
        $$invalidate(4, label = $$props2.label);
      if ("placeholder" in $$props2)
        $$invalidate(5, placeholder = $$props2.placeholder);
      if ("value" in $$props2)
        $$invalidate(0, value = $$props2.value);
      if ("className" in $$props2)
        $$invalidate(6, className = $$props2.className);
      if ("validate" in $$props2)
        $$invalidate(7, validate = $$props2.validate);
      if ("errorMessage" in $$props2)
        $$invalidate(1, errorMessage = $$props2.errorMessage);
      if ("pattern" in $$props2)
        $$invalidate(18, pattern = $$props2.pattern);
      if ("maxlength" in $$props2)
        $$invalidate(8, maxlength = $$props2.maxlength);
      if ("inputmode" in $$props2)
        $$invalidate(9, inputmode = $$props2.inputmode);
      if ("autocomplete" in $$props2)
        $$invalidate(10, autocomplete = $$props2.autocomplete);
      if ("readonly" in $$props2)
        $$invalidate(11, readonly = $$props2.readonly);
      if ("inputElement" in $$props2)
        $$invalidate(2, inputElement = $$props2.inputElement);
    };
    return [
      value,
      errorMessage,
      inputElement,
      id,
      label,
      placeholder,
      className,
      validate,
      maxlength,
      inputmode,
      autocomplete,
      readonly,
      isEmpty,
      isValid,
      $store_isEmailOptional,
      $store_isInvalidAddress,
      $store_enableSaveAddress,
      handleChange,
      pattern,
      textarea_binding,
      textarea_input_handler,
      input_binding,
      input_input_handler
    ];
  }
  class InputComponent extends SvelteComponent {
    constructor(options) {
      super();
      init(
        this,
        options,
        instance$U,
        create_fragment$W,
        safe_not_equal,
        {
          id: 3,
          label: 4,
          placeholder: 5,
          value: 0,
          className: 6,
          validate: 7,
          errorMessage: 1,
          pattern: 18,
          maxlength: 8,
          inputmode: 9,
          autocomplete: 10,
          readonly: 11,
          inputElement: 2
        },
        add_css$Q
      );
    }
  }
  function create_fragment$V(ctx) {
    let inputcomponent;
    let updating_value;
    let current;
    function inputcomponent_value_binding(value) {
      ctx[3](value);
    }
    let inputcomponent_props = {
      id: (
        /*field*/
        ctx[0].id
      ),
      label: (
        /*field*/
        ctx[0].label
      ),
      placeholder: (
        /*field*/
        ctx[0].placeholder
      ),
      type: (
        /*field*/
        ctx[0].type
      ),
      className: (
        /*field*/
        ctx[0].className
      ),
      validate: (
        /*field*/
        ctx[0].validate
      ),
      errorMessage: (
        /*field*/
        ctx[0].errorMessage
      ),
      touched: (
        /*field*/
        ctx[0].touched
      ),
      pattern: (
        /*field*/
        ctx[0].pattern
      ),
      maxlength: (
        /*field*/
        ctx[0].maxlength
      ),
      inputmode: (
        /*field*/
        ctx[0].inputmode
      ),
      autocomplete: (
        /*field*/
        ctx[0].autocomplete
      ),
      readonly: (
        /*field*/
        ctx[0].readonly
      ),
      inputElement: (
        /*field*/
        ctx[0].inputElement
      )
    };
    if (
      /*field*/
      ctx[0].value !== void 0
    ) {
      inputcomponent_props.value = /*field*/
      ctx[0].value;
    }
    inputcomponent = new InputComponent({ props: inputcomponent_props });
    binding_callbacks.push(() => bind(inputcomponent, "value", inputcomponent_value_binding));
    inputcomponent.$on(
      "change",
      /*change_handler*/
      ctx[4]
    );
    return {
      c() {
        create_component(inputcomponent.$$.fragment);
      },
      m(target, anchor) {
        mount_component(inputcomponent, target, anchor);
        current = true;
      },
      p(ctx2, [dirty]) {
        const inputcomponent_changes = {};
        if (dirty & /*field*/
        1)
          inputcomponent_changes.id = /*field*/
          ctx2[0].id;
        if (dirty & /*field*/
        1)
          inputcomponent_changes.label = /*field*/
          ctx2[0].label;
        if (dirty & /*field*/
        1)
          inputcomponent_changes.placeholder = /*field*/
          ctx2[0].placeholder;
        if (dirty & /*field*/
        1)
          inputcomponent_changes.type = /*field*/
          ctx2[0].type;
        if (dirty & /*field*/
        1)
          inputcomponent_changes.className = /*field*/
          ctx2[0].className;
        if (dirty & /*field*/
        1)
          inputcomponent_changes.validate = /*field*/
          ctx2[0].validate;
        if (dirty & /*field*/
        1)
          inputcomponent_changes.errorMessage = /*field*/
          ctx2[0].errorMessage;
        if (dirty & /*field*/
        1)
          inputcomponent_changes.touched = /*field*/
          ctx2[0].touched;
        if (dirty & /*field*/
        1)
          inputcomponent_changes.pattern = /*field*/
          ctx2[0].pattern;
        if (dirty & /*field*/
        1)
          inputcomponent_changes.maxlength = /*field*/
          ctx2[0].maxlength;
        if (dirty & /*field*/
        1)
          inputcomponent_changes.inputmode = /*field*/
          ctx2[0].inputmode;
        if (dirty & /*field*/
        1)
          inputcomponent_changes.autocomplete = /*field*/
          ctx2[0].autocomplete;
        if (dirty & /*field*/
        1)
          inputcomponent_changes.readonly = /*field*/
          ctx2[0].readonly;
        if (dirty & /*field*/
        1)
          inputcomponent_changes.inputElement = /*field*/
          ctx2[0].inputElement;
        if (!updating_value && dirty & /*field*/
        1) {
          updating_value = true;
          inputcomponent_changes.value = /*field*/
          ctx2[0].value;
          add_flush_callback(() => updating_value = false);
        }
        inputcomponent.$set(inputcomponent_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(inputcomponent.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(inputcomponent.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(inputcomponent, detaching);
      }
    };
  }
  function instance$T($$self, $$props, $$invalidate) {
    let { field } = $$props;
    let { index } = $$props;
    let { handleFieldChange } = $$props;
    function inputcomponent_value_binding(value) {
      if ($$self.$$.not_equal(field.value, value)) {
        field.value = value;
        $$invalidate(0, field);
      }
    }
    const change_handler = (event) => handleFieldChange(index, event);
    $$self.$$set = ($$props2) => {
      if ("field" in $$props2)
        $$invalidate(0, field = $$props2.field);
      if ("index" in $$props2)
        $$invalidate(1, index = $$props2.index);
      if ("handleFieldChange" in $$props2)
        $$invalidate(2, handleFieldChange = $$props2.handleFieldChange);
    };
    return [field, index, handleFieldChange, inputcomponent_value_binding, change_handler];
  }
  class RenderInputComponent extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$T, create_fragment$V, safe_not_equal, { field: 0, index: 1, handleFieldChange: 2 });
    }
  }
  const store_phoneNumber = writable("");
  const store_cartId = writable(0);
  const store_isInvalidOtp = writable(false);
  const store_isInvalidPhone = writable(true);
  const store_consentBoxChecked = writable(true);
  const store_userEmail = writable("");
  const store_userName = writable("");
  const store_isEditPhone = writable(false);
  const store_addressCount = writable(0);
  const store_currentPhoneNumber = writable("");
  const store_GkIframe = writable(null);
  const store_isPhoneNumberProcessing = writable(false);
  const store_isCheckoutLoading = writable(false);
  const store_isCheckoutUpdating = writable(false);
  function add_css$P(target) {
    append_styles(target, "svelte-5vbe7r", ".address-personal-details-con.svelte-5vbe7r.svelte-5vbe7r{font-size:12px;font-family:var(--font-family);font-weight:600;color:#00325e}.address-container.svelte-5vbe7r.svelte-5vbe7r{padding:12px 8px}.address-fill-form.svelte-5vbe7r.svelte-5vbe7r{box-sizing:border-box;margin:0;padding:var(--padding-base) 0rem;-webkit-overflow-scrolling:touch}.address-fill-form.svelte-5vbe7r .input-row.svelte-5vbe7r{display:flex;flex-wrap:wrap;gap:var(--gap-fourteen)}.address-fill-form.svelte-5vbe7r .input-row .address-details.svelte-5vbe7r{display:flex;gap:var(--gap-loose);width:100%;color:var(--dark-grey);display:flex;align-items:center}.address-fill-form.svelte-5vbe7r .input-row .personal-details.svelte-5vbe7r{display:flex;gap:var(--gap-regular);width:100%;color:var(--dark-grey);display:flex;align-items:center}.address-fill-form.svelte-5vbe7r .input-row .half-width-field.svelte-5vbe7r{flex:1 0 calc(50% - 14px)}.address-fill-form.svelte-5vbe7r .delete-address.svelte-5vbe7r{margin-top:1.2rem;width:auto;margin-left:auto;margin-right:auto;font-family:var(--font-family);color:var(--error-red);border:1px solid black;width:100%;height:1.5rem;display:flex;align-items:center;justify-content:center;padding:13px 0px;border-radius:12px}.address-fill-form.svelte-5vbe7r .visually-hidden.svelte-5vbe7r{background:none;padding:0px;border:none;margin:0;cursor:pointer;display:flex;align-items:center;width:100%;justify-content:center}.address-fill-form.svelte-5vbe7r .action-buttons.svelte-5vbe7r{display:flex;justify-content:space-between;margin-top:0.5rem;gap:1rem}.address-fill-form.svelte-5vbe7r .action-buttons .save-button.svelte-5vbe7r{flex:1;padding:8px 30px;border-radius:12px;font-size:14;font-weight:400;font-family:var(--font-family);text-align:center;cursor:pointer;transition:all 0.2s ease}.address-fill-form.svelte-5vbe7r .action-buttons .save-button.svelte-5vbe7r{background-color:#004b8d !important;color:white;border:none}.address-fill-form.svelte-5vbe7r .action-buttons .save-button.svelte-5vbe7r:disabled{background-color:var(--light-grey);cursor:not-allowed}");
  }
  function get_each_context$g(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[25] = list[i];
    child_ctx[27] = i;
    return child_ctx;
  }
  function create_else_block$i(ctx) {
    let renderinputcomponent;
    let current;
    renderinputcomponent = new RenderInputComponent({
      props: {
        field: (
          /*field*/
          ctx[25]
        ),
        index: (
          /*index*/
          ctx[27]
        ),
        handleFieldChange: (
          /*handleFieldChange*/
          ctx[5]
        )
      }
    });
    return {
      c() {
        create_component(renderinputcomponent.$$.fragment);
      },
      m(target, anchor) {
        mount_component(renderinputcomponent, target, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        const renderinputcomponent_changes = {};
        if (dirty & /*addressFormFields*/
        2)
          renderinputcomponent_changes.field = /*field*/
          ctx2[25];
        renderinputcomponent.$set(renderinputcomponent_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(renderinputcomponent.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(renderinputcomponent.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(renderinputcomponent, detaching);
      }
    };
  }
  function create_if_block_2$m(ctx) {
    let div;
    let span;
    let t1;
    let renderinputcomponent;
    let current;
    renderinputcomponent = new RenderInputComponent({
      props: {
        field: (
          /*field*/
          ctx[25]
        ),
        index: (
          /*index*/
          ctx[27]
        ),
        handleFieldChange: (
          /*handleFieldChange*/
          ctx[5]
        )
      }
    });
    return {
      c() {
        div = element("div");
        span = element("span");
        span.textContent = `${addressTexts.personalDetails}`;
        t1 = space();
        create_component(renderinputcomponent.$$.fragment);
        set_style(span, "white-space", "nowrap");
        attr(span, "class", "address-personal-details-con svelte-5vbe7r");
        attr(div, "class", "personal-details svelte-5vbe7r");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, span);
        insert(target, t1, anchor);
        mount_component(renderinputcomponent, target, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        const renderinputcomponent_changes = {};
        if (dirty & /*addressFormFields*/
        2)
          renderinputcomponent_changes.field = /*field*/
          ctx2[25];
        renderinputcomponent.$set(renderinputcomponent_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(renderinputcomponent.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(renderinputcomponent.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
          detach(t1);
        }
        destroy_component(renderinputcomponent, detaching);
      }
    };
  }
  function create_if_block_1$v(ctx) {
    let div;
    let renderinputcomponent;
    let t;
    let current;
    renderinputcomponent = new RenderInputComponent({
      props: {
        field: (
          /*field*/
          ctx[25]
        ),
        index: (
          /*index*/
          ctx[27]
        ),
        handleFieldChange: (
          /*handleFieldChange*/
          ctx[5]
        )
      }
    });
    return {
      c() {
        div = element("div");
        create_component(renderinputcomponent.$$.fragment);
        t = space();
        attr(div, "class", "half-width-field svelte-5vbe7r");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        mount_component(renderinputcomponent, div, null);
        append(div, t);
        current = true;
      },
      p(ctx2, dirty) {
        const renderinputcomponent_changes = {};
        if (dirty & /*addressFormFields*/
        2)
          renderinputcomponent_changes.field = /*field*/
          ctx2[25];
        renderinputcomponent.$set(renderinputcomponent_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(renderinputcomponent.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(renderinputcomponent.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(renderinputcomponent);
      }
    };
  }
  function create_each_block$g(ctx) {
    let current_block_type_index;
    let if_block;
    let if_block_anchor;
    let current;
    const if_block_creators = [create_if_block_1$v, create_if_block_2$m, create_else_block$i];
    const if_blocks = [];
    function select_block_type(ctx2, dirty) {
      if (
        /*field*/
        ctx2[25].className === "half-width-input"
      )
        return 0;
      if (
        /*field*/
        ctx2[25].id == "email"
      )
        return 1;
      return 2;
    }
    current_block_type_index = select_block_type(ctx);
    if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
    return {
      c() {
        if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if_blocks[current_block_type_index].m(target, anchor);
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        let previous_block_index = current_block_type_index;
        current_block_type_index = select_block_type(ctx2);
        if (current_block_type_index === previous_block_index) {
          if_blocks[current_block_type_index].p(ctx2, dirty);
        } else {
          group_outros();
          transition_out(if_blocks[previous_block_index], 1, 1, () => {
            if_blocks[previous_block_index] = null;
          });
          check_outros();
          if_block = if_blocks[current_block_type_index];
          if (!if_block) {
            if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
            if_block.c();
          } else {
            if_block.p(ctx2, dirty);
          }
          transition_in(if_block, 1);
          if_block.m(if_block_anchor.parentNode, if_block_anchor);
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if_blocks[current_block_type_index].d(detaching);
      }
    };
  }
  function create_if_block$C(ctx) {
    let button;
    let mounted;
    let dispose;
    return {
      c() {
        button = element("button");
        button.innerHTML = `<div class="delete-address svelte-5vbe7r">Delete Address</div>`;
        attr(button, "class", "visually-hidden svelte-5vbe7r");
      },
      m(target, anchor) {
        insert(target, button, anchor);
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*handleAddressDelete*/
            ctx[6]
          );
          mounted = true;
        }
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_fragment$U(ctx) {
    let div5;
    let div4;
    let div3;
    let div1;
    let div0;
    let t1;
    let t2;
    let div2;
    let button;
    let t3_value = (
      /*isAddressEditing*/
      (ctx[0] ? btnTexts.saveChanges : btnTexts.saveAddress) + ""
    );
    let t3;
    let button_disabled_value;
    let t4;
    let div3_intro;
    let div3_outro;
    let current;
    let mounted;
    let dispose;
    let each_value = ensure_array_like(
      /*addressFormFields*/
      ctx[1]
    );
    let each_blocks = [];
    for (let i = 0; i < each_value.length; i += 1) {
      each_blocks[i] = create_each_block$g(get_each_context$g(ctx, each_value, i));
    }
    const out = (i) => transition_out(each_blocks[i], 1, 1, () => {
      each_blocks[i] = null;
    });
    let if_block = (
      /*$store_isAddressEditing*/
      ctx[3] && create_if_block$C(ctx)
    );
    return {
      c() {
        div5 = element("div");
        div4 = element("div");
        div3 = element("div");
        div1 = element("div");
        div0 = element("div");
        div0.innerHTML = `<span class="address-personal-details-con svelte-5vbe7r">Address Details</span>`;
        t1 = space();
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        t2 = space();
        div2 = element("div");
        button = element("button");
        t3 = text(t3_value);
        t4 = space();
        if (if_block)
          if_block.c();
        attr(div0, "class", "address-details svelte-5vbe7r");
        attr(div1, "class", "input-row svelte-5vbe7r");
        attr(button, "class", "save-button svelte-5vbe7r");
        button.disabled = button_disabled_value = !/*isFormValid*/
        (ctx[2] && /*$store_enableSaveAddress*/
        ctx[4]);
        attr(div2, "class", "action-buttons svelte-5vbe7r");
        attr(div4, "class", "address-fill-form svelte-5vbe7r");
        attr(div5, "class", "address-container svelte-5vbe7r");
      },
      m(target, anchor) {
        insert(target, div5, anchor);
        append(div5, div4);
        append(div4, div3);
        append(div3, div1);
        append(div1, div0);
        append(div1, t1);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(div1, null);
          }
        }
        append(div3, t2);
        append(div3, div2);
        append(div2, button);
        append(button, t3);
        append(div3, t4);
        if (if_block)
          if_block.m(div3, null);
        current = true;
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*addEditAddress*/
            ctx[7]
          );
          mounted = true;
        }
      },
      p(ctx2, [dirty]) {
        if (dirty & /*addressFormFields, handleFieldChange*/
        34) {
          each_value = ensure_array_like(
            /*addressFormFields*/
            ctx2[1]
          );
          let i;
          for (i = 0; i < each_value.length; i += 1) {
            const child_ctx = get_each_context$g(ctx2, each_value, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
              transition_in(each_blocks[i], 1);
            } else {
              each_blocks[i] = create_each_block$g(child_ctx);
              each_blocks[i].c();
              transition_in(each_blocks[i], 1);
              each_blocks[i].m(div1, null);
            }
          }
          group_outros();
          for (i = each_value.length; i < each_blocks.length; i += 1) {
            out(i);
          }
          check_outros();
        }
        if ((!current || dirty & /*isAddressEditing*/
        1) && t3_value !== (t3_value = /*isAddressEditing*/
        (ctx2[0] ? btnTexts.saveChanges : btnTexts.saveAddress) + ""))
          set_data(t3, t3_value);
        if (!current || dirty & /*isFormValid, $store_enableSaveAddress*/
        20 && button_disabled_value !== (button_disabled_value = !/*isFormValid*/
        (ctx2[2] && /*$store_enableSaveAddress*/
        ctx2[4]))) {
          button.disabled = button_disabled_value;
        }
        if (
          /*$store_isAddressEditing*/
          ctx2[3]
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block$C(ctx2);
            if_block.c();
            if_block.m(div3, null);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
      },
      i(local) {
        if (current)
          return;
        for (let i = 0; i < each_value.length; i += 1) {
          transition_in(each_blocks[i]);
        }
        if (local) {
          add_render_callback(() => {
            if (!current)
              return;
            if (div3_outro)
              div3_outro.end(1);
            div3_intro = create_in_transition(div3, fly, { y: 200, duration: 800 });
            div3_intro.start();
          });
        }
        current = true;
      },
      o(local) {
        each_blocks = each_blocks.filter(Boolean);
        for (let i = 0; i < each_blocks.length; i += 1) {
          transition_out(each_blocks[i]);
        }
        if (div3_intro)
          div3_intro.invalidate();
        if (local) {
          div3_outro = create_out_transition(div3, fade, {});
        }
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div5);
        }
        destroy_each(each_blocks, detaching);
        if (if_block)
          if_block.d();
        if (detaching && div3_outro)
          div3_outro.end();
        mounted = false;
        dispose();
      }
    };
  }
  function instance$S($$self, $$props, $$invalidate) {
    let $store_addingNewAddress;
    let $store_isAddressEditing;
    let $store_phoneNumber;
    let $store_userName;
    let $store_userEmail;
    let $store_isCompleteForm;
    let $store_enableSaveAddress;
    component_subscribe($$self, store_addingNewAddress, ($$value) => $$invalidate(15, $store_addingNewAddress = $$value));
    component_subscribe($$self, store_isAddressEditing, ($$value) => $$invalidate(3, $store_isAddressEditing = $$value));
    component_subscribe($$self, store_phoneNumber, ($$value) => $$invalidate(16, $store_phoneNumber = $$value));
    component_subscribe($$self, store_userName, ($$value) => $$invalidate(17, $store_userName = $$value));
    component_subscribe($$self, store_userEmail, ($$value) => $$invalidate(18, $store_userEmail = $$value));
    component_subscribe($$self, store_isCompleteForm, ($$value) => $$invalidate(19, $store_isCompleteForm = $$value));
    component_subscribe($$self, store_enableSaveAddress, ($$value) => $$invalidate(4, $store_enableSaveAddress = $$value));
    let selectedAddress;
    let geographicData;
    let editedAddress;
    let newAddress = {
      address1: "",
      city: "",
      email: "",
      state: "",
      phone: "",
      fullName: "",
      pincode: 0
    };
    let isAddressEditing;
    let addressFormFields = [];
    let isFormValid = true;
    let isCompleteForm = false;
    let isEmailOptional = false;
    let firstRun = true;
    onMount(() => {
      store_modifySelectedAddress.subscribe((res) => {
        selectedAddress = res;
      });
      store_isAddressEditing.subscribe((res) => {
        $$invalidate(0, isAddressEditing = res);
      });
      store_isEmailOptional$1.subscribe((res) => {
        isEmailOptional = res;
      });
      store_geographicData.subscribe((res) => {
        var _a;
        geographicData = res;
        if (geographicData && $store_isAddressEditing && addressFormFields.length > 0) {
          $$invalidate(1, addressFormFields[1].value = geographicData == null ? void 0 : geographicData.city, addressFormFields);
          $$invalidate(1, addressFormFields[2].value = geographicData == null ? void 0 : geographicData.state, addressFormFields);
          editedAddress.city = geographicData == null ? void 0 : geographicData.city;
          editedAddress.state = geographicData == null ? void 0 : geographicData.state;
        } else if (geographicData && $store_addingNewAddress && (addressFormFields == null ? void 0 : addressFormFields.length) > 1) {
          $$invalidate(1, addressFormFields[1].value = geographicData == null ? void 0 : geographicData.city, addressFormFields);
          $$invalidate(1, addressFormFields[2].value = geographicData == null ? void 0 : geographicData.state, addressFormFields);
          newAddress.city = geographicData == null ? void 0 : geographicData.city;
          newAddress.state = geographicData == null ? void 0 : geographicData.state;
        }
        if ($store_addingNewAddress && isCompleteForm) {
          newAddress = {
            address1: ((_a = addressFormFields == null ? void 0 : addressFormFields[3]) == null ? void 0 : _a.value) || "",
            city: (geographicData == null ? void 0 : geographicData.city) || "",
            email: $store_userEmail || "",
            state: (geographicData == null ? void 0 : geographicData.state) || "",
            phone: $store_phoneNumber || "",
            fullName: $store_userName || "",
            pincode: (geographicData == null ? void 0 : geographicData.pincode) ? parseInt(geographicData.pincode.toString()) : 0
          };
        }
      });
      store_isCompleteForm.subscribe((res) => {
        isCompleteForm = res;
      });
      if ($store_addingNewAddress) {
        createAddressFormFields();
      } else if ($store_isAddressEditing && $store_isCompleteForm) {
        editedAddress = {
          address1: selectedAddress == null ? void 0 : selectedAddress.address1,
          city: selectedAddress == null ? void 0 : selectedAddress.city,
          email: selectedAddress == null ? void 0 : selectedAddress.email,
          state: selectedAddress == null ? void 0 : selectedAddress.state,
          phone: selectedAddress == null ? void 0 : selectedAddress.phone,
          fullName: (selectedAddress == null ? void 0 : selectedAddress.firstName) + " " + (selectedAddress == null ? void 0 : selectedAddress.lastName),
          pincode: selectedAddress == null ? void 0 : selectedAddress.pincode
        };
        createAddressFormFields();
        store_editedAddress.set(editedAddress);
      }
      checkFormValidity();
    });
    const createAddressFormFields = () => {
      var _a, _b;
      $$invalidate(1, addressFormFields = [
        {
          label: "Pincode",
          placeholder: "Pincode",
          type: "tel",
          value: isAddressEditing ? (_a = selectedAddress == null ? void 0 : selectedAddress.pincode) == null ? void 0 : _a.toString() : $store_addingNewAddress ? (_b = geographicData == null ? void 0 : geographicData.pincode) == null ? void 0 : _b.toString() : "",
          className: "custom-regular-input",
          validate: (value) => {
            var _a2;
            const regex2 = /^([1-9][0-9]{5})$/;
            const isValid = ((_a2 = value == null ? void 0 : value.trim()) == null ? void 0 : _a2.length) > 0 && regex2.test(value == null ? void 0 : value.trim());
            if (isValid && $store_addingNewAddress && geographicData && Object.entries(geographicData).length > 0 && firstRun) {
              setTimeout(
                () => {
                  var _a3;
                  (_a3 = document.getElementById("address1")) == null ? void 0 : _a3.focus();
                  firstRun = false;
                },
                100
              );
            }
            return isValid;
          },
          id: "pincode",
          errorMessage: "Pincode is required",
          touched: false,
          pattern: "^[0-9]*$",
          maxlength: "6",
          inputmode: "numeric",
          autocomplete: "postal-code"
        },
        {
          label: "City",
          placeholder: "Your City",
          type: "text",
          value: isAddressEditing ? selectedAddress == null ? void 0 : selectedAddress.city : $store_addingNewAddress ? geographicData == null ? void 0 : geographicData.city : "",
          className: "half-width-input",
          validate: (value) => {
            var _a2;
            const regex2 = /^[A-Za-z][a-zA-Z.,\s]+$/;
            return ((_a2 = value == null ? void 0 : value.trim()) == null ? void 0 : _a2.length) > 0 && regex2.test(value == null ? void 0 : value.trim());
          },
          id: "city",
          errorMessage: "City is required",
          touched: false,
          pattern: "^[A-Za-z\\s]*$",
          maxlength: "50",
          inputmode: "text",
          autocomplete: "address-level2"
        },
        {
          label: "State",
          placeholder: "Your State",
          type: "text",
          value: isAddressEditing ? selectedAddress == null ? void 0 : selectedAddress.state : $store_addingNewAddress ? geographicData == null ? void 0 : geographicData.state : "",
          className: "half-width-input",
          validate: (value) => {
            var _a2;
            const regex2 = /^[A-Za-z][a-zA-Z.\s]+$/;
            return ((_a2 = value == null ? void 0 : value.trim()) == null ? void 0 : _a2.length) > 0 && regex2.test(value == null ? void 0 : value.trim());
          },
          id: "state",
          errorMessage: "State is required",
          pattern: "^[A-Za-z\\s]*$",
          touched: false,
          maxlength: "50",
          inputmode: "text",
          autocomplete: "address-level1",
          readonly: "readonly"
        },
        {
          label: "Full Address",
          placeholder: "Your Address",
          type: "text",
          value: isAddressEditing ? selectedAddress == null ? void 0 : selectedAddress.address1 : "",
          className: "textbox-input",
          validate: (value) => {
            const minLength = 12;
            const trimmedValue = value == null ? void 0 : value.replace(/ /g, "");
            return (trimmedValue == null ? void 0 : trimmedValue.length) >= minLength && /[A-Za-z]/.test(trimmedValue);
          },
          id: "address1",
          errorMessage: "Address is required",
          pattern: "^[\\x00-\\x7F]*$",
          touched: false,
          maxlength: "255",
          inputmode: "text",
          autocomplete: "street-address"
        },
        {
          label: "Email",
          placeholder: "Your Email",
          type: "email",
          value: isAddressEditing ? selectedAddress == null ? void 0 : selectedAddress.email : $store_userEmail ? $store_userEmail : "",
          className: "custom-regular-input",
          validate: (value) => {
            var _a2, _b2;
            const regex2 = /^(?!.*\.\.)[a-zA-Z0-9](?:[a-zA-Z0-9._-]{0,62}[a-zA-Z0-9])?@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9]{2,})+$/;
            if (!isEmailOptional)
              return ((_a2 = value == null ? void 0 : value.trim()) == null ? void 0 : _a2.length) > 0 && regex2.test(value == null ? void 0 : value.trim());
            else
              return ((_b2 = value == null ? void 0 : value.trim()) == null ? void 0 : _b2.length) > 0 ? regex2.test(value == null ? void 0 : value.trim()) : true;
          },
          id: "email",
          errorMessage: "Email is required",
          touched: false,
          maxlength: "131",
          inputmode: "email",
          autocomplete: "email"
        },
        {
          label: "Full Name",
          placeholder: "Your Name",
          type: "text",
          value: isAddressEditing ? (selectedAddress == null ? void 0 : selectedAddress.firstName) + " " + (selectedAddress == null ? void 0 : selectedAddress.lastName) : $store_userName ? $store_userName : "",
          className: "custom-regular-input",
          validate: (value) => {
            var _a2;
            const minLength = 3;
            const regex2 = /^[A-Za-z][a-zA-Z.\s]+$/;
            return ((_a2 = value == null ? void 0 : value.trim()) == null ? void 0 : _a2.length) >= minLength && regex2.test(value == null ? void 0 : value.trim());
          },
          id: "fullName",
          errorMessage: "Full Name is required",
          pattern: "^[A-Za-z\\s]*$",
          touched: false,
          inputmode: "text",
          maxlength: "50",
          autocomplete: "name"
        },
        {
          label: "Phone Number",
          placeholder: "Your Phone",
          type: "tel",
          value: isAddressEditing ? selectedAddress == null ? void 0 : selectedAddress.phone : $store_phoneNumber ? $store_phoneNumber : "",
          className: "custom-regular-input",
          validate: (value) => {
            var _a2;
            const regex2 = /^[6-9]\d{9}$/;
            return ((_a2 = value == null ? void 0 : value.trim()) == null ? void 0 : _a2.length) > 0 && regex2.test(value == null ? void 0 : value.trim());
          },
          id: "phone",
          errorMessage: "Phone is required",
          touched: false,
          pattern: "^[0-9]*$",
          maxlength: "10",
          inputmode: "tel",
          autocomplete: "tel"
        }
      ]);
    };
    async function handlePincodeValidation(pincode, dontCreateForm) {
      await callPincodeValidation(pincode);
      if (isCompleteForm && $store_addingNewAddress && !dontCreateForm) {
        createAddressFormFields();
        checkFormValidity();
      }
    }
    function handleFieldChange(index, event) {
      var _a, _b, _c, _d, _e, _f, _g, _h;
      const field = addressFormFields[index];
      field.value = event.detail.enteredValue;
      if (field.id === "pincode" && field.value.length == 6) {
        handlePincodeValidation(field.value);
      } else if (isCompleteForm) {
        if ($store_isAddressEditing) {
          if (field.id === "pincode" && field.value.length == 6) {
            handlePincodeValidation(field.value);
          }
          editedAddress[field.id] = field.value;
          store_editedAddress.set(editedAddress);
        } else if ($store_addingNewAddress) {
          if (field.id === "pincode" && field.value.length == 6) {
            handlePincodeValidation(field.value, true);
          }
          newAddress = {
            address1: ((_a = addressFormFields.find((f) => f.id === "address1")) == null ? void 0 : _a.value) || "",
            city: ((_b = addressFormFields.find((f) => f.id === "city")) == null ? void 0 : _b.value) || "",
            email: ((_c = addressFormFields.find((f) => f.id === "email")) == null ? void 0 : _c.value) || "",
            state: ((_d = addressFormFields.find((f) => f.id === "state")) == null ? void 0 : _d.value) || "",
            phone: ((_e = addressFormFields.find((f) => f.id === "phone")) == null ? void 0 : _e.value) || "",
            fullName: ((_f = addressFormFields.find((f) => f.id === "fullName")) == null ? void 0 : _f.value) || "",
            pincode: ((_g = addressFormFields.find((f) => f.id === "pincode")) == null ? void 0 : _g.value) ? parseInt((_h = addressFormFields.find((f) => f.id === "pincode")) == null ? void 0 : _h.value) : 0
          };
          store_newAddress.set(newAddress);
        }
      }
      checkFormValidity();
    }
    function handleAddressDelete() {
      store_confirmDeletePopup.set(true);
    }
    const addEditAddress = () => {
      var _a, _b, _c, _d, _e, _f, _g, _h;
      store_editClicked.set(false);
      if (isAddressEditing) {
        callEditAddress(editedAddress);
      } else if ($store_addingNewAddress) {
        newAddress = {
          address1: ((_a = addressFormFields.find((f) => f.id === "address1")) == null ? void 0 : _a.value) || "",
          city: ((_b = addressFormFields.find((f) => f.id === "city")) == null ? void 0 : _b.value) || "",
          email: ((_c = addressFormFields.find((f) => f.id === "email")) == null ? void 0 : _c.value) || "",
          state: ((_d = addressFormFields.find((f) => f.id === "state")) == null ? void 0 : _d.value) || "",
          phone: ((_e = addressFormFields.find((f) => f.id === "phone")) == null ? void 0 : _e.value) || "",
          fullName: ((_f = addressFormFields.find((f) => f.id === "fullName")) == null ? void 0 : _f.value) || "",
          pincode: ((_g = addressFormFields.find((f) => f.id === "pincode")) == null ? void 0 : _g.value) ? parseInt((_h = addressFormFields.find((f) => f.id === "pincode")) == null ? void 0 : _h.value) : 0
        };
        callAddAddress(newAddress);
      }
    };
    function checkFormValidity() {
      $$invalidate(2, isFormValid = addressFormFields.every((field) => field.validate(field.value)));
      store_isFormValid.set(isFormValid);
    }
    onDestroy(() => {
      $$invalidate(1, addressFormFields = []);
      store_isCompleteForm.set(false);
      store_isAddressEditing.set(false);
    });
    return [
      isAddressEditing,
      addressFormFields,
      isFormValid,
      $store_isAddressEditing,
      $store_enableSaveAddress,
      handleFieldChange,
      handleAddressDelete,
      addEditAddress
    ];
  }
  class AddressForm extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$S, create_fragment$U, safe_not_equal, {}, add_css$P);
    }
  }
  function add_css$O(target) {
    append_styles(target, "svelte-1hc98h", ".font-medium-extra-bold.svelte-1hc98h.svelte-1hc98h{font-size:14px;font-weight:500;color:#00192F;font-family:var(--font-family)}.font-small-medium-regular.svelte-1hc98h.svelte-1hc98h{font-size:12px;font-weight:400;font-family:var(--font-family);color:#697687}.address-card-container.svelte-1hc98h.svelte-1hc98h{margin:0rem;padding:8px !important;display:flex;flex-direction:column;align-items:flex-start;justify-content:center;gap:4px;border-radius:12px;background-color:White;border:1px solid #e5e7eb;cursor:pointer}.address-card-container.svelte-1hc98h.svelte-1hc98h:hover{border:1px solid #19a6c5 !important}.address-card-container.svelte-1hc98h .eta-date.svelte-1hc98h{color:var(--green-text)}.address-card-container.svelte-1hc98h .main-contact.svelte-1hc98h{color:#616161;width:100%;display:flex;justify-content:space-between}.address-card-container.svelte-1hc98h .main-address.svelte-1hc98h{text-align:left;line-height:18px;color:black;word-break:break-word;color:#303030}.address-card-container.svelte-1hc98h .address-edit-container.svelte-1hc98h{line-height:21px;width:100%;display:flex;justify-content:space-between;align-items:center;color:black}.address-card-container.svelte-1hc98h .address-edit-container .edit-text.svelte-1hc98h{font-size:12px;color:#004b8d;line-height:1.1rem;cursor:pointer;font-family:var(--font-family);background-color:unset}.address-card-container.svelte-1hc98h .order-eta.svelte-1hc98h{color:var(--green-text)}");
  }
  function create_if_block_6$8(ctx) {
    let t;
    return {
      c() {
        t = text(
          /*selectedFullName*/
          ctx[4]
        );
      },
      m(target, anchor) {
        insert(target, t, anchor);
      },
      p(ctx2, dirty) {
        if (dirty & /*selectedFullName*/
        16)
          set_data(
            t,
            /*selectedFullName*/
            ctx2[4]
          );
      },
      d(detaching) {
        if (detaching) {
          detach(t);
        }
      }
    };
  }
  function create_if_block_5$9(ctx) {
    var _a;
    let t0_value = (
      /*addressDetails*/
      ((_a = ctx[0]) == null ? void 0 : _a.city) + ""
    );
    let t0;
    let t1;
    return {
      c() {
        t0 = text(t0_value);
        t1 = text(",");
      },
      m(target, anchor) {
        insert(target, t0, anchor);
        insert(target, t1, anchor);
      },
      p(ctx2, dirty) {
        var _a2;
        if (dirty & /*addressDetails*/
        1 && t0_value !== (t0_value = /*addressDetails*/
        ((_a2 = ctx2[0]) == null ? void 0 : _a2.city) + ""))
          set_data(t0, t0_value);
      },
      d(detaching) {
        if (detaching) {
          detach(t0);
          detach(t1);
        }
      }
    };
  }
  function create_if_block_4$9(ctx) {
    var _a;
    let t0_value = (
      /*addressDetails*/
      ((_a = ctx[0]) == null ? void 0 : _a.state) + ""
    );
    let t0;
    let t1;
    return {
      c() {
        t0 = text(t0_value);
        t1 = text(",");
      },
      m(target, anchor) {
        insert(target, t0, anchor);
        insert(target, t1, anchor);
      },
      p(ctx2, dirty) {
        var _a2;
        if (dirty & /*addressDetails*/
        1 && t0_value !== (t0_value = /*addressDetails*/
        ((_a2 = ctx2[0]) == null ? void 0 : _a2.state) + ""))
          set_data(t0, t0_value);
      },
      d(detaching) {
        if (detaching) {
          detach(t0);
          detach(t1);
        }
      }
    };
  }
  function create_if_block_3$e(ctx) {
    var _a;
    let t0_value = (
      /*addressDetails*/
      ((_a = ctx[0]) == null ? void 0 : _a.country) + ""
    );
    let t0;
    let t1;
    return {
      c() {
        t0 = text(t0_value);
        t1 = text(",");
      },
      m(target, anchor) {
        insert(target, t0, anchor);
        insert(target, t1, anchor);
      },
      p(ctx2, dirty) {
        var _a2;
        if (dirty & /*addressDetails*/
        1 && t0_value !== (t0_value = /*addressDetails*/
        ((_a2 = ctx2[0]) == null ? void 0 : _a2.country) + ""))
          set_data(t0, t0_value);
      },
      d(detaching) {
        if (detaching) {
          detach(t0);
          detach(t1);
        }
      }
    };
  }
  function create_if_block_2$l(ctx) {
    var _a;
    let span;
    let t_value = (
      /*addressDetails*/
      ((_a = ctx[0]) == null ? void 0 : _a.email) + ""
    );
    let t;
    return {
      c() {
        span = element("span");
        t = text(t_value);
        attr(span, "class", "font-small-medium-regular svelte-1hc98h");
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t);
      },
      p(ctx2, dirty) {
        var _a2;
        if (dirty & /*addressDetails*/
        1 && t_value !== (t_value = /*addressDetails*/
        ((_a2 = ctx2[0]) == null ? void 0 : _a2.email) + ""))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_if_block_1$u(ctx) {
    var _a;
    let span;
    let t0;
    let t1_value = (
      /*addressDetails*/
      ((_a = ctx[0]) == null ? void 0 : _a.phone) + ""
    );
    let t1;
    return {
      c() {
        span = element("span");
        t0 = text("(+91) ");
        t1 = text(t1_value);
        attr(span, "class", "font-small-medium-regular svelte-1hc98h");
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t0);
        append(span, t1);
      },
      p(ctx2, dirty) {
        var _a2;
        if (dirty & /*addressDetails*/
        1 && t1_value !== (t1_value = /*addressDetails*/
        ((_a2 = ctx2[0]) == null ? void 0 : _a2.phone) + ""))
          set_data(t1, t1_value);
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_fragment$T(ctx) {
    var _a, _b, _c, _d, _e, _f, _g;
    let button1;
    let div4;
    let div1;
    let div0;
    let t0;
    let button0;
    let t2;
    let div2;
    let t3_value = (
      /*addressDetails*/
      ((_a = ctx[0]) == null ? void 0 : _a.address1) + ""
    );
    let t3;
    let t4;
    let t5;
    let t6;
    let t7;
    let t8_value = (
      /*addressDetails*/
      ((_b = ctx[0]) == null ? void 0 : _b.pincode) + ""
    );
    let t8;
    let t9;
    let div3;
    let t10;
    let t11;
    let mounted;
    let dispose;
    let if_block0 = (
      /*selectedFullName*/
      ctx[4] && create_if_block_6$8(ctx)
    );
    let if_block1 = (
      /*addressDetails*/
      ((_c = ctx[0]) == null ? void 0 : _c.city) && create_if_block_5$9(ctx)
    );
    let if_block2 = (
      /*addressDetails*/
      ((_d = ctx[0]) == null ? void 0 : _d.state) && create_if_block_4$9(ctx)
    );
    let if_block3 = (
      /*addressDetails*/
      ((_e = ctx[0]) == null ? void 0 : _e.country) && create_if_block_3$e(ctx)
    );
    let if_block4 = (
      /*addressDetails*/
      ((_f = ctx[0]) == null ? void 0 : _f.email) && create_if_block_2$l(ctx)
    );
    let if_block5 = (
      /*addressDetails*/
      ((_g = ctx[0]) == null ? void 0 : _g.phone) && create_if_block_1$u(ctx)
    );
    return {
      c() {
        button1 = element("button");
        div4 = element("div");
        div1 = element("div");
        div0 = element("div");
        if (if_block0)
          if_block0.c();
        t0 = space();
        button0 = element("button");
        button0.textContent = "Edit";
        t2 = space();
        div2 = element("div");
        t3 = text(t3_value);
        t4 = text(",\n      ");
        if (if_block1)
          if_block1.c();
        t5 = space();
        if (if_block2)
          if_block2.c();
        t6 = space();
        if (if_block3)
          if_block3.c();
        t7 = space();
        t8 = text(t8_value);
        t9 = space();
        div3 = element("div");
        if (if_block4)
          if_block4.c();
        t10 = space();
        if (if_block5)
          if_block5.c();
        t11 = space();
        attr(div0, "class", "font-medium-extra-bold svelte-1hc98h");
        attr(button0, "class", "font-small-medium edit-text svelte-1hc98h");
        attr(div1, "class", "address-edit-container svelte-1hc98h");
        attr(div2, "class", "main-address font-small-medium-regular svelte-1hc98h");
        attr(div3, "class", "main-contact address-text-small-regular svelte-1hc98h");
        attr(div4, "class", "address-card-container svelte-1hc98h");
        set_style(
          div4,
          "border-color",
          /*isSelected*/
          ctx[2] === /*index*/
          ctx[1] ? "#004b8d" : "#e5e7eb"
        );
        set_style(button1, "width", "100%");
        set_style(button1, "background-color", "white");
        set_style(button1, "padding", "0");
      },
      m(target, anchor) {
        insert(target, button1, anchor);
        append(button1, div4);
        append(div4, div1);
        append(div1, div0);
        if (if_block0)
          if_block0.m(div0, null);
        append(div1, t0);
        append(div1, button0);
        append(div4, t2);
        append(div4, div2);
        append(div2, t3);
        append(div2, t4);
        if (if_block1)
          if_block1.m(div2, null);
        append(div2, t5);
        if (if_block2)
          if_block2.m(div2, null);
        append(div2, t6);
        if (if_block3)
          if_block3.m(div2, null);
        append(div2, t7);
        append(div2, t8);
        append(div4, t9);
        append(div4, div3);
        if (if_block4)
          if_block4.m(div3, null);
        append(div3, t10);
        if (if_block5)
          if_block5.m(div3, null);
        append(div4, t11);
        if (!mounted) {
          dispose = [
            listen(
              button0,
              "click",
              /*click_handler*/
              ctx[5]
            ),
            listen(
              button1,
              "click",
              /*click_handler_1*/
              ctx[6]
            )
          ];
          mounted = true;
        }
      },
      p(ctx2, [dirty]) {
        var _a2, _b2, _c2, _d2, _e2, _f2, _g2;
        if (
          /*selectedFullName*/
          ctx2[4]
        ) {
          if (if_block0) {
            if_block0.p(ctx2, dirty);
          } else {
            if_block0 = create_if_block_6$8(ctx2);
            if_block0.c();
            if_block0.m(div0, null);
          }
        } else if (if_block0) {
          if_block0.d(1);
          if_block0 = null;
        }
        if (dirty & /*addressDetails*/
        1 && t3_value !== (t3_value = /*addressDetails*/
        ((_a2 = ctx2[0]) == null ? void 0 : _a2.address1) + ""))
          set_data(t3, t3_value);
        if (
          /*addressDetails*/
          (_b2 = ctx2[0]) == null ? void 0 : _b2.city
        ) {
          if (if_block1) {
            if_block1.p(ctx2, dirty);
          } else {
            if_block1 = create_if_block_5$9(ctx2);
            if_block1.c();
            if_block1.m(div2, t5);
          }
        } else if (if_block1) {
          if_block1.d(1);
          if_block1 = null;
        }
        if (
          /*addressDetails*/
          (_c2 = ctx2[0]) == null ? void 0 : _c2.state
        ) {
          if (if_block2) {
            if_block2.p(ctx2, dirty);
          } else {
            if_block2 = create_if_block_4$9(ctx2);
            if_block2.c();
            if_block2.m(div2, t6);
          }
        } else if (if_block2) {
          if_block2.d(1);
          if_block2 = null;
        }
        if (
          /*addressDetails*/
          (_d2 = ctx2[0]) == null ? void 0 : _d2.country
        ) {
          if (if_block3) {
            if_block3.p(ctx2, dirty);
          } else {
            if_block3 = create_if_block_3$e(ctx2);
            if_block3.c();
            if_block3.m(div2, t7);
          }
        } else if (if_block3) {
          if_block3.d(1);
          if_block3 = null;
        }
        if (dirty & /*addressDetails*/
        1 && t8_value !== (t8_value = /*addressDetails*/
        ((_e2 = ctx2[0]) == null ? void 0 : _e2.pincode) + ""))
          set_data(t8, t8_value);
        if (
          /*addressDetails*/
          (_f2 = ctx2[0]) == null ? void 0 : _f2.email
        ) {
          if (if_block4) {
            if_block4.p(ctx2, dirty);
          } else {
            if_block4 = create_if_block_2$l(ctx2);
            if_block4.c();
            if_block4.m(div3, t10);
          }
        } else if (if_block4) {
          if_block4.d(1);
          if_block4 = null;
        }
        if (
          /*addressDetails*/
          (_g2 = ctx2[0]) == null ? void 0 : _g2.phone
        ) {
          if (if_block5) {
            if_block5.p(ctx2, dirty);
          } else {
            if_block5 = create_if_block_1$u(ctx2);
            if_block5.c();
            if_block5.m(div3, null);
          }
        } else if (if_block5) {
          if_block5.d(1);
          if_block5 = null;
        }
        if (dirty & /*isSelected, index*/
        6) {
          set_style(
            div4,
            "border-color",
            /*isSelected*/
            ctx2[2] === /*index*/
            ctx2[1] ? "#004b8d" : "#e5e7eb"
          );
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(button1);
        }
        if (if_block0)
          if_block0.d();
        if (if_block1)
          if_block1.d();
        if (if_block2)
          if_block2.d();
        if (if_block3)
          if_block3.d();
        if (if_block4)
          if_block4.d();
        if (if_block5)
          if_block5.d();
        mounted = false;
        run_all(dispose);
      }
    };
  }
  function instance$R($$self, $$props, $$invalidate) {
    let { addressDetails } = $$props;
    let { index } = $$props;
    let { isSelected } = $$props;
    let { selectAddress } = $$props;
    let selectedFullName = "";
    const click_handler2 = () => editSelectedAddress(addressDetails);
    const click_handler_1 = () => selectAddress(index, addressDetails == null ? void 0 : addressDetails.aid);
    $$self.$$set = ($$props2) => {
      if ("addressDetails" in $$props2)
        $$invalidate(0, addressDetails = $$props2.addressDetails);
      if ("index" in $$props2)
        $$invalidate(1, index = $$props2.index);
      if ("isSelected" in $$props2)
        $$invalidate(2, isSelected = $$props2.isSelected);
      if ("selectAddress" in $$props2)
        $$invalidate(3, selectAddress = $$props2.selectAddress);
    };
    $$self.$$.update = () => {
      if ($$self.$$.dirty & /*addressDetails*/
      1) {
        $$invalidate(4, selectedFullName = truncateName(addressDetails));
      }
    };
    return [
      addressDetails,
      index,
      isSelected,
      selectAddress,
      selectedFullName,
      click_handler2,
      click_handler_1
    ];
  }
  class AddressCard extends SvelteComponent {
    constructor(options) {
      super();
      init(
        this,
        options,
        instance$R,
        create_fragment$T,
        safe_not_equal,
        {
          addressDetails: 0,
          index: 1,
          isSelected: 2,
          selectAddress: 3
        },
        add_css$O
      );
    }
  }
  function add_css$N(target) {
    append_styles(target, "svelte-1r8cwxz", "p.svelte-1r8cwxz{color:var(--Brand-900, rgb(0, 25, 47));padding:20px;font-size:16px}");
  }
  function create_fragment$S(ctx) {
    let p;
    let t;
    return {
      c() {
        p = element("p");
        t = text(
          /*message*/
          ctx[0]
        );
        attr(p, "class", "svelte-1r8cwxz");
      },
      m(target, anchor) {
        insert(target, p, anchor);
        append(p, t);
      },
      p(ctx2, [dirty]) {
        if (dirty & /*message*/
        1)
          set_data(
            t,
            /*message*/
            ctx2[0]
          );
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(p);
        }
      }
    };
  }
  function instance$Q($$self, $$props, $$invalidate) {
    let { message = "" } = $$props;
    $$self.$$set = ($$props2) => {
      if ("message" in $$props2)
        $$invalidate(0, message = $$props2.message);
    };
    return [message];
  }
  class MessageComponent extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$Q, create_fragment$S, safe_not_equal, { message: 0 }, add_css$N);
    }
  }
  const POST = (url, body, event = false, headers, timeout) => {
    return new Promise((resolve, reject) => {
      !event && store_sidecartLoader.update((res) => res + 1);
      if (window.gk_cart_domain == "myblissclub.myshopify.com") {
        const requestHeaders = {
          "Content-Type": "application/json",
          ...headers
        };
        let payload = JSON.stringify(body);
        if (url.includes("/cart/add.js") && typeof payload === "string" && payload.includes("?properties[")) {
          const fixedPayload = payload.split("?")[0];
          payload = fixedPayload;
        }
        const controller = new AbortController();
        fetch(url, {
          method: "POST",
          headers: requestHeaders,
          body: payload,
          signal: controller.signal
        }).then((response) => {
          !event && store_sidecartLoader.update((res) => res - 1);
          return response.text();
        }).then((responseText) => {
          try {
            const response = JSON.parse(responseText);
            resolve(response);
          } catch (err) {
            reject(responseText);
          }
        }).catch((error) => {
          !event && store_sidecartLoader.update((res) => res - 1);
          if (error.name === "AbortError") {
            reject("API_TIMEOUT");
          } else {
            reject(error.message || error);
          }
        });
      } else {
        let xhr = new XMLHttpRequest();
        xhr.open("POST", url);
        headers = {
          "Content-Type": "application/json",
          ...headers
        };
        for (const [key, value] of Object.entries(headers)) {
          xhr.setRequestHeader(key, value);
        }
        xhr.onload = () => {
          !event && store_sidecartLoader.update((res) => res - 1);
          try {
            const response = JSON.parse(xhr.response);
            resolve(response);
          } catch (err) {
            reject(xhr.response);
          }
        };
        xhr.onerror = () => {
          !event && store_sidecartLoader.update((res) => res - 1);
          reject(xhr.response);
        };
        let payload = JSON.stringify(body);
        if (url.includes("/cart/add.js") && typeof payload === "string" && payload.includes("?properties[")) {
          const fixedPayload = payload.split("?")[0];
          payload = fixedPayload;
        }
        xhr.send(payload);
      }
    });
  };
  const GET = (url, event = false, headers, params, timeout) => {
    return new Promise((resolve, reject) => {
      !event && store_sidecartLoader.update((res) => res + 1);
      if (window.gk_cart_domain == "myblissclub.myshopify.com") {
        let requestUrl = url;
        const requestHeaders = {
          "Content-Type": "application/json",
          ...headers || {}
        };
        const controller = new AbortController();
        fetch(requestUrl, {
          method: "GET",
          headers: requestHeaders,
          signal: controller.signal
        }).then((response) => {
          !event && store_sidecartLoader.update((res) => res - 1);
          return response.text();
        }).then((responseText) => {
          try {
            const response = JSON.parse(responseText);
            resolve(response);
          } catch (err) {
            reject(responseText);
          }
        }).catch((error) => {
          !event && store_sidecartLoader.update((res) => res - 1);
          if (error.name === "AbortError") {
            reject("API_TIMEOUT");
          } else {
            reject(error.message || error);
          }
        });
      } else {
        let xhr = new XMLHttpRequest();
        xhr.open("GET", url);
        headers = {
          "Content-Type": "application/json",
          ...headers || {}
        };
        for (const [key, value] of Object.entries(headers)) {
          xhr.setRequestHeader(key, value);
        }
        xhr.ontimeout = () => {
          !event && store_sidecartLoader.update((res) => res - 1);
          reject("API_TIMEOUT");
        };
        xhr.onload = () => {
          !event && store_sidecartLoader.update((res) => res - 1);
          try {
            const response = JSON.parse(xhr.response);
            resolve(response);
          } catch (err) {
            reject(xhr.response);
          }
        };
        xhr.onerror = () => {
          !event && store_sidecartLoader.update((res) => res - 1);
          reject(xhr.response);
        };
        xhr.send();
      }
    });
  };
  let merchantId = "", userEventDetails = {};
  store_userEventDetails.subscribe((res) => userEventDetails = res);
  store_merchantId.subscribe((res) => merchantId = res);
  const logEvent = (eventName, eventBody, clickEvent) => {
    try {
      let url = "https://hits.gokwik.co/api/v1/events";
      let timestamp = Date.now();
      let userAgent = navigator.userAgent;
      let version = "1";
      const body = {
        timestamp,
        userAgent,
        ...eventBody && { data: eventBody },
        version,
        merchantId,
        ...userEventDetails && { ...userEventDetails },
        eventType: clickEvent || "development",
        name: eventName
      };
      POST(url, body, true);
      fireCustomerEvent(eventName, eventBody);
    } catch (e) {
      console.error("Error logging event:", e);
    }
  };
  const fireGokwikTrigger = (name, body) => {
    fireCustomerEvent(name, body);
    window.postMessage({ name, body });
  };
  const fireCustomerEvent = (name, body) => {
    try {
      window.Shopify && window.Shopify.analytics && window.Shopify.analytics.publish("kwik-cart-event", {
        event_name: name,
        event_body: body
      });
    } catch (e) {
      console.error(e);
    }
  };
  let appliedDiscount, cart$1, shopDomain$1, totalPayable, storeConfigurations;
  store_appliedManualDiscount.subscribe((res) => appliedDiscount = res);
  store_cart.subscribe((res) => cart$1 = res);
  store_totalPayableAmount.subscribe((res) => {
    totalPayable = res;
    console.log(res, "total changed");
  });
  store_shopDomain.subscribe((res) => shopDomain$1 = res);
  store_configurations.subscribe(
    (res) => res ? storeConfigurations = res : null
  );
  const getCart = async (skip_discounts = false, skipLoaderRemoval = false) => {
    try {
      store_isBuyNowCartDataLoading.set(true);
      const response = await GET(`${getURL(shopDomain$1)}/cart.js`);
      store_isBuyNowCartDataLoading.set(false);
      store_cart.set(filterCartItems(response));
      store_originalCartJS.set(filterCartItems(response));
      await getDiscounts(skip_discounts);
      if (!skipLoaderRemoval) {
        store_apiLoader.set(false);
      }
      return response;
    } catch (error) {
      try {
        const retryResponse = await GET(`${getURL(shopDomain$1)}/cart.js`);
        store_cart.set(filterCartItems(retryResponse));
        store_originalCartJS.set(filterCartItems(retryResponse));
        await getDiscounts(skip_discounts);
        if (!skipLoaderRemoval) {
          store_apiLoader.set(false);
        }
        return retryResponse;
      } catch (retryError) {
        if (!skipLoaderRemoval) {
          store_apiLoader.set(false);
        }
        console.error("Failed to fetch cart after retry:", retryError);
        throw retryError;
      }
    } finally {
      store_isBuyNowCartDataLoading.set(false);
    }
  };
  const getDiscounts = async (skip_discounts = false) => {
    var _a;
    if ((cart$1 == null ? void 0 : cart$1.item_count) > 0) {
      await fetchAvailableOffers();
    }
    if ((appliedDiscount == null ? void 0 : appliedDiscount.title) && !skip_discounts && !((_a = storeConfigurations == null ? void 0 : storeConfigurations.oneClickOffer) == null ? void 0 : _a.autoApply)) {
      await applyDiscount(appliedDiscount == null ? void 0 : appliedDiscount.title, "outside");
    }
  };
  function prepareQuantityChangePayload(existingParams) {
    const newParams = {
      total_cart_amount: totalPayable || 0,
      total_cart_quantity: (cart$1 == null ? void 0 : cart$1.item_count) || 0,
      ...existingParams
    };
    if ((newParams == null ? void 0 : newParams.id) && typeof (newParams == null ? void 0 : newParams.id) === "string") {
      if (newParams.id.split(":")[0]) {
        newParams.key = newParams.id;
        newParams.id = newParams.id.split(":")[0];
      }
    }
    return newParams;
  }
  const changeCart = async (params, pausePostExec = false, properties = {}) => {
    var _a, _b, _c, _d, _e;
    try {
      store_apiLoader.set(true);
      if (((_a = params == null ? void 0 : params.properties) == null ? void 0 : _a["_gokwik_upsell"]) === "true" || (properties == null ? void 0 : properties["_gokwik_upsell"]) === "true") {
        const isAllowed2 = shouldAllowUpsellAddToCart(params, params == null ? void 0 : params.quantity, true);
        if (!isAllowed2) {
          store_apiLoader.set(false);
          return false;
        }
      }
      const isAllowed = shouldAllowAddToCart(params, params == null ? void 0 : params.quantity, true);
      if (!isAllowed) {
        store_apiLoader.set(false);
        return false;
      }
      store_pauseInterceptorExecution.set(true);
      const response = await POST(
        `${getURL(shopDomain$1)}/cart/change.js`,
        params
      );
      if (((_b = storeConfigurations == null ? void 0 : storeConfigurations.freeGifts) == null ? void 0 : _b.offerType) === "AUTO_SELECTED" && !pausePostExec && (response == null ? void 0 : response.token)) {
        store_freeGiftLoading.set(true);
      }
      if (((_c = response.description) == null ? void 0 : _c.includes("sold")) || (response == null ? void 0 : response.status) === 422 && (response == null ? void 0 : response.description)) {
        store_apiLoader.set(false);
        store_snackbar.set({
          message: response.description || "Oops something went wrong",
          timer: 2e3,
          show: true,
          error: true
        });
        if ((_d = response == null ? void 0 : response.description) == null ? void 0 : _d.includes("items were added")) {
          await getCart();
        } else {
          store_freeGiftLoading.set(false);
        }
        return;
      }
      if (!pausePostExec) {
        if (response == null ? void 0 : response.token) {
          store_cart.set(filterCartItems(response));
          store_originalCartJS.set(filterCartItems(response));
        }
        if (response.item_count > 0) {
          await fetchAvailableOffers();
        }
        if ((appliedDiscount == null ? void 0 : appliedDiscount.title) && !isDiscountAutoApplied()) {
          await reapplyMultipleDiscounts();
        }
      }
      fireGokwikTrigger(
        "quantity_change",
        prepareQuantityChangePayload({ ...params, properties })
      );
      return response;
    } catch (error) {
      console.log(error);
      store_apiLoader.set(false);
      return false;
    } finally {
      store_pauseInterceptorExecution.set(false);
      console.log("store set as false");
      store_apiLoader.set(false);
      if (((_e = storeConfigurations == null ? void 0 : storeConfigurations.freeGifts) == null ? void 0 : _e.offerType) === "AUTO_SELECTED" && pausePostExec) {
        store_freeGiftLoading.set(true);
      }
    }
  };
  const addToCart = async (params, pausePostExec = false, properties = {}) => {
    var _a, _b, _c;
    try {
      store_apiLoader.set(true);
      if (((_a = params == null ? void 0 : params.properties) == null ? void 0 : _a["_gokwik_upsell"]) === "true" || (properties == null ? void 0 : properties["_gokwik_upsell"]) === "true") {
        const isAllowed = shouldAllowUpsellAddToCart(params, params == null ? void 0 : params.quantity);
        if (!isAllowed) {
          store_apiLoader.set(false);
          return false;
        }
      }
      if (params == null ? void 0 : params.items) {
        for (const item of params.items) {
          const isAllowed = shouldAllowAddToCart(item, item == null ? void 0 : item.quantity);
          if (!isAllowed) {
            store_apiLoader.set(false);
            return false;
          }
        }
      } else {
        const isAllowed = shouldAllowAddToCart(params, params == null ? void 0 : params.quantity);
        if (!isAllowed) {
          store_apiLoader.set(false);
          return false;
        }
      }
      store_pauseInterceptorExecution.set(true);
      const response = await POST(
        `${getURL(shopDomain$1)}/cart/add.js`,
        params
      );
      if (((_b = storeConfigurations == null ? void 0 : storeConfigurations.freeGifts) == null ? void 0 : _b.offerType) === "AUTO_SELECTED" && !pausePostExec && !response.description) {
        store_freeGiftLoading.set(true);
      }
      if (!response.description) {
        if (pausePostExec) {
          fireGokwikTrigger(
            "quantity_change",
            prepareQuantityChangePayload({ ...params, properties })
          );
          return response;
        }
        await getCart(false, true);
      } else {
        if (response.status === 422) {
          store_snackbar.set({
            message: response.description || "Error Adding Product",
            timer: 2e3,
            show: true,
            error: true
          });
          if (params == null ? void 0 : params.items) {
            const failedGiftItems = params.items.filter(
              (item) => item.properties && item.properties["_gokwik_freebie"]
            );
            const failedGiftIds = failedGiftItems.map((item) => item.id);
            const autoAddFailedGifts = [...get_store_value(store_autoGiftAddFailedGifts), ...failedGiftIds];
            store_autoGiftAddFailedGifts.set(autoAddFailedGifts);
          } else if ((params == null ? void 0 : params.properties) && params.properties["_gokwik_freebie"]) {
            const failedGiftId = params.id;
            const autoAddFailedGifts = [...get_store_value(store_autoGiftAddFailedGifts), failedGiftId];
            store_autoGiftAddFailedGifts.set(autoAddFailedGifts);
          }
        }
        store_apiLoader.set(false);
        return false;
      }
      fireGokwikTrigger(
        "quantity_change",
        prepareQuantityChangePayload({ ...params, properties })
      );
      return response;
    } catch (error) {
      store_snackbar.set({
        message: (error == null ? void 0 : error.description) || "Error Adding Product",
        timer: 2e3,
        show: true,
        error: true
      });
      console.log(error);
      store_apiLoader.set(false);
      return false;
    } finally {
      store_pauseInterceptorExecution.set(false);
      console.log("store set as false");
      if (((_c = storeConfigurations == null ? void 0 : storeConfigurations.freeGifts) == null ? void 0 : _c.offerType) === "AUTO_SELECTED" && pausePostExec) {
        store_freeGiftLoading.set(true);
      }
      store_apiLoader.set(false);
    }
  };
  const updateCart = async (params) => {
    const response = await POST("/cart/update.js", params);
    store_cart.set(filterCartItems(response));
    store_originalCartJS.set(filterCartItems(response));
    return response;
  };
  const getURL = (shopDomain2) => {
    if ([
      TextConstants.environment_constants.local,
      TextConstants.environment_constants.dashboard
    ].some((env) => "production".includes(env))) {
      return `https://${shopDomain2}`;
    } else {
      return "";
    }
  };
  const getVariantData = async (variantId) => {
    try {
      if (false)
        ;
      const shopDomain2 = get_store_value(store_shopDomain);
      const response = await GET(
        `${getURL(shopDomain2)}/variants/${variantId}.js`
      );
      return {
        available: response && response.available === true,
        compare_at_price: (response == null ? void 0 : response.compare_at_price) ?? 0
      };
    } catch (error) {
      console.error(
        `Error checking availability for variant ${variantId}:`,
        error
      );
      return {
        available: true,
        compare_at_price: 0
      };
    }
  };
  const productDataCache = /* @__PURE__ */ new Map();
  const getProductData = async (handle) => {
    if (productDataCache.has(handle)) {
      return productDataCache.get(handle);
    }
    try {
      store_apiLoader.set(true);
      const response = await GET(
        `${getURL(shopDomain$1)}/products/${handle}.js`
      );
      productDataCache.set(handle, response);
      const variants = ((response == null ? void 0 : response.variants) || []).map((variant) => String(variant.id));
      const availabilityMap = await batchCheckVariantsAvailability(variants);
      store_productDetails.update((oldObj) => ({
        ...oldObj,
        ...availabilityMap
      }));
      return response;
    } catch (error) {
      store_toastMsgConfig.set({
        showToast: true,
        msg: "Error fetching product data",
        type: "error"
      });
      return null;
    } finally {
      store_apiLoader.set(false);
    }
  };
  let manualDiscount$2 = 0, freeGiftConfig$1, productDetails = {}, configurations$1 = null, showMRPDiscount = false, freeGiftPromiseChain = Promise.resolve(), allowedCartItems = [];
  store_appliedManualDiscount.subscribe((res) => manualDiscount$2 = res);
  store_configurations.subscribe((res) => {
    var _a, _b;
    freeGiftConfig$1 = res == null ? void 0 : res.freeGifts;
    configurations$1 = res;
    showMRPDiscount = ((_b = (_a = res == null ? void 0 : res.appearance) == null ? void 0 : _a.discountsOnMrp) == null ? void 0 : _b.enable) || false;
  });
  store_productDetails.subscribe((res) => productDetails = res);
  function getDiscountsFromCart(cart2) {
    var _a;
    const discounts = {};
    if (cart2.items) {
      cart2.items.forEach((item) => {
        var _a2;
        (_a2 = item.line_level_discount_allocations) == null ? void 0 : _a2.forEach((discount) => {
          var _a3;
          let title = discount.title || ((_a3 = discount.discount_application) == null ? void 0 : _a3.title);
          if (title) {
            if (discounts[title]) {
              discounts[title].amount = discounts[title].amount + discount.amount / 100;
            } else {
              discounts[title] = {
                manual: discount.discount_application.type === "discount_code",
                amount: discount.amount / 100,
                title
              };
            }
          }
        });
      });
    }
    if ((_a = cart2.cart_level_discount_applications) == null ? void 0 : _a.length) {
      cart2.cart_level_discount_applications.forEach((discount) => {
        var _a2, _b, _c;
        let title = discount.title || ((_a2 = discount.discount_application) == null ? void 0 : _a2.title);
        if (title) {
          if (discounts[title]) {
            discounts[title].amount = discounts[title].amount + discount.amount / 100;
          } else {
            discounts[title] = {
              manual: (discount.type || ((_b = discount.discount_application) == null ? void 0 : _b.type)) === "discount_code",
              amount: (discount.total_allocated_amount || ((_c = discount.discount_application) == null ? void 0 : _c.total_allocated_amount)) / 100,
              title
            };
          }
        }
      });
    }
    return Object.values(discounts);
  }
  function checkWhitelistedAutomaticDiscount(discountCode, whitelistedAutomaticDiscounts) {
    let matchFound = false;
    if (!discountCode)
      return matchFound;
    whitelistedAutomaticDiscounts.some((discount) => {
      var _a;
      discount.automaticCode = (_a = discount.automaticCode) == null ? void 0 : _a.toLowerCase();
      if (discount.automaticCodeClubsWithDiscount === "NONE")
        return false;
      switch (discount.automaticCodeMatchType) {
        case 1:
          if (discountCode === discount.automaticCode)
            matchFound = true;
          break;
        case 2:
          if (discountCode.startsWith(discount.automaticCode))
            matchFound = true;
          break;
        case 3:
          if (discountCode.endsWith(discount.automaticCode))
            matchFound = true;
          break;
        case 4:
          if (discountCode.includes(discount.automaticCode))
            matchFound = true;
          break;
      }
    });
    return matchFound;
  }
  function checkForExtraDiscounts(cart2, whitelistedAutomaticDiscounts, overwriteAutomaticDiscounts) {
    var _a, _b;
    let automaticDiscounts = [];
    (_a = cart2.cart_level_discount_applications) == null ? void 0 : _a.map((i) => {
      var _a2;
      if (i.type !== "discount_code") {
        automaticDiscounts.push(i.title || ((_a2 = i == null ? void 0 : i.discount_application) == null ? void 0 : _a2.title));
      }
    });
    (_b = cart2.items) == null ? void 0 : _b.map((item) => {
      var _a2, _b2;
      if ((_a2 = item.line_level_discount_allocations) == null ? void 0 : _a2.length) {
        (_b2 = item.line_level_discount_allocations) == null ? void 0 : _b2.map((discount) => {
          var _a3;
          if (discount !== "discount_code") {
            automaticDiscounts.push((_a3 = discount == null ? void 0 : discount.discount_application) == null ? void 0 : _a3.title);
          }
        });
      }
    });
    if (!automaticDiscounts.length) {
      return true;
    }
    for (let discount of automaticDiscounts) {
      const isDiscountWhitelisted = checkWhitelistedAutomaticDiscount(
        discount.toLowerCase(),
        whitelistedAutomaticDiscounts
      );
      const isDiscountOverwritable = (overwriteAutomaticDiscounts == null ? void 0 : overwriteAutomaticDiscounts.length) && checkWhitelistedAutomaticDiscount(
        discount.toLowerCase(),
        overwriteAutomaticDiscounts
      );
      if (!isDiscountWhitelisted && !isDiscountOverwritable) {
        return false;
      }
    }
    return true;
  }
  const setInitialValues = () => {
    let cookie = {};
    document.cookie.split(";").forEach(function(el) {
      let [key, value] = el.split("=");
      cookie[key.trim()] = value;
    });
    store_userEventDetails.set({
      shopifySessionId: cookie["_shopify_s"] || null,
      landing_page: cookie["gk_landing_page"] || "/",
      orig_referrer: cookie["gk_orig_referrer"] || "blank",
      source: cookie["_shopify_sa_p"] || "direct"
    });
    store_token.set(
      localStorage.getItem("KWIKSESSIONTOKEN") || ""
    );
  };
  function setCookie(name, value, days = 1) {
    const d = /* @__PURE__ */ new Date();
    d.setTime(d.getTime() + days * 24 * 60 * 60 * 1e3);
    let expires = "expires=" + d.toUTCString();
    document.cookie = name + "=" + value + ";" + expires + ";path=/;SameSite=Strict;  ";
  }
  function getCookie$1(name) {
    const cookies = document.cookie.split(";");
    for (const cookie of cookies) {
      const [cookieName, cookieValue] = cookie.trim().split("=");
      if (cookieName === name) {
        return decodeURIComponent(cookieValue);
      }
    }
    return null;
  }
  const getStyleObject = (config) => {
    let style = "";
    if (config) {
      if (config.bgColor) {
        style += `background-color: ${config.bgColor};`;
      }
      if (config.textAlignment) {
        style += `text-align: ${config.textAlignment};`;
      }
      if (config.textColor) {
        style += `color: ${config.textColor};`;
      }
    }
    return style;
  };
  const verifyAdvancedConditions = (configObject, cart2) => {
    var _a;
    let conditions = configObject.conditions;
    for (const condition of conditions) {
      let context = eligibleCartItems(
        cart2,
        condition,
        configObject == null ? void 0 : configObject.excludeAutomaticDiscounts
      );
      let groupSatisfied = true;
      if ((_a = condition == null ? void 0 : condition.andConditions) == null ? void 0 : _a.length) {
        for (const andCondition of condition.andConditions) {
          context = eligibleCartItems(
            cart2,
            andCondition,
            configObject == null ? void 0 : configObject.excludeAutomaticDiscounts
          );
          groupSatisfied = groupSatisfied && isConditionFulfilled(andCondition, context);
          if (!groupSatisfied)
            break;
        }
      } else {
        groupSatisfied = isConditionFulfilled(condition, context);
      }
      if (!context.CART_QUANTITY && !context.CART_SUBTOTAL) {
        return false;
      }
      if (groupSatisfied) {
        return true;
      }
    }
    return false;
  };
  const verifyAdvancedConditionsBanner = (configObject, context) => {
    var _a;
    let conditions = configObject.conditions;
    for (const condition of conditions) {
      let groupSatisfied = true;
      if ((_a = condition == null ? void 0 : condition.andConditions) == null ? void 0 : _a.length) {
        for (const andCondition of condition.andConditions) {
          groupSatisfied = groupSatisfied && isConditionFulfilled(andCondition, context);
          if (!groupSatisfied)
            break;
        }
      } else {
        groupSatisfied = isConditionFulfilled(condition, context);
      }
      if (groupSatisfied) {
        return true;
      }
    }
    return false;
  };
  function isConditionFulfilled(condition, context) {
    const { field, operator, value } = condition;
    const actualValue = context[field];
    switch (operator) {
      case "LT":
        return actualValue < value;
      case "GT":
        return actualValue > value;
      case "EQ":
        return actualValue == value;
      case "LTE":
        return actualValue <= value;
      case "GTE":
        return actualValue >= value;
      case "NEQ":
        return actualValue !== value;
      default:
        throw new Error(`Unsupported operator: ${operator}`);
    }
  }
  const getExpectedFreebies = (freeGiftConfig2, cart2) => {
    var _a;
    let expectedFreebies = [];
    (_a = freeGiftConfig2 == null ? void 0 : freeGiftConfig2.freeGifts) == null ? void 0 : _a.forEach((freeGiftCondnObj) => {
      var _a2, _b, _c;
      if (freeGiftCondnObj.conditions) {
        if (verifyAdvancedConditions(freeGiftCondnObj, cart2)) {
          let repeatedGiftMultiplier = 1;
          let context;
          let valueRequired = +((_a2 = freeGiftCondnObj == null ? void 0 : freeGiftCondnObj.conditions[0]) == null ? void 0 : _a2.value) + 1;
          const shouldRepeatGiftAddition = (freeGiftCondnObj == null ? void 0 : freeGiftCondnObj.conditions.length) === 1 && ((_b = freeGiftCondnObj == null ? void 0 : freeGiftCondnObj.conditions[0]) == null ? void 0 : _b.field) === "CART_QUANTITY" && ((_c = freeGiftCondnObj == null ? void 0 : freeGiftCondnObj.conditions[0]) == null ? void 0 : _c.operator) === "GT" && (freeGiftCondnObj == null ? void 0 : freeGiftCondnObj.isRepeatedGift);
          if (shouldRepeatGiftAddition) {
            context = eligibleCartItems(
              cart2,
              freeGiftCondnObj == null ? void 0 : freeGiftCondnObj.conditions[0],
              freeGiftCondnObj == null ? void 0 : freeGiftCondnObj.excludeAutomaticDiscounts
            );
            repeatedGiftMultiplier = Math.floor(
              context.CART_QUANTITY / valueRequired
            );
            freeGiftCondnObj.gifts.forEach((i) => {
              const freebieIsAlreadyExpected = expectedFreebies.find(
                (item) => item.id === +cleanShopifyIds(i.shopifyFreeGiftVariantId)
              );
              if (freebieIsAlreadyExpected) {
                freebieIsAlreadyExpected.quantity += +i.quantity * repeatedGiftMultiplier;
              } else {
                expectedFreebies.push({
                  id: +cleanShopifyIds(i.shopifyFreeGiftVariantId),
                  quantity: +i.quantity * repeatedGiftMultiplier
                });
              }
            });
          } else {
            freeGiftCondnObj.gifts.forEach((i) => {
              const freebieIsAlreadyExpected = expectedFreebies.find(
                (item) => item.id === +cleanShopifyIds(i.shopifyFreeGiftVariantId)
              );
              if (freebieIsAlreadyExpected) {
                freebieIsAlreadyExpected.quantity += +i.quantity;
              } else {
                expectedFreebies.push({
                  id: +cleanShopifyIds(i.shopifyFreeGiftVariantId),
                  quantity: +i.quantity
                });
              }
            });
          }
        }
      }
    });
    return expectedFreebies;
  };
  const validateFreebiesBeforeCheckout = async (freeGiftConfig2, cart2) => {
    await freeGiftPromiseChain;
    try {
      if (!freeGiftConfig2)
        return { isValid: true };
      const expectedFreebies = getExpectedFreebies(freeGiftConfig2, cart2);
      const freeGiftVariantIds = ((freeGiftConfig2 == null ? void 0 : freeGiftConfig2.freeGifts) || []).flatMap(
        (fg) => fg.gifts.map((gift) => String(+cleanShopifyIds(gift.shopifyFreeGiftVariantId)))
      );
      const currentFreebies = cart2.items.filter(
        (item) => item.price === 0 && freeGiftVariantIds.includes(String(item.id))
      );
      const hasDiscrepancies = expectedFreebies.some((expected) => {
        const foundItems = currentFreebies.filter((current) => current.id === expected.id);
        const totalQuantity = foundItems.reduce((sum, item) => sum + item.quantity, 0);
        return foundItems.length === 0 || totalQuantity !== expected.quantity;
      }) || currentFreebies.some((current) => {
        const foundItems = expectedFreebies.filter((expected) => expected.id === current.id);
        return foundItems.length === 0;
      });
      if (hasDiscrepancies) {
        if (freeGiftConfig2) {
          await checkAndAddFreebie(freeGiftConfig2, cart2, false, expectedFreebies);
        }
        const updatedCart = await getCart();
        const updatedCurrentFreebies = updatedCart.items.filter(
          (item) => item.price === 0 && freeGiftVariantIds.includes(String(item.id))
        );
        const stillHasDiscrepancies = expectedFreebies.some((expected) => {
          const foundItems = updatedCurrentFreebies.filter(
            (current) => current.id === expected.id
          );
          const totalQuantity = foundItems.reduce(
            (sum, item) => sum + item.quantity,
            0
          );
          return foundItems.length === 0 || totalQuantity !== expected.quantity;
        }) || updatedCurrentFreebies.some((current) => {
          const foundItems = expectedFreebies.filter(
            (expected) => expected.id === current.id
          );
          return foundItems.length === 0;
        });
        if (stillHasDiscrepancies) {
          return {
            isValid: false,
            message: "Unable to validate free gifts. Please try again."
          };
        }
      }
      return { isValid: true };
    } catch (error) {
      console.error("Error validating freebies:", error);
      return {
        isValid: false,
        message: "Error validating free gifts. Please try again."
      };
    }
  };
  const checkAndAddFreebie = async (freeGiftConfig2, cart2, isRemovalOnly, expectedFreebies) => {
    freeGiftPromiseChain = freeGiftPromiseChain.then(async () => {
      const currentCart = get_store_value(store_cart);
      if (get_store_value(store_removeFreebies)) {
        return;
      }
      try {
        let allAddedProducts = [];
        let finalAddProductBody = [];
        let itemsToRemove = [];
        const freebies = (expectedFreebies || getExpectedFreebies(freeGiftConfig2, currentCart)).filter(
          (freebie) => !get_store_value(store_autoGiftAddFailedGifts).includes(freebie.id)
        );
        freebies.forEach((freebie) => {
          const cartFreebieItems = currentCart.items.filter(
            (cartItem) => cartItem.id === freebie.id
          );
          if (cartFreebieItems.length > 0) {
            const totalCartQuantity = cartFreebieItems.reduce((sum, item) => sum + item.quantity, 0);
            if (totalCartQuantity > freebie.quantity) {
              const sortedItems = [...cartFreebieItems].sort((a, b) => {
                var _a, _b, _c, _d;
                const aIsFreebie = ((_a = a.properties) == null ? void 0 : _a["_gokwik_freebie"]) === true || ((_b = a.properties) == null ? void 0 : _b["_gokwik_freebie"]) === "true";
                const bIsFreebie = ((_c = b.properties) == null ? void 0 : _c["_gokwik_freebie"]) === true || ((_d = b.properties) == null ? void 0 : _d["_gokwik_freebie"]) === "true";
                if (!aIsFreebie && bIsFreebie)
                  return -1;
                if (aIsFreebie && !bIsFreebie)
                  return 1;
                return 0;
              });
              let quantityToRemove = totalCartQuantity - freebie.quantity;
              for (let i = 0; i < sortedItems.length && quantityToRemove > 0; i++) {
                const item = sortedItems[i];
                if (item.quantity <= quantityToRemove) {
                  itemsToRemove.push({
                    id: item.key,
                    quantity: 0,
                    properties: (item == null ? void 0 : item.properties) || {}
                  });
                  quantityToRemove -= item.quantity;
                } else {
                  itemsToRemove.push({
                    id: item.key,
                    quantity: item.quantity - quantityToRemove,
                    properties: (item == null ? void 0 : item.properties) || {}
                  });
                  quantityToRemove = 0;
                }
              }
            }
            if (totalCartQuantity < freebie.quantity) {
              freebie.quantity = freebie.quantity - totalCartQuantity;
              allAddedProducts.push(freebie);
            }
          } else {
            allAddedProducts.push(freebie);
          }
        });
        const freeGiftVariantIds = ((freeGiftConfig2 == null ? void 0 : freeGiftConfig2.freeGifts) || []).flatMap(
          (fg) => fg.gifts.map((gift) => String(+cleanShopifyIds(gift.shopifyFreeGiftVariantId)))
        );
        const invalidFreebiesToRemove = currentCart.items.filter((cartItem) => {
          const isGiftVariant = freeGiftVariantIds.includes(String(cartItem.id));
          if (freebies.length === 0) {
            return isGiftVariant;
          }
          const isExpected = freebies.some((freebie) => freebie.id === cartItem.id);
          return isGiftVariant && !isExpected;
        }).map((cartItem) => ({
          id: cartItem.key,
          quantity: 0,
          properties: (cartItem == null ? void 0 : cartItem.properties) || {}
        }));
        itemsToRemove = [...itemsToRemove, ...invalidFreebiesToRemove];
        for (const item of itemsToRemove) {
          await changeCart(
            { id: item.id + "", quantity: item.quantity },
            true,
            (item == null ? void 0 : item.properties) || {}
          );
        }
        fireGokwikTrigger("freebie_removed_sc", {
          items_removed: itemsToRemove
        });
        if (itemsToRemove.length > 0) {
          logEvent("freebie_removed_sc", {
            items_removed: itemsToRemove
          });
          await getCart();
        }
        finalAddProductBody = allAddedProducts.map((i) => {
          return {
            id: i.id,
            quantity: i.quantity,
            properties: {
              "_gokwik_freebie": true
            }
          };
        });
        if (!finalAddProductBody.length) {
          return;
        }
        if (isRemovalOnly) {
          return;
        }
        const addToCartSuccess = await addToCart(
          { items: finalAddProductBody },
          true
        );
        if (addToCartSuccess) {
          await getCart();
          fireGokwikTrigger(TextConstants.eventNames.auto_add_to_cart, {
            event: TextConstants.eventNames.auto_add_to_cart,
            eventType: "auto-add-free-gift",
            items: addToCartSuccess == null ? void 0 : addToCartSuccess.items,
            items_changelog: addToCartSuccess == null ? void 0 : addToCartSuccess.items_changelog
          });
          logEvent("freebie_added_sc", { added_products: finalAddProductBody });
          updateCartFreebieVariantCountStore(freebies);
        }
        if (finalAddProductBody.length > 0 && (freeGiftConfig2 == null ? void 0 : freeGiftConfig2.displayCongratulationsMessage) && addToCartSuccess) {
          store_bottomSheet.set({
            component: MessageComponent,
            show: true,
            title: " Congratulations",
            type: "message",
            componentData: {
              message: "Freebie item has been added on your cart successfully, Enjoy!"
            },
            selfDestruct: 4e3
          });
        }
      } catch (error) {
        store_snackbar.set({
          message: "Error Adding Product",
          timer: 3e3,
          show: true,
          error: true
        });
      } finally {
      }
    });
    await freeGiftPromiseChain;
    store_freeGiftLoading.set(false);
  };
  const checkFreebieUnlocked = (freeGiftConfig2, cart2) => {
    var _a;
    let freebiesStatus = [];
    (_a = freeGiftConfig2 == null ? void 0 : freeGiftConfig2.freeGifts) == null ? void 0 : _a.forEach((freeGiftCondnObj) => {
      var _a2, _b, _c, _d, _e, _f, _g, _h, _i, _j;
      if (freeGiftCondnObj.conditions && freeGiftCondnObj.conditions.length === 1) {
        const cartItemsForFreeGift = eligibleCartItems(
          cart2,
          freeGiftCondnObj.conditions[0],
          freeGiftCondnObj == null ? void 0 : freeGiftCondnObj.excludeAutomaticDiscounts
        );
        const isValid = isConditionFulfilled(
          freeGiftCondnObj.conditions[0],
          cartItemsForFreeGift
        );
        const { field, value } = freeGiftCondnObj.conditions[0];
        const targetValue = +value + 1;
        const cartValue = {
          CART_QUANTITY: cartItemsForFreeGift.CART_QUANTITY,
          CART_DISCOUNT_PRICE: cartItemsForFreeGift.CART_DISCOUNT_PRICE,
          CART_SUBTOTAL: cartItemsForFreeGift.CART_SUBTOTAL
        }[field] || cartItemsForFreeGift.CART_SUBTOTAL;
        const progressPercentage = cartValue / targetValue * 100;
        freebiesStatus.push({
          isValid,
          quantity: cartItemsForFreeGift.CART_QUANTITY,
          subtotal: cartItemsForFreeGift.CART_SUBTOTAL,
          discountedPrice: cartItemsForFreeGift.CART_DISCOUNT_PRICE,
          freeGift: freeGiftCondnObj,
          progressPercentage: progressPercentage > 100 ? 100 : progressPercentage,
          freeGiftImageUrl: ((_a2 = freeGiftCondnObj == null ? void 0 : freeGiftCondnObj.freeGiftImageUrl) == null ? void 0 : _a2.enable) && ((_b = freeGiftCondnObj == null ? void 0 : freeGiftCondnObj.freeGiftImageUrl) == null ? void 0 : _b.value) && ((_d = (_c = freeGiftCondnObj == null ? void 0 : freeGiftCondnObj.freeGiftImageUrl) == null ? void 0 : _c.value) == null ? void 0 : _d.length) > 0 ? (_e = freeGiftCondnObj == null ? void 0 : freeGiftCondnObj.freeGiftImageUrl) == null ? void 0 : _e.value : ""
        });
      } else {
        freebiesStatus.push({
          isValid: false,
          quantity: 0,
          subtotal: 0,
          discountedPrice: 0,
          freeGift: freeGiftCondnObj,
          progressPercentage: 0,
          freeGiftImageUrl: ((_f = freeGiftCondnObj == null ? void 0 : freeGiftCondnObj.freeGiftImageUrl) == null ? void 0 : _f.enable) && ((_g = freeGiftCondnObj == null ? void 0 : freeGiftCondnObj.freeGiftImageUrl) == null ? void 0 : _g.value) && ((_i = (_h = freeGiftCondnObj == null ? void 0 : freeGiftCondnObj.freeGiftImageUrl) == null ? void 0 : _h.value) == null ? void 0 : _i.length) > 0 ? (_j = freeGiftCondnObj == null ? void 0 : freeGiftCondnObj.freeGiftImageUrl) == null ? void 0 : _j.value : ""
        });
      }
    });
    freebiesStatus = freebiesStatus.sort(
      (a, b) => b.progressPercentage - a.progressPercentage
    );
    return freebiesStatus;
  };
  const setThemeStyles = (configs) => {
    var _a, _b, _c;
    const bodyElement = document.querySelector("body");
    if (bodyElement) {
      const bodyStyles = window.getComputedStyle(bodyElement);
      const colorValues = bodyStyles.color.match(/\d+/g);
      if (colorValues && colorValues.length >= 3) {
        const [r, g, b] = colorValues.map(Number);
        if (r >= 250 && g >= 250 && b >= 250) {
          document.documentElement.style.setProperty("--gokwik-text-color", "black");
        }
      }
    }
    let themeColor = ((_a = configs.appearance) == null ? void 0 : _a.themeColor) || TextConstants.cssConstants.primaryColor;
    let themeFont = ((_b = configs.appearance) == null ? void 0 : _b.textStyle) === "theme" && (document == null ? void 0 : document.querySelector("body")) && ((_c = window.getComputedStyle(document == null ? void 0 : document.querySelector("body"))) == null ? void 0 : _c.fontFamily) ? window.getComputedStyle(document == null ? void 0 : document.querySelector("body")).fontFamily : TextConstants.cssConstants.fontStyle;
    document.documentElement.style.setProperty("--gokwik-font-style", themeFont);
    document.documentElement.style.setProperty(
      "--gokwik-primary-color",
      themeColor
    );
  };
  const eligibleCartItems = (cart2, condition, excludeAutomaticDiscounts = false) => {
    var _a;
    let freebieItems = getShopifyFreeGiftProductIds(freeGiftConfig$1 == null ? void 0 : freeGiftConfig$1.freeGifts);
    let eligibleItems = ((_a = cart2 == null ? void 0 : cart2.items) == null ? void 0 : _a.filter(
      (item) => {
        var _a2;
        return !(freebieItems == null ? void 0 : freebieItems.includes(item.product_id)) && !((_a2 = item == null ? void 0 : item.properties) == null ? void 0 : _a2["_gokwik_freebie"]);
      }
    )) || [];
    eligibleItems = getMatchingProducts(eligibleItems, condition);
    let quantity = 0, amount = 0;
    eligibleItems.forEach((item) => {
      quantity += item.quantity;
      amount += excludeAutomaticDiscounts ? item.line_price : item.original_line_price;
    });
    return { CART_QUANTITY: quantity, CART_SUBTOTAL: amount / 100, CART_DISCOUNT_PRICE: +get_store_value(store_totalPayableAmount) };
  };
  const initDashboardConfigLoader = () => {
    window.addEventListener("message", (event) => {
      if (event.origin.includes("https://dashboard.kwikcart.gokwik.co")) {
        if (JSON.parse(event.data).type === TextConstants.misc_text.dashboard_preview_message) {
          store_configurations.update((oldObj) => ({
            ...oldObj,
            ...JSON.parse(event.data).config
          }));
        }
      }
    });
  };
  function getMatchingProducts(cartItems, condition) {
    if ("field" in condition && (condition == null ? void 0 : condition.field) === "CART_DISCOUNT_PRICE") {
      return cartItems;
    }
    const selectedProducts = [];
    const selectedVariants = [];
    if (condition == null ? void 0 : condition.selectedProducts) {
      condition.selectedProducts.forEach((product) => {
        if (product.selectedVariants) {
          product.selectedVariants.forEach((variant) => {
            selectedVariants.push(cleanShopifyIds(variant.variantId));
          });
        } else {
          selectedProducts.push(cleanShopifyIds(product.productId));
        }
      });
    }
    const matchingProducts = (cartItems == null ? void 0 : cartItems.filter(
      (item) => selectedProducts.includes(`${item.product_id}`) || selectedVariants.includes(`${item.variant_id}`)
    )) || [];
    return matchingProducts;
  }
  function snakeToCamel(jsonObj) {
    if (Array.isArray(jsonObj)) {
      return jsonObj.map((item) => snakeToCamel(item));
    } else if (jsonObj !== null && typeof jsonObj === "object") {
      return Object.keys(jsonObj).reduce((newObj, key) => {
        const camelCaseKey = key.replace(
          /_([a-z])/g,
          (_, char) => char.toUpperCase()
        );
        newObj[camelCaseKey] = snakeToCamel(jsonObj[key]);
        return newObj;
      }, {});
    }
    return jsonObj;
  }
  function camelToSnakeCaseJson(obj) {
    if (Array.isArray(obj)) {
      return obj.map((item) => camelToSnakeCaseJson(item));
    } else if (obj !== null && typeof obj === "object") {
      return Object.keys(obj).reduce((acc, key) => {
        const snakeKey = camelToSnakeCase(key);
        acc[snakeKey] = camelToSnakeCaseJson(obj[key]);
        return acc;
      }, {});
    }
    return obj;
  }
  function camelToSnakeCase(camelString) {
    return camelString.replace(/([a-z0-9])([A-Z])/g, "$1_$2").toLowerCase();
  }
  const calculateTotalPayable = (cart2) => {
    let appliedManualDiscount = (manualDiscount$2 == null ? void 0 : manualDiscount$2.total_discount) || 0;
    let totalPayable2 = cart2.total_price / 100 - Number(appliedManualDiscount);
    let savedAmount = cart2.original_total_price / 100 - cart2.total_price / 100 + Number(appliedManualDiscount) + Number((manualDiscount$2 == null ? void 0 : manualDiscount$2.gwpDiscount) || 0);
    const { totalSavings } = calculateMRPDiscount(cart2);
    store_totalSavings.set(savedAmount + (totalSavings || 0));
    store_totalPayableAmount.set(totalPayable2);
  };
  const setOneClickOffer = async (oneClickConfig, availableOffers) => {
    var _a;
    let oneClickCoupon = null;
    if (!oneClickConfig || manualDiscount$2 && !(oneClickConfig == null ? void 0 : oneClickConfig.autoApply) || !(oneClickConfig == null ? void 0 : oneClickConfig.isActive) || availableOffers.length === 0 || (oneClickConfig == null ? void 0 : oneClickConfig.type) === "exact_discount" && !(oneClickConfig == null ? void 0 : oneClickConfig.code)) {
      store_oneClickCoupon.set(null);
      if (isDiscountAutoApplied()) {
        store_appliedManualDiscount.set(null);
        setCookie("discount_code", "", -1);
        setCookie("coupon_applied", "", -1);
      }
      return;
    }
    if ((oneClickConfig == null ? void 0 : oneClickConfig.type) === "exact_discount" && (oneClickConfig == null ? void 0 : oneClickConfig.code)) {
      oneClickCoupon = availableOffers.find(
        ({ discountCode }) => {
          var _a2;
          return discountCode.toLocaleLowerCase() === ((_a2 = oneClickConfig == null ? void 0 : oneClickConfig.code) == null ? void 0 : _a2.toLocaleLowerCase());
        }
      );
    } else if ((oneClickConfig == null ? void 0 : oneClickConfig.type) === "min_discount") {
      oneClickCoupon = availableOffers.reduce(
        (acc, curr) => !curr.freeProductCount && curr.amountSaved && curr.amountSaved < acc.amountSaved ? curr : acc,
        availableOffers[0] || void 0
      );
    } else if ((oneClickConfig == null ? void 0 : oneClickConfig.type) === "max_discount") {
      oneClickCoupon = availableOffers.reduce(
        (acc, curr) => !curr.freeProductCount && curr.amountSaved > acc.amountSaved ? curr : acc,
        availableOffers[0] || void 0
      );
    }
    if (oneClickConfig.autoApply || oneClickConfig.applied) {
      if (oneClickCoupon) {
        const response = await applyDiscount(
          oneClickCoupon == null ? void 0 : oneClickCoupon.discountCode,
          "outside",
          void 0,
          void 0,
          true
        );
        if ((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.isValid) {
          store_oneClickCoupon.set(oneClickCoupon);
          if (!get_store_value(store_showConfetti)) {
            store_showConfetti.set(true);
          }
          return oneClickCoupon;
        }
      }
      if (isDiscountAutoApplied()) {
        store_appliedManualDiscount.set(null);
        setCookie("discount_code", "", -1);
        setCookie("coupon_applied", "", -1);
      }
      store_oneClickCoupon.set(null);
    }
    return oneClickCoupon;
  };
  const cleanShopifyIds = (id) => {
    var _a;
    return (_a = id == null ? void 0 : id.replace("gid://shopify/ProductVariant/", "")) == null ? void 0 : _a.replace("gid://shopify/Product/", "");
  };
  function getShopifyFreeGiftProductIds(config) {
    const giftProductIds = [];
    config == null ? void 0 : config.forEach((gift) => {
      if (gift.gifts) {
        gift.gifts.forEach((gift2) => {
          if (gift2.shopifyFreeGiftProductId) {
            giftProductIds.push(+cleanShopifyIds(gift2.shopifyFreeGiftProductId));
          }
        });
      }
    });
    return giftProductIds;
  }
  const calculateMRPDiscount = (cart2) => {
    var _a;
    let cartTotal = 0;
    let totalSavings = 0;
    (_a = cart2.items) == null ? void 0 : _a.forEach((item) => {
      var _a2, _b;
      cartTotal += showMRPDiscount && ((_a2 = productDetails[item.id]) == null ? void 0 : _a2.compare_at_price) / 100 * item.quantity || item.original_line_price / 100 || item.original_price / 100;
      if (((_b = productDetails[item.id]) == null ? void 0 : _b.compare_at_price) && showMRPDiscount) {
        totalSavings += productDetails[item.id].compare_at_price / 100 * item.quantity - item.original_line_price / 100;
      }
    });
    cartTotal = cartTotal + Number((manualDiscount$2 == null ? void 0 : manualDiscount$2.gwpDiscount) || 0);
    return {
      cartTotal,
      totalSavings
    };
  };
  const getItemLevelMRP = (item) => {
    var _a;
    if (!(item == null ? void 0 : item.id))
      return 0;
    return showMRPDiscount && ((_a = productDetails[item.id]) == null ? void 0 : _a.compare_at_price) * item.quantity || item.original_line_price || item.original_price;
  };
  function loadGoogleFonts() {
    const fontLink = document.createElement("link");
    fontLink.rel = "stylesheet";
    fontLink.href = "https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap";
    document.head.appendChild(fontLink);
  }
  const serialize = (productFormWrapper) => {
    if (!productFormWrapper) {
      return {};
    }
    let obj = {};
    let elements = productFormWrapper.querySelectorAll("input, select, textarea");
    for (let i = 0; i < elements.length; ++i) {
      let element2 = elements[i];
      let name = element2 == null ? void 0 : element2.name;
      let value = element2 == null ? void 0 : element2.value;
      if (name) {
        obj[name] = value;
      }
    }
    return obj;
  };
  const addItemtoCartFromForm = async (event) => {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    const button = event.target;
    const form = button == null ? void 0 : button.closest("form");
    const serializedForm = serialize(form);
    let id = serializedForm == null ? void 0 : serializedForm.id;
    let quantity = serializedForm == null ? void 0 : serializedForm.quantity;
    let itemLevelProperties = {};
    if (Object.keys(serializedForm).find((key) => key.startsWith("properties["))) {
      itemLevelProperties = Object.keys(serializedForm).filter((key) => key.startsWith("properties[")).reduce((acc, key) => {
        const propName = key.replace("properties[", "").replace("]", "");
        if (!propName)
          return acc;
        acc[propName] = serializedForm[key];
        return acc;
      }, {});
    }
    if (!id) {
      id = (_a = document.querySelector("input[name='id']")) == null ? void 0 : _a.value;
      try {
        if (!id && button) {
          const matchedAttributes = {};
          for (const attr2 of button.attributes) {
            const name = attr2.name.toLowerCase();
            if (name.includes("variant") || name.includes("id") || name.includes("variantid") || name.includes("variant_id")) {
              matchedAttributes[attr2.name] = attr2.value;
              if (!id && /^\d+$/.test(attr2.value)) {
                id = attr2.value;
              }
            }
          }
        }
      } catch (err) {
        console.log("match attribute error", err);
      }
    }
    if (!quantity) {
      quantity = ((_b = document.querySelector(
        "input[name='quantity']"
      )) == null ? void 0 : _b.value) || 1;
    }
    const res = await addToCart(
      {
        id,
        quantity,
        properties: itemLevelProperties
      },
      false
    );
    if (res) {
      if (((_d = (_c = configurations$1 == null ? void 0 : configurations$1.appearance) == null ? void 0 : _c.atcBehaviour) == null ? void 0 : _d.type) === "OPENCART") {
        window.openGokwikSideCart();
      } else if (((_f = (_e = configurations$1 == null ? void 0 : configurations$1.appearance) == null ? void 0 : _e.atcBehaviour) == null ? void 0 : _f.type) === "POPUP") {
        store_toastMsgConfig.set({
          showToast: true,
          msg: ((_h = (_g = configurations$1 == null ? void 0 : configurations$1.appearance) == null ? void 0 : _g.atcBehaviour) == null ? void 0 : _h.text) || "Item added to cart successfully!",
          type: "success",
          backgroundColor: configurations$1.appearance.atcBehaviour.backgroundColor,
          textColor: configurations$1.appearance.atcBehaviour.textColor
        });
      }
      fireGokwikTrigger(TextConstants.eventNames.add_to_cart_clicked, {
        event: TextConstants.eventNames.add_to_cart_clicked,
        item: res
      });
    }
  };
  const hideOtherCarts = (defaultSelectors) => {
    var _a, _b, _c;
    const merchantSelector = ((_a = configurations$1 == null ? void 0 : configurations$1.appearance) == null ? void 0 : _a.merchantCartDrawerSelector) ?? "";
    const globalSelectors = ((_b = configurations$1 == null ? void 0 : configurations$1.appearance) == null ? void 0 : _b.global_cart_drawer_selector) ?? "";
    let elementsToHide = [];
    const preventDefaultCartSelectors = (_c = configurations$1 == null ? void 0 : configurations$1.appearance) == null ? void 0 : _c.preventDefaultCartSelectors;
    if (merchantSelector) {
      const elements = Array.from(
        document.querySelectorAll(merchantSelector)
      );
      if (elements.length) {
        elementsToHide = elements;
      }
    }
    if (elementsToHide.length === 0 && !preventDefaultCartSelectors) {
      defaultSelectors.forEach((selector) => {
        const elements = Array.from(
          document.querySelectorAll(selector)
        );
        if (elements.length) {
          elementsToHide.push(...elements);
        }
      });
    }
    if (elementsToHide.length === 0 && globalSelectors) {
      const elements = Array.from(
        document.querySelectorAll(globalSelectors)
      );
      if (elements.length) {
        elementsToHide = elements;
      }
    }
    elementsToHide.forEach((el) => {
      if (el && (el == null ? void 0 : el.nodeName) !== "HTML" && (el == null ? void 0 : el.nodeName) !== "BODY") {
        el.style.display = "none";
        el.style.opacity = "0";
        el.style.width = "0";
        el.style.height = "0";
      }
      if (el && (el == null ? void 0 : el.nodeName) === "DIALOG") {
        const dialogElement = el;
        dialogElement.showModal = () => {
        };
        dialogElement.close = () => {
        };
      }
    });
    if (preventDefaultCartSelectors) {
      return;
    }
    createHideCartStyle();
  };
  const createHideCartStyle = () => {
    const otherSideCarts2 = [
      "cart-drawer",
      "#monster-upsell-cart",
      ".halo-cart-sidebar",
      "#halo-cart-sidebar",
      "#CartDrawer",
      "#site-cart-sidebar",
      ".shopify-section.shopify-section-group-group-overlay",
      ".mm-ajaxcart",
      ".mm-ajaxcart-overlay.has--active",
      ".mm-ajaxcart-overlay",
      ".background-overlay"
    ];
    const style = document.createElement("style");
    const modifiedSelectors = otherSideCarts2.map(
      (selector) => `${selector}:not(html):not(body)`
    );
    style.innerHTML = `
    .main-content::after,
    .js-drawer-open:not(html):not(body)::after { 
      content: none !important; 
      display: none !important; 
    }
    
    ${modifiedSelectors.join(", ")} {
      display: none !important;
      opacity: 0 !important;
      width: 0 !important;
      height: 0 !important;
      visibility: hidden !important;
      pointer-events: none !important;
    }
  `;
    document.head.appendChild(style);
  };
  const runCartHideMO = () => {
    try {
      const observer = new MutationObserver((mutations, obs) => {
        const foundSelectors = /* @__PURE__ */ new Set();
        mutations.forEach((mutation) => {
          mutation.addedNodes.forEach((node) => {
            if (node instanceof HTMLElement) {
              TextConstants.otherSideCarts.forEach((selector) => {
                if (node.matches(selector) || node.querySelector(selector)) {
                  foundSelectors.add(selector);
                }
              });
            }
          });
        });
        if (foundSelectors.size > 0) {
          hideOtherCarts([...foundSelectors]);
          obs.disconnect();
        }
      });
      const targetNode = document.body;
      observer.observe(targetNode, { childList: true, subtree: true });
    } catch (err) {
      console.log(err);
    }
  };
  const filterCartItems = (cart2) => {
    return {
      ...cart2,
      items: cart2.items.filter((item) => (item == null ? void 0 : item.quantity) > 0)
    };
  };
  const runCartIconMO = () => {
    const cartIconParentElementsString = localStorage.getItem(
      "gokwik-sidecart-cart-icon-element"
    );
    const cartIconParentElements = JSON.parse(cartIconParentElementsString || "[]");
    const observers = [];
    cartIconParentElements.forEach((cartIcon) => {
      const classNameSelector = "." + cartIcon.parentClassNameSelector.trim().split(/\s+/).join(".");
      const cartIconParentElement = document.querySelector(classNameSelector);
      if (cartIconParentElement) {
        try {
          const observer = new MutationObserver((mutations, obs) => {
            mutations.forEach((mutation) => {
              mutation.addedNodes.forEach((node) => {
                if (node instanceof HTMLElement && node.matches(cartIcon.elementSelector)) {
                  node.removeAttribute("onclick");
                  node.addEventListener("click", (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    window.openGokwikSideCart();
                  });
                }
              });
            });
          });
          observer.observe(cartIconParentElement, {
            childList: true,
            subtree: true
          });
          observers.push(observer);
        } catch (err) {
          console.log(err);
        }
      }
    });
    return observers;
  };
  const updateVariantAvailability = async (configResponse) => {
    var _a, _b, _c, _d, _e, _f, _g;
    if (!((_a = configResponse == null ? void 0 : configResponse.upSell) == null ? void 0 : _a.enable))
      return;
    const upsellVariantIds = ((_c = (_b = configResponse == null ? void 0 : configResponse.upSell) == null ? void 0 : _b.standard) == null ? void 0 : _c.flatMap(
      (upsellConfig) => {
        var _a2;
        return ((_a2 = upsellConfig == null ? void 0 : upsellConfig.suggestedUpsellProducts) == null ? void 0 : _a2.flatMap(
          (product) => {
            var _a3;
            return (_a3 = product == null ? void 0 : product.selectedVariants) == null ? void 0 : _a3.map(
              (variant) => cleanShopifyIds(variant.variantId)
            );
          }
        )) ?? [];
      }
    )) ?? [];
    const oneTickUpsellVariantIds = ((_e = (_d = configResponse == null ? void 0 : configResponse.oneTickUpsell) == null ? void 0 : _d.products) == null ? void 0 : _e.flatMap(
      (product) => {
        var _a2;
        return (_a2 = product == null ? void 0 : product.selectedVariants) == null ? void 0 : _a2.map(
          (variant) => cleanShopifyIds(variant.variantId)
        );
      }
    )) ?? [];
    const UserSelectedFreeGifts = ((_f = configResponse == null ? void 0 : configResponse.freeGifts) == null ? void 0 : _f.offerType) === "USER_SELECTED" ? (_g = configResponse == null ? void 0 : configResponse.freeGifts) == null ? void 0 : _g.freeGifts : [];
    const userSelectedFreeGiftsVariantIds = (UserSelectedFreeGifts == null ? void 0 : UserSelectedFreeGifts.flatMap(
      (freebieConfig) => {
        var _a2;
        return (_a2 = freebieConfig == null ? void 0 : freebieConfig.gifts) == null ? void 0 : _a2.map((freebie) => cleanShopifyIds(freebie.shopifyFreeGiftVariantId));
      }
    )) ?? [];
    upsellVariantIds.push(...oneTickUpsellVariantIds, ...userSelectedFreeGiftsVariantIds);
    const availabilityMap = await batchCheckVariantsAvailability(upsellVariantIds);
    store_productDetails.update((oldObj) => ({
      ...oldObj,
      ...availabilityMap
    }));
  };
  const batchCheckVariantsAvailability = async (variantIds) => {
    if (!variantIds || variantIds.length === 0) {
      return {};
    }
    const existingProductDetails = get_store_value(store_productDetails);
    variantIds = variantIds.filter((variantId) => !existingProductDetails[variantId]);
    if (variantIds.length === 0) {
      return {};
    }
    const variantMap = await batchProcessVariants(variantIds, 5);
    return variantMap;
  };
  const batchProcessVariants = async (variantIds, batchSize) => {
    if (!variantIds || variantIds.length === 0) {
      return {};
    }
    const variantMap = {};
    try {
      for (let i = 0; i < variantIds.length; i += batchSize) {
        const batch = variantIds.slice(i, i + batchSize);
        const promises = batch.map(async (variantId) => {
          try {
            const { available, compare_at_price } = await getVariantData(variantId);
            variantMap[variantId] = { available, compare_at_price };
          } catch (innerError) {
            console.error(
              `Error in batch processing for variant ${variantId}:`,
              innerError
            );
            variantMap[variantId] = { available: true, compare_at_price: 0 };
          }
        });
        await Promise.all(promises);
      }
      return variantMap;
    } catch (error) {
      console.error("Error in batch checking variants availability:", error);
      return variantIds.reduce(
        (map, id) => {
          map[id] = { available: true, compare_at_price: 0 };
          return map;
        },
        {}
      );
    }
  };
  const isVariantAvailable = (variantId) => {
    var _a;
    variantId = cleanShopifyIds(variantId);
    const availabilityMap = get_store_value(store_productDetails);
    return !availabilityMap.hasOwnProperty(variantId) || (((_a = availabilityMap[variantId]) == null ? void 0 : _a.available) ?? true);
  };
  const addCartIconFunction = (element2) => {
    element2.removeAttribute("onclick");
    element2.addEventListener(
      "click",
      (e) => {
        e.preventDefault();
        e.stopPropagation();
        window.openGokwikSideCart();
        fireGokwikTrigger(TextConstants.eventNames.view_cart_clicked, {
          event: TextConstants.eventNames.view_cart_clicked,
          cart: get_store_value(store_cart)
        });
      },
      true
    );
  };
  const getUpsellProperties = (existingProperties = {}, isUpsell = false) => {
    if (!isUpsell)
      return existingProperties;
    return {
      ...existingProperties,
      "_gokwik_upsell": "true"
    };
  };
  const containsOnlyUpsellProducts = (cart2) => {
    var _a;
    if (!((_a = cart2 == null ? void 0 : cart2.items) == null ? void 0 : _a.length))
      return false;
    return cart2.items.every(
      (item) => item.properties && item.properties["_gokwik_upsell"] === "true"
    );
  };
  const getAllowedCartItems = () => {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    const cartItems = ((_a = get_store_value(store_cart)) == null ? void 0 : _a.items) || [];
    if (((_c = (_b = configurations$1 == null ? void 0 : configurations$1.appearance) == null ? void 0 : _b.limitProductsInCart) == null ? void 0 : _c.enable) && ((_f = (_e = (_d = configurations$1 == null ? void 0 : configurations$1.appearance) == null ? void 0 : _d.limitProductsInCart) == null ? void 0 : _e.conditions) == null ? void 0 : _f.length)) {
      const limitProductsInCart = (_g = configurations$1 == null ? void 0 : configurations$1.appearance) == null ? void 0 : _g.limitProductsInCart;
      let eligibleItems = cartItems.filter((item) => {
        var _a2;
        return !((_a2 = item == null ? void 0 : item.properties) == null ? void 0 : _a2["_gokwik_freebie"]);
      }) || [];
      for (const condition of limitProductsInCart == null ? void 0 : limitProductsInCart.conditions) {
        if ((_h = condition == null ? void 0 : condition.selectedProducts) == null ? void 0 : _h.length) {
          const matchingProducts = getMatchingProducts(eligibleItems, condition);
          const combinedProductQuantities = Object.values(
            matchingProducts.reduce((acc, { id, quantity, key }) => {
              acc[id] = acc[id] ? { id, key, quantity: acc[id].quantity + quantity } : { id, key, quantity };
              return acc;
            }, {})
          );
          for (const item of combinedProductQuantities) {
            const existingItem = allowedCartItems.find(
              (allowedItem) => allowedItem.item.id === item.id
            );
            if (existingItem) {
              if ((condition == null ? void 0 : condition.maxProducts) < existingItem.quantity) {
                existingItem.quantity = condition == null ? void 0 : condition.maxProducts;
              }
              existingItem.item = item;
            } else {
              allowedCartItems.push({
                item,
                quantity: condition == null ? void 0 : condition.maxProducts
              });
            }
          }
        } else if ((condition == null ? void 0 : condition.itemCategory) === "all") {
          for (const item of eligibleItems) {
            const existingItem = allowedCartItems.find(
              (allowedItem) => allowedItem.item.id === item.id
            );
            if (existingItem) {
              if ((condition == null ? void 0 : condition.maxProducts) < existingItem.quantity) {
                existingItem.quantity = condition == null ? void 0 : condition.maxProducts;
              }
              existingItem.item = item;
            } else {
              allowedCartItems.push({
                item,
                quantity: condition == null ? void 0 : condition.maxProducts
              });
            }
          }
        }
      }
    }
  };
  const shouldAllowAddToCart = (item, quantity, isChange = false) => {
    var _a, _b, _c, _d, _e, _f;
    if (((_b = (_a = configurations$1 == null ? void 0 : configurations$1.appearance) == null ? void 0 : _a.limitProductsInCart) == null ? void 0 : _b.enable) && ((_e = (_d = (_c = configurations$1 == null ? void 0 : configurations$1.appearance) == null ? void 0 : _c.limitProductsInCart) == null ? void 0 : _d.conditions) == null ? void 0 : _e.length)) {
      const cartItems = ((_f = get_store_value(store_cart)) == null ? void 0 : _f.items) || [];
      const allowedCartItem = allowedCartItems == null ? void 0 : allowedCartItems.find((cartItem) => {
        var _a2, _b2;
        return ((_a2 = cartItem == null ? void 0 : cartItem.item) == null ? void 0 : _a2.id) === (item == null ? void 0 : item.id) || ((_b2 = cartItem == null ? void 0 : cartItem.item) == null ? void 0 : _b2.key) === (item == null ? void 0 : item.id);
      });
      if (allowedCartItem) {
        const isInCart = cartItems == null ? void 0 : cartItems.find((cartItem) => {
          return (cartItem == null ? void 0 : cartItem.id) === (item == null ? void 0 : item.id) || (cartItem == null ? void 0 : cartItem.key) === (item == null ? void 0 : item.id);
        });
        const newQuantity = isInCart && !isChange ? (isInCart == null ? void 0 : isInCart.quantity) + quantity : quantity;
        if (newQuantity > (allowedCartItem == null ? void 0 : allowedCartItem.quantity)) {
          store_snackbar.set({
            show: true,
            message: `You can add only ${allowedCartItem == null ? void 0 : allowedCartItem.quantity} quantity of this product to cart`,
            error: true,
            timer: 3e3
          });
          return false;
        }
      }
    }
    return true;
  };
  const removeInvalidProductsFromCart = async (cart2) => {
    var _a, _b, _c, _d, _e;
    if (((_b = (_a = configurations$1 == null ? void 0 : configurations$1.appearance) == null ? void 0 : _a.limitProductsInCart) == null ? void 0 : _b.enable) && ((_e = (_d = (_c = configurations$1 == null ? void 0 : configurations$1.appearance) == null ? void 0 : _c.limitProductsInCart) == null ? void 0 : _d.conditions) == null ? void 0 : _e.length)) {
      const cartItems = (cart2 == null ? void 0 : cart2.items) || [];
      getAllowedCartItems();
      for (const allowedItem of allowedCartItems) {
        let isRemoved = false;
        const matchingItems = cartItems.filter(
          (item) => item.id === allowedItem.item.id
        );
        const totalQuantity = matchingItems.reduce(
          (sum, item) => sum + item.quantity,
          0
        );
        if (totalQuantity > allowedItem.quantity) {
          const freeItems = matchingItems.filter(
            (item) => {
              var _a2;
              return item.price === 0 || ((_a2 = item.properties) == null ? void 0 : _a2["_gokwik_freebie"]) === true;
            }
          );
          const paidItems = matchingItems.filter(
            (item) => {
              var _a2;
              return item.price > 0 && !((_a2 = item.properties) == null ? void 0 : _a2["_gokwik_freebie"]);
            }
          );
          const freeItemsQuantity = freeItems.reduce(
            (sum, item) => sum + item.quantity,
            0
          );
          const paidItemsQuantity = paidItems.reduce(
            (sum, item) => sum + item.quantity,
            0
          );
          let remainingAllowedQuantity = allowedItem.quantity;
          let newQuantities = /* @__PURE__ */ new Map();
          if (freeItemsQuantity <= remainingAllowedQuantity) {
            freeItems.forEach((item) => {
              const key = item.key;
              newQuantities.set(key, item.quantity);
            });
            remainingAllowedQuantity -= freeItemsQuantity;
          } else {
            const ratio = remainingAllowedQuantity / freeItemsQuantity;
            let allocated = 0;
            freeItems.forEach((item) => {
              const newQty = Math.floor(item.quantity * ratio);
              const key = item.key;
              newQuantities.set(key, newQty);
              allocated += newQty;
            });
            let remainder = remainingAllowedQuantity - allocated;
            for (const item of freeItems) {
              if (remainder <= 0)
                break;
              const key = item.key;
              const currentQty = newQuantities.get(key) || 0;
              newQuantities.set(key, currentQty + 1);
              remainder--;
            }
            remainingAllowedQuantity = 0;
          }
          if (remainingAllowedQuantity > 0 && paidItemsQuantity > 0) {
            const ratio = remainingAllowedQuantity / paidItemsQuantity;
            let allocated = 0;
            paidItems.forEach((item) => {
              const newQty = Math.floor(item.quantity * ratio);
              const key = item.key;
              newQuantities.set(key, newQty);
              allocated += newQty;
            });
            let remainder = remainingAllowedQuantity - allocated;
            for (const item of paidItems) {
              if (remainder <= 0)
                break;
              const key = item.key;
              const currentQty = newQuantities.get(key) || 0;
              newQuantities.set(key, currentQty + 1);
              remainder--;
            }
          }
          for (const item of matchingItems) {
            const key = item.key;
            const newQuantity = newQuantities.get(key);
            if (newQuantity !== void 0 && newQuantity !== item.quantity) {
              try {
                await changeCart({ id: key, quantity: newQuantity });
                isRemoved = true;
              } catch (error) {
                console.error(`Error updating cart item ${key}:`, error);
              }
            }
          }
          if (isRemoved) {
            store_snackbar.set({
              show: true,
              message: `You can add only ${allowedItem.quantity} quantity of this product to cart`,
              error: true,
              timer: 3e3
            });
          }
        }
      }
    }
  };
  const shouldAllowUpsellAddToCart = (item, quantity, isChange = false) => {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i;
    if (((_b = (_a = configurations$1 == null ? void 0 : configurations$1.upSell) == null ? void 0 : _a.limitUpsellProducts) == null ? void 0 : _b.enable) && ((_d = (_c = configurations$1 == null ? void 0 : configurations$1.upSell) == null ? void 0 : _c.limitUpsellProducts) == null ? void 0 : _d.maxProducts) !== void 0) {
      const cartItems = ((_e = get_store_value(store_cart)) == null ? void 0 : _e.items) || [];
      const isInCart = cartItems == null ? void 0 : cartItems.find((cartItem) => {
        var _a2;
        return ((cartItem == null ? void 0 : cartItem.id) === (item == null ? void 0 : item.id) || (cartItem == null ? void 0 : cartItem.key) === (item == null ? void 0 : item.id)) && ((_a2 = cartItem == null ? void 0 : cartItem.properties) == null ? void 0 : _a2["_gokwik_upsell"]) === "true";
      });
      const newQuantity = isInCart && !isChange ? (isInCart == null ? void 0 : isInCart.quantity) + quantity : quantity;
      if (newQuantity > ((_g = (_f = configurations$1 == null ? void 0 : configurations$1.upSell) == null ? void 0 : _f.limitUpsellProducts) == null ? void 0 : _g.maxProducts)) {
        store_snackbar.set({
          show: true,
          message: `You can add only ${(_i = (_h = configurations$1 == null ? void 0 : configurations$1.upSell) == null ? void 0 : _h.limitUpsellProducts) == null ? void 0 : _i.maxProducts} quantity of each upsell products to cart`,
          error: true,
          timer: 3e3
        });
        return false;
      }
    }
    return true;
  };
  function isDiscountAutoApplied() {
    var _a, _b, _c, _d, _e, _f;
    if (!(((_a = configurations$1 == null ? void 0 : configurations$1.oneClickOffer) == null ? void 0 : _a.autoApply) && ((_b = configurations$1 == null ? void 0 : configurations$1.oneClickOffer) == null ? void 0 : _b.isActive)))
      return false;
    const { type, code } = (configurations$1 == null ? void 0 : configurations$1.oneClickOffer) || {};
    if (type !== "exact_discount") {
      return ((_c = manualDiscount$2 == null ? void 0 : manualDiscount$2.title) == null ? void 0 : _c.toLocaleLowerCase()) === ((_e = (_d = get_store_value(store_oneClickCoupon)) == null ? void 0 : _d.discountCode) == null ? void 0 : _e.toLocaleLowerCase());
    }
    return ((_f = manualDiscount$2 == null ? void 0 : manualDiscount$2.title) == null ? void 0 : _f.toLocaleLowerCase()) === (code == null ? void 0 : code.toLocaleLowerCase());
  }
  function updateCartFreebieVariantCountStore(freebies) {
    const variantCount = {};
    freebies.forEach((freebie) => {
      variantCount[String(freebie.id)] = freebie.quantity;
    });
    store_cartFreebieVariantCount.set(variantCount);
  }
  function updateCartFreebieVariantCountFromSelected(selectedGifts, gifts) {
    store_cartFreebieVariantCount.update((prev) => {
      const updated = { ...prev };
      gifts.forEach((gift) => {
        const variantId = +cleanShopifyIds(gift.shopifyFreeGiftVariantId);
        if (selectedGifts.includes(variantId)) {
          updated[String(variantId)] = Number(gift.quantity);
        } else {
          delete updated[String(variantId)];
        }
      });
      return updated;
    });
  }
  const removeAllFreebies = async (setRemoveFreebies) => {
    var _a;
    const cart2 = get_store_value(store_cart);
    if (!((_a = cart2 == null ? void 0 : cart2.items) == null ? void 0 : _a.length))
      return;
    if (setRemoveFreebies) {
      store_removeFreebies.set(true);
    }
    const freebieItems = cart2.items.filter((item) => {
      var _a2;
      return (_a2 = item.properties) == null ? void 0 : _a2["_gokwik_freebie"];
    });
    for (const item of freebieItems) {
      await changeCart({ id: (item == null ? void 0 : item.key) + "", quantity: 0 });
    }
    store_freeGiftLoading.set(false);
    return { giftsRemoved: true };
  };
  let manualDiscount$1, originalCart;
  store_appliedManualDiscount.subscribe((res) => manualDiscount$1 = res);
  store_originalCartJS.subscribe((res) => originalCart = res);
  const removeDiscount = (discountCode, stage, autoRemove = false) => {
    var _a, _b, _c;
    const hasStacked = Array.isArray(manualDiscount$1 == null ? void 0 : manualDiscount$1.stacked_discounts) && ((_a = manualDiscount$1 == null ? void 0 : manualDiscount$1.stacked_discounts) == null ? void 0 : _a.length);
    if (manualDiscount$1 && (manualDiscount$1.title || hasStacked)) {
      const allDiscounts = [
        (manualDiscount$1 == null ? void 0 : manualDiscount$1.title) ? {
          discount: +((manualDiscount$1 == null ? void 0 : manualDiscount$1.discount) || 0),
          title: manualDiscount$1 == null ? void 0 : manualDiscount$1.title,
          freeProducts: manualDiscount$1 == null ? void 0 : manualDiscount$1.freeProducts,
          gwpDiscount: (manualDiscount$1 == null ? void 0 : manualDiscount$1.gwpDiscount) || 0,
          freeCount: (manualDiscount$1 == null ? void 0 : manualDiscount$1.freeCount) || 0,
          freeQuantities: (manualDiscount$1 == null ? void 0 : manualDiscount$1.freeQuantities) || null,
          overwrite: manualDiscount$1.overwrite,
          allow_discount_application: manualDiscount$1.allow_discount_application,
          cashbackData: manualDiscount$1 == null ? void 0 : manualDiscount$1.cashbackData
        } : null,
        ...(manualDiscount$1 == null ? void 0 : manualDiscount$1.stacked_discounts) || []
      ].filter(Boolean);
      const remainingDiscounts = allDiscounts.filter(
        (d) => ((d == null ? void 0 : d.title) || "").toLowerCase() !== (discountCode || "").toLowerCase()
      );
      if (!remainingDiscounts.length) {
        store_appliedManualDiscount.set(null);
      } else {
        const [primary, ...rest] = remainingDiscounts;
        const totalDiscount = remainingDiscounts.reduce(
          (sum, d) => sum + +((d == null ? void 0 : d.discount) || 0),
          0
        );
        store_appliedManualDiscount.set({
          discount: +(+(primary == null ? void 0 : primary.discount) || 0).toFixed(2),
          total_discount: +(+totalDiscount).toFixed(2),
          title: primary == null ? void 0 : primary.title,
          freeProducts: (_b = primary == null ? void 0 : primary.freeProducts) == null ? void 0 : _b.filter((d) => {
            var _a2;
            return !((_a2 = d.discount_detail) == null ? void 0 : _a2[discountCode]);
          }),
          gwpDiscount: +((primary == null ? void 0 : primary.gwpDiscount) || 0),
          freeCount: +((primary == null ? void 0 : primary.freeCount) || 0),
          freeQuantities: (primary == null ? void 0 : primary.freeQuantities) || null,
          stackable: remainingDiscounts.every(
            (discount) => discount.allow_discount_application
          ),
          allow_discount_application: primary.allow_discount_application,
          overwrite: primary.overwrite,
          stacked_discounts: rest,
          cashbackData: primary.cashbackData
        });
      }
      if ((_c = allDiscounts.find(
        (discount) => discount.title.toLowerCase() === discountCode.toLowerCase()
      )) == null ? void 0 : _c.overwrite) {
        store_cart.set(originalCart);
        reapplyMultipleDiscounts();
      }
    } else {
      store_appliedManualDiscount.set(null);
      store_cart.set(originalCart);
    }
    const appliedDiscountList = getAppliedDiscountTitles();
    setCookie("discount_code", appliedDiscountList.join("__gokwik__separator") || "", 1);
    setCookie("coupon_applied", appliedDiscountList.join("__gokwik__separator") || "", 1);
    autoRemove && applyDiscount("", stage, true, true);
    fireGokwikTrigger(TextConstants.eventNames.remove_offer, {
      failure_reason: null,
      status: 200,
      title: discountCode,
      type: "manual",
      value: "0",
      stage
    });
    logEvent(TextConstants.eventNames.remove_offer, {
      failure_reason: null,
      status: 200,
      title: discountCode,
      type: "manual",
      value: "0",
      stage
    });
  };
  const getAppliedDiscountTitles = () => {
    var _a;
    try {
      if (!(manualDiscount$1 == null ? void 0 : manualDiscount$1.title) && !((_a = manualDiscount$1 == null ? void 0 : manualDiscount$1.stacked_discounts) == null ? void 0 : _a.length)) {
        return [];
      }
      const titles = [];
      if (manualDiscount$1 == null ? void 0 : manualDiscount$1.title)
        titles.push(String(manualDiscount$1.title));
      if (Array.isArray(manualDiscount$1 == null ? void 0 : manualDiscount$1.stacked_discounts)) {
        titles.push(...(manualDiscount$1 == null ? void 0 : manualDiscount$1.stacked_discounts.map((i) => i.title)) || []);
      }
      return titles;
    } catch {
      return [];
    }
  };
  const getCashbackSummary = () => {
    const cashbackData = [
      manualDiscount$1 == null ? void 0 : manualDiscount$1.cashbackData,
      ...((manualDiscount$1 == null ? void 0 : manualDiscount$1.stacked_discounts) || []).map((d) => d == null ? void 0 : d.cashbackData)
    ].filter(Boolean);
    if (!cashbackData.length)
      return { type: "" };
    const types = Array.from(new Set(cashbackData.map((i) => i.type)));
    const singleType = types.length === 1 ? types[0] : null;
    const last = cashbackData[cashbackData.length - 1];
    if (singleType === "static") {
      const total = cashbackData.reduce((sum, c) => sum + (c.amount || 0), 0);
      return { type: "static", amount: total };
    }
    if (singleType === "dynamic") {
      const total = cashbackData.reduce((sum, c) => sum + (c.toPayPercentage || 0), 0);
      return { type: "dynamic", percentage: total };
    }
    if (last.type === "static")
      return { type: "static", amount: (last == null ? void 0 : last.amount) || 0 };
    if (last.type === "dynamic")
      return { type: "dynamic", percentage: (last == null ? void 0 : last.toPayPercentage) || 0 };
    if (last.type === "custom")
      return { type: "custom", customMessage: (last == null ? void 0 : last.customMessage) || "" };
    return { type: "" };
  };
  const getCashbackDetails = () => {
    var _a;
    const summary = getCashbackSummary();
    switch (summary.type) {
      case "static":
        return `${(_a = get_store_value(store_currency)) == null ? void 0 : _a.symbol}${((summary == null ? void 0 : summary.amount) || 0).toFixed(2)} cashback on this order.`;
      case "dynamic":
        return `${(summary.percentage || 0).toFixed(2)}% cashback on this order.`;
      case "custom":
        return summary.customMessage || "";
      default:
        return "";
    }
  };
  let cart, requestId$1 = "", token, baseUrl = "https://prod-shp-checkout.gokwik.co", shopDomain, configurations, manualDiscount;
  store_cart.subscribe((res) => {
    cart = res;
  });
  store_token.subscribe((res) => token = res);
  store_shopDomain.subscribe((res) => shopDomain = res);
  store_merchantId.subscribe((res) => res);
  store_requestId.subscribe((res) => requestId$1 = res);
  store_configurations.subscribe((res) => configurations = res);
  store_appliedManualDiscount.subscribe((res) => {
    manualDiscount = res;
  });
  const fetchAvailableOffers = async () => {
    var _a, _b;
    try {
      if (!((_a = configurations == null ? void 0 : configurations.discountDisplayConfig) == null ? void 0 : _a.showOfferList)) {
        return;
      }
      let url = `${baseUrl}/v3/kwik-cart/valid-offers`;
      let body = {
        cart: snakeToCamel(cart),
        requestId: requestId$1,
        platform: configurations.platform
      };
      if (!((_b = cart == null ? void 0 : cart.items) == null ? void 0 : _b.length)) {
        return;
      }
      let headers = {
        "x-shop-domain": shopDomain
      };
      if (token) {
        headers["x-gokwik-token"] = token;
      }
      const response = await POST(url, body, true, headers);
      if (response.statusCode !== 200) {
        return;
      }
      const availableOffers = response.data.discounts;
      const unavailableOffers = response.data.unavailableDiscounts;
      store_offers.set({
        available: availableOffers,
        unavailable: unavailableOffers,
        hasPaymentOffer: availableOffers.some(
          (o) => o.offerType === "payment_offer"
        ),
        hasBrandOffer: availableOffers.some((o) => o.offerType !== "payment_offer") || unavailableOffers.some((o) => o.offerType !== "payment_offer"),
        timestamp: Date.now()
      });
      return response;
    } catch (err) {
      console.log("valid offers error:", err);
    }
  };
  const applyDiscount = async (discountCode, stage, isRemoval = false, cartManualRemoval = false, isOneClickOffer = false) => {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l;
    try {
      let url = `${baseUrl}/v3/kwik-cart/discount/validate`;
      let body = {
        cart: snakeToCamel(cart),
        couponCode: discountCode,
        requestId: requestId$1,
        platform: configurations == null ? void 0 : configurations.platform
      };
      if (!((_a = cart == null ? void 0 : cart.items) == null ? void 0 : _a.length)) {
        setCookie("discount_code", "", -1);
        setCookie("coupon_applied", "", -1);
        return;
      }
      let headers = {
        "x-gokwik-token": token,
        "x-gokwik-initiator": "gokwik-side-cart",
        "x-shop-domain": shopDomain
      };
      const response = await POST(url, body, false, headers);
      if ((_b = response.data) == null ? void 0 : _b.isValid) {
        if (!response.data.isStackable && ((_c = getAppliedDiscountTitles()) == null ? void 0 : _c.length) >= 1 && !((_d = getAppliedDiscountTitles()) == null ? void 0 : _d.includes(response.data.discountData.title)) && !isOneClickOffer) {
          store_snackbar.set({
            message: "This code cannot be used with other discount codes. Please remove any additional codes.",
            timer: 2e3,
            show: true,
            error: true
          });
          fireGokwikTrigger(TextConstants.eventNames.coupon_applied, {
            failure_reason: "stacking_not_allowed",
            status: 400,
            title: discountCode,
            type: "manual",
            value: "0",
            stage
          });
          logEvent(TextConstants.eventNames.coupon_applied, {
            failure_reason: "stacking_not_allowed",
            status: 400,
            title: discountCode,
            type: "manual",
            value: "0",
            stage
          });
          return;
        }
        if (isRemoval) {
          removeDiscount(discountCode, stage);
          if (configurations.platform !== TextConstants.platforms.Checkout1_0 || cartManualRemoval) {
            getCart(true);
            return response;
          }
        } else {
          fireGokwikTrigger(TextConstants.eventNames.coupon_applied, {
            failure_reason: null,
            status: 200,
            title: response.data.discountData.title,
            type: "manual",
            value: response.data.discountData.orderDiscount,
            stage
          });
          logEvent(TextConstants.eventNames.coupon_applied, {
            failure_reason: null,
            status: 200,
            title: response.data.discountData.title,
            type: "manual",
            value: response.data.discountData.orderDiscount,
            stage
          });
          store_offerPopup.set(false);
          if (configurations.platform !== TextConstants.platforms.Checkout1_0 || cartManualRemoval) {
            getCart(true);
            return response;
          }
          if (((_f = (_e = response.data) == null ? void 0 : _e.freeProducts) == null ? void 0 : _f.length) && !((_g = manualDiscount == null ? void 0 : manualDiscount.freeProducts) == null ? void 0 : _g.length)) {
            store_bottomSheet.set({
              component: MessageComponent,
              show: true,
              title: " Congratulations",
              type: "message",
              componentData: {
                message: "Freebie item has been added on your cart successfully, Enjoy!"
              },
              selfDestruct: 4e3
            });
          }
          await addDiscount(response);
          if (!isOneClickOffer) {
            store_oneClickCoupon.set(null);
          }
          fireGokwikTrigger("discount_application", {
            discount: +response.data.discountData.orderDiscount || 0,
            cart_total: cart.total_price / 100,
            cart_count: cart.item_count,
            to_pay_amount: cart.total_price / 100 - +(response.data.discountData.orderDiscount || 0)
          });
          if (response.data.discountData.title) {
            const appliedDiscountList = getAppliedDiscountTitles();
            setCookie("discount_code", appliedDiscountList.join("__gokwik__separator") || "");
            setCookie("coupon_applied", appliedDiscountList.join("__gokwik__separator") || "");
          }
        }
      } else {
        store_snackbar.set({
          message: ((_h = response == null ? void 0 : response.data) == null ? void 0 : _h.errorMessage) || "Invalid Discount Code",
          timer: 2e3,
          show: true,
          error: true
        });
        fireGokwikTrigger(TextConstants.eventNames.coupon_applied, {
          failure_reason: (_j = (_i = response == null ? void 0 : response.data) == null ? void 0 : _i.failureData) == null ? void 0 : _j.reason,
          status: 400,
          title: discountCode,
          type: "manual",
          value: "0",
          stage
        });
        logEvent(TextConstants.eventNames.coupon_applied, {
          failure_reason: (_l = (_k = response == null ? void 0 : response.data) == null ? void 0 : _k.failureData) == null ? void 0 : _l.reason,
          status: 400,
          title: discountCode,
          type: "manual",
          value: "0",
          stage
        });
        removeDiscount(discountCode, "");
      }
      return response;
    } catch (error) {
      store_snackbar.set({
        message: "Error applying discount",
        timer: 2e3,
        show: true,
        error: true
      });
      fireGokwikTrigger(TextConstants.eventNames.coupon_applied, {
        failure_reason: "",
        status: 400,
        title: discountCode,
        type: "manual",
        value: "0",
        stage
      });
      logEvent(TextConstants.eventNames.coupon_applied, {
        failure_reason: "",
        status: 400,
        title: discountCode,
        type: "manual",
        value: "0",
        stage
      });
      store_appliedManualDiscount.set(null);
    }
  };
  const fetchConfigurations = async () => {
    try {
      let url = `${baseUrl}/v3/kwik-cart/request`;
      const response = await GET(url, false, {
        "x-shop-domain": shopDomain
      });
      return response;
    } catch (error) {
      return sessionStorage.getItem("kwik-cart-request-data") ?? error;
    }
  };
  const fetchAIProductRecommendations = async (id, intent, productCount) => {
    var _a, _b, _c;
    let url = `${baseUrl}/v3/kwik-cart/get-product-recommendations`;
    const productId = `gid://shopify/Product/${id}`;
    const response = await POST(
      url,
      { productId, intent: intent.toLowerCase(), productCount },
      false,
      {
        "x-shop-domain": shopDomain,
        "auth-key": token
      }
    );
    if (response.statusCode === 200 && response.data) {
      if ((_b = (_a = response == null ? void 0 : response.data) == null ? void 0 : _a.recommendedProducts) == null ? void 0 : _b.length)
        store_aiProductRecommendations.set(response.data.recommendedProducts);
      const upsellVariantIds = (_c = response.data.recommendedProducts) == null ? void 0 : _c.flatMap(
        (product) => {
          var _a2;
          return (_a2 = product == null ? void 0 : product.selectedVariants) == null ? void 0 : _a2.map(
            (variant) => cleanShopifyIds(variant.variantId)
          );
        }
      );
      const availabilityMap = await batchCheckVariantsAvailability(upsellVariantIds);
      store_productDetails.update((oldObj) => ({
        ...oldObj,
        ...availabilityMap
      }));
    }
    return response;
  };
  const fetchProductDetails = async () => {
    var _a, _b, _c;
    if (!((_a = cart == null ? void 0 : cart.items) == null ? void 0 : _a.length) || !((_c = (_b = configurations == null ? void 0 : configurations.appearance) == null ? void 0 : _b.discountsOnMrp) == null ? void 0 : _c.enable))
      return;
    const variantIds = cart.items.map((i) => i.id + "");
    const existingProductDetails = get_store_value(store_productDetails);
    const existingVariantIds = Object.keys(existingProductDetails);
    const newVariantIds = variantIds.filter(
      (id) => !existingVariantIds.includes(id)
    );
    if (!newVariantIds.length) {
      return {};
    }
    const variantMap = await batchProcessVariants(newVariantIds, 5);
    store_productDetails.update((oldObj) => ({
      ...oldObj,
      ...variantMap
    }));
    return variantMap;
  };
  const validateToken = async (body, jwtToken) => {
    try {
      const validTokenResponse = await POST(
        baseUrl + "/v3/kwik-cart/validate-token",
        body,
        false,
        {
          "x-gokwik-token": jwtToken,
          "x-shop-domain": window.gkShopDomain
        }
      );
      return validTokenResponse;
    } catch (errorResponses) {
      return { error: errorResponses };
    }
  };
  const getAddresses = async (jwtToken) => {
    try {
      const response = await GET(
        baseUrl + "/v3/address/get",
        false,
        {
          "x-gokwik-token": jwtToken,
          "x-shop-domain": window.gkShopDomain
        }
      );
      return response;
    } catch (errorResponses) {
      return { error: errorResponses };
    }
  };
  const getEstimatedTotal = async () => {
    try {
      const url = `${baseUrl}/v3/kwik-cart/estimated-total`;
      let body = {
        cart: snakeToCamel(cart),
        requestId: requestId$1
      };
      let headers = {
        "x-shop-domain": shopDomain
      };
      if (token) {
        headers["x-gokwik-token"] = token;
      }
      const response = await POST(url, body, false, headers);
      return response;
    } catch (errorResponses) {
      return { error: errorResponses };
    }
  };
  const reapplyMultipleDiscounts = async () => {
    let discountList = [];
    if (!(manualDiscount == null ? void 0 : manualDiscount.title)) {
      return;
    } else {
      discountList = [manualDiscount.title, ...manualDiscount.stacked_discounts ? manualDiscount.stacked_discounts.map((i) => i.title) : []];
    }
    for (const selectedDiscount of discountList) {
      await applyDiscount(selectedDiscount, "outside");
    }
  };
  const applyMultipleDiscounts = async (discountList) => {
    let response;
    for (const selectedDiscount of discountList) {
      try {
        const discountResponse = await applyDiscount(selectedDiscount, "outside");
        if (discountResponse.data.isValid) {
          response = discountResponse;
        }
      } catch (error) {
        console.log(error);
      }
    }
    return response;
  };
  const calculateDiscountAmounts = (freeProducts) => {
    let gwpDiscount = 0;
    let freeCount = 0;
    freeProducts == null ? void 0 : freeProducts.forEach((product) => {
      gwpDiscount += (product.price || product.linePrice || 0) / 100 * product.quantity;
      freeCount += product.quantity;
    });
    return { gwpDiscount, freeCount };
  };
  const createIncomingDiscount = (discountResponse, gwpDiscount, freeCount) => {
    var _a, _b, _c;
    const orderDiscount = +((_a = discountResponse.data.discountData) == null ? void 0 : _a.orderDiscount) + (+((_b = discountResponse.data.discountData) == null ? void 0 : _b.gwpDiscount) || 0) - gwpDiscount;
    return {
      discount: +((_c = +orderDiscount) == null ? void 0 : _c.toFixed(2)),
      title: discountResponse.data.discountData.title,
      freeProducts: camelToSnakeCaseJson(discountResponse.data.freeProducts),
      gwpDiscount: +gwpDiscount || 0,
      freeCount: freeCount || 0,
      freeQuantities: discountResponse.data.freeQuantities || null,
      cashbackData: discountResponse.data.discountData.cashbackData || null
    };
  };
  const updateCartIfNeeded = (discountResponse, incomingDiscount) => {
    var _a, _b, _c, _d;
    if ((_b = (_a = discountResponse.data) == null ? void 0 : _a.updatedCart) == null ? void 0 : _b.token) {
      discountResponse.data.updatedCart.totalPrice = discountResponse.data.updatedCart.originalTotalPrice;
      incomingDiscount.overwrite = true;
      const incomingCart = camelToSnakeCaseJson(discountResponse.data.updatedCart);
      incomingCart.items = ((incomingCart == null ? void 0 : incomingCart.items) || []).map((item) => {
        const newProperties = {};
        const itemSafeProperties = (item == null ? void 0 : item.properties) || {};
        for (const key in itemSafeProperties) {
          if (key === "gokwik_freebie") {
            newProperties["_gokwik_freebie"] = itemSafeProperties[key];
          } else if (key === "gokwik_upsell") {
            newProperties["_gokwik_upsell"] = itemSafeProperties[key];
          } else {
            newProperties[key] = itemSafeProperties[key];
          }
        }
        return {
          ...item,
          properties: newProperties
        };
      });
      const discountFreebieItems = ((_d = (_c = discountResponse.data) == null ? void 0 : _c.freeProducts) == null ? void 0 : _d.map((product) => product.id)) || [];
      incomingCart.items = incomingCart.items.filter((item) => !item.product_added_by_gokwik || !(discountFreebieItems == null ? void 0 : discountFreebieItems.includes(item.id)) && item.product_added_by_gokwik);
      store_cart.set(incomingCart);
    }
  };
  const replacePrimaryDiscount = (incomingDiscount, currentStacked, discountResponse) => {
    const stackedTotal = currentStacked.reduce(
      (sum, d) => sum + +((d == null ? void 0 : d.discount) || 0),
      0
    );
    return {
      discount: incomingDiscount.discount,
      total_discount: +(+incomingDiscount.discount + stackedTotal).toFixed(2),
      title: incomingDiscount.title,
      freeProducts: incomingDiscount.freeProducts,
      gwpDiscount: incomingDiscount.gwpDiscount,
      freeCount: incomingDiscount.freeCount,
      freeQuantities: incomingDiscount.freeQuantities,
      stackable: discountResponse.data.isStackable,
      allow_discount_application: discountResponse.data.isStackable,
      stacked_discounts: currentStacked,
      overwrite: incomingDiscount.overwrite || manualDiscount.overwrite,
      cashbackData: incomingDiscount.cashbackData
    };
  };
  const updateStackedDiscount = (incomingDiscount, currentStacked, manualDiscount2) => {
    const updatedStacked = [...currentStacked];
    const stackIndex = currentStacked.findIndex(
      (d) => ((d == null ? void 0 : d.title) || "").toLowerCase() === (incomingDiscount.title || "").toLowerCase()
    );
    if (stackIndex > -1) {
      updatedStacked[stackIndex] = incomingDiscount;
    }
    const total = +manualDiscount2.discount + updatedStacked.reduce(
      (sum, d) => sum + +((d == null ? void 0 : d.discount) || 0),
      0
    );
    return {
      discount: +manualDiscount2.discount,
      total_discount: +(+total).toFixed(2),
      title: manualDiscount2.title,
      freeProducts: manualDiscount2.freeProducts,
      gwpDiscount: manualDiscount2.gwpDiscount,
      freeCount: manualDiscount2.freeCount,
      freeQuantities: manualDiscount2.freeQuantities,
      stackable: manualDiscount2.stackable,
      allow_discount_application: manualDiscount2.stackable,
      stacked_discounts: updatedStacked
    };
  };
  const addDiscount = async (discountResponse) => {
    var _a;
    try {
      const { gwpDiscount, freeCount } = calculateDiscountAmounts((_a = discountResponse.data) == null ? void 0 : _a.freeProducts);
      const incomingDiscount = createIncomingDiscount(discountResponse, gwpDiscount, freeCount);
      updateCartIfNeeded(discountResponse, incomingDiscount);
      let updatedStoreObject = null;
      if (manualDiscount == null ? void 0 : manualDiscount.title) {
        const currentPrimaryTitle = (manualDiscount.title || "").toLowerCase();
        const incomingTitle = (incomingDiscount.title || "").toLowerCase();
        const currentStacked = (manualDiscount == null ? void 0 : manualDiscount.stacked_discounts) || [];
        if (currentPrimaryTitle === incomingTitle) {
          updatedStoreObject = replacePrimaryDiscount(incomingDiscount, currentStacked, discountResponse);
        } else {
          const stackIndex = currentStacked.findIndex(
            (d) => ((d == null ? void 0 : d.title) || "").toLowerCase() === incomingTitle
          );
          if (stackIndex > -1) {
            updatedStoreObject = updateStackedDiscount(incomingDiscount, currentStacked, manualDiscount);
          } else if (manualDiscount == null ? void 0 : manualDiscount.stackable) {
            store_appliedManualDiscount.update((oldObj) => {
              var _a2;
              const stacked = [...(oldObj == null ? void 0 : oldObj.stacked_discounts) ?? [], incomingDiscount];
              const total = +(+oldObj.discount || 0) + stacked.reduce(
                (sum, d) => sum + +((d == null ? void 0 : d.discount) || 0),
                0
              );
              return {
                ...oldObj,
                freeProducts: [...(oldObj == null ? void 0 : oldObj.freeProducts) || [], ...(incomingDiscount == null ? void 0 : incomingDiscount.freeProducts) || []],
                stackable: manualDiscount.stackable,
                allow_discount_application: ((_a2 = stacked[stacked.length - 1]) == null ? void 0 : _a2.stackable) ?? manualDiscount.stackable,
                total_discount: +(+total).toFixed(2),
                stacked_discounts: stacked
              };
            });
          } else {
            if (manualDiscount.overwrite) {
              store_appliedManualDiscount.set(null);
              await getCart();
              await applyDiscount(incomingDiscount.title, "outside");
            } else {
              updatedStoreObject = {
                discount: incomingDiscount.discount,
                total_discount: incomingDiscount.discount,
                title: incomingDiscount.title,
                freeProducts: incomingDiscount.freeProducts,
                gwpDiscount: incomingDiscount.gwpDiscount,
                freeCount: incomingDiscount.freeCount,
                freeQuantities: incomingDiscount.freeQuantities,
                stackable: discountResponse.data.isStackable,
                allow_discount_application: discountResponse.data.isStackable,
                stacked_discounts: [],
                overwrite: incomingDiscount.overwrite,
                cashbackData: incomingDiscount.cashbackData
              };
            }
          }
        }
      } else {
        updatedStoreObject = {
          discount: incomingDiscount.discount,
          total_discount: incomingDiscount.discount,
          title: incomingDiscount.title,
          freeProducts: incomingDiscount.freeProducts,
          gwpDiscount: incomingDiscount.gwpDiscount,
          freeCount: incomingDiscount.freeCount,
          freeQuantities: incomingDiscount.freeQuantities,
          stackable: discountResponse.data.isStackable,
          allow_discount_application: discountResponse.data.isStackable,
          stacked_discounts: [],
          overwrite: incomingDiscount.overwrite,
          cashbackData: incomingDiscount.cashbackData
        };
      }
      if (updatedStoreObject) {
        store_appliedManualDiscount.set(updatedStoreObject);
      }
    } catch (error) {
      console.error("Error in addDiscount:", error);
      throw error;
    }
  };
  const handleSendOtpResponse = async (data) => {
    const { statusCode, message, data: response } = data == null ? void 0 : data.data;
    const { success, error } = data;
    if (statusCode === 200 && response.userType === "existing") {
      store_toastMsgConfig.set({
        showToast: true,
        msg: "OTP Sent Successfully",
        type: "success"
      });
      store_userType.set("existing");
      openOtpBottomSheet();
    } else if (statusCode === 200 && response.userType === "new") {
      closeBottomSheet();
      store_userType.set("new");
      store_toastMsgConfig.set({
        showToast: true,
        msg: message,
        type: "success"
      });
      window.closeGokwikSideCart();
      window.location.href = "/checkout";
    } else if (error && !success) {
      store_toastMsgConfig.set({
        showToast: true,
        msg: error,
        type: "error"
      });
    }
    store_isPhoneNumberProcessing.set(false);
  };
  const handleValidateOtpResponse = (res) => {
    var _a, _b, _c;
    const { data, requestId: requestId2, success, error } = res;
    if (success && (data == null ? void 0 : data.token)) {
      store_toastMsgConfig.set({
        showToast: true,
        msg: "OTP Verified Successfully",
        type: "success"
      });
      store_jwtToken.set(data.token);
      store_phoneNumber.set(data.phone);
      store_overLayScreen.set(false);
      store_userEmail.set((data == null ? void 0 : data.email) || "");
      store_userName.set(formatCustomerName((data == null ? void 0 : data.customerName) || ""));
      store_userSelectedAddress.set(data.shippingAddress);
      if ((_a = data == null ? void 0 : data.shippingAddress) == null ? void 0 : _a.aid) {
        sendMessageToiFrame("update-checkout", { addressId: (_c = (_b = data == null ? void 0 : data.shippingAddress) == null ? void 0 : _b.aid) == null ? void 0 : _c.toString(), requestId: get_store_value(store_requestId) });
      }
      store_isCheckoutUpdating.set(true);
      store_page.set("delivery");
      closeBottomSheet();
    } else {
      if (error === "Incorrect OTP") {
        store_isInvalidOtp.set(true);
      }
      store_toastMsgConfig.set({
        showToast: true,
        msg: error || "Invalid OTP",
        type: "error"
      });
    }
  };
  const callValidateToken = async (data) => {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k;
    const jwtToken = data.tokens || getCookie$1("KWIKSESSIONTOKEN");
    if (jwtToken) {
      const response = await validateToken(
        {},
        jwtToken
      );
      if (response.statusCode === 200) {
        store_jwtToken.set(jwtToken);
        store_page.set("delivery");
        store_overLayScreen.set(false);
        store_userName.set(formatCustomerName(((_a = response == null ? void 0 : response.data) == null ? void 0 : _a.customerName) || ""));
        store_userEmail.set(((_b = response == null ? void 0 : response.data) == null ? void 0 : _b.email) || "");
        store_phoneNumber.set(((_c = response == null ? void 0 : response.data) == null ? void 0 : _c.phone) || "");
        closeLoginIframe();
        createCheckoutAndInit();
        store_isCheckoutLoading.set(true);
        const addressData = await getAddresses(jwtToken);
        if ((_e = (_d = addressData == null ? void 0 : addressData.data) == null ? void 0 : _d.addresses) == null ? void 0 : _e.length) {
          store_addressList.set((_f = addressData == null ? void 0 : addressData.data) == null ? void 0 : _f.addresses);
          if (!((_g = get_store_value(store_userSelectedAddress)) == null ? void 0 : _g.aid)) {
            store_userSelectedAddress.set((_h = addressData == null ? void 0 : addressData.data) == null ? void 0 : _h.addresses[0]);
            sendMessageToiFrame("update-checkout", { addressId: (_k = (_j = (_i = addressData == null ? void 0 : addressData.data) == null ? void 0 : _i.addresses[0]) == null ? void 0 : _j.aid) == null ? void 0 : _k.toString(), requestId: get_store_value(store_requestId) });
            store_isCheckoutUpdating.set(true);
          }
        } else {
          store_addressList.set([]);
        }
      } else {
        store_page.set("login");
        store_overLayScreen.set(true);
      }
    } else {
      store_page.set("login");
      store_overLayScreen.set(true);
    }
  };
  function handleGetAddressResponse(data) {
    var _a;
    const { data: address, success, error } = data;
    if (address == null ? void 0 : address.length) {
      if (address.length !== 0) {
        store_addressList.set(address);
        if (!((_a = get_store_value(store_userSelectedAddress)) == null ? void 0 : _a.aid)) {
          store_userSelectedAddress.set(address[0]);
        }
      } else {
        store_addressList.set([]);
      }
      if (address.length === 0) {
        setTimeout(() => {
          openAddressFormBottomSheet();
        }, 600);
      }
    }
  }
  function handleGetPincodeResponse(res) {
    if (res == null ? void 0 : res.city) {
      store_geographicData.set(res);
      store_enableSaveAddress.set(true);
    } else {
      store_isInvalidOtp.set(true);
      store_enableSaveAddress.set(false);
      store_toastMsgConfig.set({
        showToast: true,
        msg: "Invalid Pincode",
        type: "error"
      });
    }
  }
  function handleEditAddressResponse(data) {
    var _a, _b, _c;
    const { success, error } = data;
    if ((_a = data == null ? void 0 : data.data) == null ? void 0 : _a.length) {
      store_addressList.set(data == null ? void 0 : data.data);
      store_userSelectedAddress.set(data == null ? void 0 : data.data[0]);
      sendMessageToiFrame("update-checkout", { addressId: (_c = (_b = data == null ? void 0 : data.data[0]) == null ? void 0 : _b.aid) == null ? void 0 : _c.toString(), requestId: get_store_value(store_requestId) });
      store_isCheckoutUpdating.set(true);
      store_toastMsgConfig.set({
        msg: "Your address has been edited!",
        type: "success",
        showToast: true
      });
      closeBottomSheet();
    } else {
      store_toastMsgConfig.set({
        msg: error || "Something went wrong!",
        type: "error",
        showToast: true
      });
    }
  }
  function handleAddAddressResponse(res) {
    const { data, success, error } = res;
    if ((data == null ? void 0 : data.length) && success) {
      closeBottomSheet();
      store_toastMsgConfig.set({
        msg: "Address has been added successfully!",
        type: "success",
        showToast: true
      });
    } else {
      store_toastMsgConfig.set({
        msg: error || "Something went wrong!",
        type: "error",
        showToast: true
      });
    }
  }
  function handleDeleteAddressResponse(res) {
    const { success, error, data } = res;
    if (success) {
      store_toastMsgConfig.set({
        msg: "Address deleted successfully!",
        type: "success",
        showToast: true
      });
      store_addressList.set(data);
      store_userSelectedAddress.set(data[0]);
      closeBottomSheet();
    } else {
      store_toastMsgConfig.set({
        msg: error || "Failed to delete the address",
        type: "error",
        showToast: true
      });
    }
  }
  function handleCreateCheckoutResponse(res) {
    store_isCheckoutLoading.set(false);
  }
  function handleCheckoutUpdateResponse(data) {
    const { success, error } = data;
    store_isCheckoutUpdating.set(false);
    if (error) {
      store_toastMsgConfig.set({
        msg: error || "Failed to update checkout",
        type: "error",
        showToast: true
      });
    }
  }
  const resendOtpResponse = (data) => {
    const { statusCode, message, data: response, error } = data == null ? void 0 : data.data;
    if (statusCode === 200 && response.userType === "existing") {
      store_toastMsgConfig.set({
        showToast: true,
        msg: "OTP Sent Successfully",
        type: "success"
      });
    } else if (error) {
      store_toastMsgConfig.set({
        showToast: true,
        msg: error,
        type: "error"
      });
    } else {
      store_page.set("delivery");
      closeBottomSheet();
      store_toastMsgConfig.set({
        showToast: true,
        msg: message,
        type: "success"
      });
    }
  };
  const processCheckoutMessage = (message) => {
    const { type, data } = message.data;
    console.log("cart communication process checkout message", message, message.data);
    switch (type) {
      case "jwt-token":
        callValidateToken(data);
        break;
      case "resend-otp-response":
        resendOtpResponse(data);
        break;
      case "send-otp-response":
        handleSendOtpResponse(data);
        break;
      case "validate-otp-response":
        handleValidateOtpResponse(data);
        break;
      case "create-checkout-response":
        handleCreateCheckoutResponse();
        break;
      case "post-request-response":
        break;
      case "get-request-response":
        break;
      case "get-address-response":
        handleGetAddressResponse(data);
        break;
      case "get-pincode-response":
        handleGetPincodeResponse(data);
        break;
      case "get-add-address-response":
        handleAddAddressResponse(data);
        break;
      case "get-edit-address-response":
        handleEditAddressResponse(data);
        break;
      case "get-delete-address-response":
        handleDeleteAddressResponse(data);
        break;
      case "update-checkout-response":
        handleCheckoutUpdateResponse(data);
        break;
    }
  };
  const checkoutOnCart = () => {
    window.addEventListener("message", (message) => {
      processCheckoutMessage(message);
    });
  };
  const sendMessageToiFrame = (type, data) => {
    var _a;
    let iframe = get_store_value(store_GkIframe);
    if (!iframe) {
      iframe = document.querySelector("#gk-iframe");
      store_GkIframe.set(iframe);
    }
    (_a = iframe == null ? void 0 : iframe.contentWindow) == null ? void 0 : _a.postMessage(
      { type, data },
      "*"
    );
  };
  const openCheckoutInBg = () => {
    const iframe = document.createElement("iframe");
    iframe.name = "checkout-on-cart-iframe";
    iframe.src = "https://pdp.gokwik.co/checkout-on-cart.html";
    iframe.style.width = "0";
    iframe.style.height = "0";
    iframe.style.border = "none";
    iframe.style.position = "absolute";
    iframe.style.visibility = "hidden";
    document.body.appendChild(iframe);
  };
  const closeLoginIframe = () => {
    const iframe = document.querySelector('iframe[name="checkout-on-cart-iframe"]');
    if (iframe && iframe.parentNode) {
      iframe.parentNode.removeChild(iframe);
    }
    store_GkIframe.set(document.querySelector("#gk-iframe"));
  };
  const createCheckoutAndInit = () => {
    var _a;
    (window == null ? void 0 : window.initiateLogin) && ((_a = window == null ? void 0 : window.initiateLogin) == null ? void 0 : _a.call(window, true));
  };
  function add_css$M(target) {
    append_styles(target, "svelte-1qgklzs", ".address-wrapper.svelte-1qgklzs.svelte-1qgklzs{position:relative;display:flex;flex-direction:column;height:50vh;max-height:50vh;overflow:hidden}.address-list-container-top.svelte-1qgklzs.svelte-1qgklzs{display:flex;justify-content:space-between;align-items:center;padding:12px 8px;background-color:white;z-index:2}.address-list-container-top-deliveryText.svelte-1qgklzs.svelte-1qgklzs{font-size:14px;font-weight:600;color:#00192f}.address-list-container-top-btn-text.svelte-1qgklzs.svelte-1qgklzs{background-color:white;color:#004b8d;font-family:Inter;font-size:12px;font-weight:600;cursor:pointer;padding:0;border:none}.address-list-container.svelte-1qgklzs.svelte-1qgklzs{flex:1;overflow-y:auto;padding:8px !important;margin:0;display:flex;flex-direction:column;gap:8px;-webkit-overflow-scrolling:touch}.use-address-btn.svelte-1qgklzs.svelte-1qgklzs{padding:10px;margin-top:auto;background-color:white;z-index:2;border-top:1px solid #f0f0f0}.use-address-btn.svelte-1qgklzs button.svelte-1qgklzs{width:100%;padding:12px;font-family:Inter;border-radius:4px;background-color:#004b8d;color:white;border:none;font-weight:500;cursor:pointer}");
  }
  function get_each_context$f(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[10] = list[i];
    child_ctx[12] = i;
    return child_ctx;
  }
  function create_each_block$f(ctx) {
    let addresscard;
    let current;
    addresscard = new AddressCard({
      props: {
        addressDetails: (
          /*address*/
          ctx[10]
        ),
        index: (
          /*index*/
          ctx[12]
        ),
        selectAddress: (
          /*selectAddress*/
          ctx[2]
        ),
        isSelected: (
          /*isSelected*/
          ctx[1]
        )
      }
    });
    return {
      c() {
        create_component(addresscard.$$.fragment);
      },
      m(target, anchor) {
        mount_component(addresscard, target, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        const addresscard_changes = {};
        if (dirty & /*addressList*/
        1)
          addresscard_changes.addressDetails = /*address*/
          ctx2[10];
        if (dirty & /*isSelected*/
        2)
          addresscard_changes.isSelected = /*isSelected*/
          ctx2[1];
        addresscard.$set(addresscard_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(addresscard.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(addresscard.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(addresscard, detaching);
      }
    };
  }
  function create_fragment$R(ctx) {
    let div3;
    let div0;
    let span;
    let t0;
    let button0;
    let t2;
    let div1;
    let div1_intro;
    let t3;
    let div2;
    let button1;
    let current;
    let mounted;
    let dispose;
    let each_value = ensure_array_like(
      /*addressList*/
      ctx[0]
    );
    let each_blocks = [];
    for (let i = 0; i < each_value.length; i += 1) {
      each_blocks[i] = create_each_block$f(get_each_context$f(ctx, each_value, i));
    }
    const out = (i) => transition_out(each_blocks[i], 1, 1, () => {
      each_blocks[i] = null;
    });
    return {
      c() {
        div3 = element("div");
        div0 = element("div");
        span = element("span");
        t0 = space();
        button0 = element("button");
        button0.textContent = "+ Add New Address";
        t2 = space();
        div1 = element("div");
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        t3 = space();
        div2 = element("div");
        button1 = element("button");
        button1.textContent = "Use This Address";
        attr(span, "class", "address-list-container-top-deliveryText svelte-1qgklzs");
        attr(button0, "class", "address-list-container-top-btn-text svelte-1qgklzs");
        attr(div0, "class", "address-list-container-top svelte-1qgklzs");
        attr(div1, "class", "address-list-container svelte-1qgklzs");
        attr(button1, "class", "svelte-1qgklzs");
        attr(div2, "class", "use-address-btn svelte-1qgklzs");
        attr(div3, "class", "address-wrapper svelte-1qgklzs");
      },
      m(target, anchor) {
        insert(target, div3, anchor);
        append(div3, div0);
        append(div0, span);
        append(div0, t0);
        append(div0, button0);
        append(div3, t2);
        append(div3, div1);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(div1, null);
          }
        }
        append(div3, t3);
        append(div3, div2);
        append(div2, button1);
        current = true;
        if (!mounted) {
          dispose = [
            listen(
              button0,
              "click",
              /*click_handler*/
              ctx[4]
            ),
            listen(
              button1,
              "click",
              /*click_handler_1*/
              ctx[5]
            )
          ];
          mounted = true;
        }
      },
      p(ctx2, [dirty]) {
        if (dirty & /*addressList, selectAddress, isSelected*/
        7) {
          each_value = ensure_array_like(
            /*addressList*/
            ctx2[0]
          );
          let i;
          for (i = 0; i < each_value.length; i += 1) {
            const child_ctx = get_each_context$f(ctx2, each_value, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
              transition_in(each_blocks[i], 1);
            } else {
              each_blocks[i] = create_each_block$f(child_ctx);
              each_blocks[i].c();
              transition_in(each_blocks[i], 1);
              each_blocks[i].m(div1, null);
            }
          }
          group_outros();
          for (i = each_value.length; i < each_blocks.length; i += 1) {
            out(i);
          }
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        for (let i = 0; i < each_value.length; i += 1) {
          transition_in(each_blocks[i]);
        }
        if (local) {
          if (!div1_intro) {
            add_render_callback(() => {
              div1_intro = create_in_transition(div1, fly, { y: 200, duration: 800 });
              div1_intro.start();
            });
          }
        }
        current = true;
      },
      o(local) {
        each_blocks = each_blocks.filter(Boolean);
        for (let i = 0; i < each_blocks.length; i += 1) {
          transition_out(each_blocks[i]);
        }
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div3);
        }
        destroy_each(each_blocks, detaching);
        mounted = false;
        run_all(dispose);
      }
    };
  }
  function instance$P($$self, $$props, $$invalidate) {
    let $store_userSelectedAddress;
    component_subscribe($$self, store_userSelectedAddress, ($$value) => $$invalidate(8, $store_userSelectedAddress = $$value));
    let addressList = [];
    let isSelected = 0;
    onMount(async () => {
      store_addressList.subscribe((res) => {
        var _a, _b;
        $$invalidate(0, addressList = res);
        if (addressList.length > 0) {
          $$invalidate(1, isSelected = addressList.findIndex((address) => address.aid === ($store_userSelectedAddress == null ? void 0 : $store_userSelectedAddress.aid)));
          if (isSelected === -1) {
            $$invalidate(1, isSelected = 0);
            `${(_a = addressList[0]) == null ? void 0 : _a.aid}`;
          } else {
            `${(_b = addressList[isSelected]) == null ? void 0 : _b.aid}`;
          }
        }
      });
      store_isAddressAutoUpdated.subscribe((res) => {
      });
    });
    const selectAddress = (index, aid) => {
      if (index !== isSelected) {
        $$invalidate(1, isSelected = index);
      }
    };
    const onClickUseThisAddress = () => {
      var _a, _b;
      if (isSelected >= 0) {
        store_userSelectedAddress.set(addressList[isSelected]);
        sendMessageToiFrame("update-checkout", {
          addressId: (_b = (_a = addressList[isSelected]) == null ? void 0 : _a.aid) == null ? void 0 : _b.toString(),
          requestId: get_store_value(store_requestId)
        });
        store_isCheckoutUpdating.set(true);
        closeBottomSheet();
      }
    };
    const click_handler2 = () => {
      openAddressFormBottomSheet();
    };
    const click_handler_1 = () => {
      onClickUseThisAddress();
    };
    return [
      addressList,
      isSelected,
      selectAddress,
      onClickUseThisAddress,
      click_handler2,
      click_handler_1
    ];
  }
  class AddressList extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$P, create_fragment$R, safe_not_equal, {}, add_css$M);
    }
  }
  function add_css$L(target) {
    append_styles(target, "svelte-jwg13y", ".otp-container.svelte-jwg13y{display:flex;justify-content:space-between;width:100%;gap:10px}.otp-input.svelte-jwg13y{flex:1;width:40px;height:40px;text-align:center;border:1px solid var(--light-grey);border-radius:var(--border-regular);transition:border-color 0.3s;padding:var(--padding-extra-loose);font-size:var(--font-size-l);font-family:var(--font-family)}.filled.svelte-jwg13y{border-color:var(--dark-grey)}.otp-input.svelte-jwg13y:focus{border-color:var(--dark-grey)}.invalid.svelte-jwg13y{border-color:var(--error-red)}.invalid.svelte-jwg13y:focus{border-color:var(--error-red)}.error-msg.svelte-jwg13y{font-family:var(--font-family);font-size:12px;margin-top:8px;font-weight:500;color:black;color:var(--error-red)}");
  }
  function get_each_context$e(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[14] = list[i];
    child_ctx[15] = list;
    child_ctx[16] = i;
    return child_ctx;
  }
  function create_each_block$e(ctx) {
    let input;
    let input_class_value;
    let index = (
      /*index*/
      ctx[16]
    );
    let mounted;
    let dispose;
    const assign_input = () => (
      /*input_binding*/
      ctx[6](input, index)
    );
    const unassign_input = () => (
      /*input_binding*/
      ctx[6](null, index)
    );
    function input_input_handler() {
      ctx[7].call(
        input,
        /*index*/
        ctx[16]
      );
    }
    function input_handler(...args) {
      return (
        /*input_handler*/
        ctx[8](
          /*index*/
          ctx[16],
          ...args
        )
      );
    }
    function keydown_handler(...args) {
      return (
        /*keydown_handler*/
        ctx[9](
          /*index*/
          ctx[16],
          ...args
        )
      );
    }
    return {
      c() {
        input = element("input");
        attr(input, "id", `otp-${/*index*/
        ctx[16]}`);
        attr(input, "class", input_class_value = null_to_empty(`otp-input font-regular-bold ${/*otp*/
        ctx[1][
          /*index*/
          ctx[16]
        ] !== "" ? "filled" : ""} ${/*isInvalidOtp*/
        ctx[0] ? "invalid" : ""}`) + " svelte-jwg13y");
        attr(input, "type", "text");
        attr(input, "maxlength", "1");
        attr(input, "autocomplete", "one-time-code");
        attr(input, "inputmode", "numeric");
      },
      m(target, anchor) {
        insert(target, input, anchor);
        assign_input();
        set_input_value(
          input,
          /*otp*/
          ctx[1][
            /*index*/
            ctx[16]
          ]
        );
        if (!mounted) {
          dispose = [
            listen(input, "input", input_input_handler),
            listen(input, "input", input_handler),
            listen(input, "keydown", keydown_handler),
            listen(
              input,
              "paste",
              /*handlePaste*/
              ctx[5]
            )
          ];
          mounted = true;
        }
      },
      p(new_ctx, dirty) {
        ctx = new_ctx;
        if (dirty & /*otp, isInvalidOtp*/
        3 && input_class_value !== (input_class_value = null_to_empty(`otp-input font-regular-bold ${/*otp*/
        ctx[1][
          /*index*/
          ctx[16]
        ] !== "" ? "filled" : ""} ${/*isInvalidOtp*/
        ctx[0] ? "invalid" : ""}`) + " svelte-jwg13y")) {
          attr(input, "class", input_class_value);
        }
        if (index !== /*index*/
        ctx[16]) {
          unassign_input();
          index = /*index*/
          ctx[16];
          assign_input();
        }
        if (dirty & /*otp*/
        2 && input.value !== /*otp*/
        ctx[1][
          /*index*/
          ctx[16]
        ]) {
          set_input_value(
            input,
            /*otp*/
            ctx[1][
              /*index*/
              ctx[16]
            ]
          );
        }
      },
      d(detaching) {
        if (detaching) {
          detach(input);
        }
        unassign_input();
        mounted = false;
        run_all(dispose);
      }
    };
  }
  function create_if_block$B(ctx) {
    let p;
    return {
      c() {
        p = element("p");
        p.textContent = `${OtpInputTexts.inValidOtp}`;
        attr(p, "class", "error-msg font-small-medium svelte-jwg13y");
      },
      m(target, anchor) {
        insert(target, p, anchor);
      },
      d(detaching) {
        if (detaching) {
          detach(p);
        }
      }
    };
  }
  function create_fragment$Q(ctx) {
    let div;
    let t;
    let if_block_anchor;
    let each_value = ensure_array_like(Array(4));
    let each_blocks = [];
    for (let i = 0; i < each_value.length; i += 1) {
      each_blocks[i] = create_each_block$e(get_each_context$e(ctx, each_value, i));
    }
    let if_block = (
      /*isInvalidOtp*/
      ctx[0] && create_if_block$B()
    );
    return {
      c() {
        div = element("div");
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        t = space();
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
        attr(div, "class", "otp-container svelte-jwg13y");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(div, null);
          }
        }
        insert(target, t, anchor);
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
      },
      p(ctx2, [dirty]) {
        if (dirty & /*otp, isInvalidOtp, inputs, handleInput, handleKeydown, handlePaste*/
        63) {
          each_value = ensure_array_like(Array(4));
          let i;
          for (i = 0; i < each_value.length; i += 1) {
            const child_ctx = get_each_context$e(ctx2, each_value, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
            } else {
              each_blocks[i] = create_each_block$e(child_ctx);
              each_blocks[i].c();
              each_blocks[i].m(div, null);
            }
          }
          for (; i < each_blocks.length; i += 1) {
            each_blocks[i].d(1);
          }
          each_blocks.length = each_value.length;
        }
        if (
          /*isInvalidOtp*/
          ctx2[0]
        ) {
          if (if_block)
            ;
          else {
            if_block = create_if_block$B();
            if_block.c();
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(div);
          detach(t);
          detach(if_block_anchor);
        }
        destroy_each(each_blocks, detaching);
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function instance$O($$self, $$props, $$invalidate) {
    let isInvalidOtp = false;
    let requestId2 = "";
    let phoneNumber = "";
    let otp = ["", "", "", ""];
    let inputs = [];
    store_requestId.subscribe((res) => {
      requestId2 = res;
    });
    store_phoneNumber.subscribe((res) => {
      phoneNumber = res;
    });
    store_cartId.subscribe((res) => {
    });
    const callVerifyOtp = async (otp2) => {
      sendMessageToiFrame("validate-otp", { otp: otp2, phoneNumber, requestId: requestId2 });
    };
    function handleInput(event, index) {
      const enteredOtp = otp.join("");
      if (isInvalidOtp) {
        store_isInvalidOtp.set(false);
      }
      if (enteredOtp.length === 4) {
        callVerifyOtp(enteredOtp);
      }
      const value = event.target.value;
      if (/^\d$/.test(value)) {
        $$invalidate(1, otp[index] = value, otp);
        if (index < 3) {
          inputs[index + 1].focus();
        }
      } else {
        $$invalidate(1, otp[index] = "", otp);
      }
    }
    function handleKeydown(event, index) {
      if (((event == null ? void 0 : event.key) === "Backspace" || [8, 46].some((v) => (event == null ? void 0 : event.which) === v || (event == null ? void 0 : event.keyCode) === v)) && otp[index] === "") {
        if (index > 0) {
          inputs[index - 1].focus();
          $$invalidate(1, otp[index - 1] = "", otp);
        }
      }
    }
    function handlePaste(event) {
      const pasteData = event.clipboardData.getData("text");
      if (!pasteData) {
        console.error("No data on clipboard");
        return;
      }
      const digits = pasteData.split("").filter((char) => /\d/.test(char));
      if (digits.length === 4) {
        digits.forEach((digit, index) => {
          $$invalidate(1, otp[index] = digit, otp);
        });
        otp.forEach((value, index) => {
          $$invalidate(2, inputs[index].value = value, inputs);
        });
        inputs[3].focus();
        event.preventDefault();
        callVerifyOtp(otp.join(""));
      }
    }
    onMount(() => {
      var _a;
      store_isInvalidOtp.subscribe((res) => {
        $$invalidate(0, isInvalidOtp = res);
      });
      (_a = inputs[0]) == null ? void 0 : _a.focus();
      postMessageToParent({ type: "autoReadOtp" });
    });
    onDestroy(() => {
      store_isInvalidOtp.set(false);
    });
    function input_binding($$value, index) {
      binding_callbacks[$$value ? "unshift" : "push"](() => {
        inputs[index] = $$value;
        $$invalidate(2, inputs);
      });
    }
    function input_input_handler(index) {
      otp[index] = this.value;
      $$invalidate(1, otp);
    }
    const input_handler = (index, event) => handleInput(event, index);
    const keydown_handler = (index, event) => handleKeydown(event, index);
    return [
      isInvalidOtp,
      otp,
      inputs,
      handleInput,
      handleKeydown,
      handlePaste,
      input_binding,
      input_input_handler,
      input_handler,
      keydown_handler
    ];
  }
  class OtpInputField extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$O, create_fragment$Q, safe_not_equal, {}, add_css$L);
    }
  }
  function add_css$K(target) {
    append_styles(target, "svelte-mkimts", ".timer-text.svelte-mkimts{font-size:12px;font-weight:500;color:#004B8D;font-family:var(--font-family) !important}");
  }
  function create_fragment$P(ctx) {
    let span;
    let t;
    return {
      c() {
        span = element("span");
        t = text(
          /*remainingTime*/
          ctx[0]
        );
        attr(span, "class", "timer-text svelte-mkimts");
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t);
      },
      p(ctx2, [dirty]) {
        if (dirty & /*remainingTime*/
        1)
          set_data(
            t,
            /*remainingTime*/
            ctx2[0]
          );
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function instance$N($$self, $$props, $$invalidate) {
    let { countDown } = $$props;
    let { onTimeUp } = $$props;
    let remainingTime = countDown;
    let interval;
    const startTimer = () => {
      interval = setInterval(
        () => {
          if (remainingTime > 0) {
            $$invalidate(0, remainingTime--, remainingTime);
          } else {
            clearInterval(interval);
            if (onTimeUp) {
              onTimeUp();
            }
          }
        },
        1e3
      );
    };
    onMount(() => {
      startTimer();
    });
    onDestroy(() => {
      clearInterval(interval);
    });
    $$self.$$set = ($$props2) => {
      if ("countDown" in $$props2)
        $$invalidate(1, countDown = $$props2.countDown);
      if ("onTimeUp" in $$props2)
        $$invalidate(2, onTimeUp = $$props2.onTimeUp);
    };
    return [remainingTime, countDown, onTimeUp];
  }
  class Timer extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$N, create_fragment$P, safe_not_equal, { countDown: 1, onTimeUp: 2 }, add_css$K);
    }
  }
  const arrowLeft = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAADrSURBVHgB7drBCcJAFIThURtICSkhJViCJdiCndiJJSxWEDswHejRW3whWQjBTSAQ2HnOB3MQL/lRFJYFREQ2dMD2jrbK9rG94Uhhq23tsBf6WBemcXE1HEjFxVFbigsgthT3tJUgpTiQUhxIKQ6kFAdSigMpxYGU4kBiN3ndxQX0ZygpD+R7ttLYLph5vi6uJV9IxVUZPuzalTFqPwr0dKRXpN4I4Pqkfu02DlrzI9MMy9HddsXCt9H1f2CkSCiShyKhSB6KhCJ5KBKK5KFI/ElkgAOur5FEri8CRa6vco2dbGfMnHSJiND6AgIHvnd4jwbLAAAAAElFTkSuQmCC";
  const plusIcon = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABRCAYAAABFTSEIAAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAARJSURBVHgB7ZzPbxNHFMe/bwglUhF1pRZ6qFS7ouJUxbmVU51D1dK0knup2hPwByAIEkic4pw4APlx40YQByQuIPFD/DjEOXHEiBsgskhcgAMGgQSYnWFmV5vYsWPv7oyUtf0+F6/H62j9yXvz1jPJAxhmMyG4oDyXw0eUQXIMCnn9Y4sQKqePc8gKijz9aT19UNPXdR9fiCquTHmwJL3AUNphkCrpiyqhLyEtUy3YyEwuMBIn5JFMRZg9i9gqZpKKTCbwz7npARTXihIV3JiaiXt6PIHluTwa/uVgbhsOPB2NE3GiUfQ6AZOz+/FJ3hsieQYdMPoz7ztd7nXilq6vmpQlNa+PRjF8jILoP/y0D3h0a3mjkzYWGMiTFQw75i6ji8TOc6AJXUGXwTRBB3D96Pm20bbzTMEwc94gV9p01HVhGV9fWNqLSEMusbyO5NBQbVnZOgeGRaNn5RlivsOe3wkPb1ejgbUUDu715AqYXphULuhUrpsnaynckNNg4pDTNeJI9CSMQI6+pKxGYRiBH2UJTBJWozAUKOgwmGQo+tU8UFbTN/flNpT37kb97QfUVl7Ae/4GmWOr+HokSF8369LOyO/agaWT/yK/c0fw3HvxBhMnLmVPoi/LQqdv5lZZpv/fuyrPYI7NWObwqSj0t44xZIz8rq9ijW0+Km+KSB5MOghjwlgEk5Zc7xVpphss0BYWaAkLtIQFWsICLWGBlrBAS1igJSzQEhZoCQu0hAVawgItIUyeUXCAWYYPVpIdLHwWf/w22BNppv5O7408eQlbvOevMXPxrrPtAScC1+9hZB2zxzJ+6ELwS7HFSQoXCzv7Rp7BXGv5l91wgROBue3b0G/U372HC5wIvHL3cZAW/YK51tqK/XxqcFpEKrqI/OCkiHyji0jrn2UPdBFxjSlIpZ+/bxmrPngWbK5nDb4PtIQFWsICLWGBlrBAS1igJSzQEhZoCQu0hAVawgItYYGWsEBLhF6PqYNJjYAiFpgeT0egqoFJB5EWCHqKjPFUrxqvx+swtulI3BeQ2YvAillyb9pjMcdmGT57qBoFvbAa8hUyhtljKRb0Bvv20WDTysUernN8UQj/zXBydql/O7BtFlTD9aPj4X0gqWUwyTBt8xDdSI+Ieb4fTIgUVfMQCgw7UCyAicsiboYNeNa+ynEUxscXq/0F1wRyFMaD5EwUfcHTthMmZ+/pGXKYegUmgDxdeQvNI+2rMT79w6ncAdJrBj5NrB9uF2jCU2IKTCu+PNicuhGdGzA+ul3Dnt90elMJTDjv3Th2ttNLG3ewfHinyhIRyrt2rLLhy+jF36fLes3w3ND1FDRzHn2awtXji11PQxz+mMtji1oangYV+nuuKaY3e7dBTtaz6K9TFSgxuG3yTNTBX+iWsm1vQVKCaPQr+q37MShE4kZG5qPGirHfirQYkUKWgs5vqk9vvImqWtxyGnERnwF4xWfMf0wzSQAAAABJRU5ErkJggg==";
  const chevronRight = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHTSURBVHgB7do/SsRAFMfxX6KIrTeIoHgFyzQq/im8isrW7tYWae30CAqroFu4dp5hFUxpa6swMe/BCsJm3bjz3htkPmVCZvgyQyBDgCiKIkEJJBwUORwyLGGIq6MShlL4tl8UqNwDEneBT/eKveIUhhbgE60c3PmPa0mVY30XeL57hAG/K+hcNvF64rpWK+k3MHVl4z2jSL9bdDQosbFVv7iSfOJ9g+3qN5CMBsOQIv0HkoAiZQJJIJFygSSASNlAYhwpH0gMI3UCiVGkXiAxiNQNJMqR+oFEMdImkChF2gUShUjbQCIcaR9IBCPDCCSzRK7tvOPl/gkt+D+TmUe/060/jHuN91O0/mAOZwXHpq/kcr1Vr+ut+oYZhbWCY26xgicy56LzoHMbOr+ZKClxc7yKFsJawalxtarqoaVwAn+Lo5fP7cklWgpji84SR2/YP7APFIzjx2FJOI6HgBWFOB4GFpTieChoU4zj4aBJOY6HhBaDOB4WGozieGhIM4zj4SHJOI6ngJQA4ngaSAgkjqeCbwHF8XTw6bDI+N+Yxtl044jf78EPlzfeM4gjOr+RGMURgd9Itlfqos3va4ZxPD0kHJzlcGnGK9rvDBFFUfRffQGvjx+7fTMiDwAAAABJRU5ErkJggg==";
  const divider = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQcAAAACCAYAAABVERmgAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgSURBVHgB7cAxEQAwCAQwWuUYfS/sHBKSl6QLYPkFcBh+LQMbSEBFPQAAAABJRU5ErkJggg==";
  const flag_of_inda = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABQCAYAAAD83pAbAAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAdrSURBVHgB7ZzZT5RnFMafYRFkkcFBUDZlEKggiwhl0WhQqxVFwYqxMdaliUui6YUXWi9MYy+MJibGpNGLilpNaoIRRUSLCy6pWDZBBRVZZBFEEFmHHfqeYzH2P/CQ90m+fMx8SzLz45zznPN+YOjYEDAKLTGygpYoaWDCpIEJkwYmTBqYMGlgwqSBCZMGJkwamDBpYMKkgQmTBiZMGpgwaWDCpIEJkwYmTBqYMGlgwqSBCZMGJkwamDBpYMKkgQmTBiZMGpgw2dguWAMtOTKMKmGcqKPDgurqZnR1WdQrAyZNmoiZM6fCyWkixotsIFw1Nc24erUQt249QW1tC0ZGRv533GAwwNvbhDVrYrFgQTACAz0hWWIjzGLpx5UrBTh58gba2rrh4WFEWNh0FV29iI0Ngo2NFXJzn8HV1RElJa/R2tqJadOM2Lx5MVJT42BrK/N3VSSwlpYO7N79O8rK6hEZ6a8ABSIxMRITJ06Au7sLp0b6VEajA5qbO9DT04ecnFLk5b1AcXE1Zs3ywtGjW+Dj4wZpEgesvr4VBw78yVFDNSojYx8GB4dVhLmgvLwewcE+aGxs43M9PSfj8eNqzJljRnu7hcFt3HgM7993K9B+OHLkB0yZ4gJJEgVscHAIGzYcw8uXjdi//zskJ8fAzs4GhYVVCpQ33rxp43OsrKhbGYW1tZXarFUkmVBUVMWpko5nZPyDQ4cuISjIE2lpu+DgYAcpEtWHpafn4fnzBphMTspExLDhGB4egb+/B27ffgpfXzdOeRZLn4qmfjx48Fy9Z0J2djFCQ6fzuVVVzQyaopNSamZmPiRJDLCKikacOXNHpTIzzp//iU1DQMA0doi9vYN4965DpckaTplv37ZztNG+uLiG6xmZkaysQr5mwgQbXL68j+914sRfqhV4BykSA+z+/XI0NX1AfHyQSmH2bCD6+gbYcKSn/424uEBcuvSI6xmlv9LS18rij6oIKoDZ7I4LFx4iOjoAnZ0WlUIrMTAwpK4JYoeZlVUAKRJTwxITf1WRNIBTp3YpAB4MJju7iKHQ67S023BxcVCGokvVMANHIEGZPNlZucYebN++DI8evVAmw4jFi0O5btXVtWDr1t/458zMnyFBIiKsq6sPDQ1tCA/3g6OjPTs/+rITE+fCy2uyirCHCpYjurv7uY65uxvh5jZJ1bpJqpb18rGzZ++wg1y6NEK5yA/KUTaoNsCOeze6F0WeBInoHquqmkCJoL29h+07ba9eNeHcuXuqTn1QTtFW9VvtCpKzMhINnA7p/IiIGQgJ8VV1rYUh5uaWobLyLdv8kBAfvjfVto9m5OP7X7pERFhnZy/vExJmc1NMEUJfMgEJDfXlY2QkCBwZDxpPETACR2nRYLDi12Fhvqpp9mG7T6aEUiXVQBKBkyBRtp4gqdHgp41EXz5paGiYN8PYASWqzjSisrW15ro2PEzlemwDaOw4dj0NiyVIBDBnZ3ve5+W9VP2Tg5oJuvKXT5ON0tJajh6CSVEWHj6DoREgisC+vkH09w+BPuqzZ3UcddRYU+2jOePdu2V8bxcXGRN9ETXM338qRwI1uzRHpEGujY21GuLGcwokO28yOaterBN+fu4q7XkrgMPsFKm20bH+/gEkJUVj7lwz92olJdUKvIkNCcE1m6dBgkREGEUVuT+KJotlgOuQt7cbbt4s5ajZtCmB65yjox3b+paWTh76EhgnJ3t2gOvWxas+rg3XrhXxcktEhJlni6WlNfx6LIq/dImpYUuWhHG03LhRzPvy8jrVRH+F5csjeRK/Zcsi7smmTjVyqqOhLk3uKR1u2/YNL7XExASq+4Srxrqah8E5OSUMOCUlFlIkBlhS0teqCXbiOkapLipqJjfKBQWVWL9+Hs8VV62K5vpEdSwqyszn0cyRrklNnYf8/Fewt7dlZ0jRRe9TPVy4MBhSJAYY1aYdO77l6EhJOazs+qDqqZqwcmWUSmdkGAzcR1GEeXmZ1N6Vp/TUbNPiJq2V0bl0DU3saZmFBsUUmQEBclahRdn61aujMXu2L9ekjIx8BdGDzcjTp7VYsSKSJxbz58/iWkYTERruUh1btChUDXib+NwZMzx4eYXWxMicrF0bB0kSt4BJhmLv3j94wEtzQprcExyj0ZEjhiBRU0zW3tPT9dOiJpkQ6seSkw/zQzpk+Q8e/F7cqrPIRwTq699jz54zam2sngHR1J1mhBRZlP5oGkL9M7lLAkzPf1y/XqyGvxUMmsZVx4//yKZEmsQ+hEPT+osXH+L06Tu87EK9VkSEH88bExJCuJHOy6vg+vbkSS07S4rInTuXsTmRtMr8ucQ/l0hD4Hv3yrguNTS0srX/XFS3qIejtoAaZ6p7kjWuHiTt7u5VLrD5v6WSURVdDvz4AKXG8SLD5rO/6H/SLEgG7IzSwARJ//WKMGlgwqSBCZMGJkwamDBpYMKkgQmTBiZMGpgwaWDCpIEJkwYmTBqYMGlgwqSBCZMGJkwamDBpYMKkgQmTBiZMGpgwaWDCpIEJkwYmTBqYMP0LJDM79mho3dEAAAAASUVORK5CYII=";
  const otp_screen = "/kwik-cart/css/side-cart.css";
  const edit_icon = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAYAAACohjseAAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAG+SURBVHgB7dovTsRAFMfxx58E1xPsCfYEK9A4HALNCRBoBAdBI3AkCBwJAo1YjcDhegLml3SgKZ1p+2ba96Z53+QlsGyT/WS2nS1AZFmWZa2rjZsHN1taYcC9ufl080ErQ7ZxfpKRB6Qj/7bc9PysdnPpZk+MNABjOB8beUiyhXB15/uKmBceSWAIh1U6dfPYeZyFPCKZYji8FbGCL83P26ATN+duXt1804gkgGNwvmTk0sApOF8M+RQ45rclz0EOzh+363kc8C8aaKltIgXXdxwuQDc0oiWAYjg0N1AUh+YEiuPQXEAVODQHUA0O5QaqwqGcQHU4lAuoEodyANXiUCpQNQ6lANXjEBeIm89nUo5D3LsJ3Lqox6EUYDvctqjDIS6wb/XU4VCuFXwPPE8Uh3IB+35fKY5DxzQ9vOCq81gbuG3mmoRxiAvsdkt/sFCL4xAH2Ie4iB8ig0Occ3A38fliOMRZwTFhX8R5iavrPQnGAeIFYxVxocHeB4QH7Zuvayq8iv5fSS3Lmt7Q/SD2vBLOtdBn4SgQn06uqIzuKLAdxTb6Myqn4EJI/xPC7MU2+sE/LiqqpNdqWZZVUD9bN5bSjBFtAAAAAABJRU5ErkJggg==";
  const close = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAACxLAAAsSwGlPZapAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAGdSURBVHgB7dbdbcJAEEXhk6SBlEApLoVOuB1ASSmFEtIBAcGVCBI/Nl57vDtHum9IHn0CZMiyLMuyLMuyLBu9L4bVXfZ7WeS6y76P2zNB2+MOV9sQt9Nt17duKVx388DISLc4XkfB1nceGg3pHs5pawrWPXhwFKRHOKetKJyIi/QMR0yUiIcUBseJOEjhcJyYHyksjhPzIYXHcWJ6pMXgODEd0uJwnCiPtFgcJ8ohLR7HifGRqsFxYjyk6nCceB+pWhwnhiNVj+NEf6RmcJx4Hak5HCeeIzWL48RjgKZxnEicp4nEeZoIjvPJvB1G+kyVbXj9J7ahsfrgNIc0BKcZpFdeAkWjSK/gONEYUh8cJxpBGoLjROVI7+A4USnSGDhOVIY0Jo4TlSCVwHFi4UglcZxYKNIUOE4sDGlKHCcWgjQHjhPBkebEcSIoUgQcJ4IhRcJxIghSRBwnZkZaERfHicc3dhRsTWwcJ+7fuaZgHfFxnJjhG3RqR3wcJ/7fuqNnHwyr4/x/tD/uh9itON+7J/6tWZZlWZZlWZa10R+91b+/Y+R/SAAAAABJRU5ErkJggg==";
  const cdn_path = "https://kwikcart.gokwik.co/kwikcart";
  const powered_by = `${cdn_path}/gk-logo.svg`;
  const close_btn = `${cdn_path}/sidecart-close-btn.svg`;
  const gift_image = `${cdn_path}/freeGift.svg`;
  const lockedIcon = `${cdn_path}/locked.svg`;
  const images = {
    arrowLeft,
    plusIcon,
    chevronRight,
    divider,
    flag_of_inda,
    otp_screen,
    edit_icon,
    close
  };
  function add_css$J(target) {
    append_styles(target, "svelte-15bw2i4", ".effect.svelte-15bw2i4,.lazy-loading-screen.svelte-15bw2i4{animation-duration:4s;animation-fill-mode:forwards;animation-iteration-count:infinite;animation-name:svelte-15bw2i4-placeHolderShimmer;animation-timing-function:linear;background-color:#f6f7f8;background:linear-gradient(to right, #eeeeee 8%, #bbbbbb 18%, #eeeeee 33%);background-size:800px 104px;position:relative}.lazy-loading-screen.svelte-15bw2i4{display:flex;width:100%;height:100%}.lazy-loading-screen.border-radius.svelte-15bw2i4{border-radius:5px}.circle.svelte-15bw2i4{border-radius:50px}@keyframes svelte-15bw2i4-placeHolderShimmer{0%{background-position:-800px 0}100%{background-position:800px 0}}");
  }
  function create_fragment$O(ctx) {
    let div;
    let div_class_value;
    return {
      c() {
        div = element("div");
        attr(div, "class", div_class_value = null_to_empty("lazy-loading-screen" + /*isCircle*/
        (ctx[0] ? " circle" : "") + /*borderRadius*/
        (ctx[1] ? " border-radius" : "")) + " svelte-15bw2i4");
      },
      m(target, anchor) {
        insert(target, div, anchor);
      },
      p(ctx2, [dirty]) {
        if (dirty & /*isCircle, borderRadius*/
        3 && div_class_value !== (div_class_value = null_to_empty("lazy-loading-screen" + /*isCircle*/
        (ctx2[0] ? " circle" : "") + /*borderRadius*/
        (ctx2[1] ? " border-radius" : "")) + " svelte-15bw2i4")) {
          attr(div, "class", div_class_value);
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(div);
        }
      }
    };
  }
  function instance$M($$self, $$props, $$invalidate) {
    let { isCircle = false } = $$props;
    let { borderRadius = true } = $$props;
    $$self.$$set = ($$props2) => {
      if ("isCircle" in $$props2)
        $$invalidate(0, isCircle = $$props2.isCircle);
      if ("borderRadius" in $$props2)
        $$invalidate(1, borderRadius = $$props2.borderRadius);
    };
    return [isCircle, borderRadius];
  }
  class LazyLoadingComponent extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$M, create_fragment$O, safe_not_equal, { isCircle: 0, borderRadius: 1 }, add_css$J);
    }
  }
  function add_css$I(target) {
    append_styles(target, "svelte-zjozic", ".phn-number.svelte-zjozic{font-size:12px;font-weight:600;color:black;font-family:var(--font-family)}.timer-container.svelte-zjozic{display:flex;justify-content:center;text-align:center;align-items:center;font-family:var(--font-family) !important}.otp-timer-container.svelte-zjozic{display:flex;flex-direction:column;gap:12px;padding:1rem}.otp-text.svelte-zjozic{font-size:12px;font-weight:500;color:#929292;font-family:var(--font-family) !important}.otp-screen-image.svelte-zjozic{margin-top:20px;border-radius:10px}.resend-otp.svelte-zjozic{cursor:pointer;background:none;font-size:12px;font-weight:500;font-family:var(--font-family);color:var(--blue);margin:0}.enter-otp-info.svelte-zjozic{color:var(--black);opacity:0.5;font-size:12px;font-weight:600;font-family:var(--font-family)}.edit-phone-container.svelte-zjozic{display:flex;align-items:center;justify-content:space-between;gap:4px}.edit-icon.svelte-zjozic{width:12px}.edit-icon-btn.svelte-zjozic{display:flex;background:none;cursor:pointer}.disable-btn.svelte-zjozic{color:var(--dark-grey);cursor:not-allowed}.timer.svelte-zjozic{margin:0px 3px}.address-available.svelte-zjozic{text-align:center;color:white;background-color:var(--black);position:absolute;bottom:4px;left:0;width:100%;background-color:var(--semi-transparent-black);color:white;padding:7px 0;border-bottom-left-radius:10px;border-bottom-right-radius:10px}.otp-image-container.svelte-zjozic{position:relative;text-align:center;color:white;border-radius:10px;margin-top:10px}.otp-input-section.svelte-zjozic{height:62px}");
  }
  function create_if_block_2$k(ctx) {
    let div;
    let t0;
    let t1;
    let t2_value = (
      /*$store_addressCount*/
      ctx[3] > 1 ? "Address" : "Addresses"
    );
    let t2;
    let t3;
    return {
      c() {
        div = element("div");
        t0 = text(
          /*$store_addressCount*/
          ctx[3]
        );
        t1 = space();
        t2 = text(t2_value);
        t3 = text(" Available");
        attr(div, "class", "address-available font-extra-small-bold svelte-zjozic");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, t0);
        append(div, t1);
        append(div, t2);
        append(div, t3);
      },
      p(ctx2, dirty) {
        if (dirty & /*$store_addressCount*/
        8)
          set_data(
            t0,
            /*$store_addressCount*/
            ctx2[3]
          );
        if (dirty & /*$store_addressCount*/
        8 && t2_value !== (t2_value = /*$store_addressCount*/
        ctx2[3] > 1 ? "Address" : "Addresses"))
          set_data(t2, t2_value);
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
      }
    };
  }
  function create_else_block_1$5(ctx) {
    let otpinputfield;
    let current;
    otpinputfield = new OtpInputField({});
    return {
      c() {
        create_component(otpinputfield.$$.fragment);
      },
      m(target, anchor) {
        mount_component(otpinputfield, target, anchor);
        current = true;
      },
      i(local) {
        if (current)
          return;
        transition_in(otpinputfield.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(otpinputfield.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(otpinputfield, detaching);
      }
    };
  }
  function create_if_block_1$t(ctx) {
    let lazyloadingcomponent;
    let current;
    lazyloadingcomponent = new LazyLoadingComponent({});
    return {
      c() {
        create_component(lazyloadingcomponent.$$.fragment);
      },
      m(target, anchor) {
        mount_component(lazyloadingcomponent, target, anchor);
        current = true;
      },
      i(local) {
        if (current)
          return;
        transition_in(lazyloadingcomponent.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(lazyloadingcomponent.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(lazyloadingcomponent, detaching);
      }
    };
  }
  function create_else_block$h(ctx) {
    let button;
    let t;
    let button_class_value;
    let button_disabled_value;
    let mounted;
    let dispose;
    return {
      c() {
        button = element("button");
        t = text("Resend OTP");
        attr(button, "class", button_class_value = "resend-otp " + (!/*isTimeUp*/
        ctx[0] ? "disable-btn" : "") + " svelte-zjozic");
        button.disabled = button_disabled_value = !/*isTimeUp*/
        ctx[0];
      },
      m(target, anchor) {
        insert(target, button, anchor);
        append(button, t);
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*callResendOtp*/
            ctx[6]
          );
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        if (dirty & /*isTimeUp*/
        1 && button_class_value !== (button_class_value = "resend-otp " + (!/*isTimeUp*/
        ctx2[0] ? "disable-btn" : "") + " svelte-zjozic")) {
          attr(button, "class", button_class_value);
        }
        if (dirty & /*isTimeUp*/
        1 && button_disabled_value !== (button_disabled_value = !/*isTimeUp*/
        ctx2[0])) {
          button.disabled = button_disabled_value;
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block$A(ctx) {
    let div0;
    let t1;
    let div1;
    let timer;
    let current;
    timer = new Timer({
      props: {
        countDown: (
          /*countDown*/
          ctx[2]
        ),
        onTimeUp: (
          /*onTimeUp*/
          ctx[5]
        )
      }
    });
    return {
      c() {
        div0 = element("div");
        div0.textContent = "Resend OTP in";
        t1 = space();
        div1 = element("div");
        create_component(timer.$$.fragment);
        attr(div0, "class", "otp-text svelte-zjozic");
        attr(div1, "class", "timer svelte-zjozic");
      },
      m(target, anchor) {
        insert(target, div0, anchor);
        insert(target, t1, anchor);
        insert(target, div1, anchor);
        mount_component(timer, div1, null);
        current = true;
      },
      p(ctx2, dirty) {
        const timer_changes = {};
        if (dirty & /*countDown*/
        4)
          timer_changes.countDown = /*countDown*/
          ctx2[2];
        timer.$set(timer_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(timer.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(timer.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div0);
          detach(t1);
          detach(div1);
        }
        destroy_component(timer);
      }
    };
  }
  function create_fragment$N(ctx) {
    let div5;
    let div0;
    let t0;
    let img0;
    let img0_src_value;
    let t1;
    let div2;
    let div1;
    let span0;
    let t3;
    let span1;
    let t4;
    let t5;
    let t6;
    let button;
    let t7;
    let div3;
    let current_block_type_index;
    let if_block1;
    let t8;
    let div4;
    let current_block_type_index_1;
    let if_block2;
    let current;
    let mounted;
    let dispose;
    let if_block0 = (
      /*$store_addressCount*/
      ctx[3] && create_if_block_2$k(ctx)
    );
    const if_block_creators = [create_if_block_1$t, create_else_block_1$5];
    const if_blocks = [];
    function select_block_type(ctx2, dirty) {
      if (
        /*$store_loaderArray*/
        ctx2[4].length
      )
        return 0;
      return 1;
    }
    current_block_type_index = select_block_type(ctx);
    if_block1 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
    const if_block_creators_1 = [create_if_block$A, create_else_block$h];
    const if_blocks_1 = [];
    function select_block_type_1(ctx2, dirty) {
      if (!/*isTimeUp*/
      ctx2[0])
        return 0;
      return 1;
    }
    current_block_type_index_1 = select_block_type_1(ctx);
    if_block2 = if_blocks_1[current_block_type_index_1] = if_block_creators_1[current_block_type_index_1](ctx);
    return {
      c() {
        div5 = element("div");
        div0 = element("div");
        if (if_block0)
          if_block0.c();
        t0 = space();
        img0 = element("img");
        t1 = space();
        div2 = element("div");
        div1 = element("div");
        span0 = element("span");
        span0.textContent = `${OtpInputTexts.enterOtpInfo}`;
        t3 = space();
        span1 = element("span");
        t4 = text("+91 ");
        t5 = text(
          /*phoneNumber*/
          ctx[1]
        );
        t6 = space();
        button = element("button");
        button.innerHTML = `<img src="${images.edit_icon}" class="edit-icon svelte-zjozic" alt="edit"/>`;
        t7 = space();
        div3 = element("div");
        if_block1.c();
        t8 = space();
        div4 = element("div");
        if_block2.c();
        if (!src_url_equal(img0.src, img0_src_value = images.otp_screen))
          attr(img0, "src", img0_src_value);
        attr(img0, "class", "otp-screen-image svelte-zjozic");
        attr(img0, "alt", "");
        attr(div0, "class", "otp-image-container svelte-zjozic");
        attr(span0, "class", "enter-otp-info svelte-zjozic");
        attr(span1, "class", "phn-number svelte-zjozic");
        attr(button, "class", "edit-icon-btn svelte-zjozic");
        attr(div2, "class", "font-small-bold edit-phone-container svelte-zjozic");
        attr(div3, "class", "otp-input-section svelte-zjozic");
        attr(div4, "class", "timer-container font-small-medium svelte-zjozic");
        attr(div5, "class", "otp-timer-container svelte-zjozic");
      },
      m(target, anchor) {
        insert(target, div5, anchor);
        append(div5, div0);
        if (if_block0)
          if_block0.m(div0, null);
        append(div0, t0);
        append(div0, img0);
        append(div5, t1);
        append(div5, div2);
        append(div2, div1);
        append(div1, span0);
        append(div1, t3);
        append(div1, span1);
        append(span1, t4);
        append(span1, t5);
        append(div2, t6);
        append(div2, button);
        append(div5, t7);
        append(div5, div3);
        if_blocks[current_block_type_index].m(div3, null);
        append(div5, t8);
        append(div5, div4);
        if_blocks_1[current_block_type_index_1].m(div4, null);
        current = true;
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*closeOtpBottomSheet*/
            ctx[7]
          );
          mounted = true;
        }
      },
      p(ctx2, [dirty]) {
        if (
          /*$store_addressCount*/
          ctx2[3]
        ) {
          if (if_block0) {
            if_block0.p(ctx2, dirty);
          } else {
            if_block0 = create_if_block_2$k(ctx2);
            if_block0.c();
            if_block0.m(div0, t0);
          }
        } else if (if_block0) {
          if_block0.d(1);
          if_block0 = null;
        }
        if (!current || dirty & /*phoneNumber*/
        2)
          set_data(
            t5,
            /*phoneNumber*/
            ctx2[1]
          );
        let previous_block_index = current_block_type_index;
        current_block_type_index = select_block_type(ctx2);
        if (current_block_type_index !== previous_block_index) {
          group_outros();
          transition_out(if_blocks[previous_block_index], 1, 1, () => {
            if_blocks[previous_block_index] = null;
          });
          check_outros();
          if_block1 = if_blocks[current_block_type_index];
          if (!if_block1) {
            if_block1 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
            if_block1.c();
          }
          transition_in(if_block1, 1);
          if_block1.m(div3, null);
        }
        let previous_block_index_1 = current_block_type_index_1;
        current_block_type_index_1 = select_block_type_1(ctx2);
        if (current_block_type_index_1 === previous_block_index_1) {
          if_blocks_1[current_block_type_index_1].p(ctx2, dirty);
        } else {
          group_outros();
          transition_out(if_blocks_1[previous_block_index_1], 1, 1, () => {
            if_blocks_1[previous_block_index_1] = null;
          });
          check_outros();
          if_block2 = if_blocks_1[current_block_type_index_1];
          if (!if_block2) {
            if_block2 = if_blocks_1[current_block_type_index_1] = if_block_creators_1[current_block_type_index_1](ctx2);
            if_block2.c();
          } else {
            if_block2.p(ctx2, dirty);
          }
          transition_in(if_block2, 1);
          if_block2.m(div4, null);
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block1);
        transition_in(if_block2);
        current = true;
      },
      o(local) {
        transition_out(if_block1);
        transition_out(if_block2);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div5);
        }
        if (if_block0)
          if_block0.d();
        if_blocks[current_block_type_index].d();
        if_blocks_1[current_block_type_index_1].d();
        mounted = false;
        dispose();
      }
    };
  }
  function instance$L($$self, $$props, $$invalidate) {
    let $store_addressCount;
    let $store_loaderArray;
    component_subscribe($$self, store_addressCount, ($$value) => $$invalidate(3, $store_addressCount = $$value));
    component_subscribe($$self, store_loaderArray, ($$value) => $$invalidate(4, $store_loaderArray = $$value));
    let isTimeUp = false;
    let phoneNumber = "";
    let countDown = 60;
    let requestd = "";
    let resendOtpCounter = 0;
    store_requestId.subscribe((res) => {
      requestd = res;
    });
    store_phoneNumber.subscribe((res) => {
      $$invalidate(1, phoneNumber = res);
    });
    store_cartId.subscribe((res) => {
      res.toString();
    });
    const onTimeUp = () => {
      $$invalidate(0, isTimeUp = true);
      $$invalidate(2, countDown = 0);
    };
    const callResendOtp = async () => {
      if (resendOtpCounter >= 2) {
        return;
      }
      resendOtpCounter += 1;
      $$invalidate(2, countDown = 60);
      $$invalidate(0, isTimeUp = false);
      sendMessageToiFrame("resend-otp", { phoneNumber, requestId: requestd });
    };
    const closeOtpBottomSheet = () => {
      closeBottomSheet();
      store_isEditPhone.set(true);
      openLoginBottomSheet();
    };
    onMount(() => {
      store_phoneNumber.subscribe((res) => {
        $$invalidate(1, phoneNumber = res);
      });
    });
    return [
      isTimeUp,
      phoneNumber,
      countDown,
      $store_addressCount,
      $store_loaderArray,
      onTimeUp,
      callResendOtp,
      closeOtpBottomSheet
    ];
  }
  class OtpInputContainer extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$L, create_fragment$N, safe_not_equal, {}, add_css$I);
    }
  }
  const matchIconName = /^[a-z0-9]+(-[a-z0-9]+)*$/;
  const stringToIcon = (value, validate, allowSimpleName, provider = "") => {
    const colonSeparated = value.split(":");
    if (value.slice(0, 1) === "@") {
      if (colonSeparated.length < 2 || colonSeparated.length > 3) {
        return null;
      }
      provider = colonSeparated.shift().slice(1);
    }
    if (colonSeparated.length > 3 || !colonSeparated.length) {
      return null;
    }
    if (colonSeparated.length > 1) {
      const name2 = colonSeparated.pop();
      const prefix = colonSeparated.pop();
      const result = {
        // Allow provider without '@': "provider:prefix:name"
        provider: colonSeparated.length > 0 ? colonSeparated[0] : provider,
        prefix,
        name: name2
      };
      return validate && !validateIconName(result) ? null : result;
    }
    const name = colonSeparated[0];
    const dashSeparated = name.split("-");
    if (dashSeparated.length > 1) {
      const result = {
        provider,
        prefix: dashSeparated.shift(),
        name: dashSeparated.join("-")
      };
      return validate && !validateIconName(result) ? null : result;
    }
    if (allowSimpleName && provider === "") {
      const result = {
        provider,
        prefix: "",
        name
      };
      return validate && !validateIconName(result, allowSimpleName) ? null : result;
    }
    return null;
  };
  const validateIconName = (icon, allowSimpleName) => {
    if (!icon) {
      return false;
    }
    return !!((icon.provider === "" || icon.provider.match(matchIconName)) && (allowSimpleName && icon.prefix === "" || icon.prefix.match(matchIconName)) && icon.name.match(matchIconName));
  };
  const defaultIconDimensions = Object.freeze(
    {
      left: 0,
      top: 0,
      width: 16,
      height: 16
    }
  );
  const defaultIconTransformations = Object.freeze({
    rotate: 0,
    vFlip: false,
    hFlip: false
  });
  const defaultIconProps = Object.freeze({
    ...defaultIconDimensions,
    ...defaultIconTransformations
  });
  const defaultExtendedIconProps = Object.freeze({
    ...defaultIconProps,
    body: "",
    hidden: false
  });
  function mergeIconTransformations(obj1, obj2) {
    const result = {};
    if (!obj1.hFlip !== !obj2.hFlip) {
      result.hFlip = true;
    }
    if (!obj1.vFlip !== !obj2.vFlip) {
      result.vFlip = true;
    }
    const rotate = ((obj1.rotate || 0) + (obj2.rotate || 0)) % 4;
    if (rotate) {
      result.rotate = rotate;
    }
    return result;
  }
  function mergeIconData(parent, child) {
    const result = mergeIconTransformations(parent, child);
    for (const key in defaultExtendedIconProps) {
      if (key in defaultIconTransformations) {
        if (key in parent && !(key in result)) {
          result[key] = defaultIconTransformations[key];
        }
      } else if (key in child) {
        result[key] = child[key];
      } else if (key in parent) {
        result[key] = parent[key];
      }
    }
    return result;
  }
  function getIconsTree(data, names) {
    const icons = data.icons;
    const aliases = data.aliases || /* @__PURE__ */ Object.create(null);
    const resolved = /* @__PURE__ */ Object.create(null);
    function resolve(name) {
      if (icons[name]) {
        return resolved[name] = [];
      }
      if (!(name in resolved)) {
        resolved[name] = null;
        const parent = aliases[name] && aliases[name].parent;
        const value = parent && resolve(parent);
        if (value) {
          resolved[name] = [parent].concat(value);
        }
      }
      return resolved[name];
    }
    Object.keys(icons).concat(Object.keys(aliases)).forEach(resolve);
    return resolved;
  }
  function internalGetIconData(data, name, tree) {
    const icons = data.icons;
    const aliases = data.aliases || /* @__PURE__ */ Object.create(null);
    let currentProps = {};
    function parse(name2) {
      currentProps = mergeIconData(
        icons[name2] || aliases[name2],
        currentProps
      );
    }
    parse(name);
    tree.forEach(parse);
    return mergeIconData(data, currentProps);
  }
  function parseIconSet(data, callback) {
    const names = [];
    if (typeof data !== "object" || typeof data.icons !== "object") {
      return names;
    }
    if (data.not_found instanceof Array) {
      data.not_found.forEach((name) => {
        callback(name, null);
        names.push(name);
      });
    }
    const tree = getIconsTree(data);
    for (const name in tree) {
      const item = tree[name];
      if (item) {
        callback(name, internalGetIconData(data, name, item));
        names.push(name);
      }
    }
    return names;
  }
  const optionalPropertyDefaults = {
    provider: "",
    aliases: {},
    not_found: {},
    ...defaultIconDimensions
  };
  function checkOptionalProps(item, defaults) {
    for (const prop in defaults) {
      if (prop in item && typeof item[prop] !== typeof defaults[prop]) {
        return false;
      }
    }
    return true;
  }
  function quicklyValidateIconSet(obj) {
    if (typeof obj !== "object" || obj === null) {
      return null;
    }
    const data = obj;
    if (typeof data.prefix !== "string" || !obj.icons || typeof obj.icons !== "object") {
      return null;
    }
    if (!checkOptionalProps(obj, optionalPropertyDefaults)) {
      return null;
    }
    const icons = data.icons;
    for (const name in icons) {
      const icon = icons[name];
      if (!name.match(matchIconName) || typeof icon.body !== "string" || !checkOptionalProps(
        icon,
        defaultExtendedIconProps
      )) {
        return null;
      }
    }
    const aliases = data.aliases || /* @__PURE__ */ Object.create(null);
    for (const name in aliases) {
      const icon = aliases[name];
      const parent = icon.parent;
      if (!name.match(matchIconName) || typeof parent !== "string" || !icons[parent] && !aliases[parent] || !checkOptionalProps(
        icon,
        defaultExtendedIconProps
      )) {
        return null;
      }
    }
    return data;
  }
  const dataStorage = /* @__PURE__ */ Object.create(null);
  function newStorage(provider, prefix) {
    return {
      provider,
      prefix,
      icons: /* @__PURE__ */ Object.create(null),
      missing: /* @__PURE__ */ new Set()
    };
  }
  function getStorage(provider, prefix) {
    const providerStorage = dataStorage[provider] || (dataStorage[provider] = /* @__PURE__ */ Object.create(null));
    return providerStorage[prefix] || (providerStorage[prefix] = newStorage(provider, prefix));
  }
  function addIconSet(storage2, data) {
    if (!quicklyValidateIconSet(data)) {
      return [];
    }
    return parseIconSet(data, (name, icon) => {
      if (icon) {
        storage2.icons[name] = icon;
      } else {
        storage2.missing.add(name);
      }
    });
  }
  function addIconToStorage(storage2, name, icon) {
    try {
      if (typeof icon.body === "string") {
        storage2.icons[name] = { ...icon };
        return true;
      }
    } catch (err) {
    }
    return false;
  }
  let simpleNames = false;
  function allowSimpleNames(allow) {
    if (typeof allow === "boolean") {
      simpleNames = allow;
    }
    return simpleNames;
  }
  function getIconData(name) {
    const icon = typeof name === "string" ? stringToIcon(name, true, simpleNames) : name;
    if (icon) {
      const storage2 = getStorage(icon.provider, icon.prefix);
      const iconName = icon.name;
      return storage2.icons[iconName] || (storage2.missing.has(iconName) ? null : void 0);
    }
  }
  function addIcon(name, data) {
    const icon = stringToIcon(name, true, simpleNames);
    if (!icon) {
      return false;
    }
    const storage2 = getStorage(icon.provider, icon.prefix);
    return addIconToStorage(storage2, icon.name, data);
  }
  function addCollection(data, provider) {
    if (typeof data !== "object") {
      return false;
    }
    if (typeof provider !== "string") {
      provider = data.provider || "";
    }
    if (simpleNames && !provider && !data.prefix) {
      let added = false;
      if (quicklyValidateIconSet(data)) {
        data.prefix = "";
        parseIconSet(data, (name, icon) => {
          if (icon && addIcon(name, icon)) {
            added = true;
          }
        });
      }
      return added;
    }
    const prefix = data.prefix;
    if (!validateIconName({
      provider,
      prefix,
      name: "a"
    })) {
      return false;
    }
    const storage2 = getStorage(provider, prefix);
    return !!addIconSet(storage2, data);
  }
  const defaultIconSizeCustomisations = Object.freeze({
    width: null,
    height: null
  });
  const defaultIconCustomisations = Object.freeze({
    // Dimensions
    ...defaultIconSizeCustomisations,
    // Transformations
    ...defaultIconTransformations
  });
  const unitsSplit = /(-?[0-9.]*[0-9]+[0-9.]*)/g;
  const unitsTest = /^-?[0-9.]*[0-9]+[0-9.]*$/g;
  function calculateSize(size, ratio, precision) {
    if (ratio === 1) {
      return size;
    }
    precision = precision || 100;
    if (typeof size === "number") {
      return Math.ceil(size * ratio * precision) / precision;
    }
    if (typeof size !== "string") {
      return size;
    }
    const oldParts = size.split(unitsSplit);
    if (oldParts === null || !oldParts.length) {
      return size;
    }
    const newParts = [];
    let code = oldParts.shift();
    let isNumber = unitsTest.test(code);
    while (true) {
      if (isNumber) {
        const num = parseFloat(code);
        if (isNaN(num)) {
          newParts.push(code);
        } else {
          newParts.push(Math.ceil(num * ratio * precision) / precision);
        }
      } else {
        newParts.push(code);
      }
      code = oldParts.shift();
      if (code === void 0) {
        return newParts.join("");
      }
      isNumber = !isNumber;
    }
  }
  function splitSVGDefs(content, tag = "defs") {
    let defs = "";
    const index = content.indexOf("<" + tag);
    while (index >= 0) {
      const start = content.indexOf(">", index);
      const end = content.indexOf("</" + tag);
      if (start === -1 || end === -1) {
        break;
      }
      const endEnd = content.indexOf(">", end);
      if (endEnd === -1) {
        break;
      }
      defs += content.slice(start + 1, end).trim();
      content = content.slice(0, index).trim() + content.slice(endEnd + 1);
    }
    return {
      defs,
      content
    };
  }
  function mergeDefsAndContent(defs, content) {
    return defs ? "<defs>" + defs + "</defs>" + content : content;
  }
  function wrapSVGContent(body, start, end) {
    const split = splitSVGDefs(body);
    return mergeDefsAndContent(split.defs, start + split.content + end);
  }
  const isUnsetKeyword = (value) => value === "unset" || value === "undefined" || value === "none";
  function iconToSVG(icon, customisations) {
    const fullIcon = {
      ...defaultIconProps,
      ...icon
    };
    const fullCustomisations = {
      ...defaultIconCustomisations,
      ...customisations
    };
    const box = {
      left: fullIcon.left,
      top: fullIcon.top,
      width: fullIcon.width,
      height: fullIcon.height
    };
    let body = fullIcon.body;
    [fullIcon, fullCustomisations].forEach((props) => {
      const transformations = [];
      const hFlip = props.hFlip;
      const vFlip = props.vFlip;
      let rotation = props.rotate;
      if (hFlip) {
        if (vFlip) {
          rotation += 2;
        } else {
          transformations.push(
            "translate(" + (box.width + box.left).toString() + " " + (0 - box.top).toString() + ")"
          );
          transformations.push("scale(-1 1)");
          box.top = box.left = 0;
        }
      } else if (vFlip) {
        transformations.push(
          "translate(" + (0 - box.left).toString() + " " + (box.height + box.top).toString() + ")"
        );
        transformations.push("scale(1 -1)");
        box.top = box.left = 0;
      }
      let tempValue;
      if (rotation < 0) {
        rotation -= Math.floor(rotation / 4) * 4;
      }
      rotation = rotation % 4;
      switch (rotation) {
        case 1:
          tempValue = box.height / 2 + box.top;
          transformations.unshift(
            "rotate(90 " + tempValue.toString() + " " + tempValue.toString() + ")"
          );
          break;
        case 2:
          transformations.unshift(
            "rotate(180 " + (box.width / 2 + box.left).toString() + " " + (box.height / 2 + box.top).toString() + ")"
          );
          break;
        case 3:
          tempValue = box.width / 2 + box.left;
          transformations.unshift(
            "rotate(-90 " + tempValue.toString() + " " + tempValue.toString() + ")"
          );
          break;
      }
      if (rotation % 2 === 1) {
        if (box.left !== box.top) {
          tempValue = box.left;
          box.left = box.top;
          box.top = tempValue;
        }
        if (box.width !== box.height) {
          tempValue = box.width;
          box.width = box.height;
          box.height = tempValue;
        }
      }
      if (transformations.length) {
        body = wrapSVGContent(
          body,
          '<g transform="' + transformations.join(" ") + '">',
          "</g>"
        );
      }
    });
    const customisationsWidth = fullCustomisations.width;
    const customisationsHeight = fullCustomisations.height;
    const boxWidth = box.width;
    const boxHeight = box.height;
    let width;
    let height;
    if (customisationsWidth === null) {
      height = customisationsHeight === null ? "1em" : customisationsHeight === "auto" ? boxHeight : customisationsHeight;
      width = calculateSize(height, boxWidth / boxHeight);
    } else {
      width = customisationsWidth === "auto" ? boxWidth : customisationsWidth;
      height = customisationsHeight === null ? calculateSize(width, boxHeight / boxWidth) : customisationsHeight === "auto" ? boxHeight : customisationsHeight;
    }
    const attributes = {};
    const setAttr = (prop, value) => {
      if (!isUnsetKeyword(value)) {
        attributes[prop] = value.toString();
      }
    };
    setAttr("width", width);
    setAttr("height", height);
    const viewBox = [box.left, box.top, boxWidth, boxHeight];
    attributes.viewBox = viewBox.join(" ");
    return {
      attributes,
      viewBox,
      body
    };
  }
  const regex = /\sid="(\S+)"/g;
  const randomPrefix = "IconifyId" + Date.now().toString(16) + (Math.random() * 16777216 | 0).toString(16);
  let counter = 0;
  function replaceIDs(body, prefix = randomPrefix) {
    const ids = [];
    let match;
    while (match = regex.exec(body)) {
      ids.push(match[1]);
    }
    if (!ids.length) {
      return body;
    }
    const suffix = "suffix" + (Math.random() * 16777216 | Date.now()).toString(16);
    ids.forEach((id) => {
      const newID = typeof prefix === "function" ? prefix(id) : prefix + (counter++).toString();
      const escapedID = id.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");
      body = body.replace(
        // Allowed characters before id: [#;"]
        // Allowed characters after id: [)"], .[a-z]
        new RegExp('([#;"])(' + escapedID + ')([")]|\\.[a-z])', "g"),
        "$1" + newID + suffix + "$3"
      );
    });
    body = body.replace(new RegExp(suffix, "g"), "");
    return body;
  }
  const storage = /* @__PURE__ */ Object.create(null);
  function setAPIModule(provider, item) {
    storage[provider] = item;
  }
  function getAPIModule(provider) {
    return storage[provider] || storage[""];
  }
  function createAPIConfig(source) {
    let resources;
    if (typeof source.resources === "string") {
      resources = [source.resources];
    } else {
      resources = source.resources;
      if (!(resources instanceof Array) || !resources.length) {
        return null;
      }
    }
    const result = {
      // API hosts
      resources,
      // Root path
      path: source.path || "/",
      // URL length limit
      maxURL: source.maxURL || 500,
      // Timeout before next host is used.
      rotate: source.rotate || 750,
      // Timeout before failing query.
      timeout: source.timeout || 5e3,
      // Randomise default API end point.
      random: source.random === true,
      // Start index
      index: source.index || 0,
      // Receive data after time out (used if time out kicks in first, then API module sends data anyway).
      dataAfterTimeout: source.dataAfterTimeout !== false
    };
    return result;
  }
  const configStorage = /* @__PURE__ */ Object.create(null);
  const fallBackAPISources = [
    "https://api.simplesvg.com",
    "https://api.unisvg.com"
  ];
  const fallBackAPI = [];
  while (fallBackAPISources.length > 0) {
    if (fallBackAPISources.length === 1) {
      fallBackAPI.push(fallBackAPISources.shift());
    } else {
      if (Math.random() > 0.5) {
        fallBackAPI.push(fallBackAPISources.shift());
      } else {
        fallBackAPI.push(fallBackAPISources.pop());
      }
    }
  }
  configStorage[""] = createAPIConfig({
    resources: ["https://api.iconify.design"].concat(fallBackAPI)
  });
  function addAPIProvider(provider, customConfig) {
    const config = createAPIConfig(customConfig);
    if (config === null) {
      return false;
    }
    configStorage[provider] = config;
    return true;
  }
  function getAPIConfig(provider) {
    return configStorage[provider];
  }
  const detectFetch = () => {
    let callback;
    try {
      callback = fetch;
      if (typeof callback === "function") {
        return callback;
      }
    } catch (err) {
    }
  };
  let fetchModule = detectFetch();
  function calculateMaxLength(provider, prefix) {
    const config = getAPIConfig(provider);
    if (!config) {
      return 0;
    }
    let result;
    if (!config.maxURL) {
      result = 0;
    } else {
      let maxHostLength = 0;
      config.resources.forEach((item) => {
        const host = item;
        maxHostLength = Math.max(maxHostLength, host.length);
      });
      const url = prefix + ".json?icons=";
      result = config.maxURL - maxHostLength - config.path.length - url.length;
    }
    return result;
  }
  function shouldAbort(status) {
    return status === 404;
  }
  const prepare = (provider, prefix, icons) => {
    const results = [];
    const maxLength = calculateMaxLength(provider, prefix);
    const type = "icons";
    let item = {
      type,
      provider,
      prefix,
      icons: []
    };
    let length = 0;
    icons.forEach((name, index) => {
      length += name.length + 1;
      if (length >= maxLength && index > 0) {
        results.push(item);
        item = {
          type,
          provider,
          prefix,
          icons: []
        };
        length = name.length;
      }
      item.icons.push(name);
    });
    results.push(item);
    return results;
  };
  function getPath(provider) {
    if (typeof provider === "string") {
      const config = getAPIConfig(provider);
      if (config) {
        return config.path;
      }
    }
    return "/";
  }
  const send = (host, params, callback) => {
    if (!fetchModule) {
      callback("abort", 424);
      return;
    }
    let path = getPath(params.provider);
    switch (params.type) {
      case "icons": {
        const prefix = params.prefix;
        const icons = params.icons;
        const iconsList = icons.join(",");
        const urlParams = new URLSearchParams({
          icons: iconsList
        });
        path += prefix + ".json?" + urlParams.toString();
        break;
      }
      case "custom": {
        const uri = params.uri;
        path += uri.slice(0, 1) === "/" ? uri.slice(1) : uri;
        break;
      }
      default:
        callback("abort", 400);
        return;
    }
    let defaultError = 503;
    fetchModule(host + path).then((response) => {
      const status = response.status;
      if (status !== 200) {
        setTimeout(() => {
          callback(shouldAbort(status) ? "abort" : "next", status);
        });
        return;
      }
      defaultError = 501;
      return response.json();
    }).then((data) => {
      if (typeof data !== "object" || data === null) {
        setTimeout(() => {
          if (data === 404) {
            callback("abort", data);
          } else {
            callback("next", defaultError);
          }
        });
        return;
      }
      setTimeout(() => {
        callback("success", data);
      });
    }).catch(() => {
      callback("next", defaultError);
    });
  };
  const fetchAPIModule = {
    prepare,
    send
  };
  function sortIcons(icons) {
    const result = {
      loaded: [],
      missing: [],
      pending: []
    };
    const storage2 = /* @__PURE__ */ Object.create(null);
    icons.sort((a, b) => {
      if (a.provider !== b.provider) {
        return a.provider.localeCompare(b.provider);
      }
      if (a.prefix !== b.prefix) {
        return a.prefix.localeCompare(b.prefix);
      }
      return a.name.localeCompare(b.name);
    });
    let lastIcon = {
      provider: "",
      prefix: "",
      name: ""
    };
    icons.forEach((icon) => {
      if (lastIcon.name === icon.name && lastIcon.prefix === icon.prefix && lastIcon.provider === icon.provider) {
        return;
      }
      lastIcon = icon;
      const provider = icon.provider;
      const prefix = icon.prefix;
      const name = icon.name;
      const providerStorage = storage2[provider] || (storage2[provider] = /* @__PURE__ */ Object.create(null));
      const localStorage2 = providerStorage[prefix] || (providerStorage[prefix] = getStorage(provider, prefix));
      let list;
      if (name in localStorage2.icons) {
        list = result.loaded;
      } else if (prefix === "" || localStorage2.missing.has(name)) {
        list = result.missing;
      } else {
        list = result.pending;
      }
      const item = {
        provider,
        prefix,
        name
      };
      list.push(item);
    });
    return result;
  }
  function removeCallback(storages, id) {
    storages.forEach((storage2) => {
      const items = storage2.loaderCallbacks;
      if (items) {
        storage2.loaderCallbacks = items.filter((row) => row.id !== id);
      }
    });
  }
  function updateCallbacks(storage2) {
    if (!storage2.pendingCallbacksFlag) {
      storage2.pendingCallbacksFlag = true;
      setTimeout(() => {
        storage2.pendingCallbacksFlag = false;
        const items = storage2.loaderCallbacks ? storage2.loaderCallbacks.slice(0) : [];
        if (!items.length) {
          return;
        }
        let hasPending = false;
        const provider = storage2.provider;
        const prefix = storage2.prefix;
        items.forEach((item) => {
          const icons = item.icons;
          const oldLength = icons.pending.length;
          icons.pending = icons.pending.filter((icon) => {
            if (icon.prefix !== prefix) {
              return true;
            }
            const name = icon.name;
            if (storage2.icons[name]) {
              icons.loaded.push({
                provider,
                prefix,
                name
              });
            } else if (storage2.missing.has(name)) {
              icons.missing.push({
                provider,
                prefix,
                name
              });
            } else {
              hasPending = true;
              return true;
            }
            return false;
          });
          if (icons.pending.length !== oldLength) {
            if (!hasPending) {
              removeCallback([storage2], item.id);
            }
            item.callback(
              icons.loaded.slice(0),
              icons.missing.slice(0),
              icons.pending.slice(0),
              item.abort
            );
          }
        });
      });
    }
  }
  let idCounter = 0;
  function storeCallback(callback, icons, pendingSources) {
    const id = idCounter++;
    const abort = removeCallback.bind(null, pendingSources, id);
    if (!icons.pending.length) {
      return abort;
    }
    const item = {
      id,
      icons,
      callback,
      abort
    };
    pendingSources.forEach((storage2) => {
      (storage2.loaderCallbacks || (storage2.loaderCallbacks = [])).push(item);
    });
    return abort;
  }
  function listToIcons(list, validate = true, simpleNames2 = false) {
    const result = [];
    list.forEach((item) => {
      const icon = typeof item === "string" ? stringToIcon(item, validate, simpleNames2) : item;
      if (icon) {
        result.push(icon);
      }
    });
    return result;
  }
  var defaultConfig = {
    resources: [],
    index: 0,
    timeout: 2e3,
    rotate: 750,
    random: false,
    dataAfterTimeout: false
  };
  function sendQuery(config, payload, query, done) {
    const resourcesCount = config.resources.length;
    const startIndex = config.random ? Math.floor(Math.random() * resourcesCount) : config.index;
    let resources;
    if (config.random) {
      let list = config.resources.slice(0);
      resources = [];
      while (list.length > 1) {
        const nextIndex = Math.floor(Math.random() * list.length);
        resources.push(list[nextIndex]);
        list = list.slice(0, nextIndex).concat(list.slice(nextIndex + 1));
      }
      resources = resources.concat(list);
    } else {
      resources = config.resources.slice(startIndex).concat(config.resources.slice(0, startIndex));
    }
    const startTime = Date.now();
    let status = "pending";
    let queriesSent = 0;
    let lastError;
    let timer = null;
    let queue = [];
    let doneCallbacks = [];
    if (typeof done === "function") {
      doneCallbacks.push(done);
    }
    function resetTimer() {
      if (timer) {
        clearTimeout(timer);
        timer = null;
      }
    }
    function abort() {
      if (status === "pending") {
        status = "aborted";
      }
      resetTimer();
      queue.forEach((item) => {
        if (item.status === "pending") {
          item.status = "aborted";
        }
      });
      queue = [];
    }
    function subscribe2(callback, overwrite) {
      if (overwrite) {
        doneCallbacks = [];
      }
      if (typeof callback === "function") {
        doneCallbacks.push(callback);
      }
    }
    function getQueryStatus() {
      return {
        startTime,
        payload,
        status,
        queriesSent,
        queriesPending: queue.length,
        subscribe: subscribe2,
        abort
      };
    }
    function failQuery() {
      status = "failed";
      doneCallbacks.forEach((callback) => {
        callback(void 0, lastError);
      });
    }
    function clearQueue() {
      queue.forEach((item) => {
        if (item.status === "pending") {
          item.status = "aborted";
        }
      });
      queue = [];
    }
    function moduleResponse(item, response, data) {
      const isError = response !== "success";
      queue = queue.filter((queued) => queued !== item);
      switch (status) {
        case "pending":
          break;
        case "failed":
          if (isError || !config.dataAfterTimeout) {
            return;
          }
          break;
        default:
          return;
      }
      if (response === "abort") {
        lastError = data;
        failQuery();
        return;
      }
      if (isError) {
        lastError = data;
        if (!queue.length) {
          if (!resources.length) {
            failQuery();
          } else {
            execNext();
          }
        }
        return;
      }
      resetTimer();
      clearQueue();
      if (!config.random) {
        const index = config.resources.indexOf(item.resource);
        if (index !== -1 && index !== config.index) {
          config.index = index;
        }
      }
      status = "completed";
      doneCallbacks.forEach((callback) => {
        callback(data);
      });
    }
    function execNext() {
      if (status !== "pending") {
        return;
      }
      resetTimer();
      const resource = resources.shift();
      if (resource === void 0) {
        if (queue.length) {
          timer = setTimeout(() => {
            resetTimer();
            if (status === "pending") {
              clearQueue();
              failQuery();
            }
          }, config.timeout);
          return;
        }
        failQuery();
        return;
      }
      const item = {
        status: "pending",
        resource,
        callback: (status2, data) => {
          moduleResponse(item, status2, data);
        }
      };
      queue.push(item);
      queriesSent++;
      timer = setTimeout(execNext, config.rotate);
      query(resource, payload, item.callback);
    }
    setTimeout(execNext);
    return getQueryStatus;
  }
  function initRedundancy(cfg) {
    const config = {
      ...defaultConfig,
      ...cfg
    };
    let queries = [];
    function cleanup() {
      queries = queries.filter((item) => item().status === "pending");
    }
    function query(payload, queryCallback, doneCallback) {
      const query2 = sendQuery(
        config,
        payload,
        queryCallback,
        (data, error) => {
          cleanup();
          if (doneCallback) {
            doneCallback(data, error);
          }
        }
      );
      queries.push(query2);
      return query2;
    }
    function find(callback) {
      return queries.find((value) => {
        return callback(value);
      }) || null;
    }
    const instance2 = {
      query,
      find,
      setIndex: (index) => {
        config.index = index;
      },
      getIndex: () => config.index,
      cleanup
    };
    return instance2;
  }
  function emptyCallback$1() {
  }
  const redundancyCache = /* @__PURE__ */ Object.create(null);
  function getRedundancyCache(provider) {
    if (!redundancyCache[provider]) {
      const config = getAPIConfig(provider);
      if (!config) {
        return;
      }
      const redundancy = initRedundancy(config);
      const cachedReundancy = {
        config,
        redundancy
      };
      redundancyCache[provider] = cachedReundancy;
    }
    return redundancyCache[provider];
  }
  function sendAPIQuery(target, query, callback) {
    let redundancy;
    let send2;
    if (typeof target === "string") {
      const api = getAPIModule(target);
      if (!api) {
        callback(void 0, 424);
        return emptyCallback$1;
      }
      send2 = api.send;
      const cached = getRedundancyCache(target);
      if (cached) {
        redundancy = cached.redundancy;
      }
    } else {
      const config = createAPIConfig(target);
      if (config) {
        redundancy = initRedundancy(config);
        const moduleKey = target.resources ? target.resources[0] : "";
        const api = getAPIModule(moduleKey);
        if (api) {
          send2 = api.send;
        }
      }
    }
    if (!redundancy || !send2) {
      callback(void 0, 424);
      return emptyCallback$1;
    }
    return redundancy.query(query, send2, callback)().abort;
  }
  const browserCacheVersion = "iconify2";
  const browserCachePrefix = "iconify";
  const browserCacheCountKey = browserCachePrefix + "-count";
  const browserCacheVersionKey = browserCachePrefix + "-version";
  const browserStorageHour = 36e5;
  const browserStorageCacheExpiration = 168;
  const browserStorageLimit = 50;
  function getStoredItem(func2, key) {
    try {
      return func2.getItem(key);
    } catch (err) {
    }
  }
  function setStoredItem(func2, key, value) {
    try {
      func2.setItem(key, value);
      return true;
    } catch (err) {
    }
  }
  function removeStoredItem(func2, key) {
    try {
      func2.removeItem(key);
    } catch (err) {
    }
  }
  function setBrowserStorageItemsCount(storage2, value) {
    return setStoredItem(storage2, browserCacheCountKey, value.toString());
  }
  function getBrowserStorageItemsCount(storage2) {
    return parseInt(getStoredItem(storage2, browserCacheCountKey)) || 0;
  }
  const browserStorageConfig = {
    local: true,
    session: true
  };
  const browserStorageEmptyItems = {
    local: /* @__PURE__ */ new Set(),
    session: /* @__PURE__ */ new Set()
  };
  let browserStorageStatus = false;
  function setBrowserStorageStatus(status) {
    browserStorageStatus = status;
  }
  let _window = typeof window === "undefined" ? {} : window;
  function getBrowserStorage(key) {
    const attr2 = key + "Storage";
    try {
      if (_window && _window[attr2] && typeof _window[attr2].length === "number") {
        return _window[attr2];
      }
    } catch (err) {
    }
    browserStorageConfig[key] = false;
  }
  function iterateBrowserStorage(key, callback) {
    const func2 = getBrowserStorage(key);
    if (!func2) {
      return;
    }
    const version = getStoredItem(func2, browserCacheVersionKey);
    if (version !== browserCacheVersion) {
      if (version) {
        const total2 = getBrowserStorageItemsCount(func2);
        for (let i = 0; i < total2; i++) {
          removeStoredItem(func2, browserCachePrefix + i.toString());
        }
      }
      setStoredItem(func2, browserCacheVersionKey, browserCacheVersion);
      setBrowserStorageItemsCount(func2, 0);
      return;
    }
    const minTime = Math.floor(Date.now() / browserStorageHour) - browserStorageCacheExpiration;
    const parseItem = (index) => {
      const name = browserCachePrefix + index.toString();
      const item = getStoredItem(func2, name);
      if (typeof item !== "string") {
        return;
      }
      try {
        const data = JSON.parse(item);
        if (typeof data === "object" && typeof data.cached === "number" && data.cached > minTime && typeof data.provider === "string" && typeof data.data === "object" && typeof data.data.prefix === "string" && // Valid item: run callback
        callback(data, index)) {
          return true;
        }
      } catch (err) {
      }
      removeStoredItem(func2, name);
    };
    let total = getBrowserStorageItemsCount(func2);
    for (let i = total - 1; i >= 0; i--) {
      if (!parseItem(i)) {
        if (i === total - 1) {
          total--;
          setBrowserStorageItemsCount(func2, total);
        } else {
          browserStorageEmptyItems[key].add(i);
        }
      }
    }
  }
  function initBrowserStorage() {
    if (browserStorageStatus) {
      return;
    }
    setBrowserStorageStatus(true);
    for (const key in browserStorageConfig) {
      iterateBrowserStorage(key, (item) => {
        const iconSet = item.data;
        const provider = item.provider;
        const prefix = iconSet.prefix;
        const storage2 = getStorage(
          provider,
          prefix
        );
        if (!addIconSet(storage2, iconSet).length) {
          return false;
        }
        const lastModified = iconSet.lastModified || -1;
        storage2.lastModifiedCached = storage2.lastModifiedCached ? Math.min(storage2.lastModifiedCached, lastModified) : lastModified;
        return true;
      });
    }
  }
  function updateLastModified(storage2, lastModified) {
    const lastValue = storage2.lastModifiedCached;
    if (
      // Matches or newer
      lastValue && lastValue >= lastModified
    ) {
      return lastValue === lastModified;
    }
    storage2.lastModifiedCached = lastModified;
    if (lastValue) {
      for (const key in browserStorageConfig) {
        iterateBrowserStorage(key, (item) => {
          const iconSet = item.data;
          return item.provider !== storage2.provider || iconSet.prefix !== storage2.prefix || iconSet.lastModified === lastModified;
        });
      }
    }
    return true;
  }
  function storeInBrowserStorage(storage2, data) {
    if (!browserStorageStatus) {
      initBrowserStorage();
    }
    function store(key) {
      let func2;
      if (!browserStorageConfig[key] || !(func2 = getBrowserStorage(key))) {
        return;
      }
      const set = browserStorageEmptyItems[key];
      let index;
      if (set.size) {
        set.delete(index = Array.from(set).shift());
      } else {
        index = getBrowserStorageItemsCount(func2);
        if (index >= browserStorageLimit || !setBrowserStorageItemsCount(func2, index + 1)) {
          return;
        }
      }
      const item = {
        cached: Math.floor(Date.now() / browserStorageHour),
        provider: storage2.provider,
        data
      };
      return setStoredItem(
        func2,
        browserCachePrefix + index.toString(),
        JSON.stringify(item)
      );
    }
    if (data.lastModified && !updateLastModified(storage2, data.lastModified)) {
      return;
    }
    if (!Object.keys(data.icons).length) {
      return;
    }
    if (data.not_found) {
      data = Object.assign({}, data);
      delete data.not_found;
    }
    if (!store("local")) {
      store("session");
    }
  }
  function emptyCallback() {
  }
  function loadedNewIcons(storage2) {
    if (!storage2.iconsLoaderFlag) {
      storage2.iconsLoaderFlag = true;
      setTimeout(() => {
        storage2.iconsLoaderFlag = false;
        updateCallbacks(storage2);
      });
    }
  }
  function loadNewIcons(storage2, icons) {
    if (!storage2.iconsToLoad) {
      storage2.iconsToLoad = icons;
    } else {
      storage2.iconsToLoad = storage2.iconsToLoad.concat(icons).sort();
    }
    if (!storage2.iconsQueueFlag) {
      storage2.iconsQueueFlag = true;
      setTimeout(() => {
        storage2.iconsQueueFlag = false;
        const { provider, prefix } = storage2;
        const icons2 = storage2.iconsToLoad;
        delete storage2.iconsToLoad;
        let api;
        if (!icons2 || !(api = getAPIModule(provider))) {
          return;
        }
        const params = api.prepare(provider, prefix, icons2);
        params.forEach((item) => {
          sendAPIQuery(provider, item, (data) => {
            if (typeof data !== "object") {
              item.icons.forEach((name) => {
                storage2.missing.add(name);
              });
            } else {
              try {
                const parsed = addIconSet(
                  storage2,
                  data
                );
                if (!parsed.length) {
                  return;
                }
                const pending = storage2.pendingIcons;
                if (pending) {
                  parsed.forEach((name) => {
                    pending.delete(name);
                  });
                }
                storeInBrowserStorage(storage2, data);
              } catch (err) {
                console.error(err);
              }
            }
            loadedNewIcons(storage2);
          });
        });
      });
    }
  }
  const loadIcons = (icons, callback) => {
    const cleanedIcons = listToIcons(icons, true, allowSimpleNames());
    const sortedIcons = sortIcons(cleanedIcons);
    if (!sortedIcons.pending.length) {
      let callCallback = true;
      if (callback) {
        setTimeout(() => {
          if (callCallback) {
            callback(
              sortedIcons.loaded,
              sortedIcons.missing,
              sortedIcons.pending,
              emptyCallback
            );
          }
        });
      }
      return () => {
        callCallback = false;
      };
    }
    const newIcons = /* @__PURE__ */ Object.create(null);
    const sources = [];
    let lastProvider, lastPrefix;
    sortedIcons.pending.forEach((icon) => {
      const { provider, prefix } = icon;
      if (prefix === lastPrefix && provider === lastProvider) {
        return;
      }
      lastProvider = provider;
      lastPrefix = prefix;
      sources.push(getStorage(provider, prefix));
      const providerNewIcons = newIcons[provider] || (newIcons[provider] = /* @__PURE__ */ Object.create(null));
      if (!providerNewIcons[prefix]) {
        providerNewIcons[prefix] = [];
      }
    });
    sortedIcons.pending.forEach((icon) => {
      const { provider, prefix, name } = icon;
      const storage2 = getStorage(provider, prefix);
      const pendingQueue = storage2.pendingIcons || (storage2.pendingIcons = /* @__PURE__ */ new Set());
      if (!pendingQueue.has(name)) {
        pendingQueue.add(name);
        newIcons[provider][prefix].push(name);
      }
    });
    sources.forEach((storage2) => {
      const { provider, prefix } = storage2;
      if (newIcons[provider][prefix].length) {
        loadNewIcons(storage2, newIcons[provider][prefix]);
      }
    });
    return callback ? storeCallback(callback, sortedIcons, sources) : emptyCallback;
  };
  function mergeCustomisations(defaults, item) {
    const result = {
      ...defaults
    };
    for (const key in item) {
      const value = item[key];
      const valueType = typeof value;
      if (key in defaultIconSizeCustomisations) {
        if (value === null || value && (valueType === "string" || valueType === "number")) {
          result[key] = value;
        }
      } else if (valueType === typeof result[key]) {
        result[key] = key === "rotate" ? value % 4 : value;
      }
    }
    return result;
  }
  const separator = /[\s,]+/;
  function flipFromString(custom, flip) {
    flip.split(separator).forEach((str) => {
      const value = str.trim();
      switch (value) {
        case "horizontal":
          custom.hFlip = true;
          break;
        case "vertical":
          custom.vFlip = true;
          break;
      }
    });
  }
  function rotateFromString(value, defaultValue = 0) {
    const units = value.replace(/^-?[0-9.]*/, "");
    function cleanup(value2) {
      while (value2 < 0) {
        value2 += 4;
      }
      return value2 % 4;
    }
    if (units === "") {
      const num = parseInt(value);
      return isNaN(num) ? 0 : cleanup(num);
    } else if (units !== value) {
      let split = 0;
      switch (units) {
        case "%":
          split = 25;
          break;
        case "deg":
          split = 90;
      }
      if (split) {
        let num = parseFloat(value.slice(0, value.length - units.length));
        if (isNaN(num)) {
          return 0;
        }
        num = num / split;
        return num % 1 === 0 ? cleanup(num) : 0;
      }
    }
    return defaultValue;
  }
  function iconToHTML(body, attributes) {
    let renderAttribsHTML = body.indexOf("xlink:") === -1 ? "" : ' xmlns:xlink="http://www.w3.org/1999/xlink"';
    for (const attr2 in attributes) {
      renderAttribsHTML += " " + attr2 + '="' + attributes[attr2] + '"';
    }
    return '<svg xmlns="http://www.w3.org/2000/svg"' + renderAttribsHTML + ">" + body + "</svg>";
  }
  function encodeSVGforURL(svg) {
    return svg.replace(/"/g, "'").replace(/%/g, "%25").replace(/#/g, "%23").replace(/</g, "%3C").replace(/>/g, "%3E").replace(/\s+/g, " ");
  }
  function svgToData(svg) {
    return "data:image/svg+xml," + encodeSVGforURL(svg);
  }
  function svgToURL(svg) {
    return 'url("' + svgToData(svg) + '")';
  }
  const defaultExtendedIconCustomisations = {
    ...defaultIconCustomisations,
    inline: false
  };
  const svgDefaults = {
    "xmlns": "http://www.w3.org/2000/svg",
    "xmlns:xlink": "http://www.w3.org/1999/xlink",
    "aria-hidden": true,
    "role": "img"
  };
  const commonProps = {
    display: "inline-block"
  };
  const monotoneProps = {
    "background-color": "currentColor"
  };
  const coloredProps = {
    "background-color": "transparent"
  };
  const propsToAdd = {
    image: "var(--svg)",
    repeat: "no-repeat",
    size: "100% 100%"
  };
  const propsToAddTo = {
    "-webkit-mask": monotoneProps,
    "mask": monotoneProps,
    "background": coloredProps
  };
  for (const prefix in propsToAddTo) {
    const list = propsToAddTo[prefix];
    for (const prop in propsToAdd) {
      list[prefix + "-" + prop] = propsToAdd[prop];
    }
  }
  function fixSize(value) {
    return value + (value.match(/^[-0-9.]+$/) ? "px" : "");
  }
  function render(icon, props) {
    const customisations = mergeCustomisations(defaultExtendedIconCustomisations, props);
    const mode = props.mode || "svg";
    const componentProps = mode === "svg" ? { ...svgDefaults } : {};
    if (icon.body.indexOf("xlink:") === -1) {
      delete componentProps["xmlns:xlink"];
    }
    let style = typeof props.style === "string" ? props.style : "";
    for (let key in props) {
      const value = props[key];
      if (value === void 0) {
        continue;
      }
      switch (key) {
        case "icon":
        case "style":
        case "onLoad":
        case "mode":
          break;
        case "inline":
        case "hFlip":
        case "vFlip":
          customisations[key] = value === true || value === "true" || value === 1;
          break;
        case "flip":
          if (typeof value === "string") {
            flipFromString(customisations, value);
          }
          break;
        case "color":
          style = style + (style.length > 0 && style.trim().slice(-1) !== ";" ? ";" : "") + "color: " + value + "; ";
          break;
        case "rotate":
          if (typeof value === "string") {
            customisations[key] = rotateFromString(value);
          } else if (typeof value === "number") {
            customisations[key] = value;
          }
          break;
        case "ariaHidden":
        case "aria-hidden":
          if (value !== true && value !== "true") {
            delete componentProps["aria-hidden"];
          }
          break;
        default:
          if (key.slice(0, 3) === "on:") {
            break;
          }
          if (defaultExtendedIconCustomisations[key] === void 0) {
            componentProps[key] = value;
          }
      }
    }
    const item = iconToSVG(icon, customisations);
    const renderAttribs = item.attributes;
    if (customisations.inline) {
      style = "vertical-align: -0.125em; " + style;
    }
    if (mode === "svg") {
      Object.assign(componentProps, renderAttribs);
      if (style !== "") {
        componentProps.style = style;
      }
      let localCounter = 0;
      let id = props.id;
      if (typeof id === "string") {
        id = id.replace(/-/g, "_");
      }
      return {
        svg: true,
        attributes: componentProps,
        body: replaceIDs(item.body, id ? () => id + "ID" + localCounter++ : "iconifySvelte")
      };
    }
    const { body, width, height } = icon;
    const useMask = mode === "mask" || (mode === "bg" ? false : body.indexOf("currentColor") !== -1);
    const html = iconToHTML(body, {
      ...renderAttribs,
      width: width + "",
      height: height + ""
    });
    const url = svgToURL(html);
    const styles = {
      "--svg": url
    };
    const size = (prop) => {
      const value = renderAttribs[prop];
      if (value) {
        styles[prop] = fixSize(value);
      }
    };
    size("width");
    size("height");
    Object.assign(styles, commonProps, useMask ? monotoneProps : coloredProps);
    let customStyle = "";
    for (const key in styles) {
      customStyle += key + ": " + styles[key] + ";";
    }
    componentProps.style = customStyle + style;
    return {
      svg: false,
      attributes: componentProps
    };
  }
  allowSimpleNames(true);
  setAPIModule("", fetchAPIModule);
  if (typeof document !== "undefined" && typeof window !== "undefined") {
    initBrowserStorage();
    const _window2 = window;
    if (_window2.IconifyPreload !== void 0) {
      const preload = _window2.IconifyPreload;
      const err = "Invalid IconifyPreload syntax.";
      if (typeof preload === "object" && preload !== null) {
        (preload instanceof Array ? preload : [preload]).forEach((item) => {
          try {
            if (
              // Check if item is an object and not null/array
              typeof item !== "object" || item === null || item instanceof Array || // Check for 'icons' and 'prefix'
              typeof item.icons !== "object" || typeof item.prefix !== "string" || // Add icon set
              !addCollection(item)
            ) {
              console.error(err);
            }
          } catch (e) {
            console.error(err);
          }
        });
      }
    }
    if (_window2.IconifyProviders !== void 0) {
      const providers = _window2.IconifyProviders;
      if (typeof providers === "object" && providers !== null) {
        for (let key in providers) {
          const err = "IconifyProviders[" + key + "] is invalid.";
          try {
            const value = providers[key];
            if (typeof value !== "object" || !value || value.resources === void 0) {
              continue;
            }
            if (!addAPIProvider(key, value)) {
              console.error(err);
            }
          } catch (e) {
            console.error(err);
          }
        }
      }
    }
  }
  function checkIconState(icon, state, mounted, callback, onload) {
    function abortLoading() {
      if (state.loading) {
        state.loading.abort();
        state.loading = null;
      }
    }
    if (typeof icon === "object" && icon !== null && typeof icon.body === "string") {
      state.name = "";
      abortLoading();
      return { data: { ...defaultIconProps, ...icon } };
    }
    let iconName;
    if (typeof icon !== "string" || (iconName = stringToIcon(icon, false, true)) === null) {
      abortLoading();
      return null;
    }
    const data = getIconData(iconName);
    if (!data) {
      if (mounted && (!state.loading || state.loading.name !== icon)) {
        abortLoading();
        state.name = "";
        state.loading = {
          name: icon,
          abort: loadIcons([iconName], callback)
        };
      }
      return null;
    }
    abortLoading();
    if (state.name !== icon) {
      state.name = icon;
      if (onload && !state.destroyed) {
        onload(icon);
      }
    }
    const classes = ["iconify"];
    if (iconName.prefix !== "") {
      classes.push("iconify--" + iconName.prefix);
    }
    if (iconName.provider !== "") {
      classes.push("iconify--" + iconName.provider);
    }
    return { data, classes };
  }
  function generateIcon(icon, props) {
    return icon ? render({
      ...defaultIconProps,
      ...icon
    }, props) : null;
  }
  function create_if_block$z(ctx) {
    let if_block_anchor;
    function select_block_type(ctx2, dirty) {
      if (
        /*data*/
        ctx2[0].svg
      )
        return create_if_block_1$s;
      return create_else_block$g;
    }
    let current_block_type = select_block_type(ctx);
    let if_block = current_block_type(ctx);
    return {
      c() {
        if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
      },
      p(ctx2, dirty) {
        if (current_block_type === (current_block_type = select_block_type(ctx2)) && if_block) {
          if_block.p(ctx2, dirty);
        } else {
          if_block.d(1);
          if_block = current_block_type(ctx2);
          if (if_block) {
            if_block.c();
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        }
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if_block.d(detaching);
      }
    };
  }
  function create_else_block$g(ctx) {
    let span;
    let span_levels = [
      /*data*/
      ctx[0].attributes
    ];
    let span_data = {};
    for (let i = 0; i < span_levels.length; i += 1) {
      span_data = assign(span_data, span_levels[i]);
    }
    return {
      c() {
        span = element("span");
        set_attributes(span, span_data);
      },
      m(target, anchor) {
        insert(target, span, anchor);
      },
      p(ctx2, dirty) {
        set_attributes(span, span_data = get_spread_update(span_levels, [dirty & /*data*/
        1 && /*data*/
        ctx2[0].attributes]));
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_if_block_1$s(ctx) {
    let svg;
    let raw_value = (
      /*data*/
      ctx[0].body + ""
    );
    let svg_levels = [
      /*data*/
      ctx[0].attributes
    ];
    let svg_data = {};
    for (let i = 0; i < svg_levels.length; i += 1) {
      svg_data = assign(svg_data, svg_levels[i]);
    }
    return {
      c() {
        svg = svg_element("svg");
        set_svg_attributes(svg, svg_data);
      },
      m(target, anchor) {
        insert(target, svg, anchor);
        svg.innerHTML = raw_value;
      },
      p(ctx2, dirty) {
        if (dirty & /*data*/
        1 && raw_value !== (raw_value = /*data*/
        ctx2[0].body + ""))
          svg.innerHTML = raw_value;
        set_svg_attributes(svg, svg_data = get_spread_update(svg_levels, [dirty & /*data*/
        1 && /*data*/
        ctx2[0].attributes]));
      },
      d(detaching) {
        if (detaching) {
          detach(svg);
        }
      }
    };
  }
  function create_fragment$M(ctx) {
    let if_block_anchor;
    let if_block = (
      /*data*/
      ctx[0] && create_if_block$z(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
      },
      p(ctx2, [dirty]) {
        if (
          /*data*/
          ctx2[0]
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block$z(ctx2);
            if_block.c();
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function instance$K($$self, $$props, $$invalidate) {
    const state = {
      // Last icon name
      name: "",
      // Loading status
      loading: null,
      // Destroyed status
      destroyed: false
    };
    let mounted = false;
    let counter2 = 0;
    let data;
    const onLoad = (icon) => {
      if (typeof $$props.onLoad === "function") {
        $$props.onLoad(icon);
      }
      const dispatch2 = createEventDispatcher();
      dispatch2("load", { icon });
    };
    function loaded() {
      $$invalidate(3, counter2++, counter2);
    }
    onMount(() => {
      $$invalidate(2, mounted = true);
    });
    onDestroy(() => {
      $$invalidate(1, state.destroyed = true, state);
      if (state.loading) {
        state.loading.abort();
        $$invalidate(1, state.loading = null, state);
      }
    });
    $$self.$$set = ($$new_props) => {
      $$invalidate(6, $$props = assign(assign({}, $$props), exclude_internal_props($$new_props)));
    };
    $$self.$$.update = () => {
      {
        const iconData = checkIconState($$props.icon, state, mounted, loaded, onLoad);
        $$invalidate(0, data = iconData ? generateIcon(iconData.data, $$props) : null);
        if (data && iconData.classes) {
          $$invalidate(
            0,
            data.attributes["class"] = (typeof $$props["class"] === "string" ? $$props["class"] + " " : "") + iconData.classes.join(" "),
            data
          );
        }
      }
    };
    $$props = exclude_internal_props($$props);
    return [data, state, mounted, counter2];
  }
  class Icon extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$K, create_fragment$M, safe_not_equal, {});
    }
  }
  function add_css$H(target) {
    append_styles(target, "svelte-13mqjps", ".loader-container.svelte-13mqjps.svelte-13mqjps{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;z-index:9999999999;pointer-events:auto;display:flex;flex-direction:column;background:rgba(0, 0, 0, 0.3)}.spinner.svelte-13mqjps.svelte-13mqjps{animation:svelte-13mqjps-rotate 2s linear infinite;width:50px;height:50px;stroke:#fff}.spinner.svelte-13mqjps .path.svelte-13mqjps{stroke:#fff;stroke-linecap:round;animation:svelte-13mqjps-dash 1.5s ease-in-out infinite}@media only screen and (max-width: 600px){.spinner.svelte-13mqjps.svelte-13mqjps{top:0%}}@keyframes svelte-13mqjps-rotate{100%{transform:rotate(360deg)}}@keyframes svelte-13mqjps-dash{0%{stroke-dasharray:1, 150;stroke-dashoffset:0}50%{stroke-dasharray:90, 150;stroke-dashoffset:-35}100%{stroke-dasharray:90, 150;stroke-dashoffset:-124}}");
  }
  function create_fragment$L(ctx) {
    let div;
    return {
      c() {
        div = element("div");
        div.innerHTML = `<svg class="spinner svelte-13mqjps" viewBox="0 0 50 50"><circle class="path svelte-13mqjps" cx="25" cy="25" r="20" fill="none" stroke-width="5"></circle></svg>`;
        attr(div, "class", "loader-container svelte-13mqjps");
      },
      m(target, anchor) {
        insert(target, div, anchor);
      },
      p: noop,
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(div);
        }
      }
    };
  }
  class Loader extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, null, create_fragment$L, safe_not_equal, {}, add_css$H);
    }
  }
  function add_css$G(target) {
    append_styles(target, "svelte-n6hxg6", ".phone-input-wrapper.svelte-n6hxg6.svelte-n6hxg6{align-self:center;display:flex;border-radius:8px;border:1px solid #707070;width:100%;max-width:100%;box-sizing:border-box}.coutntry-code-wrapper.svelte-n6hxg6.svelte-n6hxg6{border-radius:8px 0 0 8px;background:#fafafa;display:flex;flex-direction:row;padding:12px 14px;align-items:center;justify-content:center;gap:8px}.country-flag-wrapper.svelte-n6hxg6.svelte-n6hxg6{position:relative;width:28px;height:28px;overflow:hidden;flex-shrink:0;align-content:end}.country-code.svelte-n6hxg6.svelte-n6hxg6{position:relative;line-height:30px;color:#00000080;font-family:var(--font-family)}.number-wrapper.svelte-n6hxg6.svelte-n6hxg6{flex:1;background:#fafafa;display:flex;border-radius:8px;justify-content:space-between;min-width:44px}.number-wrapper.svelte-n6hxg6>input.svelte-n6hxg6{font-family:var(--font-family);min-width:150px}.error-msg.svelte-n6hxg6.svelte-n6hxg6{font-family:var(--font-family);font-size:12px;margin-top:8px;font-weight:500;color:black;color:var(--error-red)}input.svelte-n6hxg6.svelte-n6hxg6{border:none;outline:none;background:none}.proceed-button.svelte-n6hxg6.svelte-n6hxg6{background:#007bff;border:none;border-radius:0 8px 8px 0;padding:4px 6px;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all 0.2s ease;min-width:44px;&:hover:not(:disabled) {\n      background: #0056b3;\n    };&:active:not(:disabled) {\n      transform: translateY(0);\n    };&:disabled {\n      background: #cccccc;\n      cursor: not-allowed;\n      opacity: 0.6;\n    };&:focus {\n      outline: 2px solid #007bff;\n      outline-offset: 2px;\n    }}");
  }
  function create_else_block$f(ctx) {
    let icon;
    let current;
    icon = new Icon({
      props: {
        icon: "majesticons:chevron-right",
        class: "chevron-down",
        width: "20px",
        height: "20px"
      }
    });
    return {
      c() {
        create_component(icon.$$.fragment);
      },
      m(target, anchor) {
        mount_component(icon, target, anchor);
        current = true;
      },
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(icon, detaching);
      }
    };
  }
  function create_if_block_1$r(ctx) {
    let loader;
    let current;
    loader = new Loader({});
    return {
      c() {
        create_component(loader.$$.fragment);
      },
      m(target, anchor) {
        mount_component(loader, target, anchor);
        current = true;
      },
      i(local) {
        if (current)
          return;
        transition_in(loader.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(loader.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(loader, detaching);
      }
    };
  }
  function create_if_block$y(ctx) {
    let p;
    return {
      c() {
        p = element("p");
        p.textContent = `${PhoneInputTexts.inValidPhoneNumber}`;
        attr(p, "class", "error-msg font-small-medium svelte-n6hxg6");
      },
      m(target, anchor) {
        insert(target, p, anchor);
      },
      d(detaching) {
        if (detaching) {
          detach(p);
        }
      }
    };
  }
  function create_fragment$K(ctx) {
    let div5;
    let div4;
    let div2;
    let t2;
    let div3;
    let input;
    let t3;
    let button;
    let current_block_type_index;
    let if_block0;
    let button_disabled_value;
    let t4;
    let if_block1_anchor;
    let current;
    let mounted;
    let dispose;
    const if_block_creators = [create_if_block_1$r, create_else_block$f];
    const if_blocks = [];
    function select_block_type(ctx2, dirty) {
      if (
        /*$store_isPhoneNumberProcessing*/
        ctx2[5]
      )
        return 0;
      return 1;
    }
    current_block_type_index = select_block_type(ctx);
    if_block0 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
    let if_block1 = (
      /*isInValidPhone*/
      ctx[1] && create_if_block$y()
    );
    return {
      c() {
        div5 = element("div");
        div4 = element("div");
        div2 = element("div");
        div2.innerHTML = `<div class="country-flag-wrapper svelte-n6hxg6"><img src="${images.flag_of_inda}" alt="country-code" width="100%"/></div> <div class="country-code svelte-n6hxg6">+91</div>`;
        t2 = space();
        div3 = element("div");
        input = element("input");
        t3 = space();
        button = element("button");
        if_block0.c();
        t4 = space();
        if (if_block1)
          if_block1.c();
        if_block1_anchor = empty();
        attr(div2, "class", "coutntry-code-wrapper svelte-n6hxg6");
        attr(input, "type", "tel");
        attr(input, "inputmode", "numeric");
        attr(input, "pattern", "^[0-9]*$");
        attr(input, "class", "number-input svelte-n6hxg6");
        attr(input, "placeholder", PhoneInputTexts.placeHolder);
        attr(input, "maxlength", "10");
        attr(button, "class", "proceed-button svelte-n6hxg6");
        button.disabled = button_disabled_value = /*$store_isInvalidPhone*/
        ctx[4] || /*isInValidPhone*/
        ctx[1] || /*$store_isPhoneNumberProcessing*/
        ctx[5] || /*$store_isCheckoutLoading*/
        ctx[2];
        attr(div3, "class", "number-wrapper svelte-n6hxg6");
        attr(div4, "class", "phone-input-wrapper svelte-n6hxg6");
        attr(div5, "class", "input-div-container");
      },
      m(target, anchor) {
        insert(target, div5, anchor);
        append(div5, div4);
        append(div4, div2);
        append(div4, t2);
        append(div4, div3);
        append(div3, input);
        ctx[12](input);
        set_input_value(
          input,
          /*$store_phoneNumber*/
          ctx[3]
        );
        append(div3, t3);
        append(div3, button);
        if_blocks[current_block_type_index].m(button, null);
        insert(target, t4, anchor);
        if (if_block1)
          if_block1.m(target, anchor);
        insert(target, if_block1_anchor, anchor);
        current = true;
        if (!mounted) {
          dispose = [
            listen(
              input,
              "input",
              /*input_handler*/
              ctx[10]
            ),
            listen(
              input,
              "keydown",
              /*keydown_handler*/
              ctx[11]
            ),
            listen(
              input,
              "input",
              /*input_input_handler*/
              ctx[13]
            ),
            listen(
              button,
              "click",
              /*processPhoneNumber*/
              ctx[8]
            )
          ];
          mounted = true;
        }
      },
      p(ctx2, [dirty]) {
        if (dirty & /*$store_phoneNumber*/
        8) {
          set_input_value(
            input,
            /*$store_phoneNumber*/
            ctx2[3]
          );
        }
        let previous_block_index = current_block_type_index;
        current_block_type_index = select_block_type(ctx2);
        if (current_block_type_index !== previous_block_index) {
          group_outros();
          transition_out(if_blocks[previous_block_index], 1, 1, () => {
            if_blocks[previous_block_index] = null;
          });
          check_outros();
          if_block0 = if_blocks[current_block_type_index];
          if (!if_block0) {
            if_block0 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
            if_block0.c();
          }
          transition_in(if_block0, 1);
          if_block0.m(button, null);
        }
        if (!current || dirty & /*$store_isInvalidPhone, isInValidPhone, $store_isPhoneNumberProcessing, $store_isCheckoutLoading*/
        54 && button_disabled_value !== (button_disabled_value = /*$store_isInvalidPhone*/
        ctx2[4] || /*isInValidPhone*/
        ctx2[1] || /*$store_isPhoneNumberProcessing*/
        ctx2[5] || /*$store_isCheckoutLoading*/
        ctx2[2])) {
          button.disabled = button_disabled_value;
        }
        if (
          /*isInValidPhone*/
          ctx2[1]
        ) {
          if (if_block1)
            ;
          else {
            if_block1 = create_if_block$y();
            if_block1.c();
            if_block1.m(if_block1_anchor.parentNode, if_block1_anchor);
          }
        } else if (if_block1) {
          if_block1.d(1);
          if_block1 = null;
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block0);
        current = true;
      },
      o(local) {
        transition_out(if_block0);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div5);
          detach(t4);
          detach(if_block1_anchor);
        }
        ctx[12](null);
        if_blocks[current_block_type_index].d();
        if (if_block1)
          if_block1.d(detaching);
        mounted = false;
        run_all(dispose);
      }
    };
  }
  function instance$J($$self, $$props, $$invalidate) {
    let $store_isCheckoutLoading;
    let $store_currentPhoneNumber;
    let $store_phoneNumber;
    let $store_isInvalidPhone;
    let $store_isPhoneNumberProcessing;
    component_subscribe($$self, store_isCheckoutLoading, ($$value) => $$invalidate(2, $store_isCheckoutLoading = $$value));
    component_subscribe($$self, store_currentPhoneNumber, ($$value) => $$invalidate(19, $store_currentPhoneNumber = $$value));
    component_subscribe($$self, store_phoneNumber, ($$value) => $$invalidate(3, $store_phoneNumber = $$value));
    component_subscribe($$self, store_isInvalidPhone, ($$value) => $$invalidate(4, $store_isInvalidPhone = $$value));
    component_subscribe($$self, store_isPhoneNumberProcessing, ($$value) => $$invalidate(5, $store_isPhoneNumberProcessing = $$value));
    let phoneNumber = "";
    let requestId2 = "";
    let phoneInput;
    let isInValidPhone = false;
    let isEditPhone = false;
    store_cart.subscribe((res) => {
    });
    store_phoneNumber.subscribe((res) => {
      phoneNumber = res;
    });
    store_requestId.subscribe((res) => {
      requestId2 = res;
    });
    store_cartId.subscribe((res) => {
      res.toString();
    });
    store_consentBoxChecked.subscribe((res) => {
    });
    store_isEditPhone.subscribe((res) => {
      $$invalidate(9, isEditPhone = res);
    });
    onMount(() => {
      const existingPhoneNumber = window.atob(getCookie(existingPhoneNumberKey) || "");
      if (existingPhoneNumber !== "") {
        store_phoneNumber.set(existingPhoneNumber);
        store_isInvalidPhone.set(false);
      }
    });
    function validPhoneNumber() {
      const regex2 = new RegExp(`^[6-9][0-9]{9}$`);
      if (phoneNumber.length > 0) {
        if (regex2.test(phoneNumber)) {
          $$invalidate(1, isInValidPhone = false);
          return true;
        } else {
          $$invalidate(1, isInValidPhone = true);
          return false;
        }
      }
      return false;
    }
    const handlePhoneNumber = (event) => {
      var _a, _b;
      const value = ((_b = (_a = event == null ? void 0 : event.target) == null ? void 0 : _a.value) == null ? void 0 : _b.replace(/\D/g, "")) || "";
      store_phoneNumber.set(value);
      if (value.length === 10) {
        phoneInput.blur();
        if (validPhoneNumber()) {
          store_isInvalidPhone.set(false);
          if ($store_currentPhoneNumber !== value) {
            if (!$store_isCheckoutLoading) {
              sendMessageToiFrame("phone-number", { phoneNumber, requestId: requestId2 });
              store_isPhoneNumberProcessing.set(true);
            }
          } else {
            store_page.set("delivery");
          }
        } else {
          store_isInvalidPhone.set(true);
        }
      } else {
        store_isInvalidPhone.set(true);
      }
      event.target.value = value;
      return value;
    };
    function handleKeydown(event) {
      if ((event == null ? void 0 : event.key) === "Enter") {
        handlePhoneNumber(event);
      }
    }
    function processPhoneNumber() {
      const mockEvent = { target: { value: phoneNumber } };
      const value = handlePhoneNumber(mockEvent);
      if (phoneInput) {
        $$invalidate(0, phoneInput.value = value, phoneInput);
      }
    }
    const input_handler = (e) => handlePhoneNumber(e);
    const keydown_handler = (event) => handleKeydown(event);
    function input_binding($$value) {
      binding_callbacks[$$value ? "unshift" : "push"](() => {
        phoneInput = $$value;
        $$invalidate(0, phoneInput);
      });
    }
    function input_input_handler() {
      $store_phoneNumber = this.value;
      store_phoneNumber.set($store_phoneNumber);
    }
    $$self.$$.update = () => {
      if ($$self.$$.dirty & /*isEditPhone, phoneInput*/
      513) {
        {
          if (isEditPhone && phoneInput) {
            phoneInput.focus();
          }
        }
      }
    };
    return [
      phoneInput,
      isInValidPhone,
      $store_isCheckoutLoading,
      $store_phoneNumber,
      $store_isInvalidPhone,
      $store_isPhoneNumberProcessing,
      handlePhoneNumber,
      handleKeydown,
      processPhoneNumber,
      isEditPhone,
      input_handler,
      keydown_handler,
      input_binding,
      input_input_handler
    ];
  }
  class PhoneNumberInput extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$J, create_fragment$K, safe_not_equal, {}, add_css$G);
    }
  }
  function add_css$F(target) {
    append_styles(target, "svelte-sp4nax", ".login-container.svelte-sp4nax.svelte-sp4nax{flex:1 0 auto;display:flex;flex-direction:column;justify-content:space-between;height:calc(100% - 190px)}.phone-number-input-container.svelte-sp4nax.svelte-sp4nax{display:flex;flex-direction:column;gap:10px;margin:1rem 0}.phone-number-input-container.svelte-sp4nax .phone-number-wrapper.svelte-sp4nax{color:black;display:flex;justify-content:space-between}.font-medium-small.svelte-sp4nax.svelte-sp4nax{font-size:12px;font-weight:500;color:#00192f;font-family:var(--font-family)}");
  }
  function create_fragment$J(ctx) {
    let div3;
    let div2;
    let div1;
    let div0;
    let t1;
    let phonenumberinput;
    let current;
    phonenumberinput = new PhoneNumberInput({});
    return {
      c() {
        div3 = element("div");
        div2 = element("div");
        div1 = element("div");
        div0 = element("div");
        div0.innerHTML = `<p class="font-medium-small svelte-sp4nax">Enter Phone Number to Proceed
          <sup style="vertical-align: top; font-size: smaller;"></sup></p>`;
        t1 = space();
        create_component(phonenumberinput.$$.fragment);
        attr(div0, "class", "phone-number-wrapper svelte-sp4nax");
        attr(div1, "class", "phone-number-input-container svelte-sp4nax");
        set_style(div2, "padding", "12px");
        attr(div3, "class", "login-container svelte-sp4nax");
      },
      m(target, anchor) {
        insert(target, div3, anchor);
        append(div3, div2);
        append(div2, div1);
        append(div1, div0);
        append(div1, t1);
        mount_component(phonenumberinput, div1, null);
        current = true;
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(phonenumberinput.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(phonenumberinput.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div3);
        }
        destroy_component(phonenumberinput);
      }
    };
  }
  class PhoneInputContainer extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, null, create_fragment$J, safe_not_equal, {}, add_css$F);
    }
  }
  store_newlyAddedAddresses.subscribe((res) => {
  });
  const extractNameParts = (fullName) => {
    const parts = fullName.trim().split(/\s+/);
    let firstName = "";
    let lastName = ".";
    if (parts.length === 1) {
      firstName = parts[0];
    } else {
      lastName = parts.pop() || "";
      firstName = parts.join(" ");
    }
    if (firstName.length <= 2) {
      firstName = firstName + " " + lastName;
      lastName = ".";
    }
    return { firstName, lastName };
  };
  function getCookie(cname) {
    let name = cname + "=";
    let decodedCookie = document.cookie;
    let ca = decodedCookie.split(";");
    for (let i = 0; i < ca.length; i++) {
      let c = ca[i];
      while (c.charAt(0) == " ") {
        c = c.substring(1);
      }
      if (c.indexOf(name) == 0) {
        return c.substring(name.length, c.length);
      }
    }
    return "";
  }
  const formatCustomerName = (userName = "") => {
    let customerName = userName;
    if (customerName == null ? void 0 : customerName.endsWith(".")) {
      customerName = customerName.slice(0, -1);
    }
    return customerName.trim();
  };
  function postMessageToParent(message) {
    window.parent.postMessage(JSON.stringify(message), "*");
  }
  const openOtpBottomSheet = () => {
    store_bottomSheet.set({
      show: true,
      title: configurableTexts.login.otp_title,
      component: OtpInputContainer,
      componentData: {},
      type: "",
      onClose: () => store_phoneNumber.set("")
    });
  };
  const openAddressListBottomSheet = () => {
    store_bottomSheet.set({
      show: true,
      component: AddressList,
      componentData: {},
      type: "",
      title: "Select Delivery Address"
    });
  };
  const openAddressFormBottomSheet = () => {
    store_addingNewAddress.set(true);
    store_isInvalidAddress.set(false);
    store_isAddressEditing.set(false);
    store_geographicData.set({});
    store_bottomSheet.set({
      show: true,
      component: AddressForm,
      componentData: {},
      type: "",
      title: "Add New Address"
    });
  };
  const openLoginBottomSheet = () => {
    store_bottomSheet.set({
      show: true,
      component: PhoneInputContainer,
      componentData: {},
      type: "",
      title: "",
      onClose: () => store_phoneNumber.set("")
    });
  };
  const truncateName = (selectedAddress) => {
    let selectedFullName = "";
    if (selectedAddress == null ? void 0 : selectedAddress.firstName) {
      let { firstName, lastName } = selectedAddress;
      selectedFullName = lastName === "." ? firstName : `${firstName} ${lastName}`;
      if (selectedFullName.length > 30) {
        selectedFullName = `${selectedFullName.substring(0, 30)}...`;
      }
    }
    return selectedFullName;
  };
  const getPercentage = (originalPrice, discountedPrice) => {
    if (originalPrice <= 0)
      return 0;
    const discount = originalPrice - discountedPrice;
    const percentage = discount / originalPrice * 100;
    return Math.round(percentage);
  };
  const extractStyleTags = (html) => {
    if (!html)
      return "";
    const matches = html.matchAll(/<style[^>]*>([\s\S]*?)<\/style>/gi);
    const styleTags = Array.from(matches, (m) => "<style>" + (m[1] || "") + "</style>");
    return styleTags.join("\n");
  };
  function add_css$E(target) {
    append_styles(target, "svelte-552429", ".complete-address-container.svelte-552429{margin:0rem;display:flex;flex-direction:column;justify-content:center;width:100%;background:var(--white)}");
  }
  function create_fragment$I(ctx) {
    let div;
    let addressform;
    let current;
    addressform = new AddressForm({});
    return {
      c() {
        div = element("div");
        create_component(addressform.$$.fragment);
        attr(div, "class", "complete-address-container svelte-552429");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        mount_component(addressform, div, null);
        current = true;
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(addressform.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(addressform.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(addressform);
      }
    };
  }
  function instance$I($$self) {
    onMount(() => {
      store_isAddressEditing.subscribe((res) => {
      });
      store_isFormValid.subscribe((res) => {
      });
      store_editedAddress.subscribe((res) => {
      });
      store_newAddress.subscribe((res) => {
      });
    });
    return [];
  }
  class CompleteAddressForm extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$I, create_fragment$I, safe_not_equal, {}, add_css$E);
    }
  }
  let requestId;
  store_userType.subscribe((res) => {
  });
  store_requestId.subscribe((res) => {
    requestId = res;
  });
  store_cartId.subscribe((res) => {
    res.toString();
  });
  store_phoneNumber.subscribe((res) => {
  });
  store_addingNewAddress.subscribe((res) => {
  });
  store_addressStepReached.subscribe((res) => {
  });
  store_addressList.subscribe((res) => {
  });
  store_callAddressChanged.subscribe((res) => {
  });
  store_isAddressAutoUpdated.subscribe((res) => {
  });
  store_isEmailOptional$1.subscribe((res) => {
  });
  store_userEmail.subscribe((res) => {
  });
  let queryParamAid;
  store_queryParamAid.subscribe((res) => queryParamAid = res);
  const callGetAddresses = async () => {
    sendMessageToiFrame("get-address", {});
  };
  const callEditAddress = async (editedAddress) => {
    const { firstName, lastName } = extractNameParts(editedAddress.fullName);
    const payload = {
      address1: editedAddress.address1,
      city: editedAddress.city,
      email: editedAddress.email,
      firstName,
      state: editedAddress.state,
      phone: editedAddress.phone,
      lastName: lastName || "",
      pincode: editedAddress.pincode
    };
    sendMessageToiFrame("edit-address", {
      addressData: payload,
      addressId: queryParamAid
    });
  };
  const callAddAddress = async (newAddress) => {
    const { firstName, lastName } = extractNameParts(newAddress.fullName);
    const payload = {
      address1: newAddress.address1,
      city: newAddress.city,
      email: newAddress.email,
      firstName,
      state: newAddress.state,
      phone: newAddress.phone,
      lastName: lastName || "",
      pincode: newAddress.pincode
    };
    sendMessageToiFrame("add-address", { addressData: payload });
  };
  const callDeleteAddress = async () => {
    sendMessageToiFrame("delete-address", { addressId: queryParamAid });
  };
  const callPincodeValidation = async (pincode) => {
    sendMessageToiFrame("send-pincode", { pincode, requestId });
  };
  const editSelectedAddress = (editingAddress, setAddress = true, tempfixEdit = false) => {
    handleCloseBottomSheet();
    store_editClicked.set(true);
    store_isCompleteForm.set(true);
    if (setAddress)
      store_modifySelectedAddress.set(editingAddress);
    store_queryParamAid.set(editingAddress == null ? void 0 : editingAddress.aid.toString());
    store_isAddressEditing.set(true);
    store_addingNewAddress.set(false);
    store_enableSaveAddress.set(true);
    store_bottomSheet.set({
      title: "Edit Address",
      component: CompleteAddressForm,
      componentData: {},
      show: true,
      type: ""
    });
    if (tempfixEdit) {
      handleCloseBottomSheet();
      store_modifySelectedAddress.set(editingAddress);
      setTimeout(() => {
        store_bottomSheet.set({
          title: "Edit Address",
          component: CompleteAddressForm,
          componentData: {},
          show: true,
          type: ""
        });
        store_toastMsgConfig.set({
          msg: "Please add the missing address fields",
          type: "error",
          showToast: true
        });
      }, 800);
    }
  };
  const handleCloseBottomSheet = () => {
    store_isInvalidAddress.set(false);
    closeBottomSheet();
  };
  function add_css$D(target) {
    append_styles(target, "svelte-1lputa6", ".delete-address-container.svelte-1lputa6{display:flex;flex-direction:column;padding:2rem 1rem;gap:8px}.btn-group.svelte-1lputa6{display:flex;gap:10px;margin-top:5px}.title.svelte-1lputa6{font-size:16px;font-weight:500;text-align:center;font-family:var(--font-family)}");
  }
  function create_fragment$H(ctx) {
    let div2;
    let div0;
    let t1;
    let div1;
    let custombutton0;
    let t2;
    let custombutton1;
    let current;
    custombutton0 = new CustomButton({
      props: {
        kind: "secondary",
        btnText: "No, Cancel",
        onClick: (
          /*closePopup*/
          ctx[1]
        )
      }
    });
    custombutton1 = new CustomButton({
      props: {
        kind: "danger",
        btnText: "Yes, Delete",
        onClick: (
          /*deleteAddress*/
          ctx[0]
        )
      }
    });
    return {
      c() {
        div2 = element("div");
        div0 = element("div");
        div0.textContent = "Are you sure you want to delete this address?";
        t1 = space();
        div1 = element("div");
        create_component(custombutton0.$$.fragment);
        t2 = space();
        create_component(custombutton1.$$.fragment);
        attr(div0, "class", "title svelte-1lputa6");
        attr(div1, "class", "btn-group svelte-1lputa6");
        attr(div2, "class", "delete-address-container svelte-1lputa6");
      },
      m(target, anchor) {
        insert(target, div2, anchor);
        append(div2, div0);
        append(div2, t1);
        append(div2, div1);
        mount_component(custombutton0, div1, null);
        append(div1, t2);
        mount_component(custombutton1, div1, null);
        current = true;
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(custombutton0.$$.fragment, local);
        transition_in(custombutton1.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(custombutton0.$$.fragment, local);
        transition_out(custombutton1.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div2);
        }
        destroy_component(custombutton0);
        destroy_component(custombutton1);
      }
    };
  }
  function instance$H($$self) {
    const deleteAddress = async () => {
      store_confirmDeletePopup.set(false);
      closeBottomSheet();
      setTimeout(
        () => {
          callDeleteAddress();
        },
        600
      );
    };
    const closePopup = () => {
      store_confirmDeletePopup.set(false);
    };
    return [deleteAddress, closePopup];
  }
  class ConfirmDeletePopup extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$H, create_fragment$H, safe_not_equal, {}, add_css$D);
    }
  }
  function add_css$C(target) {
    append_styles(target, "svelte-zcrsri", ".tooltip.svelte-zcrsri{position:fixed;background:rgb(250, 248, 248);color:rgb(18, 17, 17);padding:6px 10px;border-radius:4px;font-size:14px;max-width:250px;white-space:normal;word-wrap:break-word;overflow-wrap:break-word;z-index:999999999;box-shadow:1px 1px 5px rgba(0, 0, 0, 0.2)}");
  }
  function create_if_block$x(ctx) {
    let div;
    let t;
    return {
      c() {
        div = element("div");
        t = text(
          /*title*/
          ctx[0]
        );
        attr(div, "class", "tooltip svelte-zcrsri");
        set_style(
          div,
          "top",
          /*tooltipY*/
          ctx[3] + "px"
        );
        set_style(
          div,
          "left",
          /*tooltipX*/
          ctx[2] + "px"
        );
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, t);
      },
      p(ctx2, dirty) {
        if (dirty & /*title*/
        1)
          set_data(
            t,
            /*title*/
            ctx2[0]
          );
        if (dirty & /*tooltipY*/
        8) {
          set_style(
            div,
            "top",
            /*tooltipY*/
            ctx2[3] + "px"
          );
        }
        if (dirty & /*tooltipX*/
        4) {
          set_style(
            div,
            "left",
            /*tooltipX*/
            ctx2[2] + "px"
          );
        }
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
      }
    };
  }
  function create_fragment$G(ctx) {
    let div;
    let t;
    let current;
    let mounted;
    let dispose;
    const default_slot_template = (
      /*#slots*/
      ctx[7].default
    );
    const default_slot = create_slot(
      default_slot_template,
      ctx,
      /*$$scope*/
      ctx[6],
      null
    );
    let if_block = (
      /*isHovered*/
      ctx[1] && create_if_block$x(ctx)
    );
    return {
      c() {
        div = element("div");
        if (default_slot)
          default_slot.c();
        t = space();
        if (if_block)
          if_block.c();
        set_style(div, "position", "relative");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        if (default_slot) {
          default_slot.m(div, null);
        }
        append(div, t);
        if (if_block)
          if_block.m(div, null);
        current = true;
        if (!mounted) {
          dispose = [
            listen(
              div,
              "mouseover",
              /*mouseOver*/
              ctx[4]
            ),
            listen(
              div,
              "mouseleave",
              /*mouseLeave*/
              ctx[5]
            )
          ];
          mounted = true;
        }
      },
      p(ctx2, [dirty]) {
        if (default_slot) {
          if (default_slot.p && (!current || dirty & /*$$scope*/
          64)) {
            update_slot_base(
              default_slot,
              default_slot_template,
              ctx2,
              /*$$scope*/
              ctx2[6],
              !current ? get_all_dirty_from_scope(
                /*$$scope*/
                ctx2[6]
              ) : get_slot_changes(
                default_slot_template,
                /*$$scope*/
                ctx2[6],
                dirty,
                null
              ),
              null
            );
          }
        }
        if (
          /*isHovered*/
          ctx2[1]
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block$x(ctx2);
            if_block.c();
            if_block.m(div, null);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(default_slot, local);
        current = true;
      },
      o(local) {
        transition_out(default_slot, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        if (default_slot)
          default_slot.d(detaching);
        if (if_block)
          if_block.d();
        mounted = false;
        run_all(dispose);
      }
    };
  }
  function instance$G($$self, $$props, $$invalidate) {
    let { $$slots: slots = {}, $$scope } = $$props;
    let { title = "" } = $$props;
    let isHovered = false;
    let tooltipX = 0;
    let tooltipY = 0;
    function mouseOver(event) {
      $$invalidate(1, isHovered = true);
      setTooltipPosition(event);
    }
    function mouseLeave() {
      $$invalidate(1, isHovered = false);
    }
    function setTooltipPosition(event) {
      let TOOLTIP_WIDTH = window.innerWidth * 0.3;
      let TOOLTIP_HEIGHT = window.innerHeight * 0.1;
      let posX = event.clientX + 10;
      let posY = event.clientY + 10;
      if (posX + TOOLTIP_WIDTH > window.innerWidth) {
        posX = window.innerWidth - TOOLTIP_WIDTH - 10;
      }
      if (posY + TOOLTIP_HEIGHT > window.innerHeight) {
        posY = event.clientY - TOOLTIP_HEIGHT - 10;
      }
      $$invalidate(2, tooltipX = posX);
      $$invalidate(3, tooltipY = posY);
    }
    $$self.$$set = ($$props2) => {
      if ("title" in $$props2)
        $$invalidate(0, title = $$props2.title);
      if ("$$scope" in $$props2)
        $$invalidate(6, $$scope = $$props2.$$scope);
    };
    return [title, isHovered, tooltipX, tooltipY, mouseOver, mouseLeave, $$scope, slots];
  }
  class Tooltip extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$G, create_fragment$G, safe_not_equal, { title: 0 }, add_css$C);
    }
  }
  function add_css$B(target) {
    append_styles(target, "svelte-19fqp0z", ".image-carousel.svelte-19fqp0z.svelte-19fqp0z{width:100%}.image-carousel.svelte-19fqp0z .main-image-container.svelte-19fqp0z{display:flex;justify-content:space-between;align-items:center}.image-carousel.svelte-19fqp0z .main-image-container .main-image.svelte-19fqp0z{max-width:200px;height:200px;object-fit:contain;border-radius:8px;transition:opacity 0.3s ease}.image-carousel.svelte-19fqp0z .main-image-container .arrow-btn.svelte-19fqp0z{background:rgba(255, 255, 255, 0.9);border:none;border-radius:50%;width:40px;height:40px;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all 0.2s ease;box-shadow:0 2px 8px rgba(0, 0, 0, 0.15);z-index:2}.image-carousel.svelte-19fqp0z .main-image-container .arrow-btn.svelte-19fqp0z:hover{background:rgb(255, 255, 255);transform:scale(1.1)}.image-carousel.svelte-19fqp0z .carousel-dots.svelte-19fqp0z{display:flex;justify-content:center;gap:8px;margin-top:12px}.image-carousel.svelte-19fqp0z .carousel-dots .dot.svelte-19fqp0z{width:8px;height:8px;padding:0px;border-radius:4px;border:none;background:#d1d5db;cursor:pointer;transition:all 0.2s ease}.image-carousel.svelte-19fqp0z .carousel-dots .dot.active.svelte-19fqp0z{background:#3b82f6;transform:scale(1.2)}.image-carousel.svelte-19fqp0z .carousel-dots .dot.svelte-19fqp0z:hover:not(.active){background:#9ca3af}");
  }
  function get_each_context$d(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[8] = list[i];
    child_ctx[10] = i;
    return child_ctx;
  }
  function create_if_block_1$q(ctx) {
    let button;
    let icon;
    let current;
    let mounted;
    let dispose;
    icon = new Icon({
      props: {
        icon: "mdi:chevron-left",
        width: "24",
        height: "24"
      }
    });
    return {
      c() {
        button = element("button");
        create_component(icon.$$.fragment);
        attr(button, "class", "arrow-btn arrow-left svelte-19fqp0z");
        attr(button, "aria-label", "Previous image");
        attr(
          button,
          "style",
          /*styleString*/
          ctx[1]
        );
      },
      m(target, anchor) {
        insert(target, button, anchor);
        mount_component(icon, button, null);
        current = true;
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*goToPrevious*/
            ctx[5]
          );
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        if (!current || dirty & /*styleString*/
        2) {
          attr(
            button,
            "style",
            /*styleString*/
            ctx2[1]
          );
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        destroy_component(icon);
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block$w(ctx) {
    let button;
    let icon;
    let current;
    let mounted;
    let dispose;
    icon = new Icon({
      props: {
        icon: "mdi:chevron-right",
        width: "24",
        height: "24"
      }
    });
    return {
      c() {
        button = element("button");
        create_component(icon.$$.fragment);
        attr(button, "class", "arrow-btn arrow-right svelte-19fqp0z");
        attr(button, "aria-label", "Next image");
        attr(
          button,
          "style",
          /*styleString*/
          ctx[1]
        );
      },
      m(target, anchor) {
        insert(target, button, anchor);
        mount_component(icon, button, null);
        current = true;
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*goToNext*/
            ctx[6]
          );
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        if (!current || dirty & /*styleString*/
        2) {
          attr(
            button,
            "style",
            /*styleString*/
            ctx2[1]
          );
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        destroy_component(icon);
        mounted = false;
        dispose();
      }
    };
  }
  function create_each_block$d(ctx) {
    let button;
    let mounted;
    let dispose;
    function click_handler2() {
      return (
        /*click_handler*/
        ctx[7](
          /*index*/
          ctx[10]
        )
      );
    }
    return {
      c() {
        button = element("button");
        attr(button, "class", "dot svelte-19fqp0z");
        attr(button, "aria-label", `Go to image ${/*index*/
        ctx[10] + 1}`);
        toggle_class(
          button,
          "active",
          /*index*/
          ctx[10] === /*currentImageIndex*/
          ctx[2]
        );
      },
      m(target, anchor) {
        insert(target, button, anchor);
        if (!mounted) {
          dispose = listen(button, "click", click_handler2);
          mounted = true;
        }
      },
      p(new_ctx, dirty) {
        ctx = new_ctx;
        if (dirty & /*currentImageIndex*/
        4) {
          toggle_class(
            button,
            "active",
            /*index*/
            ctx[10] === /*currentImageIndex*/
            ctx[2]
          );
        }
      },
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_fragment$F(ctx) {
    let div2;
    let div0;
    let t0;
    let img;
    let img_src_value;
    let img_alt_value;
    let t1;
    let t2;
    let div1;
    let current;
    let if_block0 = (
      /*allImages*/
      ctx[3].length > 1 && create_if_block_1$q(ctx)
    );
    let if_block1 = (
      /*allImages*/
      ctx[3].length > 1 && create_if_block$w(ctx)
    );
    let each_value = ensure_array_like(
      /*allImages*/
      ctx[3]
    );
    let each_blocks = [];
    for (let i = 0; i < each_value.length; i += 1) {
      each_blocks[i] = create_each_block$d(get_each_context$d(ctx, each_value, i));
    }
    return {
      c() {
        var _a, _b;
        div2 = element("div");
        div0 = element("div");
        if (if_block0)
          if_block0.c();
        t0 = space();
        img = element("img");
        t1 = space();
        if (if_block1)
          if_block1.c();
        t2 = space();
        div1 = element("div");
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        if (!src_url_equal(img.src, img_src_value = /*allImages*/
        ctx[3][
          /*currentImageIndex*/
          ctx[2]
        ]))
          attr(img, "src", img_src_value);
        attr(img, "alt", img_alt_value = `${/*itemData*/
        ((_a = ctx[0]) == null ? void 0 : _a.product_title) || /*itemData*/
        ((_b = ctx[0]) == null ? void 0 : _b.title)} - Image ${/*currentImageIndex*/
        ctx[2] + 1}`);
        attr(img, "class", "main-image svelte-19fqp0z");
        attr(div0, "class", "main-image-container svelte-19fqp0z");
        attr(div1, "class", "carousel-dots svelte-19fqp0z");
        attr(div2, "class", "image-carousel svelte-19fqp0z");
      },
      m(target, anchor) {
        insert(target, div2, anchor);
        append(div2, div0);
        if (if_block0)
          if_block0.m(div0, null);
        append(div0, t0);
        append(div0, img);
        append(div0, t1);
        if (if_block1)
          if_block1.m(div0, null);
        append(div2, t2);
        append(div2, div1);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(div1, null);
          }
        }
        current = true;
      },
      p(ctx2, [dirty]) {
        var _a, _b;
        if (
          /*allImages*/
          ctx2[3].length > 1
        )
          if_block0.p(ctx2, dirty);
        if (!current || dirty & /*currentImageIndex*/
        4 && !src_url_equal(img.src, img_src_value = /*allImages*/
        ctx2[3][
          /*currentImageIndex*/
          ctx2[2]
        ])) {
          attr(img, "src", img_src_value);
        }
        if (!current || dirty & /*itemData, currentImageIndex*/
        5 && img_alt_value !== (img_alt_value = `${/*itemData*/
        ((_a = ctx2[0]) == null ? void 0 : _a.product_title) || /*itemData*/
        ((_b = ctx2[0]) == null ? void 0 : _b.title)} - Image ${/*currentImageIndex*/
        ctx2[2] + 1}`)) {
          attr(img, "alt", img_alt_value);
        }
        if (
          /*allImages*/
          ctx2[3].length > 1
        )
          if_block1.p(ctx2, dirty);
        if (dirty & /*currentImageIndex, goToSlide*/
        20) {
          each_value = ensure_array_like(
            /*allImages*/
            ctx2[3]
          );
          let i;
          for (i = 0; i < each_value.length; i += 1) {
            const child_ctx = get_each_context$d(ctx2, each_value, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
            } else {
              each_blocks[i] = create_each_block$d(child_ctx);
              each_blocks[i].c();
              each_blocks[i].m(div1, null);
            }
          }
          for (; i < each_blocks.length; i += 1) {
            each_blocks[i].d(1);
          }
          each_blocks.length = each_value.length;
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block0);
        transition_in(if_block1);
        current = true;
      },
      o(local) {
        transition_out(if_block0);
        transition_out(if_block1);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div2);
        }
        if (if_block0)
          if_block0.d();
        if (if_block1)
          if_block1.d();
        destroy_each(each_blocks, detaching);
      }
    };
  }
  function instance$F($$self, $$props, $$invalidate) {
    let { itemData = {} } = $$props;
    let { styleString = "" } = $$props;
    let allImages = itemData.images || [];
    let currentImageIndex = 0;
    const goToSlide = (index) => {
      $$invalidate(2, currentImageIndex = index);
    };
    const goToPrevious = () => {
      $$invalidate(2, currentImageIndex = currentImageIndex === 0 ? allImages.length - 1 : currentImageIndex - 1);
    };
    const goToNext = () => {
      $$invalidate(2, currentImageIndex = currentImageIndex === allImages.length - 1 ? 0 : currentImageIndex + 1);
    };
    const click_handler2 = (index) => goToSlide(index);
    $$self.$$set = ($$props2) => {
      if ("itemData" in $$props2)
        $$invalidate(0, itemData = $$props2.itemData);
      if ("styleString" in $$props2)
        $$invalidate(1, styleString = $$props2.styleString);
    };
    return [
      itemData,
      styleString,
      currentImageIndex,
      allImages,
      goToSlide,
      goToPrevious,
      goToNext,
      click_handler2
    ];
  }
  class ImageCarousel extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$F, create_fragment$F, safe_not_equal, { itemData: 0, styleString: 1 }, add_css$B);
    }
  }
  function add_css$A(target) {
    append_styles(target, "svelte-1jyn7qx", ".add-to-cart-section.svelte-1jyn7qx.svelte-1jyn7qx{margin-top:16px}.add-to-cart-section.svelte-1jyn7qx .add-to-cart-btn.svelte-1jyn7qx{display:flex;align-items:center;justify-content:center;gap:8px;width:100%;padding:12px 16px;border:1px solid var(--gokwik-primary-color);border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all 0.2s ease;text-decoration:none;background:transparent}.add-to-cart-section.svelte-1jyn7qx .add-to-cart-btn.svelte-1jyn7qx:hover{background-color:#e5e7eb;border-color:#9ca3af;color:#1f2937}.add-to-cart-section.svelte-1jyn7qx .add-to-cart-btn.svelte-1jyn7qx:active{transform:translateY(1px)}.add-to-cart-section.svelte-1jyn7qx .add-to-cart-btn span.svelte-1jyn7qx{font-weight:500}.variant-list.svelte-1jyn7qx.svelte-1jyn7qx{margin:8px 0;display:flex;gap:5px;flex-wrap:wrap}.variant-selector.svelte-1jyn7qx.svelte-1jyn7qx{max-width:100px}.variant-selector.svelte-1jyn7qx select.svelte-1jyn7qx{width:100%;padding:6px 8px 6px 8px;border-radius:8px;background:var(--Gray-Neutral-100, #f3f4f6);font-size:10px;font-weight:500;margin-right:5px;cursor:pointer;pointer-events:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.variant-selector.svelte-1jyn7qx select.svelte-1jyn7qx:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px rgba(0, 123, 255, 0.25)}.product-popup.svelte-1jyn7qx.svelte-1jyn7qx{padding:20px;max-width:400px;width:100%}.product-popup.svelte-1jyn7qx .product-popup-content.svelte-1jyn7qx{display:flex;flex-direction:column;gap:16px}.product-popup.svelte-1jyn7qx .product-image.svelte-1jyn7qx{text-align:center}.product-popup.svelte-1jyn7qx .product-image img.svelte-1jyn7qx{max-width:200px;height:200px;object-fit:contain;border-radius:8px;border:1px solid #e5e7eb}.product-popup.svelte-1jyn7qx .product-details .product-title.svelte-1jyn7qx{font-size:18px;font-weight:600;margin:0 0 12px 0;line-height:1.4;color:#1f2937}.product-popup.svelte-1jyn7qx .product-details .product-description.svelte-1jyn7qx{font-size:14px;line-height:1.5;color:#6b7280;margin-bottom:16px;max-height:120px;overflow-y:auto}.product-popup.svelte-1jyn7qx .product-details .product-description.svelte-1jyn7qx p{margin:0 0 8px 0}.product-popup.svelte-1jyn7qx .product-details .product-description.svelte-1jyn7qx p:last-child{margin-bottom:0}.product-popup.svelte-1jyn7qx .product-details .product-price.svelte-1jyn7qx{display:flex;align-items:center;gap:8px;margin-bottom:12px}.product-popup.svelte-1jyn7qx .product-details .product-price .coupon-applied-area.svelte-1jyn7qx{display:flex;align-items:center;background-color:rgba(6, 135, 67, 0.1);color:rgb(6, 135, 67);border-radius:5px;padding:2px 5px;max-width:120px;width:max-content;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;gap:5px;font-size:11px}.product-popup.svelte-1jyn7qx .product-details .product-price .coupon-applied-area .icon.svelte-1jyn7qx{display:flex;align-items:center;justify-content:center;width:14px;height:14px;background-color:#e5e7eb;border-radius:50%}.product-popup.svelte-1jyn7qx .product-details .product-price strike.svelte-1jyn7qx{color:var(--Gray-Neutral-300, #d2d6db);font-weight:500;font-size:14px}.product-popup.svelte-1jyn7qx .product-details .product-price .price.svelte-1jyn7qx{font-size:18px;font-weight:600;color:#1f2937}.product-popup.svelte-1jyn7qx .product-details .product-price .hidden-vis.svelte-1jyn7qx{display:none}.product-popup.svelte-1jyn7qx .product-details .variant-info.svelte-1jyn7qx{display:flex;gap:8px;font-size:14px;align-items:center;margin-bottom:5px}.product-popup.svelte-1jyn7qx .product-details .variant-info .variant-label.svelte-1jyn7qx{color:#6b7280;font-weight:500}.product-popup.svelte-1jyn7qx .product-details .variant-info .variant-value.svelte-1jyn7qx{color:#1f2937;background:var(--Gray-Neutral-100, #f3f4f6);border:1px solid var(--Gray-Neutral-200, #e5e7eb);border-radius:10px;padding:2px 5px}.product-popup.svelte-1jyn7qx .product-details .product-options.svelte-1jyn7qx{display:flex;flex-direction:column;gap:6px;margin-top:8px}.product-popup.svelte-1jyn7qx .product-details .product-options .option-item.svelte-1jyn7qx{display:flex;gap:8px;font-size:14px;align-items:center;margin-bottom:5px}.product-popup.svelte-1jyn7qx .product-details .product-options .option-item .option-name.svelte-1jyn7qx{color:#6b7280;font-weight:500;min-width:fit-content}.product-popup.svelte-1jyn7qx .product-details .product-options .option-item .option-value.svelte-1jyn7qx{color:#1f2937;font-weight:400;background:var(--Gray-Neutral-100, #f3f4f6);border:1px solid var(--Gray-Neutral-200, #e5e7eb);border-radius:10px;padding:2px 5px}.product-popup.svelte-1jyn7qx .product-details .item-properties-list.svelte-1jyn7qx{display:flex;flex-direction:column;gap:6px;margin-top:8px}.product-popup.svelte-1jyn7qx .product-details .item-properties-list .item-properties-list-element.svelte-1jyn7qx{display:flex;gap:8px;font-size:14px;align-items:center}.product-popup.svelte-1jyn7qx .product-details .item-properties-list .item-properties-list-element .item-properties-list-element-key .item-properties-list-element-key-text.svelte-1jyn7qx{color:#6b7280;font-weight:500;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:120px}.product-popup.svelte-1jyn7qx .product-details .item-properties-list .item-properties-list-element .separator.svelte-1jyn7qx{color:#6b7280;font-weight:500}.product-popup.svelte-1jyn7qx .product-details .item-properties-list .item-properties-list-element .item-properties-list-element-value.svelte-1jyn7qx{flex:1}.product-popup.svelte-1jyn7qx .product-details .item-properties-list .item-properties-list-element .item-properties-list-element-value .item-properties-list-element-value-text.svelte-1jyn7qx{color:#1f2937;font-weight:400;margin:0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.product-popup.svelte-1jyn7qx .product-details .view-details-section.svelte-1jyn7qx{margin-top:16px;padding-top:16px;border-top:1px solid #e5e7eb}.product-popup.svelte-1jyn7qx .product-details .view-details-section .view-details-btn.svelte-1jyn7qx{display:flex;align-items:center;justify-content:center;gap:8px;width:100%;padding:12px 16px;border:1px solid #d1d5db;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all 0.2s ease;text-decoration:none}.product-popup.svelte-1jyn7qx .product-details .view-details-section .view-details-btn.svelte-1jyn7qx:hover{background-color:#e5e7eb;border-color:#9ca3af;color:#1f2937}.product-popup.svelte-1jyn7qx .product-details .view-details-section .view-details-btn.svelte-1jyn7qx:active{transform:translateY(1px)}.product-popup.svelte-1jyn7qx .product-details .view-details-section .view-details-btn span.svelte-1jyn7qx{font-weight:500}");
  }
  function get_each_context$c(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[16] = list[i];
    return child_ctx;
  }
  function get_each_context_1$4(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[19] = list[i];
    return child_ctx;
  }
  function get_each_context_2$2(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[19] = list[i];
    child_ctx[22] = list;
    child_ctx[23] = i;
    return child_ctx;
  }
  function get_each_context_3$2(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[24] = list[i];
    return child_ctx;
  }
  function create_else_block_1$4(ctx) {
    let img;
    let img_src_value;
    let img_alt_value;
    return {
      c() {
        var _a, _b, _c, _d;
        img = element("img");
        if (!src_url_equal(img.src, img_src_value = /*item*/
        ((_a = ctx[1]) == null ? void 0 : _a.image) || /*itemData*/
        ((_b = ctx[5]) == null ? void 0 : _b.featured_image)))
          attr(img, "src", img_src_value);
        attr(img, "alt", img_alt_value = /*item*/
        ((_c = ctx[1]) == null ? void 0 : _c.title) || /*item*/
        ((_d = ctx[1]) == null ? void 0 : _d.productName));
        attr(img, "class", "svelte-1jyn7qx");
      },
      m(target, anchor) {
        insert(target, img, anchor);
      },
      p(ctx2, dirty) {
        var _a, _b, _c, _d;
        if (dirty & /*item, itemData*/
        34 && !src_url_equal(img.src, img_src_value = /*item*/
        ((_a = ctx2[1]) == null ? void 0 : _a.image) || /*itemData*/
        ((_b = ctx2[5]) == null ? void 0 : _b.featured_image))) {
          attr(img, "src", img_src_value);
        }
        if (dirty & /*item*/
        2 && img_alt_value !== (img_alt_value = /*item*/
        ((_c = ctx2[1]) == null ? void 0 : _c.title) || /*item*/
        ((_d = ctx2[1]) == null ? void 0 : _d.productName))) {
          attr(img, "alt", img_alt_value);
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(img);
        }
      }
    };
  }
  function create_if_block_11$2(ctx) {
    let imagecarousel;
    let current;
    imagecarousel = new ImageCarousel({
      props: {
        itemData: (
          /*itemData*/
          ctx[5]
        ),
        styleString: (
          /*getStyleObject*/
          ctx[8](
            /*stylingConfig*/
            ctx[11]
          )
        )
      }
    });
    return {
      c() {
        create_component(imagecarousel.$$.fragment);
      },
      m(target, anchor) {
        mount_component(imagecarousel, target, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        const imagecarousel_changes = {};
        if (dirty & /*itemData*/
        32)
          imagecarousel_changes.itemData = /*itemData*/
          ctx2[5];
        imagecarousel.$set(imagecarousel_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(imagecarousel.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(imagecarousel.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(imagecarousel, detaching);
      }
    };
  }
  function create_if_block_10$4(ctx) {
    var _a, _b;
    let div;
    let raw_value = (removeImgTags(
      /*itemData*/
      (_a = ctx[5]) == null ? void 0 : _a.description
    ) || removeImgTags(
      /*item*/
      (_b = ctx[1]) == null ? void 0 : _b.product_description
    )) + "";
    return {
      c() {
        div = element("div");
        attr(div, "class", "product-description svelte-1jyn7qx");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        div.innerHTML = raw_value;
      },
      p(ctx2, dirty) {
        var _a2, _b2;
        if (dirty & /*itemData, item*/
        34 && raw_value !== (raw_value = (removeImgTags(
          /*itemData*/
          (_a2 = ctx2[5]) == null ? void 0 : _a2.description
        ) || removeImgTags(
          /*item*/
          (_b2 = ctx2[1]) == null ? void 0 : _b2.product_description
        )) + ""))
          div.innerHTML = raw_value;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
      }
    };
  }
  function create_else_block$e(ctx) {
    let span;
    let t_value = formatCurrencyDisplay(
      /*totalItemPrice*/
      (ctx[4] / 100).toFixed(2)
    ) + "";
    let t;
    return {
      c() {
        span = element("span");
        t = text(t_value);
        attr(span, "class", "price svelte-1jyn7qx");
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t);
      },
      p(ctx2, dirty) {
        if (dirty & /*totalItemPrice*/
        16 && t_value !== (t_value = formatCurrencyDisplay(
          /*totalItemPrice*/
          (ctx2[4] / 100).toFixed(2)
        ) + ""))
          set_data(t, t_value);
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_if_block_9$4(ctx) {
    let strike;
    let t0_value = formatCurrencyDisplay((+/*item*/
    ctx[1].compareAtPrice).toFixed(2)) + "";
    let t0;
    let t1;
    let span;
    let t2_value = formatCurrencyDisplay((+/*item*/
    ctx[1].price).toFixed(2)) + "";
    let t2;
    return {
      c() {
        var _a, _b;
        strike = element("strike");
        t0 = text(t0_value);
        t1 = space();
        span = element("span");
        t2 = text(t2_value);
        attr(strike, "class", "svelte-1jyn7qx");
        toggle_class(strike, "hidden-vis", (+/*item*/
        ((_a = ctx[1]) == null ? void 0 : _a.compareAtPrice) || 0) <= (+/*item*/
        ((_b = ctx[1]) == null ? void 0 : _b.price) || 0));
        attr(span, "class", "price svelte-1jyn7qx");
      },
      m(target, anchor) {
        insert(target, strike, anchor);
        append(strike, t0);
        insert(target, t1, anchor);
        insert(target, span, anchor);
        append(span, t2);
      },
      p(ctx2, dirty) {
        var _a, _b;
        if (dirty & /*item*/
        2 && t0_value !== (t0_value = formatCurrencyDisplay((+/*item*/
        ctx2[1].compareAtPrice).toFixed(2)) + ""))
          set_data(t0, t0_value);
        if (dirty & /*item*/
        2) {
          toggle_class(strike, "hidden-vis", (+/*item*/
          ((_a = ctx2[1]) == null ? void 0 : _a.compareAtPrice) || 0) <= (+/*item*/
          ((_b = ctx2[1]) == null ? void 0 : _b.price) || 0));
        }
        if (dirty & /*item*/
        2 && t2_value !== (t2_value = formatCurrencyDisplay((+/*item*/
        ctx2[1].price).toFixed(2)) + ""))
          set_data(t2, t2_value);
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(strike);
          detach(t1);
          detach(span);
        }
      }
    };
  }
  function create_if_block_7$7(ctx) {
    var _a;
    let strike;
    let t0_value = formatCurrencyDisplay(
      /*totalItemPrice*/
      (ctx[4] / 100).toFixed(2)
    ) + "";
    let t0;
    let t1;
    let span;
    let t2_value = formatCurrencyDisplay(
      /*freeProduct*/
      ctx[3] ? "0" : (
        /*item*/
        (ctx[1].line_price / 100).toFixed(2)
      )
    ) + "";
    let t2;
    let t3;
    let if_block_anchor;
    let current;
    let if_block = (
      /*item*/
      ((_a = ctx[1].discounts) == null ? void 0 : _a.length) > 0 && /*item*/
      ctx[1].original_line_price > /*item*/
      ctx[1].line_price && create_if_block_8$7(ctx)
    );
    return {
      c() {
        strike = element("strike");
        t0 = text(t0_value);
        t1 = space();
        span = element("span");
        t2 = text(t2_value);
        t3 = space();
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
        attr(strike, "class", "svelte-1jyn7qx");
        attr(span, "class", "price svelte-1jyn7qx");
      },
      m(target, anchor) {
        insert(target, strike, anchor);
        append(strike, t0);
        insert(target, t1, anchor);
        insert(target, span, anchor);
        append(span, t2);
        insert(target, t3, anchor);
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        var _a2;
        if ((!current || dirty & /*totalItemPrice*/
        16) && t0_value !== (t0_value = formatCurrencyDisplay(
          /*totalItemPrice*/
          (ctx2[4] / 100).toFixed(2)
        ) + ""))
          set_data(t0, t0_value);
        if ((!current || dirty & /*freeProduct, item*/
        10) && t2_value !== (t2_value = formatCurrencyDisplay(
          /*freeProduct*/
          ctx2[3] ? "0" : (
            /*item*/
            (ctx2[1].line_price / 100).toFixed(2)
          )
        ) + ""))
          set_data(t2, t2_value);
        if (
          /*item*/
          ((_a2 = ctx2[1].discounts) == null ? void 0 : _a2.length) > 0 && /*item*/
          ctx2[1].original_line_price > /*item*/
          ctx2[1].line_price
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
            if (dirty & /*item*/
            2) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block_8$7(ctx2);
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(strike);
          detach(t1);
          detach(span);
          detach(t3);
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function create_if_block_8$7(ctx) {
    var _a, _b, _c;
    let div1;
    let div0;
    let icon;
    let t0;
    let span;
    let t1_value = (
      /*freeProduct*/
      (ctx[3] ? (
        /*$store_appliedManualDiscount*/
        ((_a = ctx[10]) == null ? void 0 : _a.title) || "FREE"
      ) : (
        /*item*/
        (_c = (_b = ctx[1].discounts) == null ? void 0 : _b[0]) == null ? void 0 : _c.title
      )) + ""
    );
    let t1;
    let current;
    icon = new Icon({
      props: {
        height: "14px",
        icon: "ic:twotone-discount",
        color: ""
      }
    });
    return {
      c() {
        div1 = element("div");
        div0 = element("div");
        create_component(icon.$$.fragment);
        t0 = space();
        span = element("span");
        t1 = text(t1_value);
        attr(div0, "class", "icon svelte-1jyn7qx");
        attr(span, "class", "svelte-1jyn7qx");
        attr(div1, "class", "coupon-applied-area svelte-1jyn7qx");
      },
      m(target, anchor) {
        insert(target, div1, anchor);
        append(div1, div0);
        mount_component(icon, div0, null);
        append(div1, t0);
        append(div1, span);
        append(span, t1);
        current = true;
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c2;
        if ((!current || dirty & /*freeProduct, $store_appliedManualDiscount, item*/
        1034) && t1_value !== (t1_value = /*freeProduct*/
        (ctx2[3] ? (
          /*$store_appliedManualDiscount*/
          ((_a2 = ctx2[10]) == null ? void 0 : _a2.title) || "FREE"
        ) : (
          /*item*/
          (_c2 = (_b2 = ctx2[1].discounts) == null ? void 0 : _b2[0]) == null ? void 0 : _c2.title
        )) + ""))
          set_data(t1, t1_value);
      },
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div1);
        }
        destroy_component(icon);
      }
    };
  }
  function create_if_block_6$7(ctx) {
    let each_blocks = [];
    let each_1_lookup = /* @__PURE__ */ new Map();
    let each_1_anchor;
    let each_value_2 = ensure_array_like(
      /*itemData*/
      ctx[5].options
    );
    const get_key = (ctx2) => `${/*item*/
    ctx2[1].key || /*item*/
    ctx2[1].id}-option-${/*option*/
    ctx2[19].position}`;
    for (let i = 0; i < each_value_2.length; i += 1) {
      let child_ctx = get_each_context_2$2(ctx, each_value_2, i);
      let key = get_key(child_ctx);
      each_1_lookup.set(key, each_blocks[i] = create_each_block_2$2(key, child_ctx));
    }
    return {
      c() {
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        each_1_anchor = empty();
      },
      m(target, anchor) {
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(target, anchor);
          }
        }
        insert(target, each_1_anchor, anchor);
      },
      p(ctx2, dirty) {
        if (dirty & /*selectedVariant, itemData, handleVariantChange, isSelectVariantAvailable, item*/
        227) {
          each_value_2 = ensure_array_like(
            /*itemData*/
            ctx2[5].options
          );
          each_blocks = update_keyed_each(each_blocks, dirty, get_key, 1, ctx2, each_value_2, each_1_lookup, each_1_anchor.parentNode, destroy_block, create_each_block_2$2, each_1_anchor, get_each_context_2$2);
        }
      },
      d(detaching) {
        if (detaching) {
          detach(each_1_anchor);
        }
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].d(detaching);
        }
      }
    };
  }
  function create_each_block_3$2(ctx) {
    let option_1;
    let t_value = (
      /*value*/
      ctx[24] + ""
    );
    let t;
    let option_1_value_value;
    let option_1_disabled_value;
    return {
      c() {
        option_1 = element("option");
        t = text(t_value);
        option_1.__value = option_1_value_value = /*value*/
        ctx[24];
        set_input_value(option_1, option_1.__value);
        option_1.disabled = option_1_disabled_value = !/*isSelectVariantAvailable*/
        ctx[7](
          `option${/*option*/
          ctx[19].position}`,
          /*value*/
          ctx[24]
        );
      },
      m(target, anchor) {
        insert(target, option_1, anchor);
        append(option_1, t);
      },
      p(ctx2, dirty) {
        if (dirty & /*itemData*/
        32 && t_value !== (t_value = /*value*/
        ctx2[24] + ""))
          set_data(t, t_value);
        if (dirty & /*itemData*/
        32 && option_1_value_value !== (option_1_value_value = /*value*/
        ctx2[24])) {
          option_1.__value = option_1_value_value;
          set_input_value(option_1, option_1.__value);
        }
        if (dirty & /*isSelectVariantAvailable, itemData*/
        160 && option_1_disabled_value !== (option_1_disabled_value = !/*isSelectVariantAvailable*/
        ctx2[7](
          `option${/*option*/
          ctx2[19].position}`,
          /*value*/
          ctx2[24]
        ))) {
          option_1.disabled = option_1_disabled_value;
        }
      },
      d(detaching) {
        if (detaching) {
          detach(option_1);
        }
      }
    };
  }
  function create_each_block_2$2(key_2, ctx) {
    let span;
    let select;
    let t;
    let mounted;
    let dispose;
    let each_value_3 = ensure_array_like(
      /*option*/
      ctx[19].values
    );
    let each_blocks = [];
    for (let i = 0; i < each_value_3.length; i += 1) {
      each_blocks[i] = create_each_block_3$2(get_each_context_3$2(ctx, each_value_3, i));
    }
    function select_change_handler() {
      ctx[14].call(
        select,
        /*option*/
        ctx[19]
      );
    }
    function change_handler(...args) {
      return (
        /*change_handler*/
        ctx[15](
          /*option*/
          ctx[19],
          ...args
        )
      );
    }
    return {
      key: key_2,
      first: null,
      c() {
        span = element("span");
        select = element("select");
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        t = space();
        attr(select, "class", "svelte-1jyn7qx");
        if (
          /*selectedVariant*/
          ctx[0][`option${/*option*/
          ctx[19].position}`] === void 0
        )
          add_render_callback(select_change_handler);
        attr(span, "class", "variant-selector svelte-1jyn7qx");
        this.first = span;
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, select);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(select, null);
          }
        }
        select_option(
          select,
          /*selectedVariant*/
          ctx[0][`option${/*option*/
          ctx[19].position}`],
          true
        );
        append(span, t);
        if (!mounted) {
          dispose = [
            listen(select, "change", select_change_handler),
            listen(select, "change", change_handler),
            listen(select, "click", stop_propagation(
              /*click_handler*/
              ctx[13]
            ))
          ];
          mounted = true;
        }
      },
      p(new_ctx, dirty) {
        ctx = new_ctx;
        if (dirty & /*itemData, isSelectVariantAvailable*/
        160) {
          each_value_3 = ensure_array_like(
            /*option*/
            ctx[19].values
          );
          let i;
          for (i = 0; i < each_value_3.length; i += 1) {
            const child_ctx = get_each_context_3$2(ctx, each_value_3, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
            } else {
              each_blocks[i] = create_each_block_3$2(child_ctx);
              each_blocks[i].c();
              each_blocks[i].m(select, null);
            }
          }
          for (; i < each_blocks.length; i += 1) {
            each_blocks[i].d(1);
          }
          each_blocks.length = each_value_3.length;
        }
        if (dirty & /*selectedVariant, itemData*/
        33) {
          select_option(
            select,
            /*selectedVariant*/
            ctx[0][`option${/*option*/
            ctx[19].position}`]
          );
        }
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
        destroy_each(each_blocks, detaching);
        mounted = false;
        run_all(dispose);
      }
    };
  }
  function create_if_block_5$8(ctx) {
    let div;
    let span0;
    let t1;
    let span1;
    let t2_value = (
      /*item*/
      (ctx[1].variant_title || /*item*/
      ctx[1].variantName) + ""
    );
    let t2;
    return {
      c() {
        div = element("div");
        span0 = element("span");
        span0.textContent = "Variant:";
        t1 = space();
        span1 = element("span");
        t2 = text(t2_value);
        attr(span0, "class", "variant-label svelte-1jyn7qx");
        attr(span1, "class", "variant-value svelte-1jyn7qx");
        attr(div, "class", "variant-info svelte-1jyn7qx");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, span0);
        append(div, t1);
        append(div, span1);
        append(span1, t2);
      },
      p(ctx2, dirty) {
        if (dirty & /*item*/
        2 && t2_value !== (t2_value = /*item*/
        (ctx2[1].variant_title || /*item*/
        ctx2[1].variantName) + ""))
          set_data(t2, t2_value);
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
      }
    };
  }
  function create_if_block_3$d(ctx) {
    let div;
    let each_value_1 = ensure_array_like(
      /*item*/
      ctx[1].options_with_values
    );
    let each_blocks = [];
    for (let i = 0; i < each_value_1.length; i += 1) {
      each_blocks[i] = create_each_block_1$4(get_each_context_1$4(ctx, each_value_1, i));
    }
    return {
      c() {
        div = element("div");
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        attr(div, "class", "product-options svelte-1jyn7qx");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(div, null);
          }
        }
      },
      p(ctx2, dirty) {
        if (dirty & /*item*/
        2) {
          each_value_1 = ensure_array_like(
            /*item*/
            ctx2[1].options_with_values
          );
          let i;
          for (i = 0; i < each_value_1.length; i += 1) {
            const child_ctx = get_each_context_1$4(ctx2, each_value_1, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
            } else {
              each_blocks[i] = create_each_block_1$4(child_ctx);
              each_blocks[i].c();
              each_blocks[i].m(div, null);
            }
          }
          for (; i < each_blocks.length; i += 1) {
            each_blocks[i].d(1);
          }
          each_blocks.length = each_value_1.length;
        }
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_each(each_blocks, detaching);
      }
    };
  }
  function create_if_block_4$8(ctx) {
    let div;
    let span0;
    let t0_value = (
      /*option*/
      ctx[19].name + ""
    );
    let t0;
    let t1;
    let t2;
    let span1;
    let t3_value = (
      /*option*/
      ctx[19].value + ""
    );
    let t3;
    let t4;
    return {
      c() {
        div = element("div");
        span0 = element("span");
        t0 = text(t0_value);
        t1 = text(":");
        t2 = space();
        span1 = element("span");
        t3 = text(t3_value);
        t4 = space();
        attr(span0, "class", "option-name svelte-1jyn7qx");
        attr(span1, "class", "option-value svelte-1jyn7qx");
        attr(div, "class", "option-item svelte-1jyn7qx");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, span0);
        append(span0, t0);
        append(span0, t1);
        append(div, t2);
        append(div, span1);
        append(span1, t3);
        append(div, t4);
      },
      p(ctx2, dirty) {
        if (dirty & /*item*/
        2 && t0_value !== (t0_value = /*option*/
        ctx2[19].name + ""))
          set_data(t0, t0_value);
        if (dirty & /*item*/
        2 && t3_value !== (t3_value = /*option*/
        ctx2[19].value + ""))
          set_data(t3, t3_value);
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
      }
    };
  }
  function create_each_block_1$4(ctx) {
    let if_block_anchor;
    let if_block = (
      /*option*/
      ctx[19].value !== "Default Title" && /*option*/
      ctx[19].value !== "" && create_if_block_4$8(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
      },
      p(ctx2, dirty) {
        if (
          /*option*/
          ctx2[19].value !== "Default Title" && /*option*/
          ctx2[19].value !== ""
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block_4$8(ctx2);
            if_block.c();
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function create_if_block_1$p(ctx) {
    var _a;
    let div;
    let each_value = ensure_array_like(Object.keys(
      /*item*/
      ((_a = ctx[1]) == null ? void 0 : _a.properties) || {}
    ));
    let each_blocks = [];
    for (let i = 0; i < each_value.length; i += 1) {
      each_blocks[i] = create_each_block$c(get_each_context$c(ctx, each_value, i));
    }
    return {
      c() {
        div = element("div");
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        attr(div, "class", "item-properties-list svelte-1jyn7qx");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(div, null);
          }
        }
      },
      p(ctx2, dirty) {
        var _a2;
        if (dirty & /*item, Object*/
        2) {
          each_value = ensure_array_like(Object.keys(
            /*item*/
            ((_a2 = ctx2[1]) == null ? void 0 : _a2.properties) || {}
          ));
          let i;
          for (i = 0; i < each_value.length; i += 1) {
            const child_ctx = get_each_context$c(ctx2, each_value, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
            } else {
              each_blocks[i] = create_each_block$c(child_ctx);
              each_blocks[i].c();
              each_blocks[i].m(div, null);
            }
          }
          for (; i < each_blocks.length; i += 1) {
            each_blocks[i].d(1);
          }
          each_blocks.length = each_value.length;
        }
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_each(each_blocks, detaching);
      }
    };
  }
  function create_if_block_2$j(ctx) {
    let div3;
    let div0;
    let p0;
    let t0_value = (
      /*key*/
      ctx[16] + ""
    );
    let t0;
    let t1;
    let div1;
    let t3;
    let div2;
    let p1;
    let t4_value = (
      /*item*/
      ctx[1].properties[
        /*key*/
        ctx[16]
      ] + ""
    );
    let t4;
    let t5;
    return {
      c() {
        div3 = element("div");
        div0 = element("div");
        p0 = element("p");
        t0 = text(t0_value);
        t1 = space();
        div1 = element("div");
        div1.textContent = ":";
        t3 = space();
        div2 = element("div");
        p1 = element("p");
        t4 = text(t4_value);
        t5 = space();
        attr(p0, "class", "item-properties-list-element-key-text svelte-1jyn7qx");
        attr(div0, "class", "item-properties-list-element-key");
        attr(div1, "class", "separator svelte-1jyn7qx");
        attr(p1, "class", "item-properties-list-element-value-text svelte-1jyn7qx");
        attr(div2, "class", "item-properties-list-element-value svelte-1jyn7qx");
        attr(div3, "class", "item-properties-list-element svelte-1jyn7qx");
      },
      m(target, anchor) {
        insert(target, div3, anchor);
        append(div3, div0);
        append(div0, p0);
        append(p0, t0);
        append(div3, t1);
        append(div3, div1);
        append(div3, t3);
        append(div3, div2);
        append(div2, p1);
        append(p1, t4);
        append(div3, t5);
      },
      p(ctx2, dirty) {
        if (dirty & /*item*/
        2 && t0_value !== (t0_value = /*key*/
        ctx2[16] + ""))
          set_data(t0, t0_value);
        if (dirty & /*item*/
        2 && t4_value !== (t4_value = /*item*/
        ctx2[1].properties[
          /*key*/
          ctx2[16]
        ] + ""))
          set_data(t4, t4_value);
      },
      d(detaching) {
        if (detaching) {
          detach(div3);
        }
      }
    };
  }
  function create_each_block$c(ctx) {
    let if_block_anchor;
    let if_block = (
      /*key*/
      ctx[16] !== "gokwik-upsell" && create_if_block_2$j(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
      },
      p(ctx2, dirty) {
        if (
          /*key*/
          ctx2[16] !== "gokwik-upsell"
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block_2$j(ctx2);
            if_block.c();
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function create_if_block$v(ctx) {
    let div;
    let button;
    let mounted;
    let dispose;
    return {
      c() {
        div = element("div");
        button = element("button");
        button.innerHTML = `<span class="svelte-1jyn7qx">+ Add to cart</span>`;
        attr(button, "class", "add-to-cart-btn svelte-1jyn7qx");
        attr(div, "class", "add-to-cart-section svelte-1jyn7qx");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, button);
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*addToCartClickHandler*/
            ctx[12]
          );
          mounted = true;
        }
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_fragment$E(ctx) {
    var _a, _b, _c, _d, _e, _f, _g;
    let div6;
    let div5;
    let div0;
    let current_block_type_index;
    let if_block0;
    let t0;
    let div4;
    let h3;
    let t1_value = (
      /*item*/
      (((_a = ctx[1]) == null ? void 0 : _a.title) || /*item*/
      ((_b = ctx[1]) == null ? void 0 : _b.product_title)) + ""
    );
    let t1;
    let t2;
    let t3;
    let div1;
    let current_block_type_index_1;
    let if_block2;
    let t4;
    let div2;
    let t5;
    let t6;
    let t7;
    let t8;
    let div3;
    let a;
    let span;
    let t10;
    let icon;
    let a_href_value;
    let t11;
    let current;
    const if_block_creators = [create_if_block_11$2, create_else_block_1$4];
    const if_blocks = [];
    function select_block_type(ctx2, dirty) {
      var _a2, _b2, _c2;
      if (
        /*itemData*/
        ((_a2 = ctx2[5]) == null ? void 0 : _a2.images) && /*itemData*/
        ((_c2 = (_b2 = ctx2[5]) == null ? void 0 : _b2.images) == null ? void 0 : _c2.length) > 1
      )
        return 0;
      return 1;
    }
    current_block_type_index = select_block_type(ctx);
    if_block0 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
    let if_block1 = (
      /*itemData*/
      (((_c = ctx[5]) == null ? void 0 : _c.description) || /*item*/
      ((_d = ctx[1]) == null ? void 0 : _d.product_description)) && create_if_block_10$4(ctx)
    );
    const if_block_creators_1 = [create_if_block_7$7, create_if_block_9$4, create_else_block$e];
    const if_blocks_1 = [];
    function select_block_type_1(ctx2, dirty) {
      if (!/*upsellComponent*/
      ctx2[2] && /*freeProduct*/
      (ctx2[3] || /*totalItemPrice*/
      ctx2[4] > /*item*/
      ctx2[1].original_line_price || /*item*/
      ctx2[1].original_line_price > /*item*/
      ctx2[1].line_price))
        return 0;
      if (
        /*upsellComponent*/
        ctx2[2]
      )
        return 1;
      return 2;
    }
    current_block_type_index_1 = select_block_type_1(ctx);
    if_block2 = if_blocks_1[current_block_type_index_1] = if_block_creators_1[current_block_type_index_1](ctx);
    let if_block3 = (
      /*itemData*/
      ctx[5] && !/*upsellComponent*/
      ctx[2] && create_if_block_6$7(ctx)
    );
    let if_block4 = (
      /*item*/
      (ctx[1].variant_title && /*item*/
      ctx[1].variant_title !== "Default Title" || /*item*/
      ctx[1].variantName && /*item*/
      ctx[1].variantName !== "Default Title") && create_if_block_5$8(ctx)
    );
    let if_block5 = (
      /*item*/
      ctx[1].options_with_values && /*item*/
      ctx[1].options_with_values.length > 0 && create_if_block_3$d(ctx)
    );
    let if_block6 = (
      /*$store_configurations*/
      ((_g = (_f = (_e = ctx[9]) == null ? void 0 : _e.appearance) == null ? void 0 : _f.showItemLevelProperties) == null ? void 0 : _g.enable) && !/*upsellComponent*/
      ctx[2] && !/*freeProduct*/
      ctx[3] && create_if_block_1$p(ctx)
    );
    icon = new Icon({
      props: {
        icon: "ic:outline-open-in-new",
        height: "16px"
      }
    });
    let if_block7 = (
      /*upsellComponent*/
      ctx[2] && create_if_block$v(ctx)
    );
    return {
      c() {
        var _a2;
        div6 = element("div");
        div5 = element("div");
        div0 = element("div");
        if_block0.c();
        t0 = space();
        div4 = element("div");
        h3 = element("h3");
        t1 = text(t1_value);
        t2 = space();
        if (if_block1)
          if_block1.c();
        t3 = space();
        div1 = element("div");
        if_block2.c();
        t4 = space();
        div2 = element("div");
        if (if_block3)
          if_block3.c();
        t5 = space();
        if (if_block4)
          if_block4.c();
        t6 = space();
        if (if_block5)
          if_block5.c();
        t7 = space();
        if (if_block6)
          if_block6.c();
        t8 = space();
        div3 = element("div");
        a = element("a");
        span = element("span");
        span.textContent = "View Details";
        t10 = space();
        create_component(icon.$$.fragment);
        t11 = space();
        if (if_block7)
          if_block7.c();
        attr(div0, "class", "product-image svelte-1jyn7qx");
        attr(h3, "class", "product-title svelte-1jyn7qx");
        attr(div1, "class", "product-price svelte-1jyn7qx");
        attr(div2, "class", "variant-list svelte-1jyn7qx");
        attr(span, "class", "svelte-1jyn7qx");
        attr(a, "class", "view-details-btn svelte-1jyn7qx");
        attr(a, "href", a_href_value = /*item*/
        (_a2 = ctx[1]) == null ? void 0 : _a2.url);
        attr(
          a,
          "style",
          /*getStyleObject*/
          ctx[8](
            /*stylingConfig*/
            ctx[11]
          )
        );
        attr(div3, "class", "view-details-section svelte-1jyn7qx");
        attr(div4, "class", "product-details");
        attr(div5, "class", "product-popup-content svelte-1jyn7qx");
        attr(div6, "class", "product-popup svelte-1jyn7qx");
      },
      m(target, anchor) {
        insert(target, div6, anchor);
        append(div6, div5);
        append(div5, div0);
        if_blocks[current_block_type_index].m(div0, null);
        append(div5, t0);
        append(div5, div4);
        append(div4, h3);
        append(h3, t1);
        append(div4, t2);
        if (if_block1)
          if_block1.m(div4, null);
        append(div4, t3);
        append(div4, div1);
        if_blocks_1[current_block_type_index_1].m(div1, null);
        append(div4, t4);
        append(div4, div2);
        if (if_block3)
          if_block3.m(div2, null);
        append(div4, t5);
        if (if_block4)
          if_block4.m(div4, null);
        append(div4, t6);
        if (if_block5)
          if_block5.m(div4, null);
        append(div4, t7);
        if (if_block6)
          if_block6.m(div4, null);
        append(div4, t8);
        append(div4, div3);
        append(div3, a);
        append(a, span);
        append(a, t10);
        mount_component(icon, a, null);
        append(div4, t11);
        if (if_block7)
          if_block7.m(div4, null);
        current = true;
      },
      p(ctx2, [dirty]) {
        var _a2, _b2, _c2, _d2, _e2, _f2, _g2, _h;
        let previous_block_index = current_block_type_index;
        current_block_type_index = select_block_type(ctx2);
        if (current_block_type_index === previous_block_index) {
          if_blocks[current_block_type_index].p(ctx2, dirty);
        } else {
          group_outros();
          transition_out(if_blocks[previous_block_index], 1, 1, () => {
            if_blocks[previous_block_index] = null;
          });
          check_outros();
          if_block0 = if_blocks[current_block_type_index];
          if (!if_block0) {
            if_block0 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
            if_block0.c();
          } else {
            if_block0.p(ctx2, dirty);
          }
          transition_in(if_block0, 1);
          if_block0.m(div0, null);
        }
        if ((!current || dirty & /*item*/
        2) && t1_value !== (t1_value = /*item*/
        (((_a2 = ctx2[1]) == null ? void 0 : _a2.title) || /*item*/
        ((_b2 = ctx2[1]) == null ? void 0 : _b2.product_title)) + ""))
          set_data(t1, t1_value);
        if (
          /*itemData*/
          ((_c2 = ctx2[5]) == null ? void 0 : _c2.description) || /*item*/
          ((_d2 = ctx2[1]) == null ? void 0 : _d2.product_description)
        ) {
          if (if_block1) {
            if_block1.p(ctx2, dirty);
          } else {
            if_block1 = create_if_block_10$4(ctx2);
            if_block1.c();
            if_block1.m(div4, t3);
          }
        } else if (if_block1) {
          if_block1.d(1);
          if_block1 = null;
        }
        let previous_block_index_1 = current_block_type_index_1;
        current_block_type_index_1 = select_block_type_1(ctx2);
        if (current_block_type_index_1 === previous_block_index_1) {
          if_blocks_1[current_block_type_index_1].p(ctx2, dirty);
        } else {
          group_outros();
          transition_out(if_blocks_1[previous_block_index_1], 1, 1, () => {
            if_blocks_1[previous_block_index_1] = null;
          });
          check_outros();
          if_block2 = if_blocks_1[current_block_type_index_1];
          if (!if_block2) {
            if_block2 = if_blocks_1[current_block_type_index_1] = if_block_creators_1[current_block_type_index_1](ctx2);
            if_block2.c();
          } else {
            if_block2.p(ctx2, dirty);
          }
          transition_in(if_block2, 1);
          if_block2.m(div1, null);
        }
        if (
          /*itemData*/
          ctx2[5] && !/*upsellComponent*/
          ctx2[2]
        ) {
          if (if_block3) {
            if_block3.p(ctx2, dirty);
          } else {
            if_block3 = create_if_block_6$7(ctx2);
            if_block3.c();
            if_block3.m(div2, null);
          }
        } else if (if_block3) {
          if_block3.d(1);
          if_block3 = null;
        }
        if (
          /*item*/
          ctx2[1].variant_title && /*item*/
          ctx2[1].variant_title !== "Default Title" || /*item*/
          ctx2[1].variantName && /*item*/
          ctx2[1].variantName !== "Default Title"
        ) {
          if (if_block4) {
            if_block4.p(ctx2, dirty);
          } else {
            if_block4 = create_if_block_5$8(ctx2);
            if_block4.c();
            if_block4.m(div4, t6);
          }
        } else if (if_block4) {
          if_block4.d(1);
          if_block4 = null;
        }
        if (
          /*item*/
          ctx2[1].options_with_values && /*item*/
          ctx2[1].options_with_values.length > 0
        ) {
          if (if_block5) {
            if_block5.p(ctx2, dirty);
          } else {
            if_block5 = create_if_block_3$d(ctx2);
            if_block5.c();
            if_block5.m(div4, t7);
          }
        } else if (if_block5) {
          if_block5.d(1);
          if_block5 = null;
        }
        if (
          /*$store_configurations*/
          ((_g2 = (_f2 = (_e2 = ctx2[9]) == null ? void 0 : _e2.appearance) == null ? void 0 : _f2.showItemLevelProperties) == null ? void 0 : _g2.enable) && !/*upsellComponent*/
          ctx2[2] && !/*freeProduct*/
          ctx2[3]
        ) {
          if (if_block6) {
            if_block6.p(ctx2, dirty);
          } else {
            if_block6 = create_if_block_1$p(ctx2);
            if_block6.c();
            if_block6.m(div4, t8);
          }
        } else if (if_block6) {
          if_block6.d(1);
          if_block6 = null;
        }
        if (!current || dirty & /*item*/
        2 && a_href_value !== (a_href_value = /*item*/
        (_h = ctx2[1]) == null ? void 0 : _h.url)) {
          attr(a, "href", a_href_value);
        }
        if (
          /*upsellComponent*/
          ctx2[2]
        ) {
          if (if_block7) {
            if_block7.p(ctx2, dirty);
          } else {
            if_block7 = create_if_block$v(ctx2);
            if_block7.c();
            if_block7.m(div4, null);
          }
        } else if (if_block7) {
          if_block7.d(1);
          if_block7 = null;
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block0);
        transition_in(if_block2);
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(if_block0);
        transition_out(if_block2);
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div6);
        }
        if_blocks[current_block_type_index].d();
        if (if_block1)
          if_block1.d();
        if_blocks_1[current_block_type_index_1].d();
        if (if_block3)
          if_block3.d();
        if (if_block4)
          if_block4.d();
        if (if_block5)
          if_block5.d();
        if (if_block6)
          if_block6.d();
        destroy_component(icon);
        if (if_block7)
          if_block7.d();
      }
    };
  }
  function removeImgTags(text2) {
    return (text2 || "").replace(/<img[^>]*>/gi, "").replace(/\s+/g, " ").trim();
  }
  function instance$E($$self, $$props, $$invalidate) {
    var _a, _b;
    let $store_configurations;
    let $store_appliedManualDiscount;
    component_subscribe($$self, store_configurations, ($$value) => $$invalidate(9, $store_configurations = $$value));
    component_subscribe($$self, store_appliedManualDiscount, ($$value) => $$invalidate(10, $store_appliedManualDiscount = $$value));
    let { item } = $$props;
    let { upsellComponent = false } = $$props;
    let { freeProduct = false } = $$props;
    let { totalItemPrice = 0 } = $$props;
    let { itemData = {} } = $$props;
    let { selectedVariant = {} } = $$props;
    let { handleVariantChange } = $$props;
    let { isSelectVariantAvailable } = $$props;
    let stylingConfig = ((_b = (_a = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _a.checkoutButtons) == null ? void 0 : _b.primary) || { bgColor: "#000000", textColor: "#ffffff" };
    const getStyleObject2 = (config) => {
      let style = "";
      if (config) {
        if (config.bgColor) {
          style += `background-color: ${config.bgColor};`;
        }
        if (config.textColor) {
          style += `color: ${config.textColor};`;
        }
      }
      return style;
    };
    const addToCartClickHandler = async () => {
      try {
        const res = await addToCart({
          id: cleanShopifyIds(item == null ? void 0 : item.variantId),
          quantity: 1
        });
        if (res) {
          store_snackbar.set({
            show: true,
            message: "Product added to cart successfully",
            error: false,
            success: true,
            timer: 2e3
          });
        } else {
          store_snackbar.set({
            show: true,
            message: "Error adding product to cart",
            error: true,
            timer: 2e3
          });
        }
      } catch (error) {
        store_snackbar.set({
          show: true,
          message: "Error adding product to cart",
          error: true,
          timer: 2e3
        });
      }
    };
    function click_handler2(event) {
      bubble.call(this, $$self, event);
    }
    function select_change_handler(option) {
      selectedVariant[`option${option.position}`] = select_value(this);
      $$invalidate(0, selectedVariant);
      $$invalidate(5, itemData);
    }
    const change_handler = (option, event) => {
      handleVariantChange(event, option);
    };
    $$self.$$set = ($$props2) => {
      if ("item" in $$props2)
        $$invalidate(1, item = $$props2.item);
      if ("upsellComponent" in $$props2)
        $$invalidate(2, upsellComponent = $$props2.upsellComponent);
      if ("freeProduct" in $$props2)
        $$invalidate(3, freeProduct = $$props2.freeProduct);
      if ("totalItemPrice" in $$props2)
        $$invalidate(4, totalItemPrice = $$props2.totalItemPrice);
      if ("itemData" in $$props2)
        $$invalidate(5, itemData = $$props2.itemData);
      if ("selectedVariant" in $$props2)
        $$invalidate(0, selectedVariant = $$props2.selectedVariant);
      if ("handleVariantChange" in $$props2)
        $$invalidate(6, handleVariantChange = $$props2.handleVariantChange);
      if ("isSelectVariantAvailable" in $$props2)
        $$invalidate(7, isSelectVariantAvailable = $$props2.isSelectVariantAvailable);
    };
    return [
      selectedVariant,
      item,
      upsellComponent,
      freeProduct,
      totalItemPrice,
      itemData,
      handleVariantChange,
      isSelectVariantAvailable,
      getStyleObject2,
      $store_configurations,
      $store_appliedManualDiscount,
      stylingConfig,
      addToCartClickHandler,
      click_handler2,
      select_change_handler,
      change_handler
    ];
  }
  class ProductPopUp extends SvelteComponent {
    constructor(options) {
      super();
      init(
        this,
        options,
        instance$E,
        create_fragment$E,
        safe_not_equal,
        {
          item: 1,
          upsellComponent: 2,
          freeProduct: 3,
          totalItemPrice: 4,
          itemData: 5,
          selectedVariant: 0,
          handleVariantChange: 6,
          isSelectVariantAvailable: 7,
          getStyleObject: 8
        },
        add_css$A
      );
    }
    get getStyleObject() {
      return this.$$.ctx[8];
    }
  }
  function add_css$z(target) {
    append_styles(target, "svelte-19q75fe", ".clickable.svelte-19q75fe.svelte-19q75fe{cursor:pointer}.product-title-button.svelte-19q75fe.svelte-19q75fe{background:none;border:none;color:inherit;font:inherit;text-align:left;cursor:pointer;padding:0;text-decoration:none;transition:color 0.2s ease;max-width:70%}.upsell.svelte-19q75fe .product-main-content.svelte-19q75fe{max-width:100%}.upsell.svelte-19q75fe .details.svelte-19q75fe{gap:10px}.upsell.svelte-19q75fe .add-to-cart.svelte-19q75fe{padding:10px 20px;border-radius:8px;background:none;border:1px solid var(--gokwik-primary-color);cursor:pointer;white-space:nowrap}.upsell.svelte-19q75fe .out-of-stock.svelte-19q75fe{opacity:0.3}.upsell.svelte-19q75fe .item-price.svelte-19q75fe{justify-content:space-between;flex-direction:column;display:flex}.img.svelte-19q75fe.svelte-19q75fe{height:95px}.img.svelte-19q75fe img.svelte-19q75fe{width:80px;min-width:80px;height:95px;object-fit:contain;border-radius:12px;max-width:max-content}.item.svelte-19q75fe.svelte-19q75fe{display:flex;padding:10px;font-size:14px;justify-content:space-between;position:relative;border-bottom:1px solid var(--Gray-Neutral-200, #e5e7eb);min-height:120px;max-height:200px;overflow:hidden}.item.svelte-19q75fe .details.svelte-19q75fe{padding:0px 10px;display:flex;flex-direction:column;width:70%}.item.svelte-19q75fe .details .sidecart-product-title.svelte-19q75fe{line-height:1.2;margin-bottom:2px}.item.svelte-19q75fe .product-main-content.svelte-19q75fe{display:flex;max-width:100%;min-width:0;flex:1;overflow:hidden}.item.svelte-19q75fe .item-price.svelte-19q75fe{font-weight:600;text-align:right;flex-basis:0}.item.svelte-19q75fe .item-price strike.svelte-19q75fe{color:var(--Gray-Neutral-300, #d2d6db);font-weight:500}.item.svelte-19q75fe .item-price .compare-at-price.svelte-19q75fe{white-space:nowrap}.item.svelte-19q75fe .item-price .final-price.svelte-19q75fe{white-space:nowrap}.item.svelte-19q75fe .item-price .discount-percentage.svelte-19q75fe{color:#16a34a;font-weight:500;display:block}.item.svelte-19q75fe .variant-list.svelte-19q75fe{margin-top:5px;display:flex;gap:5px;flex-wrap:wrap}.item.svelte-19q75fe .variant-selector.svelte-19q75fe{max-width:100px}.item.svelte-19q75fe .variant-selector select.svelte-19q75fe{width:100%;padding:6px 8px 6px 8px;border-radius:8px;background:var(--Gray-Neutral-100, #f3f4f6);font-size:10px;font-weight:500;margin-right:5px;cursor:pointer;pointer-events:auto;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.item.svelte-19q75fe .variant-selector select.svelte-19q75fe:focus{outline:none;border-color:#007bff;box-shadow:0 0 0 2px rgba(0, 123, 255, 0.25)}.item.svelte-19q75fe .variant-list-element.svelte-19q75fe{padding:6px 8px 6px 8px;border-radius:8px;background:var(--Gray-Neutral-100, #f3f4f6);font-size:10px;font-weight:500;margin-right:5px}.item.svelte-19q75fe .item-properties-list.svelte-19q75fe{margin-top:3px;width:100%}.item.svelte-19q75fe .item-properties-list .item-properties-list-element.svelte-19q75fe{display:flex;align-items:center;margin-top:5px;width:100%}.item.svelte-19q75fe .item-properties-list .item-properties-list-element .item-properties-list-element-key p.svelte-19q75fe,.item.svelte-19q75fe .item-properties-list .item-properties-list-element .item-properties-list-element-value p.svelte-19q75fe{font-size:10px;text-align:left;width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.item.svelte-19q75fe .item-properties-list .item-properties-list-element .item-properties-list-element-key.svelte-19q75fe{width:30%}.item.svelte-19q75fe .item-properties-list .item-properties-list-element .item-properties-list-element-key p.svelte-19q75fe{color:black;font-weight:600}.item.svelte-19q75fe .item-properties-list .item-properties-list-element .item-properties-list-element-value.svelte-19q75fe{width:60%}.item.svelte-19q75fe .item-properties-list .item-properties-list-element .item-properties-list-element-value p.svelte-19q75fe{color:var(--Gray-Neutral-600, #6b7280);font-weight:500}.item.svelte-19q75fe .item-properties-list .item-properties-list-element .separator.svelte-19q75fe{width:10%;text-align:center;font-size:10px;font-weight:500;color:var(--Gray-Neutral-600, #6b7280)}.item.svelte-19q75fe .quantity-handler-wrapper.svelte-19q75fe{display:flex;margin-top:10px;margin-bottom:10px;gap:10px;align-items:center;margin-left:auto;justify-content:flex-end}.item.svelte-19q75fe .remove-btn.svelte-19q75fe{color:var(--gokwik-primary-color);font-weight:600;cursor:pointer;font-size:12px}.item.svelte-19q75fe .remove-freebie-btn.svelte-19q75fe{margin-top:8px}.item.svelte-19q75fe .quantity-handler.svelte-19q75fe{background:var(--Gray-Neutral-100, #f3f4f6);border:1px solid var(--Gray-Neutral-200, #e5e7eb);border-radius:10px;font-weight:600;padding:5px 10px;white-space:nowrap;font-size:13px;width:fit-content}.item.svelte-19q75fe .quantity-handler span.svelte-19q75fe,.item.svelte-19q75fe .quantity-handler input.item-quantity.svelte-19q75fe{border-right:1px solid var(--Gray-Neutral-200, #e5e7eb);border-left:1px solid var(--Gray-Neutral-200, #e5e7eb);padding:0px 5px}.item.svelte-19q75fe .quantity-handler span.svelte-19q75fe:first-child{border-left:0px;padding-left:0px}.item.svelte-19q75fe .quantity-handler span.svelte-19q75fe:last-child{border-right:0px;padding-right:0px}.item.svelte-19q75fe .quantity-handler .reduce-quantity.svelte-19q75fe,.item.svelte-19q75fe .quantity-handler .increase-quantity.svelte-19q75fe{cursor:pointer}.item.svelte-19q75fe .quantity-handler input.item-quantity.svelte-19q75fe{border:none;background:transparent;font-weight:600;font-size:13px;text-align:center;width:30px;padding:0px 5px;-moz-appearance:textfield;appearance:textfield}.item.svelte-19q75fe .quantity-handler input.item-quantity.svelte-19q75fe::-webkit-outer-spin-button,.item.svelte-19q75fe .quantity-handler input.item-quantity.svelte-19q75fe::-webkit-inner-spin-button{-webkit-appearance:none;appearance:none;margin:0}.item.svelte-19q75fe .quantity-handler input.item-quantity.svelte-19q75fe:focus{outline:none}@media(max-width: 768px){.item.svelte-19q75fe .quantity-handler.svelte-19q75fe{display:flex;align-items:center}.item.svelte-19q75fe .quantity-handler input.item-quantity.svelte-19q75fe{font-size:16px;width:32px;height:22px}.item.svelte-19q75fe .reduce-quantity.svelte-19q75fe,.item.svelte-19q75fe .increase-quantity.svelte-19q75fe{padding:4px 8px;min-width:24px;min-height:24px;display:flex;align-items:center;justify-content:center}}.item.svelte-19q75fe.svelte-19q75fe:last-child{border-bottom:0px}.coupon-applied-area.svelte-19q75fe.svelte-19q75fe{font-size:11px;display:flex;align-items:center;background-color:rgba(6, 135, 67, 0.1);color:rgb(6, 135, 67);border-radius:5px;padding:2px 5px;max-width:120px;width:max-content;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;margin-top:10px;margin-left:auto}.coupon-applied-area.svelte-19q75fe .icon.svelte-19q75fe{height:12px;width:12px;margin-right:2px;line-height:normal}.coupon-applied-area.svelte-19q75fe span.svelte-19q75fe{max-width:90px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.hidden-vis.svelte-19q75fe.svelte-19q75fe{visibility:hidden}.trimmed-image.svelte-19q75fe.svelte-19q75fe{height:80px !important}.discount-banner.svelte-19q75fe.svelte-19q75fe{background:var(--Teal-500, #15b79e);font-size:11px;font-weight:bold;border-radius:5px;text-align:center;padding:2px 0}.free-text.svelte-19q75fe.svelte-19q75fe{font-weight:bold;color:#1a9e4c}");
  }
  function get_each_context$b(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[42] = list[i];
    return child_ctx;
  }
  function get_each_context_3$1(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[51] = list[i];
    return child_ctx;
  }
  function get_each_context_1$3(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[45] = list[i];
    child_ctx[46] = list;
    child_ctx[47] = i;
    return child_ctx;
  }
  function get_each_context_2$1(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[48] = list[i];
    return child_ctx;
  }
  function create_if_block$u(ctx) {
    var _a, _b, _c, _d, _e, _f, _g;
    let div4;
    let div2;
    let div0;
    let img;
    let img_src_value;
    let t0;
    let t1;
    let div1;
    let current_block_type_index;
    let if_block1;
    let t2;
    let show_if = (
      /*showVariant*/
      (ctx[7] || /*upsellComponent*/
      ctx[1]) && !/*defaultTitlePresent*/
      ctx[23]() && !/*freeProduct*/
      ctx[2] && !/*item*/
      ((_b = (_a = ctx[0]) == null ? void 0 : _a.properties) == null ? void 0 : _b["_gokwik_freebie"])
    );
    let t3;
    let div1_class_value;
    let t4;
    let div3;
    let current_block_type_index_1;
    let if_block4;
    let t5;
    let previous_key = (
      /*$store_variantAvailabilityMap*/
      ctx[13]
    );
    let div4_class_value;
    let current;
    let mounted;
    let dispose;
    let if_block0 = (
      /*upsellComponent*/
      ctx[1] && (+/*item*/
      ctx[0].compareAtPrice || 0) > (+/*item*/
      ctx[0].price || 0) && create_if_block_19$1(ctx)
    );
    const if_block_creators = [create_if_block_18$1, create_else_block_2$1];
    const if_blocks = [];
    function select_block_type(ctx2, dirty) {
      if (
        /*upsellComponent*/
        ctx2[1]
      )
        return 0;
      return 1;
    }
    current_block_type_index = select_block_type(ctx);
    if_block1 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
    let if_block2 = show_if && create_if_block_15$1(ctx);
    let if_block3 = (
      /*$store_configurations*/
      ((_e = (_d = (_c = ctx[11]) == null ? void 0 : _c.appearance) == null ? void 0 : _d.showItemLevelProperties) == null ? void 0 : _e.enable) && !/*upsellComponent*/
      ctx[1] && !/*freeProduct*/
      ctx[2] && !/*item*/
      ((_g = (_f = ctx[0]) == null ? void 0 : _f.properties) == null ? void 0 : _g["_gokwik_freebie"]) && create_if_block_13$1(ctx)
    );
    const if_block_creators_1 = [create_if_block_5$7, create_if_block_9$3, create_if_block_11$1, create_else_block_1$3];
    const if_blocks_1 = [];
    function select_block_type_2(ctx2, dirty) {
      var _a2, _b2, _c2, _d2, _e2;
      if (
        /*freeProduct*/
        (ctx2[2] || /*totalItemPrice*/
        ctx2[4] > /*item*/
        ctx2[0].original_line_price || /*item*/
        ctx2[0].original_line_price > /*item*/
        ctx2[0].line_price || /*freeQuantities*/
        ((_a2 = ctx2[6]) == null ? void 0 : _a2.totalFreeQuantity) > 0) && !/*item*/
        ((_c2 = (_b2 = ctx2[0]) == null ? void 0 : _b2.properties) == null ? void 0 : _c2["_gokwik_freebie"])
      )
        return 0;
      if (
        /*item*/
        (_e2 = (_d2 = ctx2[0]) == null ? void 0 : _d2.properties) == null ? void 0 : _e2["_gokwik_freebie"]
      )
        return 1;
      if (
        /*upsellComponent*/
        ctx2[1]
      )
        return 2;
      return 3;
    }
    current_block_type_index_1 = select_block_type_2(ctx);
    if_block4 = if_blocks_1[current_block_type_index_1] = if_block_creators_1[current_block_type_index_1](ctx);
    let key_block = create_key_block_1(ctx);
    return {
      c() {
        div4 = element("div");
        div2 = element("div");
        div0 = element("div");
        img = element("img");
        t0 = space();
        if (if_block0)
          if_block0.c();
        t1 = space();
        div1 = element("div");
        if_block1.c();
        t2 = space();
        if (if_block2)
          if_block2.c();
        t3 = space();
        if (if_block3)
          if_block3.c();
        t4 = space();
        div3 = element("div");
        if_block4.c();
        t5 = space();
        key_block.c();
        if (!src_url_equal(img.src, img_src_value = /*item*/
        ctx[0].image))
          attr(img, "src", img_src_value);
        attr(img, "class", "svelte-19q75fe");
        toggle_class(
          img,
          "trimmed-image",
          /*upsellComponent*/
          ctx[1]
        );
        attr(div0, "class", "img svelte-19q75fe");
        toggle_class(div0, "clickable", !/*isProductNotClickable*/
        ctx[22]);
        attr(div1, "class", div1_class_value = "details " + /*showVariant*/
        (ctx[7] && "space-between") + " svelte-19q75fe");
        attr(div2, "class", "product-main-content svelte-19q75fe");
        attr(div3, "class", "item-price svelte-19q75fe");
        attr(div4, "class", div4_class_value = "item " + /*upsellComponent*/
        (ctx[1] && "upsell") + " " + /*freeProduct*/
        ((ctx[2] || !/*item*/
        ctx[0].final_line_price) && "free-product") + " svelte-19q75fe");
      },
      m(target, anchor) {
        insert(target, div4, anchor);
        append(div4, div2);
        append(div2, div0);
        append(div0, img);
        append(div0, t0);
        if (if_block0)
          if_block0.m(div0, null);
        append(div2, t1);
        append(div2, div1);
        if_blocks[current_block_type_index].m(div1, null);
        append(div1, t2);
        if (if_block2)
          if_block2.m(div1, null);
        append(div1, t3);
        if (if_block3)
          if_block3.m(div1, null);
        append(div4, t4);
        append(div4, div3);
        if_blocks_1[current_block_type_index_1].m(div3, null);
        append(div3, t5);
        key_block.m(div3, null);
        current = true;
        if (!mounted) {
          dispose = listen(div0, "click", stop_propagation(
            /*handleProductTitleClick*/
            ctx[21]
          ));
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c2, _d2, _e2, _f2, _g2;
        if (!current || dirty[0] & /*item*/
        1 && !src_url_equal(img.src, img_src_value = /*item*/
        ctx2[0].image)) {
          attr(img, "src", img_src_value);
        }
        if (!current || dirty[0] & /*upsellComponent*/
        2) {
          toggle_class(
            img,
            "trimmed-image",
            /*upsellComponent*/
            ctx2[1]
          );
        }
        if (
          /*upsellComponent*/
          ctx2[1] && (+/*item*/
          ctx2[0].compareAtPrice || 0) > (+/*item*/
          ctx2[0].price || 0)
        ) {
          if (if_block0) {
            if_block0.p(ctx2, dirty);
          } else {
            if_block0 = create_if_block_19$1(ctx2);
            if_block0.c();
            if_block0.m(div0, null);
          }
        } else if (if_block0) {
          if_block0.d(1);
          if_block0 = null;
        }
        let previous_block_index = current_block_type_index;
        current_block_type_index = select_block_type(ctx2);
        if (current_block_type_index === previous_block_index) {
          if_blocks[current_block_type_index].p(ctx2, dirty);
        } else {
          group_outros();
          transition_out(if_blocks[previous_block_index], 1, 1, () => {
            if_blocks[previous_block_index] = null;
          });
          check_outros();
          if_block1 = if_blocks[current_block_type_index];
          if (!if_block1) {
            if_block1 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
            if_block1.c();
          } else {
            if_block1.p(ctx2, dirty);
          }
          transition_in(if_block1, 1);
          if_block1.m(div1, t2);
        }
        if (dirty[0] & /*showVariant, upsellComponent, freeProduct, item*/
        135)
          show_if = /*showVariant*/
          (ctx2[7] || /*upsellComponent*/
          ctx2[1]) && !/*defaultTitlePresent*/
          ctx2[23]() && !/*freeProduct*/
          ctx2[2] && !/*item*/
          ((_b2 = (_a2 = ctx2[0]) == null ? void 0 : _a2.properties) == null ? void 0 : _b2["_gokwik_freebie"]);
        if (show_if) {
          if (if_block2) {
            if_block2.p(ctx2, dirty);
          } else {
            if_block2 = create_if_block_15$1(ctx2);
            if_block2.c();
            if_block2.m(div1, t3);
          }
        } else if (if_block2) {
          if_block2.d(1);
          if_block2 = null;
        }
        if (
          /*$store_configurations*/
          ((_e2 = (_d2 = (_c2 = ctx2[11]) == null ? void 0 : _c2.appearance) == null ? void 0 : _d2.showItemLevelProperties) == null ? void 0 : _e2.enable) && !/*upsellComponent*/
          ctx2[1] && !/*freeProduct*/
          ctx2[2] && !/*item*/
          ((_g2 = (_f2 = ctx2[0]) == null ? void 0 : _f2.properties) == null ? void 0 : _g2["_gokwik_freebie"])
        ) {
          if (if_block3) {
            if_block3.p(ctx2, dirty);
            if (dirty[0] & /*$store_configurations, upsellComponent, freeProduct, item*/
            2055) {
              transition_in(if_block3, 1);
            }
          } else {
            if_block3 = create_if_block_13$1(ctx2);
            if_block3.c();
            transition_in(if_block3, 1);
            if_block3.m(div1, null);
          }
        } else if (if_block3) {
          group_outros();
          transition_out(if_block3, 1, 1, () => {
            if_block3 = null;
          });
          check_outros();
        }
        if (!current || dirty[0] & /*showVariant*/
        128 && div1_class_value !== (div1_class_value = "details " + /*showVariant*/
        (ctx2[7] && "space-between") + " svelte-19q75fe")) {
          attr(div1, "class", div1_class_value);
        }
        let previous_block_index_1 = current_block_type_index_1;
        current_block_type_index_1 = select_block_type_2(ctx2);
        if (current_block_type_index_1 === previous_block_index_1) {
          if_blocks_1[current_block_type_index_1].p(ctx2, dirty);
        } else {
          group_outros();
          transition_out(if_blocks_1[previous_block_index_1], 1, 1, () => {
            if_blocks_1[previous_block_index_1] = null;
          });
          check_outros();
          if_block4 = if_blocks_1[current_block_type_index_1];
          if (!if_block4) {
            if_block4 = if_blocks_1[current_block_type_index_1] = if_block_creators_1[current_block_type_index_1](ctx2);
            if_block4.c();
          } else {
            if_block4.p(ctx2, dirty);
          }
          transition_in(if_block4, 1);
          if_block4.m(div3, t5);
        }
        if (dirty[0] & /*$store_variantAvailabilityMap*/
        8192 && safe_not_equal(previous_key, previous_key = /*$store_variantAvailabilityMap*/
        ctx2[13])) {
          group_outros();
          transition_out(key_block, 1, 1, noop);
          check_outros();
          key_block = create_key_block_1(ctx2);
          key_block.c();
          transition_in(key_block, 1);
          key_block.m(div3, null);
        } else {
          key_block.p(ctx2, dirty);
        }
        if (!current || dirty[0] & /*upsellComponent, freeProduct, item*/
        7 && div4_class_value !== (div4_class_value = "item " + /*upsellComponent*/
        (ctx2[1] && "upsell") + " " + /*freeProduct*/
        ((ctx2[2] || !/*item*/
        ctx2[0].final_line_price) && "free-product") + " svelte-19q75fe")) {
          attr(div4, "class", div4_class_value);
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block1);
        transition_in(if_block3);
        transition_in(if_block4);
        transition_in(key_block);
        current = true;
      },
      o(local) {
        transition_out(if_block1);
        transition_out(if_block3);
        transition_out(if_block4);
        transition_out(key_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div4);
        }
        if (if_block0)
          if_block0.d();
        if_blocks[current_block_type_index].d();
        if (if_block2)
          if_block2.d();
        if (if_block3)
          if_block3.d();
        if_blocks_1[current_block_type_index_1].d();
        key_block.d(detaching);
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block_19$1(ctx) {
    let div;
    let t0_value = (((+/*item*/
    ctx[0].compareAtPrice || 0) - (+/*item*/
    ctx[0].price || 0)) / +/*item*/
    ctx[0].compareAtPrice * 100).toFixed(0) + "";
    let t0;
    let t1;
    return {
      c() {
        div = element("div");
        t0 = text(t0_value);
        t1 = text("% off");
        attr(div, "class", "discount-banner svelte-19q75fe");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, t0);
        append(div, t1);
      },
      p(ctx2, dirty) {
        if (dirty[0] & /*item*/
        1 && t0_value !== (t0_value = (((+/*item*/
        ctx2[0].compareAtPrice || 0) - (+/*item*/
        ctx2[0].price || 0)) / +/*item*/
        ctx2[0].compareAtPrice * 100).toFixed(0) + ""))
          set_data(t0, t0_value);
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
      }
    };
  }
  function create_else_block_2$1(ctx) {
    let span;
    let t_value = (
      /*item*/
      ctx[0].product_title + ""
    );
    let t;
    let mounted;
    let dispose;
    return {
      c() {
        span = element("span");
        t = text(t_value);
        attr(span, "class", "sidecart-product-title svelte-19q75fe");
        toggle_class(span, "clickable", !/*isProductNotClickable*/
        ctx[22]);
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t);
        if (!mounted) {
          dispose = listen(span, "click", stop_propagation(
            /*handleProductTitleClick*/
            ctx[21]
          ));
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        if (dirty[0] & /*item*/
        1 && t_value !== (t_value = /*item*/
        ctx2[0].product_title + ""))
          set_data(t, t_value);
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(span);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block_18$1(ctx) {
    let tooltip;
    let current;
    tooltip = new Tooltip({
      props: {
        title: (
          /*item*/
          ctx[0].product_title
        ),
        $$slots: { default: [create_default_slot_2$1] },
        $$scope: { ctx }
      }
    });
    return {
      c() {
        create_component(tooltip.$$.fragment);
      },
      m(target, anchor) {
        mount_component(tooltip, target, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        const tooltip_changes = {};
        if (dirty[0] & /*item*/
        1)
          tooltip_changes.title = /*item*/
          ctx2[0].product_title;
        if (dirty[0] & /*item*/
        1 | dirty[1] & /*$$scope*/
        8388608) {
          tooltip_changes.$$scope = { dirty, ctx: ctx2 };
        }
        tooltip.$set(tooltip_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(tooltip.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(tooltip.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(tooltip, detaching);
      }
    };
  }
  function create_default_slot_2$1(ctx) {
    let span;
    let t_value = (
      /*item*/
      ctx[0].product_title + ""
    );
    let t;
    let mounted;
    let dispose;
    return {
      c() {
        span = element("span");
        t = text(t_value);
        attr(span, "class", "sidecart-product-title svelte-19q75fe");
        toggle_class(span, "clickable", !/*isProductNotClickable*/
        ctx[22]);
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t);
        if (!mounted) {
          dispose = listen(span, "click", stop_propagation(
            /*handleProductTitleClick*/
            ctx[21]
          ));
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        if (dirty[0] & /*item*/
        1 && t_value !== (t_value = /*item*/
        ctx2[0].product_title + ""))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block_15$1(ctx) {
    let div;
    let show_if;
    let show_if_1;
    function select_block_type_1(ctx2, dirty) {
      var _a, _b;
      if (dirty[0] & /*productData, upsellComponent*/
      258)
        show_if = null;
      if (dirty[0] & /*item*/
      1)
        show_if_1 = null;
      if (show_if == null)
        show_if = !!/*productData*/
        (ctx2[8] && !/*upsellComponent*/
        ctx2[1] && /*shouldShowVariantSelector*/
        ctx2[14] && !/*excludedDomainsForVariantSelector*/
        ctx2[15].includes(window == null ? void 0 : window.gk_cart_domain));
      if (show_if)
        return create_if_block_16$1;
      if (show_if_1 == null)
        show_if_1 = !!/*item*/
        (((_a = ctx2[0]) == null ? void 0 : _a.variant_options) && Array.isArray(
          /*item*/
          (_b = ctx2[0]) == null ? void 0 : _b.variant_options
        ));
      if (show_if_1)
        return create_if_block_17$1;
    }
    let current_block_type = select_block_type_1(ctx, [-1, -1]);
    let if_block = current_block_type && current_block_type(ctx);
    return {
      c() {
        div = element("div");
        if (if_block)
          if_block.c();
        attr(div, "class", "variant-list svelte-19q75fe");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        if (if_block)
          if_block.m(div, null);
      },
      p(ctx2, dirty) {
        if (current_block_type === (current_block_type = select_block_type_1(ctx2, dirty)) && if_block) {
          if_block.p(ctx2, dirty);
        } else {
          if (if_block)
            if_block.d(1);
          if_block = current_block_type && current_block_type(ctx2);
          if (if_block) {
            if_block.c();
            if_block.m(div, null);
          }
        }
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        if (if_block) {
          if_block.d();
        }
      }
    };
  }
  function create_if_block_17$1(ctx) {
    let each_1_anchor;
    let each_value_3 = ensure_array_like(
      /*item*/
      ctx[0].variant_options
    );
    let each_blocks = [];
    for (let i = 0; i < each_value_3.length; i += 1) {
      each_blocks[i] = create_each_block_3$1(get_each_context_3$1(ctx, each_value_3, i));
    }
    return {
      c() {
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        each_1_anchor = empty();
      },
      m(target, anchor) {
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(target, anchor);
          }
        }
        insert(target, each_1_anchor, anchor);
      },
      p(ctx2, dirty) {
        if (dirty[0] & /*item*/
        1) {
          each_value_3 = ensure_array_like(
            /*item*/
            ctx2[0].variant_options
          );
          let i;
          for (i = 0; i < each_value_3.length; i += 1) {
            const child_ctx = get_each_context_3$1(ctx2, each_value_3, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
            } else {
              each_blocks[i] = create_each_block_3$1(child_ctx);
              each_blocks[i].c();
              each_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);
            }
          }
          for (; i < each_blocks.length; i += 1) {
            each_blocks[i].d(1);
          }
          each_blocks.length = each_value_3.length;
        }
      },
      d(detaching) {
        if (detaching) {
          detach(each_1_anchor);
        }
        destroy_each(each_blocks, detaching);
      }
    };
  }
  function create_if_block_16$1(ctx) {
    let each_blocks = [];
    let each_1_lookup = /* @__PURE__ */ new Map();
    let each_1_anchor;
    let each_value_1 = ensure_array_like(
      /*productData*/
      ctx[8].options
    );
    const get_key = (ctx2) => `${/*item*/
    ctx2[0].key || /*item*/
    ctx2[0].id}-option-${/*option*/
    ctx2[45].position}`;
    for (let i = 0; i < each_value_1.length; i += 1) {
      let child_ctx = get_each_context_1$3(ctx, each_value_1, i);
      let key = get_key(child_ctx);
      each_1_lookup.set(key, each_blocks[i] = create_each_block_1$3(key, child_ctx));
    }
    return {
      c() {
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        each_1_anchor = empty();
      },
      m(target, anchor) {
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(target, anchor);
          }
        }
        insert(target, each_1_anchor, anchor);
      },
      p(ctx2, dirty) {
        if (dirty[0] & /*selectedVariant, productData, handleVariantChange, isSelectVariantAvailable, item*/
        50332417) {
          each_value_1 = ensure_array_like(
            /*productData*/
            ctx2[8].options
          );
          each_blocks = update_keyed_each(each_blocks, dirty, get_key, 1, ctx2, each_value_1, each_1_lookup, each_1_anchor.parentNode, destroy_block, create_each_block_1$3, each_1_anchor, get_each_context_1$3);
        }
      },
      d(detaching) {
        if (detaching) {
          detach(each_1_anchor);
        }
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].d(detaching);
        }
      }
    };
  }
  function create_each_block_3$1(ctx) {
    let span;
    let t_value = (
      /*variant*/
      ctx[51] + ""
    );
    let t;
    return {
      c() {
        span = element("span");
        t = text(t_value);
        attr(span, "class", "variant-list-element svelte-19q75fe");
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t);
      },
      p(ctx2, dirty) {
        if (dirty[0] & /*item*/
        1 && t_value !== (t_value = /*variant*/
        ctx2[51] + ""))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_each_block_2$1(ctx) {
    let option_1;
    let t_value = (
      /*value*/
      ctx[48] + ""
    );
    let t;
    let option_1_value_value;
    let option_1_disabled_value;
    return {
      c() {
        option_1 = element("option");
        t = text(t_value);
        option_1.__value = option_1_value_value = /*value*/
        ctx[48];
        set_input_value(option_1, option_1.__value);
        option_1.disabled = option_1_disabled_value = !/*isSelectVariantAvailable*/
        ctx[25](
          `option${/*option*/
          ctx[45].position}`,
          /*value*/
          ctx[48]
        );
      },
      m(target, anchor) {
        insert(target, option_1, anchor);
        append(option_1, t);
      },
      p(ctx2, dirty) {
        if (dirty[0] & /*productData*/
        256 && t_value !== (t_value = /*value*/
        ctx2[48] + ""))
          set_data(t, t_value);
        if (dirty[0] & /*productData*/
        256 && option_1_value_value !== (option_1_value_value = /*value*/
        ctx2[48])) {
          option_1.__value = option_1_value_value;
          set_input_value(option_1, option_1.__value);
        }
        if (dirty[0] & /*productData*/
        256 && option_1_disabled_value !== (option_1_disabled_value = !/*isSelectVariantAvailable*/
        ctx2[25](
          `option${/*option*/
          ctx2[45].position}`,
          /*value*/
          ctx2[48]
        ))) {
          option_1.disabled = option_1_disabled_value;
        }
      },
      d(detaching) {
        if (detaching) {
          detach(option_1);
        }
      }
    };
  }
  function create_each_block_1$3(key_2, ctx) {
    let span;
    let select;
    let t;
    let mounted;
    let dispose;
    let each_value_2 = ensure_array_like(
      /*option*/
      ctx[45].values
    );
    let each_blocks = [];
    for (let i = 0; i < each_value_2.length; i += 1) {
      each_blocks[i] = create_each_block_2$1(get_each_context_2$1(ctx, each_value_2, i));
    }
    function select_change_handler() {
      ctx[30].call(
        select,
        /*option*/
        ctx[45]
      );
    }
    function change_handler(...args) {
      return (
        /*change_handler*/
        ctx[31](
          /*option*/
          ctx[45],
          ...args
        )
      );
    }
    return {
      key: key_2,
      first: null,
      c() {
        span = element("span");
        select = element("select");
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        t = space();
        attr(select, "class", "svelte-19q75fe");
        if (
          /*selectedVariant*/
          ctx[9][`option${/*option*/
          ctx[45].position}`] === void 0
        )
          add_render_callback(select_change_handler);
        attr(span, "class", "variant-selector svelte-19q75fe");
        this.first = span;
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, select);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(select, null);
          }
        }
        select_option(
          select,
          /*selectedVariant*/
          ctx[9][`option${/*option*/
          ctx[45].position}`],
          true
        );
        append(span, t);
        if (!mounted) {
          dispose = [
            listen(select, "change", select_change_handler),
            listen(select, "change", change_handler),
            listen(select, "click", stop_propagation(
              /*click_handler*/
              ctx[29]
            ))
          ];
          mounted = true;
        }
      },
      p(new_ctx, dirty) {
        ctx = new_ctx;
        if (dirty[0] & /*productData, isSelectVariantAvailable*/
        33554688) {
          each_value_2 = ensure_array_like(
            /*option*/
            ctx[45].values
          );
          let i;
          for (i = 0; i < each_value_2.length; i += 1) {
            const child_ctx = get_each_context_2$1(ctx, each_value_2, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
            } else {
              each_blocks[i] = create_each_block_2$1(child_ctx);
              each_blocks[i].c();
              each_blocks[i].m(select, null);
            }
          }
          for (; i < each_blocks.length; i += 1) {
            each_blocks[i].d(1);
          }
          each_blocks.length = each_value_2.length;
        }
        if (dirty[0] & /*selectedVariant, productData*/
        768) {
          select_option(
            select,
            /*selectedVariant*/
            ctx[9][`option${/*option*/
            ctx[45].position}`]
          );
        }
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
        destroy_each(each_blocks, detaching);
        mounted = false;
        run_all(dispose);
      }
    };
  }
  function create_if_block_13$1(ctx) {
    var _a;
    let div;
    let current;
    let each_value = ensure_array_like(Object.keys(
      /*item*/
      ((_a = ctx[0]) == null ? void 0 : _a.properties) || {}
    ));
    let each_blocks = [];
    for (let i = 0; i < each_value.length; i += 1) {
      each_blocks[i] = create_each_block$b(get_each_context$b(ctx, each_value, i));
    }
    const out = (i) => transition_out(each_blocks[i], 1, 1, () => {
      each_blocks[i] = null;
    });
    return {
      c() {
        div = element("div");
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        attr(div, "class", "item-properties-list svelte-19q75fe");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(div, null);
          }
        }
        current = true;
      },
      p(ctx2, dirty) {
        var _a2;
        if (dirty[0] & /*item*/
        1) {
          each_value = ensure_array_like(Object.keys(
            /*item*/
            ((_a2 = ctx2[0]) == null ? void 0 : _a2.properties) || {}
          ));
          let i;
          for (i = 0; i < each_value.length; i += 1) {
            const child_ctx = get_each_context$b(ctx2, each_value, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
              transition_in(each_blocks[i], 1);
            } else {
              each_blocks[i] = create_each_block$b(child_ctx);
              each_blocks[i].c();
              transition_in(each_blocks[i], 1);
              each_blocks[i].m(div, null);
            }
          }
          group_outros();
          for (i = each_value.length; i < each_blocks.length; i += 1) {
            out(i);
          }
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        for (let i = 0; i < each_value.length; i += 1) {
          transition_in(each_blocks[i]);
        }
        current = true;
      },
      o(local) {
        each_blocks = each_blocks.filter(Boolean);
        for (let i = 0; i < each_blocks.length; i += 1) {
          transition_out(each_blocks[i]);
        }
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_each(each_blocks, detaching);
      }
    };
  }
  function create_if_block_14$1(ctx) {
    let div3;
    let div0;
    let tooltip0;
    let t0;
    let div1;
    let t2;
    let div2;
    let tooltip1;
    let t3;
    let div3_data_item_property_value;
    let current;
    tooltip0 = new Tooltip({
      props: {
        title: (
          /*key*/
          ctx[42]
        ),
        $$slots: { default: [create_default_slot_1$1] },
        $$scope: { ctx }
      }
    });
    tooltip1 = new Tooltip({
      props: {
        title: (
          /*item*/
          ctx[0].properties[
            /*key*/
            ctx[42]
          ]
        ),
        $$slots: { default: [create_default_slot$6] },
        $$scope: { ctx }
      }
    });
    return {
      c() {
        div3 = element("div");
        div0 = element("div");
        create_component(tooltip0.$$.fragment);
        t0 = space();
        div1 = element("div");
        div1.textContent = ":";
        t2 = space();
        div2 = element("div");
        create_component(tooltip1.$$.fragment);
        t3 = space();
        attr(div0, "class", "item-properties-list-element-key svelte-19q75fe");
        attr(div1, "class", "separator svelte-19q75fe");
        attr(div2, "class", "item-properties-list-element-value svelte-19q75fe");
        attr(div3, "class", "item-properties-list-element svelte-19q75fe");
        attr(div3, "data-item-property", div3_data_item_property_value = /*key*/
        ctx[42]);
      },
      m(target, anchor) {
        insert(target, div3, anchor);
        append(div3, div0);
        mount_component(tooltip0, div0, null);
        append(div3, t0);
        append(div3, div1);
        append(div3, t2);
        append(div3, div2);
        mount_component(tooltip1, div2, null);
        append(div3, t3);
        current = true;
      },
      p(ctx2, dirty) {
        const tooltip0_changes = {};
        if (dirty[0] & /*item*/
        1)
          tooltip0_changes.title = /*key*/
          ctx2[42];
        if (dirty[0] & /*item*/
        1 | dirty[1] & /*$$scope*/
        8388608) {
          tooltip0_changes.$$scope = { dirty, ctx: ctx2 };
        }
        tooltip0.$set(tooltip0_changes);
        const tooltip1_changes = {};
        if (dirty[0] & /*item*/
        1)
          tooltip1_changes.title = /*item*/
          ctx2[0].properties[
            /*key*/
            ctx2[42]
          ];
        if (dirty[0] & /*item*/
        1 | dirty[1] & /*$$scope*/
        8388608) {
          tooltip1_changes.$$scope = { dirty, ctx: ctx2 };
        }
        tooltip1.$set(tooltip1_changes);
        if (!current || dirty[0] & /*item*/
        1 && div3_data_item_property_value !== (div3_data_item_property_value = /*key*/
        ctx2[42])) {
          attr(div3, "data-item-property", div3_data_item_property_value);
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(tooltip0.$$.fragment, local);
        transition_in(tooltip1.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(tooltip0.$$.fragment, local);
        transition_out(tooltip1.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div3);
        }
        destroy_component(tooltip0);
        destroy_component(tooltip1);
      }
    };
  }
  function create_default_slot_1$1(ctx) {
    let p;
    let t_value = (
      /*key*/
      ctx[42] + ""
    );
    let t;
    return {
      c() {
        p = element("p");
        t = text(t_value);
        attr(p, "class", "item-properties-list-element-key-text svelte-19q75fe");
      },
      m(target, anchor) {
        insert(target, p, anchor);
        append(p, t);
      },
      p(ctx2, dirty) {
        if (dirty[0] & /*item*/
        1 && t_value !== (t_value = /*key*/
        ctx2[42] + ""))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(p);
        }
      }
    };
  }
  function create_default_slot$6(ctx) {
    let p;
    let t_value = (
      /*item*/
      ctx[0].properties[
        /*key*/
        ctx[42]
      ] + ""
    );
    let t;
    return {
      c() {
        p = element("p");
        t = text(t_value);
        attr(p, "class", "item-properties-list-element-value-text svelte-19q75fe");
      },
      m(target, anchor) {
        insert(target, p, anchor);
        append(p, t);
      },
      p(ctx2, dirty) {
        if (dirty[0] & /*item*/
        1 && t_value !== (t_value = /*item*/
        ctx2[0].properties[
          /*key*/
          ctx2[42]
        ] + ""))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(p);
        }
      }
    };
  }
  function create_each_block$b(ctx) {
    let if_block_anchor;
    let current;
    let if_block = (
      /*key*/
      ctx[42] !== "_gokwik_upsell" && create_if_block_14$1(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        if (
          /*key*/
          ctx2[42] !== "_gokwik_upsell"
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
            if (dirty[0] & /*item*/
            1) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block_14$1(ctx2);
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function create_else_block_1$3(ctx) {
    let span;
    let t_value = formatCurrencyDisplay(
      /*totalItemPrice*/
      (ctx[4] / 100).toFixed(2)
    ) + "";
    let t;
    return {
      c() {
        span = element("span");
        t = text(t_value);
        attr(span, "class", "svelte-19q75fe");
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t);
      },
      p(ctx2, dirty) {
        if (dirty[0] & /*totalItemPrice*/
        16 && t_value !== (t_value = formatCurrencyDisplay(
          /*totalItemPrice*/
          (ctx2[4] / 100).toFixed(2)
        ) + ""))
          set_data(t, t_value);
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_if_block_11$1(ctx) {
    let strike;
    let t0_value = formatCurrencyDisplay((+/*item*/
    ctx[0].compareAtPrice).toFixed(2)) + "";
    let t0;
    let t1;
    let span;
    let t2_value = formatCurrencyDisplay((+/*item*/
    ctx[0].price).toFixed(2)) + "";
    let t2;
    let t3;
    let show_if = getPercentage(+/*item*/
    ctx[0].compareAtPrice, +/*item*/
    ctx[0].price) > 0;
    let if_block_anchor;
    let if_block = show_if && create_if_block_12$1(ctx);
    return {
      c() {
        var _a, _b;
        strike = element("strike");
        t0 = text(t0_value);
        t1 = space();
        span = element("span");
        t2 = text(t2_value);
        t3 = space();
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
        attr(strike, "class", "compare-at-price svelte-19q75fe");
        toggle_class(strike, "hidden-vis", (+/*item*/
        ((_a = ctx[0]) == null ? void 0 : _a.compareAtPrice) || 0) <= (+/*item*/
        ((_b = ctx[0]) == null ? void 0 : _b.price) || 0));
        attr(span, "class", "final-price svelte-19q75fe");
      },
      m(target, anchor) {
        insert(target, strike, anchor);
        append(strike, t0);
        insert(target, t1, anchor);
        insert(target, span, anchor);
        append(span, t2);
        insert(target, t3, anchor);
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
      },
      p(ctx2, dirty) {
        var _a, _b;
        if (dirty[0] & /*item*/
        1 && t0_value !== (t0_value = formatCurrencyDisplay((+/*item*/
        ctx2[0].compareAtPrice).toFixed(2)) + ""))
          set_data(t0, t0_value);
        if (dirty[0] & /*item*/
        1) {
          toggle_class(strike, "hidden-vis", (+/*item*/
          ((_a = ctx2[0]) == null ? void 0 : _a.compareAtPrice) || 0) <= (+/*item*/
          ((_b = ctx2[0]) == null ? void 0 : _b.price) || 0));
        }
        if (dirty[0] & /*item*/
        1 && t2_value !== (t2_value = formatCurrencyDisplay((+/*item*/
        ctx2[0].price).toFixed(2)) + ""))
          set_data(t2, t2_value);
        if (dirty[0] & /*item*/
        1)
          show_if = getPercentage(+/*item*/
          ctx2[0].compareAtPrice, +/*item*/
          ctx2[0].price) > 0;
        if (show_if) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block_12$1(ctx2);
            if_block.c();
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(strike);
          detach(t1);
          detach(span);
          detach(t3);
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function create_if_block_9$3(ctx) {
    let t0;
    let span;
    let t2;
    let div1;
    let div0;
    let input;
    let input_value_value;
    let if_block = (
      /*totalItemPrice*/
      ctx[4] && create_if_block_10$3(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        t0 = space();
        span = element("span");
        span.textContent = "FREE";
        t2 = space();
        div1 = element("div");
        div0 = element("div");
        input = element("input");
        attr(span, "class", "free-text svelte-19q75fe");
        attr(input, "type", "number");
        attr(input, "class", "item-quantity svelte-19q75fe");
        input.value = input_value_value = /*item*/
        ctx[0].quantity;
        input.readOnly = true;
        attr(input, "min", "1");
        attr(input, "step", "1");
        attr(input, "inputmode", "numeric");
        attr(div0, "class", "quantity-handler svelte-19q75fe");
        attr(div1, "class", "quantity-handler-wrapper svelte-19q75fe");
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, t0, anchor);
        insert(target, span, anchor);
        insert(target, t2, anchor);
        insert(target, div1, anchor);
        append(div1, div0);
        append(div0, input);
      },
      p(ctx2, dirty) {
        if (
          /*totalItemPrice*/
          ctx2[4]
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block_10$3(ctx2);
            if_block.c();
            if_block.m(t0.parentNode, t0);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
        if (dirty[0] & /*item*/
        1 && input_value_value !== (input_value_value = /*item*/
        ctx2[0].quantity) && input.value !== input_value_value) {
          input.value = input_value_value;
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(t0);
          detach(span);
          detach(t2);
          detach(div1);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function create_if_block_5$7(ctx) {
    var _a, _b;
    let strike;
    let t0_value = formatCurrencyDisplay(
      /*totalItemPrice*/
      (ctx[4] / 100).toFixed(2)
    ) + "";
    let t0;
    let t1;
    let span;
    let t2_value = formatCurrencyDisplay(
      /*freeProduct*/
      ctx[2] ? "0" : (
        /*item*/
        (ctx[0].line_price / 100 - /*freeQuantities*/
        (((_a = ctx[6]) == null ? void 0 : _a.totalFreeQuantity) * /*item*/
        (ctx[0].price / 100) || 0)).toFixed(2)
      )
    ) + "";
    let t2;
    let t3;
    let t4;
    let if_block1_anchor;
    let current;
    let if_block0 = (
      /*discountInPercentage*/
      ctx[10] > 0 && create_if_block_8$6(ctx)
    );
    let if_block1 = (
      /*item*/
      ((_b = ctx[0].discounts) == null ? void 0 : _b.length) > 0 && /*item*/
      ctx[0].original_line_price > /*item*/
      ctx[0].line_price && create_if_block_6$6(ctx)
    );
    return {
      c() {
        strike = element("strike");
        t0 = text(t0_value);
        t1 = space();
        span = element("span");
        t2 = text(t2_value);
        t3 = space();
        if (if_block0)
          if_block0.c();
        t4 = space();
        if (if_block1)
          if_block1.c();
        if_block1_anchor = empty();
        attr(strike, "class", "compare-at-price svelte-19q75fe");
        attr(span, "class", "final-price svelte-19q75fe");
      },
      m(target, anchor) {
        insert(target, strike, anchor);
        append(strike, t0);
        insert(target, t1, anchor);
        insert(target, span, anchor);
        append(span, t2);
        insert(target, t3, anchor);
        if (if_block0)
          if_block0.m(target, anchor);
        insert(target, t4, anchor);
        if (if_block1)
          if_block1.m(target, anchor);
        insert(target, if_block1_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        var _a2, _b2;
        if ((!current || dirty[0] & /*totalItemPrice*/
        16) && t0_value !== (t0_value = formatCurrencyDisplay(
          /*totalItemPrice*/
          (ctx2[4] / 100).toFixed(2)
        ) + ""))
          set_data(t0, t0_value);
        if ((!current || dirty[0] & /*freeProduct, item, freeQuantities*/
        69) && t2_value !== (t2_value = formatCurrencyDisplay(
          /*freeProduct*/
          ctx2[2] ? "0" : (
            /*item*/
            (ctx2[0].line_price / 100 - /*freeQuantities*/
            (((_a2 = ctx2[6]) == null ? void 0 : _a2.totalFreeQuantity) * /*item*/
            (ctx2[0].price / 100) || 0)).toFixed(2)
          )
        ) + ""))
          set_data(t2, t2_value);
        if (
          /*discountInPercentage*/
          ctx2[10] > 0
        ) {
          if (if_block0) {
            if_block0.p(ctx2, dirty);
          } else {
            if_block0 = create_if_block_8$6(ctx2);
            if_block0.c();
            if_block0.m(t4.parentNode, t4);
          }
        } else if (if_block0) {
          if_block0.d(1);
          if_block0 = null;
        }
        if (
          /*item*/
          ((_b2 = ctx2[0].discounts) == null ? void 0 : _b2.length) > 0 && /*item*/
          ctx2[0].original_line_price > /*item*/
          ctx2[0].line_price
        ) {
          if (if_block1) {
            if_block1.p(ctx2, dirty);
            if (dirty[0] & /*item*/
            1) {
              transition_in(if_block1, 1);
            }
          } else {
            if_block1 = create_if_block_6$6(ctx2);
            if_block1.c();
            transition_in(if_block1, 1);
            if_block1.m(if_block1_anchor.parentNode, if_block1_anchor);
          }
        } else if (if_block1) {
          group_outros();
          transition_out(if_block1, 1, 1, () => {
            if_block1 = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block1);
        current = true;
      },
      o(local) {
        transition_out(if_block1);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(strike);
          detach(t1);
          detach(span);
          detach(t3);
          detach(t4);
          detach(if_block1_anchor);
        }
        if (if_block0)
          if_block0.d(detaching);
        if (if_block1)
          if_block1.d(detaching);
      }
    };
  }
  function create_if_block_12$1(ctx) {
    let span;
    let t_value = `(${getPercentage(+/*item*/
    ctx[0].compareAtPrice, +/*item*/
    ctx[0].price).toFixed(0)}% OFF)`;
    let t;
    return {
      c() {
        span = element("span");
        t = text(t_value);
        attr(span, "class", "discount-percentage svelte-19q75fe");
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t);
      },
      p(ctx2, dirty) {
        if (dirty[0] & /*item*/
        1 && t_value !== (t_value = `(${getPercentage(+/*item*/
        ctx2[0].compareAtPrice, +/*item*/
        ctx2[0].price).toFixed(0)}% OFF)`))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_if_block_10$3(ctx) {
    let strike;
    let t_value = formatCurrencyDisplay(
      /*totalItemPrice*/
      (ctx[4] / 100).toFixed(2)
    ) + "";
    let t;
    return {
      c() {
        strike = element("strike");
        t = text(t_value);
        attr(strike, "class", "compare-at-price svelte-19q75fe");
      },
      m(target, anchor) {
        insert(target, strike, anchor);
        append(strike, t);
      },
      p(ctx2, dirty) {
        if (dirty[0] & /*totalItemPrice*/
        16 && t_value !== (t_value = formatCurrencyDisplay(
          /*totalItemPrice*/
          (ctx2[4] / 100).toFixed(2)
        ) + ""))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(strike);
        }
      }
    };
  }
  function create_if_block_8$6(ctx) {
    var _a;
    let span;
    let t_value = `(${/*discountInPercentage*/
    (_a = ctx[10]) == null ? void 0 : _a.toFixed(0)}% OFF)`;
    let t;
    return {
      c() {
        span = element("span");
        t = text(t_value);
        attr(span, "class", "discount-percentage svelte-19q75fe");
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t);
      },
      p(ctx2, dirty) {
        var _a2;
        if (dirty[0] & /*discountInPercentage*/
        1024 && t_value !== (t_value = `(${/*discountInPercentage*/
        (_a2 = ctx2[10]) == null ? void 0 : _a2.toFixed(0)}% OFF)`))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_if_block_6$6(ctx) {
    var _a, _b, _c, _d, _e, _f;
    let div1;
    let div0;
    let icon;
    let t0;
    let span;
    let t1_value = (
      /*freeProduct*/
      (ctx[2] ? (
        /*$store_appliedManualDiscount*/
        ((_a = ctx[12]) == null ? void 0 : _a.title) || "FREE"
      ) : (
        /*item*/
        (_c = (_b = ctx[0].discounts) == null ? void 0 : _b[0]) == null ? void 0 : _c.title
      )) + ""
    );
    let t1;
    let t2;
    let if_block_anchor;
    let current;
    icon = new Icon({
      props: {
        height: "14px",
        icon: "ic:twotone-discount",
        color: ""
      }
    });
    let if_block = (
      /*freeProduct*/
      (ctx[2] || /*item*/
      ((_d = ctx[0]) == null ? void 0 : _d.line_price) === 0) && !/*item*/
      ((_f = (_e = ctx[0]) == null ? void 0 : _e.properties) == null ? void 0 : _f["_gokwik_freebie"]) && window.gk_cart_domain === "mansinoise.myshopify.com" && create_if_block_7$6(ctx)
    );
    return {
      c() {
        div1 = element("div");
        div0 = element("div");
        create_component(icon.$$.fragment);
        t0 = space();
        span = element("span");
        t1 = text(t1_value);
        t2 = space();
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
        attr(div0, "class", "icon svelte-19q75fe");
        attr(span, "class", "svelte-19q75fe");
        attr(div1, "class", "coupon-applied-area auto-applied-discount-product svelte-19q75fe");
      },
      m(target, anchor) {
        insert(target, div1, anchor);
        append(div1, div0);
        mount_component(icon, div0, null);
        append(div1, t0);
        append(div1, span);
        append(span, t1);
        insert(target, t2, anchor);
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c2, _d2, _e2, _f2;
        if ((!current || dirty[0] & /*freeProduct, $store_appliedManualDiscount, item*/
        4101) && t1_value !== (t1_value = /*freeProduct*/
        (ctx2[2] ? (
          /*$store_appliedManualDiscount*/
          ((_a2 = ctx2[12]) == null ? void 0 : _a2.title) || "FREE"
        ) : (
          /*item*/
          (_c2 = (_b2 = ctx2[0].discounts) == null ? void 0 : _b2[0]) == null ? void 0 : _c2.title
        )) + ""))
          set_data(t1, t1_value);
        if (
          /*freeProduct*/
          (ctx2[2] || /*item*/
          ((_d2 = ctx2[0]) == null ? void 0 : _d2.line_price) === 0) && !/*item*/
          ((_f2 = (_e2 = ctx2[0]) == null ? void 0 : _e2.properties) == null ? void 0 : _f2["_gokwik_freebie"]) && window.gk_cart_domain === "mansinoise.myshopify.com"
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
            if (dirty[0] & /*freeProduct, item*/
            5) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block_7$6(ctx2);
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div1);
          detach(t2);
          detach(if_block_anchor);
        }
        destroy_component(icon);
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function create_if_block_7$6(ctx) {
    let div;
    let icon;
    let current;
    let mounted;
    let dispose;
    icon = new Icon({
      props: {
        icon: "material-symbols:delete",
        height: "16px"
      }
    });
    return {
      c() {
        div = element("div");
        create_component(icon.$$.fragment);
        attr(div, "class", "remove-btn remove-freebie-btn svelte-19q75fe");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        mount_component(icon, div, null);
        current = true;
        if (!mounted) {
          dispose = listen(div, "click", stop_propagation(
            /*click_handler_2*/
            ctx[32]
          ));
          mounted = true;
        }
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(icon);
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block_3$c(ctx) {
    let div1;
    let div0;
    let span0;
    let t1;
    let input;
    let input_value_value;
    let t2;
    let span1;
    let t4;
    let current;
    let mounted;
    let dispose;
    let if_block = !/*upsellComponent*/
    ctx[1] && create_if_block_4$7(ctx);
    return {
      c() {
        div1 = element("div");
        div0 = element("div");
        span0 = element("span");
        span0.textContent = "-";
        t1 = space();
        input = element("input");
        t2 = space();
        span1 = element("span");
        span1.textContent = "+";
        t4 = space();
        if (if_block)
          if_block.c();
        attr(span0, "class", "reduce-quantity svelte-19q75fe");
        attr(input, "type", "number");
        attr(input, "class", "item-quantity svelte-19q75fe");
        input.value = input_value_value = /*upsellComponent*/
        ctx[1] ? (
          /*quantity*/
          ctx[3]
        ) : (
          /*item*/
          ctx[0].quantity
        );
        attr(input, "min", "1");
        attr(input, "step", "1");
        attr(input, "inputmode", "numeric");
        input.readOnly = /*readonlyInputDomains*/
        ctx[16].includes(window == null ? void 0 : window.gk_cart_domain);
        attr(span1, "class", "increase-quantity svelte-19q75fe");
        attr(div0, "class", "quantity-handler svelte-19q75fe");
        attr(div1, "class", "quantity-handler-wrapper svelte-19q75fe");
      },
      m(target, anchor) {
        insert(target, div1, anchor);
        append(div1, div0);
        append(div0, span0);
        append(div0, t1);
        append(div0, input);
        ctx[34](input);
        append(div0, t2);
        append(div0, span1);
        append(div1, t4);
        if (if_block)
          if_block.m(div1, null);
        current = true;
        if (!mounted) {
          dispose = [
            listen(span0, "click", stop_propagation(
              /*click_handler_3*/
              ctx[33]
            )),
            listen(input, "click", stop_propagation(
              /*click_handler_1*/
              ctx[28]
            )),
            listen(
              input,
              "change",
              /*handleQuantityInput*/
              ctx[18]
            ),
            listen(
              input,
              "blur",
              /*handleInputBlur*/
              ctx[19]
            ),
            listen(span1, "click", stop_propagation(
              /*click_handler_4*/
              ctx[35]
            ))
          ];
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        if (!current || dirty[0] & /*upsellComponent, quantity, item*/
        11 && input_value_value !== (input_value_value = /*upsellComponent*/
        ctx2[1] ? (
          /*quantity*/
          ctx2[3]
        ) : (
          /*item*/
          ctx2[0].quantity
        )) && input.value !== input_value_value) {
          input.value = input_value_value;
        }
        if (!/*upsellComponent*/
        ctx2[1]) {
          if (if_block) {
            if_block.p(ctx2, dirty);
            if (dirty[0] & /*upsellComponent*/
            2) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block_4$7(ctx2);
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(div1, null);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div1);
        }
        ctx[34](null);
        if (if_block)
          if_block.d();
        mounted = false;
        run_all(dispose);
      }
    };
  }
  function create_if_block_4$7(ctx) {
    let div;
    let icon;
    let current;
    let mounted;
    let dispose;
    icon = new Icon({
      props: {
        icon: "material-symbols:delete",
        height: "16px"
      }
    });
    return {
      c() {
        div = element("div");
        create_component(icon.$$.fragment);
        attr(div, "class", "remove-btn svelte-19q75fe");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        mount_component(icon, div, null);
        current = true;
        if (!mounted) {
          dispose = listen(div, "click", stop_propagation(
            /*click_handler_5*/
            ctx[36]
          ));
          mounted = true;
        }
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(icon);
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block_1$o(ctx) {
    let show_if;
    let if_block_anchor;
    function select_block_type_3(ctx2, dirty) {
      if (dirty[0] & /*item*/
      1)
        show_if = null;
      if (show_if == null)
        show_if = !!isVariantAvailable(
          /*item*/
          ctx2[0].id
        );
      if (show_if)
        return create_if_block_2$i;
      return create_else_block$d;
    }
    let current_block_type = select_block_type_3(ctx, [-1, -1]);
    let if_block = current_block_type(ctx);
    return {
      c() {
        if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
      },
      p(ctx2, dirty) {
        if (current_block_type === (current_block_type = select_block_type_3(ctx2, dirty)) && if_block) {
          if_block.p(ctx2, dirty);
        } else {
          if_block.d(1);
          if_block = current_block_type(ctx2);
          if (if_block) {
            if_block.c();
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        }
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if_block.d(detaching);
      }
    };
  }
  function create_else_block$d(ctx) {
    let button;
    return {
      c() {
        button = element("button");
        button.textContent = "Out Of Stock";
        attr(button, "class", "add-to-cart out-of-stock svelte-19q75fe");
      },
      m(target, anchor) {
        insert(target, button, anchor);
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(button);
        }
      }
    };
  }
  function create_if_block_2$i(ctx) {
    let button;
    let mounted;
    let dispose;
    return {
      c() {
        button = element("button");
        button.textContent = "Add to cart";
        attr(button, "class", "add-to-cart svelte-19q75fe");
      },
      m(target, anchor) {
        insert(target, button, anchor);
        if (!mounted) {
          dispose = listen(button, "click", stop_propagation(
            /*click_handler_6*/
            ctx[37]
          ));
          mounted = true;
        }
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_key_block_1(ctx) {
    var _a, _b, _c, _d, _e;
    let show_if = !/*freeProduct*/
    ctx[2] && !/*item*/
    ((_b = (_a = ctx[0]) == null ? void 0 : _a.properties) == null ? void 0 : _b["_gokwik_freebie"]) && /*$store_configurations*/
    (((_e = (_d = (_c = ctx[11]) == null ? void 0 : _c.appearance) == null ? void 0 : _d.quantityChangeOnFreeItems) == null ? void 0 : _e.enable) && !/*item*/
    ctx[0].line_price || /*upsellComponent*/
    ctx[1] && isVariantAvailable(
      /*item*/
      ctx[0].id
    ) || /*item*/
    ctx[0].line_price);
    let t;
    let if_block1_anchor;
    let current;
    let if_block0 = show_if && create_if_block_3$c(ctx);
    let if_block1 = (
      /*upsellComponent*/
      ctx[1] && create_if_block_1$o(ctx)
    );
    return {
      c() {
        if (if_block0)
          if_block0.c();
        t = space();
        if (if_block1)
          if_block1.c();
        if_block1_anchor = empty();
      },
      m(target, anchor) {
        if (if_block0)
          if_block0.m(target, anchor);
        insert(target, t, anchor);
        if (if_block1)
          if_block1.m(target, anchor);
        insert(target, if_block1_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c2, _d2, _e2;
        if (dirty[0] & /*freeProduct, item, $store_configurations, upsellComponent*/
        2055)
          show_if = !/*freeProduct*/
          ctx2[2] && !/*item*/
          ((_b2 = (_a2 = ctx2[0]) == null ? void 0 : _a2.properties) == null ? void 0 : _b2["_gokwik_freebie"]) && /*$store_configurations*/
          (((_e2 = (_d2 = (_c2 = ctx2[11]) == null ? void 0 : _c2.appearance) == null ? void 0 : _d2.quantityChangeOnFreeItems) == null ? void 0 : _e2.enable) && !/*item*/
          ctx2[0].line_price || /*upsellComponent*/
          ctx2[1] && isVariantAvailable(
            /*item*/
            ctx2[0].id
          ) || /*item*/
          ctx2[0].line_price);
        if (show_if) {
          if (if_block0) {
            if_block0.p(ctx2, dirty);
            if (dirty[0] & /*freeProduct, item, $store_configurations, upsellComponent*/
            2055) {
              transition_in(if_block0, 1);
            }
          } else {
            if_block0 = create_if_block_3$c(ctx2);
            if_block0.c();
            transition_in(if_block0, 1);
            if_block0.m(t.parentNode, t);
          }
        } else if (if_block0) {
          group_outros();
          transition_out(if_block0, 1, 1, () => {
            if_block0 = null;
          });
          check_outros();
        }
        if (
          /*upsellComponent*/
          ctx2[1]
        ) {
          if (if_block1) {
            if_block1.p(ctx2, dirty);
          } else {
            if_block1 = create_if_block_1$o(ctx2);
            if_block1.c();
            if_block1.m(if_block1_anchor.parentNode, if_block1_anchor);
          }
        } else if (if_block1) {
          if_block1.d(1);
          if_block1 = null;
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block0);
        current = true;
      },
      o(local) {
        transition_out(if_block0);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(t);
          detach(if_block1_anchor);
        }
        if (if_block0)
          if_block0.d(detaching);
        if (if_block1)
          if_block1.d(detaching);
      }
    };
  }
  function create_key_block$4(ctx) {
    let if_block_anchor;
    let current;
    let if_block = (
      /*item*/
      (ctx[0].quantity || /*upsellComponent*/
      ctx[1]) && create_if_block$u(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        if (
          /*item*/
          ctx2[0].quantity || /*upsellComponent*/
          ctx2[1]
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
            if (dirty[0] & /*item, upsellComponent*/
            3) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block$u(ctx2);
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function create_fragment$D(ctx) {
    let previous_key = (
      /*item*/
      ctx[0].quantity + /*item*/
      (ctx[0].key || /*item*/
      ctx[0].id)
    );
    let key_block_anchor;
    let current;
    let key_block = create_key_block$4(ctx);
    return {
      c() {
        key_block.c();
        key_block_anchor = empty();
      },
      m(target, anchor) {
        key_block.m(target, anchor);
        insert(target, key_block_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        if (dirty[0] & /*item*/
        1 && safe_not_equal(previous_key, previous_key = /*item*/
        ctx2[0].quantity + /*item*/
        (ctx2[0].key || /*item*/
        ctx2[0].id))) {
          group_outros();
          transition_out(key_block, 1, 1, noop);
          check_outros();
          key_block = create_key_block$4(ctx2);
          key_block.c();
          transition_in(key_block, 1);
          key_block.m(key_block_anchor.parentNode, key_block_anchor);
        } else {
          key_block.p(ctx2, dirty);
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(key_block);
        current = true;
      },
      o(local) {
        transition_out(key_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(key_block_anchor);
        }
        key_block.d(detaching);
      }
    };
  }
  function instance$D($$self, $$props, $$invalidate) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i;
    let priceToBePaid;
    let $store_configurations;
    let $store_appliedManualDiscount;
    let $store_variantAvailabilityMap;
    component_subscribe($$self, store_configurations, ($$value) => $$invalidate(11, $store_configurations = $$value));
    component_subscribe($$self, store_appliedManualDiscount, ($$value) => $$invalidate(12, $store_appliedManualDiscount = $$value));
    component_subscribe($$self, store_variantAvailabilityMap, ($$value) => $$invalidate(13, $store_variantAvailabilityMap = $$value));
    let { item } = $$props;
    let { index = 0 } = $$props;
    let { upsellComponent } = $$props;
    let { freeProduct = false } = $$props;
    let quantity = 1;
    let totalItemPrice = getItemLevelMRP(item);
    let showVariant = false;
    let unsubOriginalCart;
    let originalItem;
    let inputRef;
    let freeQuantities = null;
    let productData = null;
    let selectedVariant = {};
    let shouldShowVariantSelector = ((_b = (_a = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _a.variantSelectionDropdown) == null ? void 0 : _b.enable) || ((_d = (_c = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _c.variantSelectionDropdown) == null ? void 0 : _d.enable) === void 0;
    let discountInPercentage = 0;
    const excludedDomainsForVariantSelector = [
      "duroflex-world.myshopify.com",
      "kurlonstore.myshopify.com",
      "shareyourbasil.myshopify.com",
      "myblissclub.myshopify.com",
      "nasher-miles.myshopify.com",
      "aesthesythestore.myshopify.com"
    ];
    const readonlyInputDomains = [
      "bareanatomy.myshopify.com",
      "vinci-botanicals.myshopify.com",
      "duroflex-world.myshopify.com"
    ];
    const handleQuantityChange = async (action) => {
      if (upsellComponent) {
        if (action === "reduce" && quantity > 1) {
          $$invalidate(3, quantity = quantity - 1);
        } else if (action === "increase") {
          $$invalidate(3, quantity = quantity + 1);
        }
        return;
      }
      let changeBody = {
        // line: index + 1,
        id: (item == null ? void 0 : item.key) + ""
      };
      let eventName = TextConstants.eventNames.change_quantity;
      if (action === "reduce") {
        changeBody.quantity = (item == null ? void 0 : item.quantity) - 1;
        eventName = TextConstants.eventNames.quantity_reduce_sc;
      } else if (action === "increase") {
        changeBody.quantity = (item == null ? void 0 : item.quantity) + 1;
        eventName = TextConstants.eventNames.quantity_increase_sc;
      }
      const res = await changeCart(changeBody, false, (item == null ? void 0 : item.properties) || {});
      if (action === "increase" && res) {
        fireGokwikTrigger(TextConstants.eventNames.auto_add_to_cart, {
          event: TextConstants.eventNames.auto_add_to_cart,
          eventType: "increase_quantity",
          itemsAdded: res.items_added,
          items: res.items,
          item_count: res.item_count,
          items_subtotal_price: res.items_subtotal_price,
          original_total_price: res.original_total_price,
          requires_shipping: res.requires_shipping,
          total_discounts: res.total_discounts,
          total_price: res.total_price
        });
      }
      fireGokwikTrigger(eventName, {
        id: item.id + "",
        key: item.key + "",
        quantity: changeBody.quantity
      });
      logEvent(eventName, {
        ...changeBody,
        id: item.id + "",
        key: item.key + ""
      });
    };
    const handleQuantityInput = async (event) => {
      var _a2, _b2;
      const target = event.target;
      const newValue = parseInt(target.value, 10);
      if (isNaN(newValue) || newValue < 1) {
        if (upsellComponent) {
          target.value = quantity.toString();
        } else {
          target.value = (_a2 = (originalItem == null ? void 0 : originalItem.quantity) || (item == null ? void 0 : item.quantity)) == null ? void 0 : _a2.toString();
        }
        return;
      }
      if (upsellComponent) {
        $$invalidate(3, quantity = newValue);
        return;
      }
      const changeBody = { id: item.key + "", quantity: newValue };
      const res = await changeCart(changeBody, false, (item == null ? void 0 : item.properties) || {});
      if (res === false) {
        target.value = (_b2 = (originalItem == null ? void 0 : originalItem.quantity) || (item == null ? void 0 : item.quantity)) == null ? void 0 : _b2.toString();
        return;
      }
      fireGokwikTrigger(TextConstants.eventNames.change_quantity, {
        id: item.id + "",
        key: item.key + "",
        quantity: changeBody.quantity
      });
      logEvent(TextConstants.eventNames.change_quantity, {
        ...changeBody,
        id: item.id + "",
        key: item.key + ""
      });
    };
    const handleInputBlur = (event) => {
      const target = event.target;
      const newValue = parseInt(target.value, 10);
      if (isNaN(newValue) || newValue < 1) {
        target.value = upsellComponent ? quantity.toString() : ((originalItem == null ? void 0 : originalItem.quantity) || (item == null ? void 0 : item.quantity)).toString();
      }
    };
    const handleAddToCart = async () => {
      const res = await addToCart(
        {
          id: cleanShopifyIds(item.id),
          quantity,
          properties: getUpsellProperties((item == null ? void 0 : item.properties) || {}, upsellComponent)
        },
        false
      );
      if (res) {
        fireGokwikTrigger(TextConstants.eventNames.auto_add_to_cart, {
          event: TextConstants.eventNames.auto_add_to_cart,
          eventType: "cart_Upsell_Section",
          items: res
        });
      }
      fireGokwikTrigger("upsell_added_sc", {
        id: cleanShopifyIds(item.id),
        quantity,
        price: item.price
      });
      logEvent("upsell_added_sc", {
        id: cleanShopifyIds(item.id),
        quantity,
        price: item.price
      });
      store_bottomSheet.update((oldObj) => ({
        ...oldObj,
        show: false,
        component: null,
        componentData: null,
        title: "",
        type: ""
      }));
    };
    const handleProductTitleClick = async (event) => {
      var _a2, _b2, _c2, _d2, _e2;
      if (isProductNotClickable)
        return;
      event.stopPropagation();
      if (((_b2 = (_a2 = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _a2.productClickBehavior) == null ? void 0 : _b2.type) === "showDescriptionModal") {
        store_apiLoader.set(true);
        if ((productData == null ? void 0 : productData.images) && ((_c2 = productData == null ? void 0 : productData.images) == null ? void 0 : _c2.length) > 1) {
          productData.images.forEach((image) => {
            const img = new Image();
            img.src = image;
          });
        } else {
          const imageSrc = (item == null ? void 0 : item.image) || (productData == null ? void 0 : productData.featured_image);
          if (imageSrc) {
            const img = new Image();
            img.src = imageSrc;
          }
        }
        store_bottomSheet.set({
          show: true,
          title: "Product Details",
          type: "product-popup",
          component: ProductPopUp,
          componentData: {
            item,
            upsellComponent,
            freeProduct,
            totalItemPrice,
            itemData: productData,
            selectedVariant,
            handleVariantChange,
            isSelectVariantAvailable
          }
        });
        store_apiLoader.set(false);
      } else if (((_e2 = (_d2 = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _d2.productClickBehavior) == null ? void 0 : _e2.type) === "redirect") {
        if (item == null ? void 0 : item.url) {
          window.location.href = item == null ? void 0 : item.url;
        } else {
          window.location.href = `${window.location.origin}/products/${item == null ? void 0 : item.handle}?variant=${cleanShopifyIds(item == null ? void 0 : item.variantId)}`;
        }
      }
      if (!isProductNotClickable) {
        if (upsellComponent) {
          fireGokwikTrigger("upsell_list_product_clicked", { variant_id: item.id });
          logEvent("upsell_list_product_clicked", { variant_id: item.id });
        } else {
          fireGokwikTrigger("product_list_product_clicked", { variant_id: item.id });
          logEvent("product_list_product_clicked", { variant_id: item.id });
        }
      }
    };
    const isProductNotClickable = ((_f = (_e = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _e.productClickBehavior) == null ? void 0 : _f.type) === "default" || !((_h = (_g = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _g.productClickBehavior) == null ? void 0 : _h.type) || ((_i = item == null ? void 0 : item.properties) == null ? void 0 : _i["_gokwik_freebie"]);
    const defaultTitlePresent = () => {
      var _a2;
      let titlePresent = false;
      (_a2 = item == null ? void 0 : item.variant_options) == null ? void 0 : _a2.forEach((option) => {
        if (option.toLowerCase() === "default title") {
          titlePresent = true;
        }
      });
      return titlePresent;
    };
    const handleVariantChange = async (event, option) => {
      event.stopPropagation();
      const target = event.target;
      $$invalidate(9, selectedVariant = {
        ...selectedVariant,
        [`option${option.position}`]: target.value
      });
      const variants = (productData == null ? void 0 : productData.variants) || [];
      const variantsWithSelectedOption = variants.filter((variant) => {
        return variant[`option${option.position}`] === target.value;
      });
      let matchedVariant = null;
      let maxMatchCount = -1;
      variantsWithSelectedOption.forEach((variant) => {
        let matchCount = 0;
        Object.keys(selectedVariant).forEach((key) => {
          if (key !== `option${option.position}` && variant[key] === selectedVariant[key]) {
            matchCount++;
          }
        });
        if (matchCount > maxMatchCount && isVariantAvailable(String(variant.id))) {
          maxMatchCount = matchCount;
          matchedVariant = variant;
        }
      });
      if (matchedVariant) {
        Object.keys(selectedVariant).forEach((key) => {
          if (key !== `option${option.position}`) {
            $$invalidate(9, selectedVariant[key] = matchedVariant[key], selectedVariant);
          }
        });
        try {
          await changeCart({ id: item.key, quantity: 0 }, true);
          const newItem = await addToCart({
            id: matchedVariant.id,
            quantity: item.quantity,
            properties: (item == null ? void 0 : item.properties) || {}
          });
          if (!newItem) {
            throw new Error("Failed to add item with new variant");
          }
          store_bottomSheet.update((oldObj) => ({
            ...oldObj,
            componentData: {
              ...oldObj.componentData,
              item: newItem,
              totalItemPrice: getItemLevelMRP(newItem),
              selectedVariant
            }
          }));
        } catch (error) {
          store_snackbar.set({
            message: "Error updating variant",
            timer: 2e3,
            show: true,
            error: true
          });
        }
      } else {
        item.options_with_values.forEach((optionWithValue) => {
          if (optionWithValue.name === option.name) {
            $$invalidate(9, selectedVariant = {
              ...selectedVariant,
              [`option${option.position}`]: optionWithValue.value
            });
          }
        });
        store_snackbar.set({
          message: "Selected variant is not available",
          timer: 2e3,
          show: true,
          error: true
        });
      }
    };
    const isSelectVariantAvailable = (optionKey, optionValue) => {
      if (!productData || !productData.variants)
        return false;
      const variants = productData.variants.filter((variant2) => {
        return variant2[optionKey] === optionValue;
      });
      if (variants.length === 0)
        return false;
      const variant = variants.find((variant2) => {
        return isVariantAvailable(String(variant2.id));
      });
      if (!variant)
        return false;
      return true;
    };
    onMount(async () => {
      var _a2, _b2, _c2, _d2, _e2;
      if (((_b2 = (_a2 = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _a2.variantNameOnProduct) == null ? void 0 : _b2.enable) && !defaultTitlePresent()) {
        $$invalidate(7, showVariant = true);
        if ((item == null ? void 0 : item.handle) && !freeProduct && !((_c2 = item == null ? void 0 : item.properties) == null ? void 0 : _c2["_gokwik_freebie"]) && (shouldShowVariantSelector || ((_e2 = (_d2 = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _d2.productClickBehavior) == null ? void 0 : _e2.type) === "showDescriptionModal" || !excludedDomainsForVariantSelector.includes(window == null ? void 0 : window.gk_cart_domain))) {
          $$invalidate(8, productData = await getProductData(item.handle));
          if (productData) {
            item.options_with_values.forEach((option) => {
              const options = (productData == null ? void 0 : productData.options) || [];
              const matchedOption = options.find((opt) => opt.name === option.name);
              $$invalidate(9, selectedVariant[`option${matchedOption == null ? void 0 : matchedOption.position}`] = option.value, selectedVariant);
            });
          }
        }
      }
      store_productDetails.subscribe((res) => {
        $$invalidate(4, totalItemPrice = getItemLevelMRP(item));
      });
      store_appliedManualDiscount.subscribe((res) => {
        $$invalidate(6, freeQuantities = res == null ? void 0 : res.freeQuantities.find((freeDetails) => freeDetails.id === item.id));
        console.log(freeQuantities);
      });
      unsubOriginalCart = store_cart.subscribe((res) => {
        var _a3;
        originalItem = (_a3 = res == null ? void 0 : res.items) == null ? void 0 : _a3.find((product) => (item == null ? void 0 : item.key) === (product == null ? void 0 : product.key));
      });
    });
    onDestroy(() => {
      if (unsubOriginalCart) {
        unsubOriginalCart();
      }
    });
    function click_handler_1(event) {
      bubble.call(this, $$self, event);
    }
    function click_handler2(event) {
      bubble.call(this, $$self, event);
    }
    function select_change_handler(option) {
      selectedVariant[`option${option.position}`] = select_value(this);
      $$invalidate(9, selectedVariant);
      $$invalidate(8, productData);
    }
    const change_handler = (option, event) => {
      handleVariantChange(event, option);
    };
    const click_handler_2 = async () => {
      await changeCart({ id: item.key + "", quantity: 0 }, false, (item == null ? void 0 : item.properties) || {});
      fireGokwikTrigger(TextConstants.eventNames.product_removed_sc, { id: item.id + "", key: item.key + "" });
      logEvent(TextConstants.eventNames.product_removed_sc, { id: item.id + "", key: item.key + "" });
    };
    const click_handler_3 = () => handleQuantityChange("reduce");
    function input_binding($$value) {
      binding_callbacks[$$value ? "unshift" : "push"](() => {
        inputRef = $$value;
        $$invalidate(5, inputRef), $$invalidate(0, item), $$invalidate(1, upsellComponent), $$invalidate(3, quantity);
      });
    }
    const click_handler_4 = () => handleQuantityChange("increase");
    const click_handler_5 = async () => {
      await changeCart({ id: item.key + "", quantity: 0 }, false, (item == null ? void 0 : item.properties) || {});
      fireGokwikTrigger(TextConstants.eventNames.product_removed_sc, { id: item.id + "", key: item.key + "" });
      logEvent(TextConstants.eventNames.product_removed_sc, { id: item.id + "", key: item.key + "" });
    };
    const click_handler_6 = () => handleAddToCart();
    $$self.$$set = ($$props2) => {
      if ("item" in $$props2)
        $$invalidate(0, item = $$props2.item);
      if ("index" in $$props2)
        $$invalidate(26, index = $$props2.index);
      if ("upsellComponent" in $$props2)
        $$invalidate(1, upsellComponent = $$props2.upsellComponent);
      if ("freeProduct" in $$props2)
        $$invalidate(2, freeProduct = $$props2.freeProduct);
    };
    $$self.$$.update = () => {
      if ($$self.$$.dirty[0] & /*item*/
      1) {
        $$invalidate(4, totalItemPrice = getItemLevelMRP(item));
      }
      if ($$self.$$.dirty[0] & /*freeProduct, item, freeQuantities*/
      69) {
        $$invalidate(27, priceToBePaid = freeProduct ? 0 : item.line_price - ((freeQuantities == null ? void 0 : freeQuantities.totalFreeQuantity) * item.price || 0));
      }
      if ($$self.$$.dirty[0] & /*totalItemPrice, priceToBePaid*/
      134217744) {
        $$invalidate(10, discountInPercentage = totalItemPrice ? getPercentage(totalItemPrice, priceToBePaid) : 0);
      }
      if ($$self.$$.dirty[0] & /*inputRef, item, upsellComponent, quantity*/
      43) {
        if (inputRef && (item == null ? void 0 : item.quantity)) {
          $$invalidate(
            5,
            inputRef.value = upsellComponent ? quantity.toString() : item.quantity.toString(),
            inputRef
          );
        }
      }
    };
    return [
      item,
      upsellComponent,
      freeProduct,
      quantity,
      totalItemPrice,
      inputRef,
      freeQuantities,
      showVariant,
      productData,
      selectedVariant,
      discountInPercentage,
      $store_configurations,
      $store_appliedManualDiscount,
      $store_variantAvailabilityMap,
      shouldShowVariantSelector,
      excludedDomainsForVariantSelector,
      readonlyInputDomains,
      handleQuantityChange,
      handleQuantityInput,
      handleInputBlur,
      handleAddToCart,
      handleProductTitleClick,
      isProductNotClickable,
      defaultTitlePresent,
      handleVariantChange,
      isSelectVariantAvailable,
      index,
      priceToBePaid,
      click_handler_1,
      click_handler2,
      select_change_handler,
      change_handler,
      click_handler_2,
      click_handler_3,
      input_binding,
      click_handler_4,
      click_handler_5,
      click_handler_6
    ];
  }
  class ProductTile extends SvelteComponent {
    constructor(options) {
      super();
      init(
        this,
        options,
        instance$D,
        create_fragment$D,
        safe_not_equal,
        {
          item: 0,
          index: 26,
          upsellComponent: 1,
          freeProduct: 2
        },
        add_css$z,
        [-1, -1]
      );
    }
  }
  function add_css$y(target) {
    append_styles(target, "svelte-1k1ehgb", ".item-list-wrapper.svelte-1k1ehgb{margin:10px;border-radius:12px;background:#fff;border:1px solid var(--Gray-Neutral-200, #e5e7eb);scrollbar-width:none;-ms-overflow-style:none}.item-list-wrapper.svelte-1k1ehgb::-webkit-scrollbar{display:none}");
  }
  function get_each_context$a(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[8] = list[i];
    child_ctx[10] = i;
    return child_ctx;
  }
  function get_each_context_1$2(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[11] = list[i];
    return child_ctx;
  }
  function create_if_block$t(ctx) {
    var _a;
    let div;
    let t;
    let each_blocks = [];
    let each_1_lookup = /* @__PURE__ */ new Map();
    let current;
    let if_block = (
      /*freeProducts*/
      ((_a = ctx[2]) == null ? void 0 : _a.length) && create_if_block_2$h(ctx)
    );
    let each_value = ensure_array_like(
      /*productsList*/
      ctx[1] ?? []
    );
    const get_key = (ctx2) => {
      var _a2, _b;
      return (
        /*item*/
        ((_a2 = ctx2[8]) == null ? void 0 : _a2.key) || /*item*/
        ((_b = ctx2[8]) == null ? void 0 : _b.id)
      );
    };
    for (let i = 0; i < each_value.length; i += 1) {
      let child_ctx = get_each_context$a(ctx, each_value, i);
      let key = get_key(child_ctx);
      each_1_lookup.set(key, each_blocks[i] = create_each_block$a(key, child_ctx));
    }
    return {
      c() {
        div = element("div");
        if (if_block)
          if_block.c();
        t = space();
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        attr(div, "class", "item-list-wrapper svelte-1k1ehgb");
        attr(
          div,
          "style",
          /*$getMinimumHeight*/
          ctx[3]
        );
      },
      m(target, anchor) {
        insert(target, div, anchor);
        if (if_block)
          if_block.m(div, null);
        append(div, t);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(div, null);
          }
        }
        current = true;
      },
      p(ctx2, dirty) {
        var _a2;
        if (
          /*freeProducts*/
          (_a2 = ctx2[2]) == null ? void 0 : _a2.length
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
            if (dirty & /*freeProducts*/
            4) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block_2$h(ctx2);
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(div, t);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
        if (dirty & /*productsList*/
        2) {
          each_value = ensure_array_like(
            /*productsList*/
            ctx2[1] ?? []
          );
          group_outros();
          each_blocks = update_keyed_each(each_blocks, dirty, get_key, 1, ctx2, each_value, each_1_lookup, div, outro_and_destroy_block, create_each_block$a, null, get_each_context$a);
          check_outros();
        }
        if (!current || dirty & /*$getMinimumHeight*/
        8) {
          attr(
            div,
            "style",
            /*$getMinimumHeight*/
            ctx2[3]
          );
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        for (let i = 0; i < each_value.length; i += 1) {
          transition_in(each_blocks[i]);
        }
        current = true;
      },
      o(local) {
        transition_out(if_block);
        for (let i = 0; i < each_blocks.length; i += 1) {
          transition_out(each_blocks[i]);
        }
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        if (if_block)
          if_block.d();
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].d();
        }
      }
    };
  }
  function create_if_block_2$h(ctx) {
    let each_1_anchor;
    let current;
    let each_value_1 = ensure_array_like(
      /*freeProducts*/
      ctx[2]
    );
    let each_blocks = [];
    for (let i = 0; i < each_value_1.length; i += 1) {
      each_blocks[i] = create_each_block_1$2(get_each_context_1$2(ctx, each_value_1, i));
    }
    const out = (i) => transition_out(each_blocks[i], 1, 1, () => {
      each_blocks[i] = null;
    });
    return {
      c() {
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        each_1_anchor = empty();
      },
      m(target, anchor) {
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(target, anchor);
          }
        }
        insert(target, each_1_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        if (dirty & /*freeProducts*/
        4) {
          each_value_1 = ensure_array_like(
            /*freeProducts*/
            ctx2[2]
          );
          let i;
          for (i = 0; i < each_value_1.length; i += 1) {
            const child_ctx = get_each_context_1$2(ctx2, each_value_1, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
              transition_in(each_blocks[i], 1);
            } else {
              each_blocks[i] = create_each_block_1$2(child_ctx);
              each_blocks[i].c();
              transition_in(each_blocks[i], 1);
              each_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);
            }
          }
          group_outros();
          for (i = each_value_1.length; i < each_blocks.length; i += 1) {
            out(i);
          }
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        for (let i = 0; i < each_value_1.length; i += 1) {
          transition_in(each_blocks[i]);
        }
        current = true;
      },
      o(local) {
        each_blocks = each_blocks.filter(Boolean);
        for (let i = 0; i < each_blocks.length; i += 1) {
          transition_out(each_blocks[i]);
        }
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(each_1_anchor);
        }
        destroy_each(each_blocks, detaching);
      }
    };
  }
  function create_each_block_1$2(ctx) {
    let producttile;
    let current;
    producttile = new ProductTile({
      props: {
        item: (
          /*freeProduct*/
          ctx[11]
        ),
        index: (
          /*freeProduct*/
          ctx[11].id
        ),
        upsellComponent: false,
        freeProduct: true
      }
    });
    return {
      c() {
        create_component(producttile.$$.fragment);
      },
      m(target, anchor) {
        mount_component(producttile, target, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        const producttile_changes = {};
        if (dirty & /*freeProducts*/
        4)
          producttile_changes.item = /*freeProduct*/
          ctx2[11];
        if (dirty & /*freeProducts*/
        4)
          producttile_changes.index = /*freeProduct*/
          ctx2[11].id;
        producttile.$set(producttile_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(producttile.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(producttile.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(producttile, detaching);
      }
    };
  }
  function create_if_block_1$n(ctx) {
    let producttile;
    let current;
    producttile = new ProductTile({
      props: {
        item: (
          /*item*/
          ctx[8]
        ),
        index: (
          /*index*/
          ctx[10]
        ),
        upsellComponent: false
      }
    });
    return {
      c() {
        create_component(producttile.$$.fragment);
      },
      m(target, anchor) {
        mount_component(producttile, target, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        const producttile_changes = {};
        if (dirty & /*productsList*/
        2)
          producttile_changes.item = /*item*/
          ctx2[8];
        if (dirty & /*productsList*/
        2)
          producttile_changes.index = /*index*/
          ctx2[10];
        producttile.$set(producttile_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(producttile.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(producttile.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(producttile, detaching);
      }
    };
  }
  function create_each_block$a(key_1, ctx) {
    let first;
    let if_block_anchor;
    let current;
    let if_block = (
      /*item*/
      ctx[8] && create_if_block_1$n(ctx)
    );
    return {
      key: key_1,
      first: null,
      c() {
        first = empty();
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
        this.first = first;
      },
      m(target, anchor) {
        insert(target, first, anchor);
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(new_ctx, dirty) {
        ctx = new_ctx;
        if (
          /*item*/
          ctx[8]
        ) {
          if (if_block) {
            if_block.p(ctx, dirty);
            if (dirty & /*productsList*/
            2) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block_1$n(ctx);
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(first);
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function create_fragment$C(ctx) {
    let if_block_anchor;
    let current;
    let if_block = (
      /*cart*/
      ctx[0] && /*cart*/
      ctx[0].item_count && create_if_block$t(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, [dirty]) {
        if (
          /*cart*/
          ctx2[0] && /*cart*/
          ctx2[0].item_count
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
            if (dirty & /*cart*/
            1) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block$t(ctx2);
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function instance$C($$self, $$props, $$invalidate) {
    let $store_configurations;
    let $getMinimumHeight;
    component_subscribe($$self, store_configurations, ($$value) => $$invalidate(6, $store_configurations = $$value));
    let cart2 = null;
    let productsList = [];
    let unsubCart, freeProducts = [];
    onMount(() => {
      unsubCart = store_cart.subscribe((res) => {
        $$invalidate(0, cart2 = res);
        $$invalidate(1, productsList = sortGokwikFreebiesFirst(cart2.items));
      });
      store_appliedManualDiscount.subscribe((res) => {
        $$invalidate(2, freeProducts = (res == null ? void 0 : res.freeProducts) || []);
      });
      store_configurations.subscribe((res) => {
        var _a, _b, _c;
        if ((_a = res == null ? void 0 : res.appearance) == null ? void 0 : _a.showAllProducts) {
          store_showAllProducts.set((_c = (_b = res == null ? void 0 : res.appearance) == null ? void 0 : _b.showAllProducts) == null ? void 0 : _c.enable);
        }
      });
    });
    const sortGokwikFreebiesFirst = (items) => {
      var _a, _b;
      if ((_b = (_a = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _a.showFreeGiftOnTop) == null ? void 0 : _b.enable) {
        return items.sort((a, b) => {
          var _a2, _b2;
          if (a.total_price === 0 && b.total_price !== 0)
            return -1;
          if (b.total_price === 0 && a.total_price !== 0)
            return 1;
          return (((_a2 = b.properties) == null ? void 0 : _a2["_gokwik_freebie"]) || 0) - (((_b2 = a.properties) == null ? void 0 : _b2["_gokwik_freebie"]) || 0);
        });
      } else {
        return items.sort((a, b) => {
          var _a2, _b2;
          if (b.total_price === 0 && a.total_price !== 0)
            return -1;
          if (a.total_price === 0 && b.total_price !== 0)
            return 1;
          return (((_a2 = a.properties) == null ? void 0 : _a2["_gokwik_freebie"]) || 0) - (((_b2 = b.properties) == null ? void 0 : _b2["_gokwik_freebie"]) || 0);
        });
      }
    };
    const getMinimumHeight = derived([store_cart, store_showAllProducts, store_configurations, store_hideUpsellFlow], ([
      $store_cart,
      $store_showAllProducts,
      $store_configurations2,
      $store_hideUpsellFlow
    ]) => {
      var _a, _b;
      const upsell = $store_configurations2 == null ? void 0 : $store_configurations2.upSell;
      if ($store_showAllProducts) {
        return "";
      } else if (((_a = $store_cart == null ? void 0 : $store_cart.items) == null ? void 0 : _a.length) === 1) {
        return "min-height: 118px; overflow-y: auto;";
      } else if ((upsell == null ? void 0 : upsell.enable) && !$store_hideUpsellFlow) {
        return "min-height: 174px; overflow-y: auto;";
      } else if (((_b = $store_cart == null ? void 0 : $store_cart.items) == null ? void 0 : _b.length) === 2) {
        return "min-height: 234px; overflow-y: auto;";
      } else {
        return "min-height: 320px; overflow-y: auto;";
      }
    });
    component_subscribe($$self, getMinimumHeight, (value) => $$invalidate(3, $getMinimumHeight = value));
    onDestroy(() => {
      if (unsubCart)
        unsubCart();
    });
    return [cart2, productsList, freeProducts, $getMinimumHeight, getMinimumHeight];
  }
  class ProductList extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$C, create_fragment$C, safe_not_equal, {}, add_css$y);
    }
  }
  function add_css$x(target) {
    append_styles(target, "svelte-1hle1vn", ".countdown-container.svelte-1hle1vn{display:flex;align-items:center;justify-content:center;gap:8px;padding-bottom:9px;width:100%;font-weight:bold}.timer-text.svelte-1hle1vn{font-size:14px;font-weight:500}.timer.svelte-1hle1vn{display:flex;align-items:center;gap:6px}.timer-block.svelte-1hle1vn{border-radius:4px;padding:1px 3px;display:inline-block;min-width:35px;text-align:center;font-weight:bold;border:1px solid}.separator.svelte-1hle1vn{font-weight:bold}");
  }
  function create_if_block$s(ctx) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    let div1;
    let t0;
    let div0;
    let t1;
    let t2;
    let t3;
    let if_block0 = (
      /*timerConfig*/
      ctx[0].text && create_if_block_8$5(ctx)
    );
    let if_block1 = (
      /*timerConfig*/
      ((_b = (_a = ctx[0]) == null ? void 0 : _a.day) == null ? void 0 : _b.enable) && create_if_block_7$5(ctx)
    );
    let if_block2 = (
      /*timerConfig*/
      ((_d = (_c = ctx[0]) == null ? void 0 : _c.hour) == null ? void 0 : _d.enable) && create_if_block_5$6(ctx)
    );
    let if_block3 = (
      /*timerConfig*/
      ((_f = (_e = ctx[0]) == null ? void 0 : _e.minute) == null ? void 0 : _f.enable) && create_if_block_3$b(ctx)
    );
    let if_block4 = (
      /*timerConfig*/
      ((_h = (_g = ctx[0]) == null ? void 0 : _g.second) == null ? void 0 : _h.enable) && create_if_block_1$m(ctx)
    );
    return {
      c() {
        div1 = element("div");
        if (if_block0)
          if_block0.c();
        t0 = space();
        div0 = element("div");
        if (if_block1)
          if_block1.c();
        t1 = space();
        if (if_block2)
          if_block2.c();
        t2 = space();
        if (if_block3)
          if_block3.c();
        t3 = space();
        if (if_block4)
          if_block4.c();
        attr(div0, "class", "timer svelte-1hle1vn");
        attr(div1, "class", "countdown-container svelte-1hle1vn");
        set_style(
          div1,
          "color",
          /*timerConfig*/
          ctx[0].textColor
        );
      },
      m(target, anchor) {
        insert(target, div1, anchor);
        if (if_block0)
          if_block0.m(div1, null);
        append(div1, t0);
        append(div1, div0);
        if (if_block1)
          if_block1.m(div0, null);
        append(div0, t1);
        if (if_block2)
          if_block2.m(div0, null);
        append(div0, t2);
        if (if_block3)
          if_block3.m(div0, null);
        append(div0, t3);
        if (if_block4)
          if_block4.m(div0, null);
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c2, _d2, _e2, _f2, _g2, _h2;
        if (
          /*timerConfig*/
          ctx2[0].text
        ) {
          if (if_block0) {
            if_block0.p(ctx2, dirty);
          } else {
            if_block0 = create_if_block_8$5(ctx2);
            if_block0.c();
            if_block0.m(div1, t0);
          }
        } else if (if_block0) {
          if_block0.d(1);
          if_block0 = null;
        }
        if (
          /*timerConfig*/
          (_b2 = (_a2 = ctx2[0]) == null ? void 0 : _a2.day) == null ? void 0 : _b2.enable
        ) {
          if (if_block1) {
            if_block1.p(ctx2, dirty);
          } else {
            if_block1 = create_if_block_7$5(ctx2);
            if_block1.c();
            if_block1.m(div0, t1);
          }
        } else if (if_block1) {
          if_block1.d(1);
          if_block1 = null;
        }
        if (
          /*timerConfig*/
          (_d2 = (_c2 = ctx2[0]) == null ? void 0 : _c2.hour) == null ? void 0 : _d2.enable
        ) {
          if (if_block2) {
            if_block2.p(ctx2, dirty);
          } else {
            if_block2 = create_if_block_5$6(ctx2);
            if_block2.c();
            if_block2.m(div0, t2);
          }
        } else if (if_block2) {
          if_block2.d(1);
          if_block2 = null;
        }
        if (
          /*timerConfig*/
          (_f2 = (_e2 = ctx2[0]) == null ? void 0 : _e2.minute) == null ? void 0 : _f2.enable
        ) {
          if (if_block3) {
            if_block3.p(ctx2, dirty);
          } else {
            if_block3 = create_if_block_3$b(ctx2);
            if_block3.c();
            if_block3.m(div0, t3);
          }
        } else if (if_block3) {
          if_block3.d(1);
          if_block3 = null;
        }
        if (
          /*timerConfig*/
          (_h2 = (_g2 = ctx2[0]) == null ? void 0 : _g2.second) == null ? void 0 : _h2.enable
        ) {
          if (if_block4) {
            if_block4.p(ctx2, dirty);
          } else {
            if_block4 = create_if_block_1$m(ctx2);
            if_block4.c();
            if_block4.m(div0, null);
          }
        } else if (if_block4) {
          if_block4.d(1);
          if_block4 = null;
        }
        if (dirty & /*timerConfig*/
        1) {
          set_style(
            div1,
            "color",
            /*timerConfig*/
            ctx2[0].textColor
          );
        }
      },
      d(detaching) {
        if (detaching) {
          detach(div1);
        }
        if (if_block0)
          if_block0.d();
        if (if_block1)
          if_block1.d();
        if (if_block2)
          if_block2.d();
        if (if_block3)
          if_block3.d();
        if (if_block4)
          if_block4.d();
      }
    };
  }
  function create_if_block_8$5(ctx) {
    let p;
    let raw_value = (
      /*timerConfig*/
      ctx[0].text + ""
    );
    return {
      c() {
        p = element("p");
        attr(p, "class", "timer-text svelte-1hle1vn");
      },
      m(target, anchor) {
        insert(target, p, anchor);
        p.innerHTML = raw_value;
      },
      p(ctx2, dirty) {
        if (dirty & /*timerConfig*/
        1 && raw_value !== (raw_value = /*timerConfig*/
        ctx2[0].text + ""))
          p.innerHTML = raw_value;
      },
      d(detaching) {
        if (detaching) {
          detach(p);
        }
      }
    };
  }
  function create_if_block_7$5(ctx) {
    let span;
    let t0;
    let t1;
    return {
      c() {
        span = element("span");
        t0 = text(
          /*days*/
          ctx[1]
        );
        t1 = text("d");
        attr(span, "class", "timer-block svelte-1hle1vn");
        attr(
          span,
          "style",
          /*timerStyle*/
          ctx[6]
        );
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t0);
        append(span, t1);
      },
      p(ctx2, dirty) {
        if (dirty & /*days*/
        2)
          set_data(
            t0,
            /*days*/
            ctx2[1]
          );
        if (dirty & /*timerStyle*/
        64) {
          attr(
            span,
            "style",
            /*timerStyle*/
            ctx2[6]
          );
        }
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_if_block_5$6(ctx) {
    var _a, _b;
    let t0;
    let span;
    let t1;
    let t2;
    let if_block = (
      /*timerConfig*/
      ((_b = (_a = ctx[0]) == null ? void 0 : _a.day) == null ? void 0 : _b.enable) && create_if_block_6$5(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        t0 = space();
        span = element("span");
        t1 = text(
          /*hours*/
          ctx[2]
        );
        t2 = text("h");
        attr(span, "class", "timer-block svelte-1hle1vn");
        attr(
          span,
          "style",
          /*timerStyle*/
          ctx[6]
        );
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, t0, anchor);
        insert(target, span, anchor);
        append(span, t1);
        append(span, t2);
      },
      p(ctx2, dirty) {
        var _a2, _b2;
        if (
          /*timerConfig*/
          (_b2 = (_a2 = ctx2[0]) == null ? void 0 : _a2.day) == null ? void 0 : _b2.enable
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block_6$5(ctx2);
            if_block.c();
            if_block.m(t0.parentNode, t0);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
        if (dirty & /*hours*/
        4)
          set_data(
            t1,
            /*hours*/
            ctx2[2]
          );
        if (dirty & /*timerStyle*/
        64) {
          attr(
            span,
            "style",
            /*timerStyle*/
            ctx2[6]
          );
        }
      },
      d(detaching) {
        if (detaching) {
          detach(t0);
          detach(span);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function create_if_block_6$5(ctx) {
    let span;
    let t;
    return {
      c() {
        span = element("span");
        t = text(":");
        attr(span, "class", "separator svelte-1hle1vn");
        set_style(
          span,
          "color",
          /*timerConfig*/
          ctx[0].textColor
        );
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t);
      },
      p(ctx2, dirty) {
        if (dirty & /*timerConfig*/
        1) {
          set_style(
            span,
            "color",
            /*timerConfig*/
            ctx2[0].textColor
          );
        }
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_if_block_3$b(ctx) {
    var _a, _b;
    let t0;
    let span;
    let t1;
    let t2;
    let if_block = (
      /*timerConfig*/
      ((_b = (_a = ctx[0]) == null ? void 0 : _a.hour) == null ? void 0 : _b.enable) && create_if_block_4$6(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        t0 = space();
        span = element("span");
        t1 = text(
          /*minutes*/
          ctx[3]
        );
        t2 = text("m");
        attr(span, "class", "timer-block svelte-1hle1vn");
        attr(
          span,
          "style",
          /*timerStyle*/
          ctx[6]
        );
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, t0, anchor);
        insert(target, span, anchor);
        append(span, t1);
        append(span, t2);
      },
      p(ctx2, dirty) {
        var _a2, _b2;
        if (
          /*timerConfig*/
          (_b2 = (_a2 = ctx2[0]) == null ? void 0 : _a2.hour) == null ? void 0 : _b2.enable
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block_4$6(ctx2);
            if_block.c();
            if_block.m(t0.parentNode, t0);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
        if (dirty & /*minutes*/
        8)
          set_data(
            t1,
            /*minutes*/
            ctx2[3]
          );
        if (dirty & /*timerStyle*/
        64) {
          attr(
            span,
            "style",
            /*timerStyle*/
            ctx2[6]
          );
        }
      },
      d(detaching) {
        if (detaching) {
          detach(t0);
          detach(span);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function create_if_block_4$6(ctx) {
    let span;
    let t;
    return {
      c() {
        span = element("span");
        t = text(":");
        attr(span, "class", "separator svelte-1hle1vn");
        set_style(
          span,
          "color",
          /*timerConfig*/
          ctx[0].textColor
        );
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t);
      },
      p(ctx2, dirty) {
        if (dirty & /*timerConfig*/
        1) {
          set_style(
            span,
            "color",
            /*timerConfig*/
            ctx2[0].textColor
          );
        }
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_if_block_1$m(ctx) {
    var _a, _b;
    let t0;
    let span;
    let t1;
    let t2;
    let if_block = (
      /*timerConfig*/
      ((_b = (_a = ctx[0]) == null ? void 0 : _a.minute) == null ? void 0 : _b.enable) && create_if_block_2$g(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        t0 = space();
        span = element("span");
        t1 = text(
          /*seconds*/
          ctx[4]
        );
        t2 = text("s");
        attr(span, "class", "timer-block svelte-1hle1vn");
        attr(
          span,
          "style",
          /*timerStyle*/
          ctx[6]
        );
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, t0, anchor);
        insert(target, span, anchor);
        append(span, t1);
        append(span, t2);
      },
      p(ctx2, dirty) {
        var _a2, _b2;
        if (
          /*timerConfig*/
          (_b2 = (_a2 = ctx2[0]) == null ? void 0 : _a2.minute) == null ? void 0 : _b2.enable
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block_2$g(ctx2);
            if_block.c();
            if_block.m(t0.parentNode, t0);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
        if (dirty & /*seconds*/
        16)
          set_data(
            t1,
            /*seconds*/
            ctx2[4]
          );
        if (dirty & /*timerStyle*/
        64) {
          attr(
            span,
            "style",
            /*timerStyle*/
            ctx2[6]
          );
        }
      },
      d(detaching) {
        if (detaching) {
          detach(t0);
          detach(span);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function create_if_block_2$g(ctx) {
    let span;
    let t;
    return {
      c() {
        span = element("span");
        t = text(":");
        attr(span, "class", "separator svelte-1hle1vn");
        set_style(
          span,
          "color",
          /*timerConfig*/
          ctx[0].textColor
        );
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t);
      },
      p(ctx2, dirty) {
        if (dirty & /*timerConfig*/
        1) {
          set_style(
            span,
            "color",
            /*timerConfig*/
            ctx2[0].textColor
          );
        }
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_fragment$B(ctx) {
    var _a;
    let if_block_anchor;
    let if_block = (
      /*timerConfig*/
      ((_a = ctx[0]) == null ? void 0 : _a.enable) && /*showTimer*/
      ctx[5] && create_if_block$s(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
      },
      p(ctx2, [dirty]) {
        var _a2;
        if (
          /*timerConfig*/
          ((_a2 = ctx2[0]) == null ? void 0 : _a2.enable) && /*showTimer*/
          ctx2[5]
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block$s(ctx2);
            if_block.c();
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  let urgencyTimerSessionKey = "gokwik_urgency_timer";
  let urgencyTimerConfigSessionKey = "gokwik_urgency_timer_config";
  function getUrgencyTimerFromSession() {
    try {
      const saved = sessionStorage.getItem(urgencyTimerSessionKey);
      if (saved) {
        const parsed = JSON.parse(saved);
        const now2 = Date.now();
        if (parsed.timestamp && now2 - parsed.timestamp < 24 * 60 * 60 * 1e3) {
          return parsed;
        }
      }
    } catch (error) {
      console.warn("Error reading urgency timer from session:", error);
    }
    return null;
  }
  function saveUrgencyTimerToSession(d, h, m, s) {
    try {
      const timerData = {
        days: d,
        hours: h,
        minutes: m,
        seconds: s,
        timestamp: Date.now()
      };
      sessionStorage.setItem(urgencyTimerSessionKey, JSON.stringify(timerData));
    } catch (error) {
      console.warn("Error saving urgency timer to session:", error);
    }
  }
  function instance$B($$self, $$props, $$invalidate) {
    const defaultTimerConfig = {
      enable: false,
      day: { enable: false, value: 0 },
      hour: { enable: false, value: 0 },
      minute: { enable: false, value: 0 },
      second: { enable: false, value: 0 },
      text: "",
      bgColor: "transparent",
      textColor: "black",
      actionAfterTimeout: "REMOVE_TIMER",
      type: "URGENCY"
    };
    let timerConfig;
    let days = 0;
    let hours = 0;
    let minutes = 0;
    let seconds = 0;
    let interval;
    let showTimer = true;
    let fontSize = "11px";
    let timerStyle = "";
    const unsubscribe = store_configurations.subscribe((config) => {
      var _a;
      const newConfig = ((_a = config == null ? void 0 : config.appearance) == null ? void 0 : _a.scarcityTimer) ?? defaultTimerConfig;
      const savedConfigStr = sessionStorage.getItem(urgencyTimerConfigSessionKey);
      if (savedConfigStr && newConfig.type === "URGENCY") {
        if (savedConfigStr !== JSON.stringify(newConfig)) {
          try {
            sessionStorage.removeItem(urgencyTimerSessionKey);
            sessionStorage.removeItem(urgencyTimerConfigSessionKey);
          } catch (e) {
            console.warn("Error clearing urgency timer from session:", e);
          }
        }
      }
      $$invalidate(0, timerConfig = newConfig);
      if (!timerConfig.actionAfterTimeout && timerConfig.type === "URGENCY") {
        $$invalidate(0, timerConfig.actionAfterTimeout = "REMOVE_TIMER", timerConfig);
      }
      if (!(timerConfig == null ? void 0 : timerConfig.type)) {
        $$invalidate(0, timerConfig.type = "URGENCY", timerConfig);
      }
      $$invalidate(6, timerStyle = getStyleObject2(timerConfig));
      extractFontSize();
      resetTimer();
    });
    function extractFontSize() {
      var _a;
      const match = (_a = timerConfig == null ? void 0 : timerConfig.text) == null ? void 0 : _a.match(/font-size:\s?(\d+)px/);
      if (match && match[1]) {
        fontSize = `${parseInt(match[1]) - 1}px`;
      }
    }
    function resetTimer() {
      var _a, _b, _c, _d, _e, _f, _g, _h;
      if (timerConfig == null ? void 0 : timerConfig.enable) {
        if (timerConfig.type === "URGENCY") {
          const savedTimer = getUrgencyTimerFromSession();
          if (savedTimer) {
            const now2 = Date.now();
            const elapsedSeconds = Math.floor((now2 - savedTimer.timestamp) / 1e3);
            let totalSeconds = savedTimer.days * 24 * 60 * 60 + savedTimer.hours * 60 * 60 + savedTimer.minutes * 60 + savedTimer.seconds;
            totalSeconds -= elapsedSeconds;
            if (totalSeconds <= 0) {
              $$invalidate(1, days = 0);
              $$invalidate(2, hours = 0);
              $$invalidate(3, minutes = 0);
              $$invalidate(4, seconds = 0);
            } else {
              $$invalidate(1, days = Math.floor(totalSeconds / (24 * 60 * 60)));
              totalSeconds %= 24 * 60 * 60;
              $$invalidate(2, hours = Math.floor(totalSeconds / (60 * 60)));
              totalSeconds %= 60 * 60;
              $$invalidate(3, minutes = Math.floor(totalSeconds / 60));
              $$invalidate(4, seconds = totalSeconds % 60);
            }
          } else {
            $$invalidate(1, days = ((_a = timerConfig == null ? void 0 : timerConfig.day) == null ? void 0 : _a.enable) && ((_b = timerConfig == null ? void 0 : timerConfig.day) == null ? void 0 : _b.value) || 0);
            $$invalidate(2, hours = ((_c = timerConfig == null ? void 0 : timerConfig.hour) == null ? void 0 : _c.enable) && ((_d = timerConfig == null ? void 0 : timerConfig.hour) == null ? void 0 : _d.value) || 0);
            $$invalidate(3, minutes = ((_e = timerConfig == null ? void 0 : timerConfig.minute) == null ? void 0 : _e.enable) && ((_f = timerConfig == null ? void 0 : timerConfig.minute) == null ? void 0 : _f.value) || 0);
            $$invalidate(4, seconds = ((_g = timerConfig == null ? void 0 : timerConfig.second) == null ? void 0 : _g.enable) && ((_h = timerConfig == null ? void 0 : timerConfig.second) == null ? void 0 : _h.value) || 0);
            saveUrgencyTimerToSession(days, hours, minutes, seconds);
            try {
              sessionStorage.setItem(urgencyTimerConfigSessionKey, JSON.stringify(timerConfig));
            } catch (e) {
              console.warn("Error saving urgency timer config to session:", e);
            }
          }
        } else if (timerConfig.type === "SALE") {
          const timeRemaining = calculateSalesTimeRemaining();
          if (timeRemaining) {
            $$invalidate(1, days = timeRemaining.days);
            $$invalidate(2, hours = timeRemaining.hours);
            $$invalidate(3, minutes = timeRemaining.minutes);
            $$invalidate(4, seconds = timeRemaining.seconds);
          } else {
            $$invalidate(5, showTimer = false);
            return;
          }
        }
        $$invalidate(5, showTimer = true);
      } else {
        $$invalidate(5, showTimer = false);
      }
    }
    function calculateSalesTimeRemaining() {
      var _a, _b;
      if (!((_a = timerConfig == null ? void 0 : timerConfig.salesTimer) == null ? void 0 : _a.startTime) || !((_b = timerConfig == null ? void 0 : timerConfig.salesTimer) == null ? void 0 : _b.endTime)) {
        return null;
      }
      const now2 = /* @__PURE__ */ (/* @__PURE__ */ new Date()).getTime();
      const startTime = new Date(timerConfig.salesTimer.startTime).getTime();
      const endTime = new Date(timerConfig.salesTimer.endTime).getTime();
      if (isNaN(startTime) || isNaN(endTime)) {
        return null;
      }
      if (now2 < startTime) {
        return null;
      }
      if (now2 >= endTime) {
        return null;
      }
      const remainingMs = endTime - now2;
      const days2 = Math.floor(remainingMs / (1e3 * 60 * 60 * 24));
      const hours2 = Math.floor(remainingMs % (1e3 * 60 * 60 * 24) / (1e3 * 60 * 60));
      const minutes2 = Math.floor(remainingMs % (1e3 * 60 * 60) / (1e3 * 60));
      const seconds2 = Math.floor(remainingMs % (1e3 * 60) / 1e3);
      return {
        days: days2,
        hours: hours2,
        minutes: minutes2,
        seconds: seconds2
      };
    }
    function updateTimer() {
      var _a, _b, _c;
      if (timerConfig.type === "SALE") {
        const timeRemaining = calculateSalesTimeRemaining();
        if (timeRemaining) {
          $$invalidate(1, days = timeRemaining.days);
          $$invalidate(2, hours = timeRemaining.hours);
          $$invalidate(3, minutes = timeRemaining.minutes);
          $$invalidate(4, seconds = timeRemaining.seconds);
        } else {
          $$invalidate(5, showTimer = false);
          clearInterval(interval);
          return;
        }
      } else {
        if (seconds > 0) {
          $$invalidate(4, seconds--, seconds);
        } else if (minutes > 0) {
          $$invalidate(3, minutes--, minutes);
          $$invalidate(4, seconds = 59);
        } else if (hours > 0) {
          $$invalidate(2, hours--, hours);
          $$invalidate(3, minutes = 59);
          $$invalidate(4, seconds = 59);
        } else if (days > 0) {
          $$invalidate(1, days--, days);
          $$invalidate(2, hours = ((_a = timerConfig == null ? void 0 : timerConfig.hour) == null ? void 0 : _a.enable) && 23 || 0);
          $$invalidate(3, minutes = ((_b = timerConfig == null ? void 0 : timerConfig.minute) == null ? void 0 : _b.enable) && 59 || 0);
          $$invalidate(4, seconds = ((_c = timerConfig == null ? void 0 : timerConfig.second) == null ? void 0 : _c.enable) && 59 || 0);
        }
        if (timerConfig.type === "URGENCY") {
          saveUrgencyTimerToSession(days, hours, minutes, seconds);
        }
      }
    }
    onMount(() => {
      if (!(timerConfig == null ? void 0 : timerConfig.enable))
        return;
      interval = window.setInterval(
        () => {
          if (days === 0 && hours === 0 && minutes === 0 && seconds === 0) {
            if (timerConfig.type === "URGENCY" && timerConfig.actionAfterTimeout === "RESTART_TIMER") {
              try {
                sessionStorage.removeItem(urgencyTimerSessionKey);
                sessionStorage.removeItem(urgencyTimerConfigSessionKey);
              } catch (error) {
                console.warn("Error clearing urgency timer from session:", error);
              }
              resetTimer();
            } else {
              $$invalidate(5, showTimer = false);
              clearInterval(interval);
              if (timerConfig.type === "URGENCY") {
                try {
                  sessionStorage.removeItem(urgencyTimerSessionKey);
                  sessionStorage.removeItem(urgencyTimerConfigSessionKey);
                } catch (error) {
                  console.warn("Error clearing urgency timer from session:", error);
                }
              }
              return;
            }
          }
          updateTimer();
        },
        1e3
      );
      return () => {
        clearInterval(interval);
        unsubscribe && unsubscribe();
      };
    });
    function getStyleObject2(timerConfig2) {
      return `
            background-color: ${timerConfig2 == null ? void 0 : timerConfig2.bgColor};
            border-color: ${timerConfig2 == null ? void 0 : timerConfig2.textColor};
            color: ${timerConfig2 == null ? void 0 : timerConfig2.textColor};
            font-size: ${fontSize}; 
        `;
    }
    return [timerConfig, days, hours, minutes, seconds, showTimer, timerStyle];
  }
  class CountdowmTimer extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$B, create_fragment$B, safe_not_equal, {}, add_css$x);
    }
  }
  function add_css$w(target) {
    append_styles(target, "svelte-emickb", ".offer-popup.svelte-emickb.svelte-emickb{margin-bottom:10px}.promotion-banner.svelte-emickb.svelte-emickb{background:#f7e6d2;border-radius:0px 0px 15px 15px;font-size:12px;padding:5px 10px;color:#000;text-align:center;display:flex;justify-content:space-between;align-items:center}.promotion-banner.svelte-emickb .banner-content.svelte-emickb{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:2px;transition:opacity 0.3s ease-in-out, transform 0.3s ease-in-out;opacity:1;transform:translateX(0);margin:0 auto}.promotion-banner.svelte-emickb .banner-content.transitioning.svelte-emickb{opacity:0}.promotion-banner.svelte-emickb .banner-content.transitioning.slide-next.svelte-emickb{transform:translateX(-20px)}.promotion-banner.svelte-emickb .banner-content.transitioning.slide-prev.svelte-emickb{transform:translateX(20px)}.promotion-banner.svelte-emickb .banner-content:not(.transitioning).slide-next.svelte-emickb{animation:svelte-emickb-slideInFromRight 0.3s ease-in-out}.promotion-banner.svelte-emickb .banner-content:not(.transitioning).slide-prev.svelte-emickb{animation:svelte-emickb-slideInFromLeft 0.3s ease-in-out}.promotion-banner.svelte-emickb .banner-content p.svelte-emickb{font-weight:500;font-size:12px;margin:0;line-height:1.5}.promotion-banner.svelte-emickb .banner-content p.svelte-emickb:first-child{font-weight:700;font-family:var(--heading-font-family) !important;font-size:15px}.promotion-banner.svelte-emickb .arrow.svelte-emickb{background:transparent;border:none;cursor:pointer;padding:0 5px;display:flex;align-items:center;justify-content:center;font-size:24px;color:#000}@keyframes svelte-emickb-slideInFromRight{from{transform:translateX(20px);opacity:0}to{transform:translateX(0);opacity:1}}@keyframes svelte-emickb-slideInFromLeft{from{transform:translateX(-20px);opacity:0}to{transform:translateX(0);opacity:1}}");
  }
  function create_if_block$r(ctx) {
    var _a, _b, _c, _d;
    let div;
    let t0;
    let previous_key = (
      /*currentBannerIndex*/
      ctx[4]
    );
    let t1;
    let div_style_value;
    let div_class_value;
    let current;
    let if_block0 = (
      /*announcementBarConfigs*/
      ctx[0].dynamicBannerEnabled && /*announcementBarConfigs*/
      ((_a = ctx[0]) == null ? void 0 : _a.dynamicBanners) && /*announcementBarConfigs*/
      ((_b = ctx[0].dynamicBanners) == null ? void 0 : _b.length) > 1 && create_if_block_3$a(ctx)
    );
    let key_block = create_key_block$3(ctx);
    let if_block1 = (
      /*announcementBarConfigs*/
      ctx[0].dynamicBannerEnabled && /*announcementBarConfigs*/
      ((_c = ctx[0]) == null ? void 0 : _c.dynamicBanners) && /*announcementBarConfigs*/
      ((_d = ctx[0].dynamicBanners) == null ? void 0 : _d.length) > 1 && create_if_block_1$l(ctx)
    );
    return {
      c() {
        div = element("div");
        if (if_block0)
          if_block0.c();
        t0 = space();
        key_block.c();
        t1 = space();
        if (if_block1)
          if_block1.c();
        attr(div, "style", div_style_value = getStyleObject(
          /*announcementBarConfigs*/
          ctx[0]
        ));
        attr(div, "class", div_class_value = "promotion-banner " + /*offerPopup*/
        (ctx[2] && "offer-popup") + " svelte-emickb");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        if (if_block0)
          if_block0.m(div, null);
        append(div, t0);
        key_block.m(div, null);
        append(div, t1);
        if (if_block1)
          if_block1.m(div, null);
        current = true;
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c2, _d2;
        if (
          /*announcementBarConfigs*/
          ctx2[0].dynamicBannerEnabled && /*announcementBarConfigs*/
          ((_a2 = ctx2[0]) == null ? void 0 : _a2.dynamicBanners) && /*announcementBarConfigs*/
          ((_b2 = ctx2[0].dynamicBanners) == null ? void 0 : _b2.length) > 1
        ) {
          if (if_block0) {
            if_block0.p(ctx2, dirty);
            if (dirty & /*announcementBarConfigs*/
            1) {
              transition_in(if_block0, 1);
            }
          } else {
            if_block0 = create_if_block_3$a(ctx2);
            if_block0.c();
            transition_in(if_block0, 1);
            if_block0.m(div, t0);
          }
        } else if (if_block0) {
          group_outros();
          transition_out(if_block0, 1, 1, () => {
            if_block0 = null;
          });
          check_outros();
        }
        if (dirty & /*currentBannerIndex*/
        16 && safe_not_equal(previous_key, previous_key = /*currentBannerIndex*/
        ctx2[4])) {
          key_block.d(1);
          key_block = create_key_block$3(ctx2);
          key_block.c();
          key_block.m(div, t1);
        } else {
          key_block.p(ctx2, dirty);
        }
        if (
          /*announcementBarConfigs*/
          ctx2[0].dynamicBannerEnabled && /*announcementBarConfigs*/
          ((_c2 = ctx2[0]) == null ? void 0 : _c2.dynamicBanners) && /*announcementBarConfigs*/
          ((_d2 = ctx2[0].dynamicBanners) == null ? void 0 : _d2.length) > 1
        ) {
          if (if_block1) {
            if_block1.p(ctx2, dirty);
            if (dirty & /*announcementBarConfigs*/
            1) {
              transition_in(if_block1, 1);
            }
          } else {
            if_block1 = create_if_block_1$l(ctx2);
            if_block1.c();
            transition_in(if_block1, 1);
            if_block1.m(div, null);
          }
        } else if (if_block1) {
          group_outros();
          transition_out(if_block1, 1, 1, () => {
            if_block1 = null;
          });
          check_outros();
        }
        if (!current || dirty & /*announcementBarConfigs*/
        1 && div_style_value !== (div_style_value = getStyleObject(
          /*announcementBarConfigs*/
          ctx2[0]
        ))) {
          attr(div, "style", div_style_value);
        }
        if (!current || dirty & /*offerPopup*/
        4 && div_class_value !== (div_class_value = "promotion-banner " + /*offerPopup*/
        (ctx2[2] && "offer-popup") + " svelte-emickb")) {
          attr(div, "class", div_class_value);
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block0);
        transition_in(if_block1);
        current = true;
      },
      o(local) {
        transition_out(if_block0);
        transition_out(if_block1);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        if (if_block0)
          if_block0.d();
        key_block.d(detaching);
        if (if_block1)
          if_block1.d();
      }
    };
  }
  function create_if_block_3$a(ctx) {
    let button;
    let icon;
    let current;
    let mounted;
    let dispose;
    icon = new Icon({ props: { icon: "mdi:chevron-left" } });
    return {
      c() {
        button = element("button");
        create_component(icon.$$.fragment);
        attr(button, "class", "arrow left svelte-emickb");
      },
      m(target, anchor) {
        insert(target, button, anchor);
        mount_component(icon, button, null);
        current = true;
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*prevBanner*/
            ctx[9]
          );
          mounted = true;
        }
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        destroy_component(icon);
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block_2$f(ctx) {
    var _a;
    let p;
    let raw_value = (
      /*selectedBanner*/
      ((_a = ctx[3].subText) == null ? void 0 : _a.trim()) + ""
    );
    return {
      c() {
        p = element("p");
        attr(p, "class", "svelte-emickb");
      },
      m(target, anchor) {
        insert(target, p, anchor);
        p.innerHTML = raw_value;
      },
      p(ctx2, dirty) {
        var _a2;
        if (dirty & /*selectedBanner*/
        8 && raw_value !== (raw_value = /*selectedBanner*/
        ((_a2 = ctx2[3].subText) == null ? void 0 : _a2.trim()) + ""))
          p.innerHTML = raw_value;
      },
      d(detaching) {
        if (detaching) {
          detach(p);
        }
      }
    };
  }
  function create_key_block$3(ctx) {
    var _a;
    let div;
    let p;
    let raw_value = (
      /*selectedBanner*/
      ((_a = ctx[3].titleText) == null ? void 0 : _a.trim()) + ""
    );
    let t;
    let div_style_value;
    let div_class_value;
    let if_block = (
      /*selectedBanner*/
      ctx[3].subTextEnabled && create_if_block_2$f(ctx)
    );
    return {
      c() {
        var _a2;
        div = element("div");
        p = element("p");
        t = space();
        if (if_block)
          if_block.c();
        attr(p, "class", "svelte-emickb");
        attr(div, "style", div_style_value = `${/*announcementBarConfigs*/
        ((_a2 = ctx[0]) == null ? void 0 : _a2.dynamicBannerEnabled) ? `height: ${/*bannerHeight*/
        ctx[5]}` : ""}`);
        attr(div, "class", div_class_value = "banner-content " + /*isTransitioning*/
        (ctx[6] ? "transitioning" : "") + " " + /*transitionDirection*/
        (ctx[7] === "next" ? "slide-next" : (
          /*transitionDirection*/
          ctx[7] === "prev" ? "slide-prev" : ""
        )) + " svelte-emickb");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, p);
        p.innerHTML = raw_value;
        append(div, t);
        if (if_block)
          if_block.m(div, null);
        ctx[11](div);
      },
      p(ctx2, dirty) {
        var _a2, _b;
        if (dirty & /*selectedBanner*/
        8 && raw_value !== (raw_value = /*selectedBanner*/
        ((_a2 = ctx2[3].titleText) == null ? void 0 : _a2.trim()) + ""))
          p.innerHTML = raw_value;
        if (
          /*selectedBanner*/
          ctx2[3].subTextEnabled
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block_2$f(ctx2);
            if_block.c();
            if_block.m(div, null);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
        if (dirty & /*announcementBarConfigs, bannerHeight*/
        33 && div_style_value !== (div_style_value = `${/*announcementBarConfigs*/
        ((_b = ctx2[0]) == null ? void 0 : _b.dynamicBannerEnabled) ? `height: ${/*bannerHeight*/
        ctx2[5]}` : ""}`)) {
          attr(div, "style", div_style_value);
        }
        if (dirty & /*isTransitioning, transitionDirection*/
        192 && div_class_value !== (div_class_value = "banner-content " + /*isTransitioning*/
        (ctx2[6] ? "transitioning" : "") + " " + /*transitionDirection*/
        (ctx2[7] === "next" ? "slide-next" : (
          /*transitionDirection*/
          ctx2[7] === "prev" ? "slide-prev" : ""
        )) + " svelte-emickb")) {
          attr(div, "class", div_class_value);
        }
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        if (if_block)
          if_block.d();
        ctx[11](null);
      }
    };
  }
  function create_if_block_1$l(ctx) {
    let button;
    let icon;
    let current;
    let mounted;
    let dispose;
    icon = new Icon({ props: { icon: "mdi:chevron-right" } });
    return {
      c() {
        button = element("button");
        create_component(icon.$$.fragment);
        attr(button, "class", "arrow right svelte-emickb");
      },
      m(target, anchor) {
        insert(target, button, anchor);
        mount_component(icon, button, null);
        current = true;
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*nextBanner*/
            ctx[8]
          );
          mounted = true;
        }
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        destroy_component(icon);
        mounted = false;
        dispose();
      }
    };
  }
  function create_fragment$A(ctx) {
    var _a;
    let if_block_anchor;
    let current;
    let if_block = (
      /*selectedBanner*/
      ((_a = ctx[3]) == null ? void 0 : _a.titleText) && create_if_block$r(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, [dirty]) {
        var _a2;
        if (
          /*selectedBanner*/
          (_a2 = ctx2[3]) == null ? void 0 : _a2.titleText
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
            if (dirty & /*selectedBanner*/
            8) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block$r(ctx2);
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function instance$A($$self, $$props, $$invalidate) {
    let unsubOfferPopup, offerPopup, selectedBanner = {
      conditions: [],
      subText: "",
      subTextEnabled: false,
      titleText: ""
    }, announcementBarConfigs = {
      advancedConditionsEnabled: false,
      banners: [],
      dynamicBannerEnabled: false
    };
    let currentBannerIndex = 0;
    let intervalId;
    let bannerContentRef = null;
    let bannerHeight = "auto";
    let isBannerHeightMeasured = false;
    let isTransitioning = false;
    let transitionDirection = null;
    const measureBannerHeight = () => {
      var _a;
      if (!((_a = announcementBarConfigs == null ? void 0 : announcementBarConfigs.dynamicBanners) == null ? void 0 : _a.length) || !bannerContentRef)
        return;
      let maxHeight = 0;
      const gap = 2;
      announcementBarConfigs.dynamicBanners.forEach((banner) => {
        var _a2, _b, _c, _d, _e;
        let summedHeight = 0;
        const titleElement = document.createElement("p");
        titleElement.style.cssText = `
        position: absolute;
        visibility: hidden;
        top: -9999px;
        width: 320px;
        font-weight: 700;
        font-family: var(--heading-font-family);
        font-size: 15px;
        margin: 0;
        line-height: 1.5;
      `;
        titleElement.innerHTML = ((_a2 = banner == null ? void 0 : banner.titleText) == null ? void 0 : _a2.trim()) || "";
        if ((_b = titleElement == null ? void 0 : titleElement.children[0]) == null ? void 0 : _b.style) {
          titleElement.children[0].style.width = "320px";
        }
        document.body.appendChild(titleElement);
        summedHeight += titleElement.offsetHeight;
        document.body.removeChild(titleElement);
        if (banner.subTextEnabled && ((_c = banner == null ? void 0 : banner.subText) == null ? void 0 : _c.trim())) {
          const subTextElement = document.createElement("p");
          subTextElement.style.cssText = `
          position: absolute;
          visibility: hidden;
          top: -9999px;
          width: 320px;
          font-size: 12px;
          font-weight: 500;
          margin: 0;
          line-height: 1.5;
        `;
          subTextElement.innerHTML = ((_d = banner == null ? void 0 : banner.subText) == null ? void 0 : _d.trim()) || "";
          if ((_e = subTextElement == null ? void 0 : subTextElement.children[0]) == null ? void 0 : _e.style) {
            subTextElement.children[0].style.width = "320px";
          }
          document.body.appendChild(subTextElement);
          summedHeight += subTextElement.offsetHeight + gap;
          document.body.removeChild(subTextElement);
        }
        if (summedHeight > maxHeight) {
          maxHeight = summedHeight;
        }
      });
      $$invalidate(5, bannerHeight = `${maxHeight}px`);
      $$invalidate(10, isBannerHeightMeasured = true);
    };
    onMount(() => {
      unsubOfferPopup = store_offerPopup.subscribe((res) => $$invalidate(2, offerPopup = res));
      store_configurations.subscribe((res) => {
        var _a, _b, _c, _d;
        if (res == null ? void 0 : res.appearance) {
          $$invalidate(0, announcementBarConfigs = (_a = res == null ? void 0 : res.appearance) == null ? void 0 : _a.announcementBar);
          if ((_c = (_b = res == null ? void 0 : res.appearance) == null ? void 0 : _b.announcementBar) == null ? void 0 : _c.advancedConditionsEnabled) {
            store_cart.subscribe((res2) => {
              setBannerConfigs(announcementBarConfigs, {
                CART_QUANTITY: res2.item_count,
                CART_SUBTOTAL: res2.original_total_price / 100
              });
            });
          } else {
            setBannerConfigs((_d = res.appearance) == null ? void 0 : _d.announcementBar);
          }
        }
      });
    });
    onDestroy(() => {
      unsubOfferPopup && unsubOfferPopup();
      if (intervalId) {
        clearInterval(intervalId);
      }
    });
    const setBannerConfigs = (announcementBarConfigs2, context) => {
      var _a, _b;
      $$invalidate(3, selectedBanner = null);
      if (announcementBarConfigs2.enable) {
        if (announcementBarConfigs2.advancedConditionsEnabled) {
          (_a = announcementBarConfigs2.banners) == null ? void 0 : _a.forEach((banner) => {
            if (verifyAdvancedConditionsBanner(banner, context)) {
              $$invalidate(3, selectedBanner = banner);
            }
          });
        } else if (announcementBarConfigs2.dynamicBannerEnabled) {
          if ((announcementBarConfigs2 == null ? void 0 : announcementBarConfigs2.dynamicBanners) && ((_b = announcementBarConfigs2 == null ? void 0 : announcementBarConfigs2.dynamicBanners) == null ? void 0 : _b.length) > 0) {
            $$invalidate(3, selectedBanner = announcementBarConfigs2.dynamicBanners[currentBannerIndex]);
            if (announcementBarConfigs2.dynamicBanners.length > 1 && ((announcementBarConfigs2 == null ? void 0 : announcementBarConfigs2.autoChangeTime) || 0) > 0) {
              if (intervalId)
                clearInterval(intervalId);
              intervalId = setInterval(nextBanner, ((announcementBarConfigs2 == null ? void 0 : announcementBarConfigs2.autoChangeTime) || 1) * 1e3);
            }
          }
        } else {
          $$invalidate(3, selectedBanner = {
            subText: (announcementBarConfigs2 == null ? void 0 : announcementBarConfigs2.subText) || "",
            subTextEnabled: !!(announcementBarConfigs2 == null ? void 0 : announcementBarConfigs2.subTextEnabled),
            titleText: (announcementBarConfigs2 == null ? void 0 : announcementBarConfigs2.text) || ""
          });
        }
      }
    };
    const nextBanner = () => {
      var _a;
      if (!((_a = announcementBarConfigs == null ? void 0 : announcementBarConfigs.dynamicBanners) == null ? void 0 : _a.length) || isTransitioning)
        return;
      $$invalidate(6, isTransitioning = true);
      $$invalidate(7, transitionDirection = "next");
      setTimeout(
        () => {
          if (!(announcementBarConfigs == null ? void 0 : announcementBarConfigs.dynamicBanners)) {
            $$invalidate(6, isTransitioning = false);
            return;
          }
          $$invalidate(4, currentBannerIndex = (currentBannerIndex + 1) % announcementBarConfigs.dynamicBanners.length);
          $$invalidate(3, selectedBanner = announcementBarConfigs.dynamicBanners[currentBannerIndex]);
          setTimeout(
            () => {
              $$invalidate(6, isTransitioning = false);
            },
            300
          );
        },
        150
      );
    };
    const prevBanner = () => {
      var _a;
      if (!((_a = announcementBarConfigs == null ? void 0 : announcementBarConfigs.dynamicBanners) == null ? void 0 : _a.length) || isTransitioning)
        return;
      $$invalidate(6, isTransitioning = true);
      $$invalidate(7, transitionDirection = "prev");
      setTimeout(
        () => {
          if (!(announcementBarConfigs == null ? void 0 : announcementBarConfigs.dynamicBanners)) {
            $$invalidate(6, isTransitioning = false);
            return;
          }
          $$invalidate(4, currentBannerIndex = (currentBannerIndex - 1 + announcementBarConfigs.dynamicBanners.length) % announcementBarConfigs.dynamicBanners.length);
          $$invalidate(3, selectedBanner = announcementBarConfigs.dynamicBanners[currentBannerIndex]);
          setTimeout(
            () => {
              $$invalidate(6, isTransitioning = false);
            },
            300
          );
        },
        150
      );
    };
    function div_binding($$value) {
      binding_callbacks[$$value ? "unshift" : "push"](() => {
        bannerContentRef = $$value;
        $$invalidate(1, bannerContentRef);
      });
    }
    $$self.$$.update = () => {
      if ($$self.$$.dirty & /*bannerContentRef, isBannerHeightMeasured, announcementBarConfigs*/
      1027) {
        if (bannerContentRef && !isBannerHeightMeasured && (announcementBarConfigs == null ? void 0 : announcementBarConfigs.dynamicBannerEnabled)) {
          measureBannerHeight();
        }
      }
    };
    return [
      announcementBarConfigs,
      bannerContentRef,
      offerPopup,
      selectedBanner,
      currentBannerIndex,
      bannerHeight,
      isTransitioning,
      transitionDirection,
      nextBanner,
      prevBanner,
      isBannerHeightMeasured,
      div_binding
    ];
  }
  class PromotionBanner extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$A, create_fragment$A, safe_not_equal, {}, add_css$w);
    }
  }
  function add_css$v(target) {
    append_styles(target, "svelte-1cpywgq", ".side-cart-header.svelte-1cpywgq.svelte-1cpywgq{padding:10px 20px;display:flex;align-items:center;justify-content:space-between;font-weight:600;border-radius:0px 0px 15px 15px}.side-cart-header.svelte-1cpywgq p.svelte-1cpywgq{margin-bottom:0px;margin-top:0px;font-size:18px;font-weight:600}.side-cart-header.svelte-1cpywgq .close-btn.svelte-1cpywgq{height:20px;cursor:pointer}");
  }
  function create_else_block$c(ctx) {
    var _a, _b;
    let t0;
    let t1_value = (
      /*$store_cart*/
      (((_a = ctx[3]) == null ? void 0 : _a.item_count) + /*manualDiscount*/
      (((_b = ctx[1]) == null ? void 0 : _b.freeCount) || 0) || 0) + ""
    );
    let t1;
    let t2;
    return {
      c() {
        t0 = text("Your Cart (");
        t1 = text(t1_value);
        t2 = text("\n    items)");
      },
      m(target, anchor) {
        insert(target, t0, anchor);
        insert(target, t1, anchor);
        insert(target, t2, anchor);
      },
      p(ctx2, dirty) {
        var _a2, _b2;
        if (dirty & /*$store_cart, manualDiscount*/
        10 && t1_value !== (t1_value = /*$store_cart*/
        (((_a2 = ctx2[3]) == null ? void 0 : _a2.item_count) + /*manualDiscount*/
        (((_b2 = ctx2[1]) == null ? void 0 : _b2.freeCount) || 0) || 0) + ""))
          set_data(t1, t1_value);
      },
      d(detaching) {
        if (detaching) {
          detach(t0);
          detach(t1);
          detach(t2);
        }
      }
    };
  }
  function create_if_block_2$e(ctx) {
    let t;
    return {
      c() {
        t = text("Offers & Benefits");
      },
      m(target, anchor) {
        insert(target, t, anchor);
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(t);
        }
      }
    };
  }
  function create_if_block_1$k(ctx) {
    let timer;
    let current;
    timer = new CountdowmTimer({});
    return {
      c() {
        create_component(timer.$$.fragment);
      },
      m(target, anchor) {
        mount_component(timer, target, anchor);
        current = true;
      },
      i(local) {
        if (current)
          return;
        transition_in(timer.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(timer.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(timer, detaching);
      }
    };
  }
  function create_if_block$q(ctx) {
    let promotionbanner;
    let current;
    promotionbanner = new PromotionBanner({});
    return {
      c() {
        create_component(promotionbanner.$$.fragment);
      },
      m(target, anchor) {
        mount_component(promotionbanner, target, anchor);
        current = true;
      },
      i(local) {
        if (current)
          return;
        transition_in(promotionbanner.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(promotionbanner.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(promotionbanner, detaching);
      }
    };
  }
  function create_fragment$z(ctx) {
    var _a;
    let div1;
    let p;
    let t0;
    let div0;
    let t1;
    let t2;
    let if_block2_anchor;
    let current;
    let mounted;
    let dispose;
    function select_block_type(ctx2, dirty) {
      if (
        /*$store_offerPopup*/
        ctx2[2]
      )
        return create_if_block_2$e;
      return create_else_block$c;
    }
    let current_block_type = select_block_type(ctx);
    let if_block0 = current_block_type(ctx);
    let if_block1 = (
      /*cart*/
      ((_a = ctx[0]) == null ? void 0 : _a.item_count) && create_if_block_1$k()
    );
    let if_block2 = !/*$store_offerPopup*/
    ctx[2] && create_if_block$q();
    return {
      c() {
        div1 = element("div");
        p = element("p");
        if_block0.c();
        t0 = space();
        div0 = element("div");
        div0.innerHTML = `<img src="${close_btn}"/>`;
        t1 = space();
        if (if_block1)
          if_block1.c();
        t2 = space();
        if (if_block2)
          if_block2.c();
        if_block2_anchor = empty();
        attr(p, "class", "svelte-1cpywgq");
        attr(div0, "class", "close-btn svelte-1cpywgq");
        attr(div1, "class", "side-cart-header svelte-1cpywgq");
      },
      m(target, anchor) {
        insert(target, div1, anchor);
        append(div1, p);
        if_block0.m(p, null);
        append(div1, t0);
        append(div1, div0);
        insert(target, t1, anchor);
        if (if_block1)
          if_block1.m(target, anchor);
        insert(target, t2, anchor);
        if (if_block2)
          if_block2.m(target, anchor);
        insert(target, if_block2_anchor, anchor);
        current = true;
        if (!mounted) {
          dispose = listen(
            div0,
            "click",
            /*click_handler*/
            ctx[5]
          );
          mounted = true;
        }
      },
      p(ctx2, [dirty]) {
        var _a2;
        if (current_block_type === (current_block_type = select_block_type(ctx2)) && if_block0) {
          if_block0.p(ctx2, dirty);
        } else {
          if_block0.d(1);
          if_block0 = current_block_type(ctx2);
          if (if_block0) {
            if_block0.c();
            if_block0.m(p, null);
          }
        }
        if (
          /*cart*/
          (_a2 = ctx2[0]) == null ? void 0 : _a2.item_count
        ) {
          if (if_block1) {
            if (dirty & /*cart*/
            1) {
              transition_in(if_block1, 1);
            }
          } else {
            if_block1 = create_if_block_1$k();
            if_block1.c();
            transition_in(if_block1, 1);
            if_block1.m(t2.parentNode, t2);
          }
        } else if (if_block1) {
          group_outros();
          transition_out(if_block1, 1, 1, () => {
            if_block1 = null;
          });
          check_outros();
        }
        if (!/*$store_offerPopup*/
        ctx2[2]) {
          if (if_block2) {
            if (dirty & /*$store_offerPopup*/
            4) {
              transition_in(if_block2, 1);
            }
          } else {
            if_block2 = create_if_block$q();
            if_block2.c();
            transition_in(if_block2, 1);
            if_block2.m(if_block2_anchor.parentNode, if_block2_anchor);
          }
        } else if (if_block2) {
          group_outros();
          transition_out(if_block2, 1, 1, () => {
            if_block2 = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block1);
        transition_in(if_block2);
        current = true;
      },
      o(local) {
        transition_out(if_block1);
        transition_out(if_block2);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div1);
          detach(t1);
          detach(t2);
          detach(if_block2_anchor);
        }
        if_block0.d();
        if (if_block1)
          if_block1.d(detaching);
        if (if_block2)
          if_block2.d(detaching);
        mounted = false;
        dispose();
      }
    };
  }
  function instance$z($$self, $$props, $$invalidate) {
    let $store_offerPopup;
    let $store_cart;
    component_subscribe($$self, store_offerPopup, ($$value) => $$invalidate(2, $store_offerPopup = $$value));
    component_subscribe($$self, store_cart, ($$value) => $$invalidate(3, $store_cart = $$value));
    let cart2;
    onMount(() => {
      store_cart.subscribe((res) => {
        $$invalidate(0, cart2 = res);
      });
    });
    let manualDiscount2 = null;
    const handleCloseClick = () => {
      if ($store_offerPopup) {
        store_offerPopup.set(false);
        fireGokwikTrigger(TextConstants.eventNames.view_offers_closed, {});
        logEvent(TextConstants.eventNames.view_offers_closed, {});
      } else {
        window.closeGokwikSideCart(true);
      }
    };
    store_appliedManualDiscount.subscribe((res) => {
      $$invalidate(1, manualDiscount2 = res);
    });
    const click_handler2 = () => handleCloseClick();
    return [
      cart2,
      manualDiscount2,
      $store_offerPopup,
      $store_cart,
      handleCloseClick,
      click_handler2
    ];
  }
  class Header extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$z, create_fragment$z, safe_not_equal, {}, add_css$v);
    }
  }
  var module = {};
  (function main(global, module2, isWorker, workerSize) {
    var canUseWorker = !!(global.Worker && global.Blob && global.Promise && global.OffscreenCanvas && global.OffscreenCanvasRenderingContext2D && global.HTMLCanvasElement && global.HTMLCanvasElement.prototype.transferControlToOffscreen && global.URL && global.URL.createObjectURL);
    var canUsePaths = typeof Path2D === "function" && typeof DOMMatrix === "function";
    var canDrawBitmap = function() {
      if (!global.OffscreenCanvas) {
        return false;
      }
      try {
        var canvas = new OffscreenCanvas(1, 1);
        var ctx = canvas.getContext("2d");
        ctx.fillRect(0, 0, 1, 1);
        var bitmap = canvas.transferToImageBitmap();
        ctx.createPattern(bitmap, "no-repeat");
      } catch (e) {
        return false;
      }
      return true;
    }();
    function noop2() {
    }
    function promise2(func2) {
      var ModulePromise = module2.exports.Promise;
      var Prom = ModulePromise !== void 0 ? ModulePromise : global.Promise;
      if (typeof Prom === "function") {
        return new Prom(func2);
      }
      func2(noop2, noop2);
      return null;
    }
    var bitmapMapper = /* @__PURE__ */ function(skipTransform, map) {
      return {
        transform: function(bitmap) {
          if (skipTransform) {
            return bitmap;
          }
          if (map.has(bitmap)) {
            return map.get(bitmap);
          }
          var canvas = new OffscreenCanvas(bitmap.width, bitmap.height);
          var ctx = canvas.getContext("2d");
          ctx.drawImage(bitmap, 0, 0);
          map.set(bitmap, canvas);
          return canvas;
        },
        clear: function() {
          map.clear();
        }
      };
    }(canDrawBitmap, /* @__PURE__ */ new Map());
    var raf2 = function() {
      var TIME = Math.floor(1e3 / 60);
      var frame, cancel;
      var frames = {};
      var lastFrameTime = 0;
      if (typeof requestAnimationFrame === "function" && typeof cancelAnimationFrame === "function") {
        frame = function(cb) {
          var id = Math.random();
          frames[id] = requestAnimationFrame(function onFrame(time) {
            if (lastFrameTime === time || lastFrameTime + TIME - 1 < time) {
              lastFrameTime = time;
              delete frames[id];
              cb();
            } else {
              frames[id] = requestAnimationFrame(onFrame);
            }
          });
          return id;
        };
        cancel = function(id) {
          if (frames[id]) {
            cancelAnimationFrame(frames[id]);
          }
        };
      } else {
        frame = function(cb) {
          return setTimeout(cb, TIME);
        };
        cancel = function(timer) {
          return clearTimeout(timer);
        };
      }
      return { frame, cancel };
    }();
    var getWorker = /* @__PURE__ */ function() {
      var worker;
      var prom;
      var resolves = {};
      function decorate(worker2) {
        function execute(options, callback) {
          worker2.postMessage({ options: options || {}, callback });
        }
        worker2.init = function initWorker(canvas) {
          var offscreen = canvas.transferControlToOffscreen();
          worker2.postMessage({ canvas: offscreen }, [offscreen]);
        };
        worker2.fire = function fireWorker(options, size, done) {
          if (prom) {
            execute(options, null);
            return prom;
          }
          var id = Math.random().toString(36).slice(2);
          prom = promise2(function(resolve) {
            function workerDone(msg) {
              if (msg.data.callback !== id) {
                return;
              }
              delete resolves[id];
              worker2.removeEventListener("message", workerDone);
              prom = null;
              bitmapMapper.clear();
              done();
              resolve();
            }
            worker2.addEventListener("message", workerDone);
            execute(options, id);
            resolves[id] = workerDone.bind(null, { data: { callback: id } });
          });
          return prom;
        };
        worker2.reset = function resetWorker() {
          worker2.postMessage({ reset: true });
          for (var id in resolves) {
            resolves[id]();
            delete resolves[id];
          }
        };
      }
      return function() {
        if (worker) {
          return worker;
        }
        if (!isWorker && canUseWorker) {
          var code = [
            "var CONFETTI, SIZE = {}, module = {};",
            "(" + main.toString() + ")(this, module, true, SIZE);",
            "onmessage = function(msg) {",
            "  if (msg.data.options) {",
            "    CONFETTI(msg.data.options).then(function () {",
            "      if (msg.data.callback) {",
            "        postMessage({ callback: msg.data.callback });",
            "      }",
            "    });",
            "  } else if (msg.data.reset) {",
            "    CONFETTI && CONFETTI.reset();",
            "  } else if (msg.data.resize) {",
            "    SIZE.width = msg.data.resize.width;",
            "    SIZE.height = msg.data.resize.height;",
            "  } else if (msg.data.canvas) {",
            "    SIZE.width = msg.data.canvas.width;",
            "    SIZE.height = msg.data.canvas.height;",
            "    CONFETTI = module.exports.create(msg.data.canvas);",
            "  }",
            "}"
          ].join("\n");
          try {
            worker = new Worker(URL.createObjectURL(new Blob([code])));
          } catch (e) {
            typeof console !== "undefined" && typeof console.warn === "function" ? console.warn(" Could not load worker", e) : null;
            return null;
          }
          decorate(worker);
        }
        return worker;
      };
    }();
    var defaults = {
      particleCount: 50,
      angle: 90,
      spread: 45,
      startVelocity: 45,
      decay: 0.9,
      gravity: 1,
      drift: 0,
      ticks: 200,
      x: 0.5,
      y: 0.5,
      shapes: ["square", "circle"],
      zIndex: 100,
      colors: [
        "#26ccff",
        "#a25afd",
        "#ff5e7e",
        "#88ff5a",
        "#fcff42",
        "#ffa62d",
        "#ff36ff"
      ],
      // probably should be true, but back-compat
      disableForReducedMotion: false,
      scalar: 1
    };
    function convert(val, transform) {
      return transform ? transform(val) : val;
    }
    function isOk(val) {
      return !(val === null || val === void 0);
    }
    function prop(options, name, transform) {
      return convert(
        options && isOk(options[name]) ? options[name] : defaults[name],
        transform
      );
    }
    function onlyPositiveInt(number) {
      return number < 0 ? 0 : Math.floor(number);
    }
    function randomInt(min, max) {
      return Math.floor(Math.random() * (max - min)) + min;
    }
    function toDecimal(str) {
      return parseInt(str, 16);
    }
    function colorsToRgb(colors) {
      return colors.map(hexToRgb);
    }
    function hexToRgb(str) {
      var val = String(str).replace(/[^0-9a-f]/gi, "");
      if (val.length < 6) {
        val = val[0] + val[0] + val[1] + val[1] + val[2] + val[2];
      }
      return {
        r: toDecimal(val.substring(0, 2)),
        g: toDecimal(val.substring(2, 4)),
        b: toDecimal(val.substring(4, 6))
      };
    }
    function getOrigin(options) {
      var origin = prop(options, "origin", Object);
      origin.x = prop(origin, "x", Number);
      origin.y = prop(origin, "y", Number);
      return origin;
    }
    function setCanvasWindowSize(canvas) {
      canvas.width = document.documentElement.clientWidth;
      canvas.height = document.documentElement.clientHeight;
    }
    function setCanvasRectSize(canvas) {
      var rect = canvas.getBoundingClientRect();
      canvas.width = rect.width;
      canvas.height = rect.height;
    }
    function getCanvas(zIndex) {
      var canvas = document.createElement("canvas");
      canvas.style.position = "fixed";
      canvas.style.top = "0px";
      canvas.style.left = "0px";
      canvas.style.pointerEvents = "none";
      canvas.style.zIndex = zIndex;
      return canvas;
    }
    function ellipse(context, x, y, radiusX, radiusY, rotation, startAngle, endAngle, antiClockwise) {
      context.save();
      context.translate(x, y);
      context.rotate(rotation);
      context.scale(radiusX, radiusY);
      context.arc(0, 0, 1, startAngle, endAngle, antiClockwise);
      context.restore();
    }
    function randomPhysics(opts) {
      var radAngle = opts.angle * (Math.PI / 180);
      var radSpread = opts.spread * (Math.PI / 180);
      return {
        x: opts.x,
        y: opts.y,
        wobble: Math.random() * 10,
        wobbleSpeed: Math.min(0.11, Math.random() * 0.1 + 0.05),
        velocity: opts.startVelocity * 0.5 + Math.random() * opts.startVelocity,
        angle2D: -radAngle + (0.5 * radSpread - Math.random() * radSpread),
        tiltAngle: (Math.random() * (0.75 - 0.25) + 0.25) * Math.PI,
        color: opts.color,
        shape: opts.shape,
        tick: 0,
        totalTicks: opts.ticks,
        decay: opts.decay,
        drift: opts.drift,
        random: Math.random() + 2,
        tiltSin: 0,
        tiltCos: 0,
        wobbleX: 0,
        wobbleY: 0,
        gravity: opts.gravity * 3,
        ovalScalar: 0.6,
        scalar: opts.scalar,
        flat: opts.flat
      };
    }
    function updateFetti(context, fetti) {
      fetti.x += Math.cos(fetti.angle2D) * fetti.velocity + fetti.drift;
      fetti.y += Math.sin(fetti.angle2D) * fetti.velocity + fetti.gravity;
      fetti.velocity *= fetti.decay;
      if (fetti.flat) {
        fetti.wobble = 0;
        fetti.wobbleX = fetti.x + 10 * fetti.scalar;
        fetti.wobbleY = fetti.y + 10 * fetti.scalar;
        fetti.tiltSin = 0;
        fetti.tiltCos = 0;
        fetti.random = 1;
      } else {
        fetti.wobble += fetti.wobbleSpeed;
        fetti.wobbleX = fetti.x + 10 * fetti.scalar * Math.cos(fetti.wobble);
        fetti.wobbleY = fetti.y + 10 * fetti.scalar * Math.sin(fetti.wobble);
        fetti.tiltAngle += 0.1;
        fetti.tiltSin = Math.sin(fetti.tiltAngle);
        fetti.tiltCos = Math.cos(fetti.tiltAngle);
        fetti.random = Math.random() + 2;
      }
      var progress = fetti.tick++ / fetti.totalTicks;
      var x1 = fetti.x + fetti.random * fetti.tiltCos;
      var y1 = fetti.y + fetti.random * fetti.tiltSin;
      var x2 = fetti.wobbleX + fetti.random * fetti.tiltCos;
      var y2 = fetti.wobbleY + fetti.random * fetti.tiltSin;
      context.fillStyle = "rgba(" + fetti.color.r + ", " + fetti.color.g + ", " + fetti.color.b + ", " + (1 - progress) + ")";
      context.beginPath();
      if (canUsePaths && fetti.shape.type === "path" && typeof fetti.shape.path === "string" && Array.isArray(fetti.shape.matrix)) {
        context.fill(transformPath2D(
          fetti.shape.path,
          fetti.shape.matrix,
          fetti.x,
          fetti.y,
          Math.abs(x2 - x1) * 0.1,
          Math.abs(y2 - y1) * 0.1,
          Math.PI / 10 * fetti.wobble
        ));
      } else if (fetti.shape.type === "bitmap") {
        var rotation = Math.PI / 10 * fetti.wobble;
        var scaleX = Math.abs(x2 - x1) * 0.1;
        var scaleY = Math.abs(y2 - y1) * 0.1;
        var width = fetti.shape.bitmap.width * fetti.scalar;
        var height = fetti.shape.bitmap.height * fetti.scalar;
        var matrix = new DOMMatrix([
          Math.cos(rotation) * scaleX,
          Math.sin(rotation) * scaleX,
          -Math.sin(rotation) * scaleY,
          Math.cos(rotation) * scaleY,
          fetti.x,
          fetti.y
        ]);
        matrix.multiplySelf(new DOMMatrix(fetti.shape.matrix));
        var pattern = context.createPattern(bitmapMapper.transform(fetti.shape.bitmap), "no-repeat");
        pattern.setTransform(matrix);
        context.globalAlpha = 1 - progress;
        context.fillStyle = pattern;
        context.fillRect(
          fetti.x - width / 2,
          fetti.y - height / 2,
          width,
          height
        );
        context.globalAlpha = 1;
      } else if (fetti.shape === "circle") {
        context.ellipse ? context.ellipse(fetti.x, fetti.y, Math.abs(x2 - x1) * fetti.ovalScalar, Math.abs(y2 - y1) * fetti.ovalScalar, Math.PI / 10 * fetti.wobble, 0, 2 * Math.PI) : ellipse(context, fetti.x, fetti.y, Math.abs(x2 - x1) * fetti.ovalScalar, Math.abs(y2 - y1) * fetti.ovalScalar, Math.PI / 10 * fetti.wobble, 0, 2 * Math.PI);
      } else if (fetti.shape === "star") {
        var rot = Math.PI / 2 * 3;
        var innerRadius = 4 * fetti.scalar;
        var outerRadius = 8 * fetti.scalar;
        var x = fetti.x;
        var y = fetti.y;
        var spikes = 5;
        var step = Math.PI / spikes;
        while (spikes--) {
          x = fetti.x + Math.cos(rot) * outerRadius;
          y = fetti.y + Math.sin(rot) * outerRadius;
          context.lineTo(x, y);
          rot += step;
          x = fetti.x + Math.cos(rot) * innerRadius;
          y = fetti.y + Math.sin(rot) * innerRadius;
          context.lineTo(x, y);
          rot += step;
        }
      } else {
        context.moveTo(Math.floor(fetti.x), Math.floor(fetti.y));
        context.lineTo(Math.floor(fetti.wobbleX), Math.floor(y1));
        context.lineTo(Math.floor(x2), Math.floor(y2));
        context.lineTo(Math.floor(x1), Math.floor(fetti.wobbleY));
      }
      context.closePath();
      context.fill();
      return fetti.tick < fetti.totalTicks;
    }
    function animate(canvas, fettis, resizer, size, done) {
      var animatingFettis = fettis.slice();
      var context = canvas.getContext("2d");
      var animationFrame;
      var destroy;
      var prom = promise2(function(resolve) {
        function onDone() {
          animationFrame = destroy = null;
          context.clearRect(0, 0, size.width, size.height);
          bitmapMapper.clear();
          done();
          resolve();
        }
        function update2() {
          if (isWorker && !(size.width === workerSize.width && size.height === workerSize.height)) {
            size.width = canvas.width = workerSize.width;
            size.height = canvas.height = workerSize.height;
          }
          if (!size.width && !size.height) {
            resizer(canvas);
            size.width = canvas.width;
            size.height = canvas.height;
          }
          context.clearRect(0, 0, size.width, size.height);
          animatingFettis = animatingFettis.filter(function(fetti) {
            return updateFetti(context, fetti);
          });
          if (animatingFettis.length) {
            animationFrame = raf2.frame(update2);
          } else {
            onDone();
          }
        }
        animationFrame = raf2.frame(update2);
        destroy = onDone;
      });
      return {
        addFettis: function(fettis2) {
          animatingFettis = animatingFettis.concat(fettis2);
          return prom;
        },
        canvas,
        promise: prom,
        reset: function() {
          if (animationFrame) {
            raf2.cancel(animationFrame);
          }
          if (destroy) {
            destroy();
          }
        }
      };
    }
    function confettiCannon(canvas, globalOpts) {
      var isLibCanvas = !canvas;
      var allowResize = !!prop(globalOpts || {}, "resize");
      var hasResizeEventRegistered = false;
      var globalDisableForReducedMotion = prop(globalOpts, "disableForReducedMotion", Boolean);
      var shouldUseWorker = canUseWorker && !!prop(globalOpts || {}, "useWorker");
      var worker = shouldUseWorker ? getWorker() : null;
      var resizer = isLibCanvas ? setCanvasWindowSize : setCanvasRectSize;
      var initialized = canvas && worker ? !!canvas.__confetti_initialized : false;
      var preferLessMotion = typeof matchMedia === "function" && matchMedia("(prefers-reduced-motion)").matches;
      var animationObj;
      function fireLocal(options, size, done) {
        var particleCount = prop(options, "particleCount", onlyPositiveInt);
        var angle = prop(options, "angle", Number);
        var spread = prop(options, "spread", Number);
        var startVelocity = prop(options, "startVelocity", Number);
        var decay = prop(options, "decay", Number);
        var gravity = prop(options, "gravity", Number);
        var drift = prop(options, "drift", Number);
        var colors = prop(options, "colors", colorsToRgb);
        var ticks = prop(options, "ticks", Number);
        var shapes = prop(options, "shapes");
        var scalar = prop(options, "scalar");
        var flat = !!prop(options, "flat");
        var origin = getOrigin(options);
        var temp = particleCount;
        var fettis = [];
        var startX = canvas.width * origin.x;
        var startY = canvas.height * origin.y;
        while (temp--) {
          fettis.push(
            randomPhysics({
              x: startX,
              y: startY,
              angle,
              spread,
              startVelocity,
              color: colors[temp % colors.length],
              shape: shapes[randomInt(0, shapes.length)],
              ticks,
              decay,
              gravity,
              drift,
              scalar,
              flat
            })
          );
        }
        if (animationObj) {
          return animationObj.addFettis(fettis);
        }
        animationObj = animate(canvas, fettis, resizer, size, done);
        return animationObj.promise;
      }
      function fire(options) {
        var disableForReducedMotion = globalDisableForReducedMotion || prop(options, "disableForReducedMotion", Boolean);
        var zIndex = prop(options, "zIndex", Number);
        if (disableForReducedMotion && preferLessMotion) {
          return promise2(function(resolve) {
            resolve();
          });
        }
        if (isLibCanvas && animationObj) {
          canvas = animationObj.canvas;
        } else if (isLibCanvas && !canvas) {
          canvas = getCanvas(zIndex);
          document.body.appendChild(canvas);
        }
        if (allowResize && !initialized) {
          resizer(canvas);
        }
        var size = {
          width: canvas.width,
          height: canvas.height
        };
        if (worker && !initialized) {
          worker.init(canvas);
        }
        initialized = true;
        if (worker) {
          canvas.__confetti_initialized = true;
        }
        function onResize() {
          if (worker) {
            var obj = {
              getBoundingClientRect: function() {
                if (!isLibCanvas) {
                  return canvas.getBoundingClientRect();
                }
              }
            };
            resizer(obj);
            worker.postMessage({
              resize: {
                width: obj.width,
                height: obj.height
              }
            });
            return;
          }
          size.width = size.height = null;
        }
        function done() {
          animationObj = null;
          if (allowResize) {
            hasResizeEventRegistered = false;
            global.removeEventListener("resize", onResize);
          }
          if (isLibCanvas && canvas) {
            if (document.body.contains(canvas)) {
              document.body.removeChild(canvas);
            }
            canvas = null;
            initialized = false;
          }
        }
        if (allowResize && !hasResizeEventRegistered) {
          hasResizeEventRegistered = true;
          global.addEventListener("resize", onResize, false);
        }
        if (worker) {
          return worker.fire(options, size, done);
        }
        return fireLocal(options, size, done);
      }
      fire.reset = function() {
        if (worker) {
          worker.reset();
        }
        if (animationObj) {
          animationObj.reset();
        }
      };
      return fire;
    }
    var defaultFire;
    function getDefaultFire() {
      if (!defaultFire) {
        defaultFire = confettiCannon(null, { useWorker: true, resize: true });
      }
      return defaultFire;
    }
    function transformPath2D(pathString, pathMatrix, x, y, scaleX, scaleY, rotation) {
      var path2d = new Path2D(pathString);
      var t1 = new Path2D();
      t1.addPath(path2d, new DOMMatrix(pathMatrix));
      var t2 = new Path2D();
      t2.addPath(t1, new DOMMatrix([
        Math.cos(rotation) * scaleX,
        Math.sin(rotation) * scaleX,
        -Math.sin(rotation) * scaleY,
        Math.cos(rotation) * scaleY,
        x,
        y
      ]));
      return t2;
    }
    function shapeFromPath(pathData) {
      if (!canUsePaths) {
        throw new Error("path confetti are not supported in this browser");
      }
      var path, matrix;
      if (typeof pathData === "string") {
        path = pathData;
      } else {
        path = pathData.path;
        matrix = pathData.matrix;
      }
      var path2d = new Path2D(path);
      var tempCanvas = document.createElement("canvas");
      var tempCtx = tempCanvas.getContext("2d");
      if (!matrix) {
        var maxSize = 1e3;
        var minX = maxSize;
        var minY = maxSize;
        var maxX = 0;
        var maxY = 0;
        var width, height;
        for (var x = 0; x < maxSize; x += 2) {
          for (var y = 0; y < maxSize; y += 2) {
            if (tempCtx.isPointInPath(path2d, x, y, "nonzero")) {
              minX = Math.min(minX, x);
              minY = Math.min(minY, y);
              maxX = Math.max(maxX, x);
              maxY = Math.max(maxY, y);
            }
          }
        }
        width = maxX - minX;
        height = maxY - minY;
        var maxDesiredSize = 10;
        var scale = Math.min(maxDesiredSize / width, maxDesiredSize / height);
        matrix = [
          scale,
          0,
          0,
          scale,
          -Math.round(width / 2 + minX) * scale,
          -Math.round(height / 2 + minY) * scale
        ];
      }
      return {
        type: "path",
        path,
        matrix
      };
    }
    function shapeFromText(textData) {
      var text2, scalar = 1, color = "#000000", fontFamily = '"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';
      if (typeof textData === "string") {
        text2 = textData;
      } else {
        text2 = textData.text;
        scalar = "scalar" in textData ? textData.scalar : scalar;
        fontFamily = "fontFamily" in textData ? textData.fontFamily : fontFamily;
        color = "color" in textData ? textData.color : color;
      }
      var fontSize = 10 * scalar;
      var font = "" + fontSize + "px " + fontFamily;
      var canvas = new OffscreenCanvas(fontSize, fontSize);
      var ctx = canvas.getContext("2d");
      ctx.font = font;
      var size = ctx.measureText(text2);
      var width = Math.ceil(size.actualBoundingBoxRight + size.actualBoundingBoxLeft);
      var height = Math.ceil(size.actualBoundingBoxAscent + size.actualBoundingBoxDescent);
      var padding = 2;
      var x = size.actualBoundingBoxLeft + padding;
      var y = size.actualBoundingBoxAscent + padding;
      width += padding + padding;
      height += padding + padding;
      canvas = new OffscreenCanvas(width, height);
      ctx = canvas.getContext("2d");
      ctx.font = font;
      ctx.fillStyle = color;
      ctx.fillText(text2, x, y);
      var scale = 1 / scalar;
      return {
        type: "bitmap",
        // TODO these probably need to be transfered for workers
        bitmap: canvas.transferToImageBitmap(),
        matrix: [scale, 0, 0, scale, -width * scale / 2, -height * scale / 2]
      };
    }
    module2.exports = function() {
      return getDefaultFire().apply(this, arguments);
    };
    module2.exports.reset = function() {
      getDefaultFire().reset();
    };
    module2.exports.create = confettiCannon;
    module2.exports.shapeFromPath = shapeFromPath;
    module2.exports.shapeFromText = shapeFromText;
  })(function() {
    if (typeof window !== "undefined") {
      return window;
    }
    if (typeof self !== "undefined") {
      return self;
    }
    return this || {};
  }(), module, false);
  const confetti = module.exports;
  module.exports.create;
  function add_css$u(target) {
    append_styles(target, "svelte-1wgo1p4", '.ribbon.svelte-1wgo1p4{border-radius:0px 0px 6px 6px;background:var(--Teal-500, #15b79e);box-shadow:0px 4px 4px -4px rgba(0, 0, 0, 0.6);min-height:16px;position:absolute;z-index:1;width:70%;left:15%;top:-8px}.ribbon.svelte-1wgo1p4:before,.ribbon.svelte-1wgo1p4:after{content:"";width:6px;height:8px;background:#107569;position:absolute}.ribbon.svelte-1wgo1p4::before{left:-6px;top:0px;border-radius:10px 15px 0 0px;border-right:5px solid #15b79e}.ribbon.svelte-1wgo1p4::after{right:-6px;top:0px;border-radius:15px 10px 0 0px;border-left:5px solid #15b79e}.info.svelte-1wgo1p4{text-align:center;color:#fff;font-size:15px;font-weight:bolder;box-sizing:border-box;line-height:1.2;padding:2px}');
  }
  function create_fragment$y(ctx) {
    let div1;
    let div0;
    let current;
    const default_slot_template = (
      /*#slots*/
      ctx[1].default
    );
    const default_slot = create_slot(
      default_slot_template,
      ctx,
      /*$$scope*/
      ctx[0],
      null
    );
    return {
      c() {
        div1 = element("div");
        div0 = element("div");
        if (default_slot)
          default_slot.c();
        attr(div0, "class", "info svelte-1wgo1p4");
        attr(div1, "class", "ribbon svelte-1wgo1p4");
      },
      m(target, anchor) {
        insert(target, div1, anchor);
        append(div1, div0);
        if (default_slot) {
          default_slot.m(div0, null);
        }
        current = true;
      },
      p(ctx2, [dirty]) {
        if (default_slot) {
          if (default_slot.p && (!current || dirty & /*$$scope*/
          1)) {
            update_slot_base(
              default_slot,
              default_slot_template,
              ctx2,
              /*$$scope*/
              ctx2[0],
              !current ? get_all_dirty_from_scope(
                /*$$scope*/
                ctx2[0]
              ) : get_slot_changes(
                default_slot_template,
                /*$$scope*/
                ctx2[0],
                dirty,
                null
              ),
              null
            );
          }
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(default_slot, local);
        current = true;
      },
      o(local) {
        transition_out(default_slot, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div1);
        }
        if (default_slot)
          default_slot.d(detaching);
      }
    };
  }
  function instance$y($$self, $$props, $$invalidate) {
    let { $$slots: slots = {}, $$scope } = $$props;
    $$self.$$set = ($$props2) => {
      if ("$$scope" in $$props2)
        $$invalidate(0, $$scope = $$props2.$$scope);
    };
    return [$$scope, slots];
  }
  class Ribbon extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$y, create_fragment$y, safe_not_equal, {}, add_css$u);
    }
  }
  function add_css$t(target) {
    append_styles(target, "svelte-1k58v35", ".footer-ribbon-text.svelte-1k58v35{font-size:11px;font-weight:bold}.cursor-pointer.svelte-1k58v35{cursor:pointer}");
  }
  function create_if_block_3$9(ctx) {
    let t0_value = formatCurrencyDisplay((+/*savedAmount*/
    ctx[0]).toFixed(2)) + "";
    let t0;
    let t1;
    return {
      c() {
        t0 = text(t0_value);
        t1 = text(" Saved so far!");
      },
      m(target, anchor) {
        insert(target, t0, anchor);
        insert(target, t1, anchor);
      },
      p(ctx2, dirty) {
        if (dirty & /*savedAmount*/
        1 && t0_value !== (t0_value = formatCurrencyDisplay((+/*savedAmount*/
        ctx2[0]).toFixed(2)) + ""))
          set_data(t0, t0_value);
      },
      d(detaching) {
        if (detaching) {
          detach(t0);
          detach(t1);
        }
      }
    };
  }
  function create_if_block_2$d(ctx) {
    let t0;
    let t1;
    return {
      c() {
        t0 = text("You get ");
        t1 = text(
          /*cashbackText*/
          ctx[3]
        );
      },
      m(target, anchor) {
        insert(target, t0, anchor);
        insert(target, t1, anchor);
      },
      p(ctx2, dirty) {
        if (dirty & /*cashbackText*/
        8)
          set_data(
            t1,
            /*cashbackText*/
            ctx2[3]
          );
      },
      d(detaching) {
        if (detaching) {
          detach(t0);
          detach(t1);
        }
      }
    };
  }
  function create_if_block_1$j(ctx) {
    let t0;
    let t1_value = formatCurrencyDisplay((+/*savedAmount*/
    ctx[0]).toFixed(2)) + "";
    let t1;
    let t2;
    let t3;
    return {
      c() {
        t0 = text("You saved ");
        t1 = text(t1_value);
        t2 = text(" + get ");
        t3 = text(
          /*cashbackText*/
          ctx[3]
        );
      },
      m(target, anchor) {
        insert(target, t0, anchor);
        insert(target, t1, anchor);
        insert(target, t2, anchor);
        insert(target, t3, anchor);
      },
      p(ctx2, dirty) {
        if (dirty & /*savedAmount*/
        1 && t1_value !== (t1_value = formatCurrencyDisplay((+/*savedAmount*/
        ctx2[0]).toFixed(2)) + ""))
          set_data(t1, t1_value);
        if (dirty & /*cashbackText*/
        8)
          set_data(
            t3,
            /*cashbackText*/
            ctx2[3]
          );
      },
      d(detaching) {
        if (detaching) {
          detach(t0);
          detach(t1);
          detach(t2);
          detach(t3);
        }
      }
    };
  }
  function create_if_block$p(ctx) {
    let t;
    return {
      c() {
        t = text(
          /*bannerText*/
          ctx[1]
        );
      },
      m(target, anchor) {
        insert(target, t, anchor);
      },
      p(ctx2, dirty) {
        if (dirty & /*bannerText*/
        2)
          set_data(
            t,
            /*bannerText*/
            ctx2[1]
          );
      },
      d(detaching) {
        if (detaching) {
          detach(t);
        }
      }
    };
  }
  function create_default_slot$5(ctx) {
    let p;
    let mounted;
    let dispose;
    function select_block_type(ctx2, dirty) {
      if (
        /*bannerText*/
        ctx2[1]
      )
        return create_if_block$p;
      if (
        /*cashbackText*/
        ctx2[3] && +/*savedAmount*/
        ctx2[0] > 0
      )
        return create_if_block_1$j;
      if (
        /*cashbackText*/
        ctx2[3]
      )
        return create_if_block_2$d;
      if (+/*savedAmount*/
      ctx2[0] > 0)
        return create_if_block_3$9;
    }
    let current_block_type = select_block_type(ctx);
    let if_block = current_block_type && current_block_type(ctx);
    return {
      c() {
        p = element("p");
        if (if_block)
          if_block.c();
        attr(p, "class", "footer-ribbon-text svelte-1k58v35");
        toggle_class(
          p,
          "cursor-pointer",
          /*clickFn*/
          ctx[2]
        );
      },
      m(target, anchor) {
        insert(target, p, anchor);
        if (if_block)
          if_block.m(p, null);
        if (!mounted) {
          dispose = listen(p, "click", function() {
            if (is_function(
              /*clickFn*/
              ctx[2]
            ))
              ctx[2].apply(this, arguments);
          });
          mounted = true;
        }
      },
      p(new_ctx, dirty) {
        ctx = new_ctx;
        if (current_block_type === (current_block_type = select_block_type(ctx)) && if_block) {
          if_block.p(ctx, dirty);
        } else {
          if (if_block)
            if_block.d(1);
          if_block = current_block_type && current_block_type(ctx);
          if (if_block) {
            if_block.c();
            if_block.m(p, null);
          }
        }
        if (dirty & /*clickFn*/
        4) {
          toggle_class(
            p,
            "cursor-pointer",
            /*clickFn*/
            ctx[2]
          );
        }
      },
      d(detaching) {
        if (detaching) {
          detach(p);
        }
        if (if_block) {
          if_block.d();
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_fragment$x(ctx) {
    let div;
    let ribbon;
    let current;
    ribbon = new Ribbon({
      props: {
        $$slots: { default: [create_default_slot$5] },
        $$scope: { ctx }
      }
    });
    return {
      c() {
        div = element("div");
        create_component(ribbon.$$.fragment);
      },
      m(target, anchor) {
        insert(target, div, anchor);
        mount_component(ribbon, div, null);
        ctx[5](div);
        current = true;
      },
      p(ctx2, [dirty]) {
        const ribbon_changes = {};
        if (dirty & /*$$scope, clickFn, bannerText, cashbackText, savedAmount*/
        527) {
          ribbon_changes.$$scope = { dirty, ctx: ctx2 };
        }
        ribbon.$set(ribbon_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(ribbon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(ribbon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(ribbon);
        ctx[5](null);
      }
    };
  }
  function instance$x($$self, $$props, $$invalidate) {
    let { savedAmount = 0 } = $$props;
    let { bannerText = "" } = $$props;
    let { clickFn = () => {
    } } = $$props;
    let { cashbackText = "" } = $$props;
    const dispatch2 = createEventDispatcher();
    let wrapper;
    let ribbonHeight = 0;
    async function updateHeight() {
      await tick();
      if (wrapper) {
        const ribbonEl = wrapper.querySelector(".ribbon");
        const newHeight = (ribbonEl == null ? void 0 : ribbonEl.clientHeight) || 0;
        if (newHeight !== ribbonHeight) {
          ribbonHeight = newHeight;
          dispatch2("height", ribbonHeight);
        }
      }
    }
    onMount(updateHeight);
    function div_binding($$value) {
      binding_callbacks[$$value ? "unshift" : "push"](() => {
        wrapper = $$value;
        $$invalidate(4, wrapper);
      });
    }
    $$self.$$set = ($$props2) => {
      if ("savedAmount" in $$props2)
        $$invalidate(0, savedAmount = $$props2.savedAmount);
      if ("bannerText" in $$props2)
        $$invalidate(1, bannerText = $$props2.bannerText);
      if ("clickFn" in $$props2)
        $$invalidate(2, clickFn = $$props2.clickFn);
      if ("cashbackText" in $$props2)
        $$invalidate(3, cashbackText = $$props2.cashbackText);
    };
    $$self.$$.update = () => {
      if ($$self.$$.dirty & /*cashbackText, savedAmount, bannerText*/
      11) {
        updateHeight();
      }
    };
    return [savedAmount, bannerText, clickFn, cashbackText, wrapper, div_binding];
  }
  class SaveAmountBanner extends SvelteComponent {
    constructor(options) {
      super();
      init(
        this,
        options,
        instance$x,
        create_fragment$x,
        safe_not_equal,
        {
          savedAmount: 0,
          bannerText: 1,
          clickFn: 2,
          cashbackText: 3
        },
        add_css$t
      );
    }
  }
  function create_fragment$w(ctx) {
    let svg;
    let path0;
    let path1;
    let animateTransform;
    return {
      c() {
        svg = svg_element("svg");
        path0 = svg_element("path");
        path1 = svg_element("path");
        animateTransform = svg_element("animateTransform");
        attr(path0, "opacity", "0.2");
        attr(
          path0,
          "fill",
          /*color*/
          ctx[1]
        );
        attr(path0, "d", "M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946\n           s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634\n           c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z");
        attr(animateTransform, "attributeType", "xml");
        attr(animateTransform, "attributeName", "transform");
        attr(animateTransform, "type", "rotate");
        attr(animateTransform, "from", "0 20 20");
        attr(animateTransform, "to", "360 20 20");
        attr(animateTransform, "dur", "0.5s");
        attr(animateTransform, "repeatCount", "indefinite");
        attr(
          path1,
          "fill",
          /*color*/
          ctx[1]
        );
        attr(path1, "d", "M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0\n           C22.32,8.481,24.301,9.057,26.013,10.047z");
        attr(svg, "version", "1.1");
        attr(svg, "xmlns", "http://www.w3.org/2000/svg");
        attr(svg, "xmlns:xlink", "http://www.w3.org/1999/xlink");
        attr(svg, "x", "0px");
        attr(svg, "y", "0px");
        attr(
          svg,
          "width",
          /*size*/
          ctx[0]
        );
        attr(
          svg,
          "height",
          /*size*/
          ctx[0]
        );
        attr(svg, "viewBox", "0 0 40 40");
        attr(svg, "enable-background", "new 0 0 40 40");
        attr(svg, "xml:space", "preserve");
      },
      m(target, anchor) {
        insert(target, svg, anchor);
        append(svg, path0);
        append(svg, path1);
        append(path1, animateTransform);
      },
      p(ctx2, [dirty]) {
        if (dirty & /*color*/
        2) {
          attr(
            path0,
            "fill",
            /*color*/
            ctx2[1]
          );
        }
        if (dirty & /*color*/
        2) {
          attr(
            path1,
            "fill",
            /*color*/
            ctx2[1]
          );
        }
        if (dirty & /*size*/
        1) {
          attr(
            svg,
            "width",
            /*size*/
            ctx2[0]
          );
        }
        if (dirty & /*size*/
        1) {
          attr(
            svg,
            "height",
            /*size*/
            ctx2[0]
          );
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(svg);
        }
      }
    };
  }
  function instance$w($$self, $$props, $$invalidate) {
    let { size = "40px" } = $$props;
    let { color = "#fff" } = $$props;
    $$self.$$set = ($$props2) => {
      if ("size" in $$props2)
        $$invalidate(0, size = $$props2.size);
      if ("color" in $$props2)
        $$invalidate(1, color = $$props2.color);
    };
    return [size, color];
  }
  class LoadingSvg extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$w, create_fragment$w, safe_not_equal, { size: 0, color: 1 });
    }
  }
  const ArrowRight = "data:image/svg+xml,%3csvg%20width='7'%20height='11'%20viewBox='0%200%207%2011'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M1.5%202L5%205.5L1.5%209'%20stroke='%23004B8D'%20stroke-width='1.6'%20stroke-linecap='square'/%3e%3c/svg%3e";
  const Location = "data:image/svg+xml,%3csvg%20width='16'%20height='17'%20viewBox='0%200%2016%2017'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M8%201.5C5.23969%201.5%203%203.51594%203%206C3%2010%208%2015.5%208%2015.5C8%2015.5%2013%2010%2013%206C13%203.51594%2010.7603%201.5%208%201.5ZM8%208.5C7.60444%208.5%207.21776%208.3827%206.88886%208.16294C6.55996%207.94318%206.30362%207.63082%206.15224%207.26537C6.00087%206.89991%205.96126%206.49778%206.03843%206.10982C6.1156%205.72186%206.30608%205.36549%206.58579%205.08579C6.86549%204.80608%207.22186%204.6156%207.60982%204.53843C7.99778%204.46126%208.39991%204.50087%208.76537%204.65224C9.13082%204.80362%209.44318%205.05996%209.66294%205.38886C9.8827%205.71776%2010%206.10444%2010%206.5C9.99942%207.03026%209.78852%207.53863%209.41357%207.91357C9.03863%208.28852%208.53026%208.49942%208%208.5Z'%20fill='%2300325E'/%3e%3c/svg%3e";
  function add_css$s(target) {
    append_styles(target, "svelte-w4f9m7", ".text.svelte-w4f9m7.svelte-w4f9m7{font-family:var(--font-family);font-size:14px;font-weight:400}.visually-hidden.svelte-w4f9m7.svelte-w4f9m7{background:none;border:none;padding:0;margin:0;cursor:pointer;display:block}.add-address-container.svelte-w4f9m7.svelte-w4f9m7{margin:0rem;display:flex;align-items:center;justify-content:space-between;padding:var(--padding-twelve);border-radius:var(--border-regular);border:1px solid var(--light-grey);background-color:var(--white)}.add-address-container.svelte-w4f9m7 .address-add-container.svelte-w4f9m7{display:flex;justify-content:center;align-items:center;gap:var(--gap-loose);color:var(--black)}.add-address-container.svelte-w4f9m7 .address-add-container .plus-icon.svelte-w4f9m7{width:20px;height:20px}.add-address-container.svelte-w4f9m7 .right-arrow.svelte-w4f9m7{width:14px;height:14px}");
  }
  function create_fragment$v(ctx) {
    let button;
    let div4;
    let div2;
    let div0;
    let t0;
    let div1;
    let t2;
    let div3;
    let mounted;
    let dispose;
    return {
      c() {
        button = element("button");
        div4 = element("div");
        div2 = element("div");
        div0 = element("div");
        div0.innerHTML = `<img width="20px" height="20px" alt="plus icon" src="${images.plusIcon}"/>`;
        t0 = space();
        div1 = element("div");
        div1.textContent = `${addressTexts.addAddress}`;
        t2 = space();
        div3 = element("div");
        div3.innerHTML = `<img width="100%" class="right-arrow-icon" src="${images.chevronRight}" alt="right arrow"/>`;
        attr(div0, "class", "plus-icon svelte-w4f9m7");
        attr(div1, "class", "text svelte-w4f9m7");
        attr(div2, "class", "address-add-container svelte-w4f9m7");
        attr(div3, "class", "right-arrow svelte-w4f9m7");
        attr(div4, "class", "add-address-container svelte-w4f9m7");
        attr(button, "class", "visually-hidden svelte-w4f9m7");
        set_style(button, "width", "100%");
      },
      m(target, anchor) {
        insert(target, button, anchor);
        append(button, div4);
        append(div4, div2);
        append(div2, div0);
        append(div2, t0);
        append(div2, div1);
        append(div4, t2);
        append(div4, div3);
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*click_handler*/
            ctx[0]
          );
          mounted = true;
        }
      },
      p: noop,
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function instance$v($$self) {
    const click_handler2 = () => openAddressFormBottomSheet();
    return [click_handler2];
  }
  class AddAddress extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$v, create_fragment$v, safe_not_equal, {}, add_css$s);
    }
  }
  function add_css$r(target) {
    append_styles(target, "svelte-1lpohsg", ".address.svelte-1lpohsg.svelte-1lpohsg{padding:8px;border:1px solid #e5e7eb;border-radius:12px;font-size:12px;font-weight:600}.address-box.svelte-1lpohsg.svelte-1lpohsg{font-family:Inter;display:flex;align-items:center;gap:8px;padding:8px;border-radius:12px;background:linear-gradient(270.54deg, #e0ffff 1.25%, #d2ffff 93.31%)}.address-box.svelte-1lpohsg .user-name.svelte-1lpohsg{font-size:14px}.address-right-arrow.svelte-1lpohsg.svelte-1lpohsg{right:10px;cursor:pointer}");
  }
  function create_if_block_2$c(ctx) {
    let div;
    let addaddress;
    let current;
    addaddress = new AddAddress({});
    return {
      c() {
        div = element("div");
        create_component(addaddress.$$.fragment);
        attr(div, "class", "add-address");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        mount_component(addaddress, div, null);
        current = true;
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(addaddress.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(addaddress.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(addaddress);
      }
    };
  }
  function create_if_block$o(ctx) {
    var _a, _b, _c;
    let div2;
    let div1;
    let img;
    let img_src_value;
    let t0;
    let div0;
    let span;
    let t1;
    let t2;
    let t3;
    let t4_value = (
      /*selectedAddress*/
      ctx[2].address1 + ""
    );
    let t4;
    let t5;
    let t6_value = (
      /*selectedAddress*/
      ctx[2].city + ""
    );
    let t6;
    let t7;
    let t8_value = (
      /*selectedAddress*/
      (((_a = ctx[2]) == null ? void 0 : _a.pincode) || /*selectedAddress*/
      ((_b = ctx[2]) == null ? void 0 : _b.zip)) + ""
    );
    let t8;
    let t9;
    let mounted;
    let dispose;
    let if_block = (
      /*addressList*/
      ((_c = ctx[0]) == null ? void 0 : _c.length) && create_if_block_1$i()
    );
    return {
      c() {
        div2 = element("div");
        div1 = element("div");
        img = element("img");
        t0 = space();
        div0 = element("div");
        span = element("span");
        t1 = text(
          /*selectedFullName*/
          ctx[1]
        );
        t2 = text(",");
        t3 = space();
        t4 = text(t4_value);
        t5 = text(", ");
        t6 = text(t6_value);
        t7 = text(", ");
        t8 = text(t8_value);
        t9 = space();
        if (if_block)
          if_block.c();
        attr(img, "alt", "location");
        if (!src_url_equal(img.src, img_src_value = Location))
          attr(img, "src", img_src_value);
        attr(span, "class", "user-name svelte-1lpohsg");
        attr(div0, "class", "address-text");
        attr(div1, "class", "address-box svelte-1lpohsg");
        attr(div2, "class", "address svelte-1lpohsg");
      },
      m(target, anchor) {
        insert(target, div2, anchor);
        append(div2, div1);
        append(div1, img);
        append(div1, t0);
        append(div1, div0);
        append(div0, span);
        append(span, t1);
        append(span, t2);
        append(div0, t3);
        append(div0, t4);
        append(div0, t5);
        append(div0, t6);
        append(div0, t7);
        append(div0, t8);
        append(div1, t9);
        if (if_block)
          if_block.m(div1, null);
        if (!mounted) {
          dispose = listen(
            div1,
            "click",
            /*click_handler*/
            ctx[4]
          );
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c2;
        if (dirty & /*selectedFullName*/
        2)
          set_data(
            t1,
            /*selectedFullName*/
            ctx2[1]
          );
        if (dirty & /*selectedAddress*/
        4 && t4_value !== (t4_value = /*selectedAddress*/
        ctx2[2].address1 + ""))
          set_data(t4, t4_value);
        if (dirty & /*selectedAddress*/
        4 && t6_value !== (t6_value = /*selectedAddress*/
        ctx2[2].city + ""))
          set_data(t6, t6_value);
        if (dirty & /*selectedAddress*/
        4 && t8_value !== (t8_value = /*selectedAddress*/
        (((_a2 = ctx2[2]) == null ? void 0 : _a2.pincode) || /*selectedAddress*/
        ((_b2 = ctx2[2]) == null ? void 0 : _b2.zip)) + ""))
          set_data(t8, t8_value);
        if (
          /*addressList*/
          (_c2 = ctx2[0]) == null ? void 0 : _c2.length
        ) {
          if (if_block)
            ;
          else {
            if_block = create_if_block_1$i();
            if_block.c();
            if_block.m(div1, null);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(div2);
        }
        if (if_block)
          if_block.d();
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block_1$i(ctx) {
    let img;
    let img_src_value;
    return {
      c() {
        img = element("img");
        attr(img, "class", "address-right-arrow svelte-1lpohsg");
        attr(img, "alt", "arrow-right");
        if (!src_url_equal(img.src, img_src_value = ArrowRight))
          attr(img, "src", img_src_value);
      },
      m(target, anchor) {
        insert(target, img, anchor);
      },
      d(detaching) {
        if (detaching) {
          detach(img);
        }
      }
    };
  }
  function create_fragment$u(ctx) {
    let current_block_type_index;
    let if_block;
    let if_block_anchor;
    let current;
    const if_block_creators = [create_if_block$o, create_if_block_2$c];
    const if_blocks = [];
    function select_block_type(ctx2, dirty) {
      var _a, _b, _c;
      if (
        /*addressList*/
        ((_a = ctx2[0]) == null ? void 0 : _a.length) || /*selectedAddress*/
        ((_b = ctx2[2]) == null ? void 0 : _b.address1)
      )
        return 0;
      if (!/*addressList*/
      ctx2[0] || /*addressList*/
      ((_c = ctx2[0]) == null ? void 0 : _c.length) === 0)
        return 1;
      return -1;
    }
    if (~(current_block_type_index = select_block_type(ctx))) {
      if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
    }
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (~current_block_type_index) {
          if_blocks[current_block_type_index].m(target, anchor);
        }
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, [dirty]) {
        let previous_block_index = current_block_type_index;
        current_block_type_index = select_block_type(ctx2);
        if (current_block_type_index === previous_block_index) {
          if (~current_block_type_index) {
            if_blocks[current_block_type_index].p(ctx2, dirty);
          }
        } else {
          if (if_block) {
            group_outros();
            transition_out(if_blocks[previous_block_index], 1, 1, () => {
              if_blocks[previous_block_index] = null;
            });
            check_outros();
          }
          if (~current_block_type_index) {
            if_block = if_blocks[current_block_type_index];
            if (!if_block) {
              if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
              if_block.c();
            } else {
              if_block.p(ctx2, dirty);
            }
            transition_in(if_block, 1);
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          } else {
            if_block = null;
          }
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (~current_block_type_index) {
          if_blocks[current_block_type_index].d(detaching);
        }
      }
    };
  }
  function instance$u($$self, $$props, $$invalidate) {
    let addressList = [];
    let selectedFullName = "";
    let selectedAddress = {
      firstName: "",
      lastName: "",
      address1: "",
      city: "",
      phone: "",
      email: "",
      country: "",
      pincode: 0,
      state: "",
      aid: 0
    };
    const onRightArrowClick = () => {
      openAddressListBottomSheet();
    };
    onMount(async () => {
      await callGetAddresses();
      store_selectedShippingOption.subscribe((res) => {
      });
      store_addressList.subscribe((res) => {
        $$invalidate(0, addressList = res);
      });
      store_userSelectedAddress.subscribe((res) => {
        $$invalidate(2, selectedAddress = res);
        $$invalidate(1, selectedFullName = truncateName(selectedAddress));
      });
      if ((addressList == null ? void 0 : addressList.length) > 0) {
        store_addressLazyLoad.set(false);
      }
    });
    const click_handler2 = () => onRightArrowClick();
    return [
      addressList,
      selectedFullName,
      selectedAddress,
      onRightArrowClick,
      click_handler2
    ];
  }
  class DeliveryContainer extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$u, create_fragment$u, safe_not_equal, {}, add_css$r);
    }
  }
  function create_fragment$t(ctx) {
    let div;
    let svg;
    let g;
    let path;
    let defs;
    let clipPath;
    let rect;
    return {
      c() {
        div = element("div");
        svg = svg_element("svg");
        g = svg_element("g");
        path = svg_element("path");
        defs = svg_element("defs");
        clipPath = svg_element("clipPath");
        rect = svg_element("rect");
        attr(path, "d", "M2.5 6L5 8.5L10 3.5");
        attr(path, "stroke", "currentColor");
        attr(path, "stroke-width", "1.6");
        attr(path, "stroke-linecap", "round");
        attr(path, "stroke-linejoin", "round");
        attr(g, "clip-path", "url(#clip0)");
        attr(rect, "width", "12");
        attr(rect, "height", "12");
        attr(rect, "fill", "white");
        attr(clipPath, "id", "clip0");
        attr(
          svg,
          "width",
          /*width*/
          ctx[1]
        );
        attr(
          svg,
          "height",
          /*height*/
          ctx[2]
        );
        attr(svg, "viewBox", "0 0 12 12");
        attr(svg, "fill", "none");
        attr(svg, "xmlns", "http://www.w3.org/2000/svg");
        set_style(
          div,
          "color",
          /*color*/
          ctx[0]
        );
        set_style(div, "display", "inline-block");
        set_style(
          div,
          "width",
          /*width*/
          ctx[1] + "px"
        );
        set_style(
          div,
          "height",
          /*height*/
          ctx[2] + "px"
        );
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, svg);
        append(svg, g);
        append(g, path);
        append(svg, defs);
        append(defs, clipPath);
        append(clipPath, rect);
      },
      p(ctx2, [dirty]) {
        if (dirty & /*width*/
        2) {
          attr(
            svg,
            "width",
            /*width*/
            ctx2[1]
          );
        }
        if (dirty & /*height*/
        4) {
          attr(
            svg,
            "height",
            /*height*/
            ctx2[2]
          );
        }
        if (dirty & /*color*/
        1) {
          set_style(
            div,
            "color",
            /*color*/
            ctx2[0]
          );
        }
        if (dirty & /*width*/
        2) {
          set_style(
            div,
            "width",
            /*width*/
            ctx2[1] + "px"
          );
        }
        if (dirty & /*height*/
        4) {
          set_style(
            div,
            "height",
            /*height*/
            ctx2[2] + "px"
          );
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(div);
        }
      }
    };
  }
  function instance$t($$self, $$props, $$invalidate) {
    let { color = "black" } = $$props;
    let { width = 12 } = $$props;
    let { height = 12 } = $$props;
    $$self.$$set = ($$props2) => {
      if ("color" in $$props2)
        $$invalidate(0, color = $$props2.color);
      if ("width" in $$props2)
        $$invalidate(1, width = $$props2.width);
      if ("height" in $$props2)
        $$invalidate(2, height = $$props2.height);
    };
    return [color, width, height];
  }
  class TickIcon extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$t, create_fragment$t, safe_not_equal, { color: 0, width: 1, height: 2 });
    }
  }
  function add_css$q(target) {
    append_styles(target, "svelte-xh6ljj", ".card.svelte-xh6ljj.svelte-xh6ljj{flex-shrink:0;display:flex;flex-direction:row;gap:12px;align-items:center;justify-content:space-between;background:var(--Base-White, #fff);border-bottom:1px solid var(--Gray-Neutral-200, #e5e7eb);padding-bottom:8px}.card.svelte-xh6ljj .main-container.svelte-xh6ljj{max-width:70%;display:flex;gap:8px}.card.svelte-xh6ljj.svelte-xh6ljj:last-child{border-bottom:none}.variant-element.svelte-xh6ljj.svelte-xh6ljj{padding:6px 8px 6px 8px;border-radius:8px;background:var(--Gray-Neutral-100, #f3f4f6);font-size:10px;font-weight:500;margin-right:5px;width:fit-content}.product-image.svelte-xh6ljj.svelte-xh6ljj{width:80px;border-radius:12px;height:95px;object-fit:contain}.card-right-container.svelte-xh6ljj.svelte-xh6ljj{font-size:14px;font-weight:400;padding:8px 0 8px 0;color:var(--Brand-900, #00192f);width:100%;display:flex;flex-direction:column;gap:12px}.add-btn.svelte-xh6ljj.svelte-xh6ljj{width:fit-content;border-radius:8px;border:1px solid var(--gokwik-primary-color);background:transparent;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:4px;font-size:12px;font-weight:500;padding:6px 8px}.add-btn.selected.svelte-xh6ljj.svelte-xh6ljj{border-color:red}.add-btn.svelte-xh6ljj p.svelte-xh6ljj{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;color:red}.add-btn.out-of-stock.svelte-xh6ljj.svelte-xh6ljj{opacity:0.3;cursor:not-allowed}.product-name.svelte-xh6ljj.svelte-xh6ljj{margin:0;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:block;display:-webkit-box;line-clamp:2;box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.card-left-container.svelte-xh6ljj.svelte-xh6ljj{display:flex;flex-direction:column;justify-content:space-between}.free-text.svelte-xh6ljj.svelte-xh6ljj{font-weight:bold;color:#1a9e4c}.button-container.svelte-xh6ljj.svelte-xh6ljj{display:flex;flex-direction:column;align-items:flex-end;gap:8px;justify-content:space-between;text-align:right;font-size:14px}.button-container.svelte-xh6ljj strike.svelte-xh6ljj{color:var(--Gray-Neutral-300, #d2d6db);font-weight:500}");
  }
  function create_default_slot$4(ctx) {
    var _a;
    let p;
    let t_value = (
      /*gift*/
      ((_a = ctx[0]) == null ? void 0 : _a.shopifyFreeGiftName) + ""
    );
    let t;
    return {
      c() {
        p = element("p");
        t = text(t_value);
        attr(p, "class", "product-name svelte-xh6ljj");
      },
      m(target, anchor) {
        insert(target, p, anchor);
        append(p, t);
      },
      p(ctx2, dirty) {
        var _a2;
        if (dirty & /*gift*/
        1 && t_value !== (t_value = /*gift*/
        ((_a2 = ctx2[0]) == null ? void 0 : _a2.shopifyFreeGiftName) + ""))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(p);
        }
      }
    };
  }
  function create_if_block_3$8(ctx) {
    var _a;
    let div;
    let t_value = (
      /*gift*/
      ((_a = ctx[0]) == null ? void 0 : _a.variantName) + ""
    );
    let t;
    return {
      c() {
        div = element("div");
        t = text(t_value);
        attr(div, "class", "variant-element svelte-xh6ljj");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, t);
      },
      p(ctx2, dirty) {
        var _a2;
        if (dirty & /*gift*/
        1 && t_value !== (t_value = /*gift*/
        ((_a2 = ctx2[0]) == null ? void 0 : _a2.variantName) + ""))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
      }
    };
  }
  function create_if_block_2$b(ctx) {
    var _a;
    let strike;
    let t_value = formatCurrencyDisplay(
      /*gift*/
      (_a = ctx[0]) == null ? void 0 : _a.compareAtPrice
    ) + "";
    let t;
    return {
      c() {
        strike = element("strike");
        t = text(t_value);
        attr(strike, "class", "svelte-xh6ljj");
      },
      m(target, anchor) {
        insert(target, strike, anchor);
        append(strike, t);
      },
      p(ctx2, dirty) {
        var _a2;
        if (dirty & /*gift*/
        1 && t_value !== (t_value = formatCurrencyDisplay(
          /*gift*/
          (_a2 = ctx2[0]) == null ? void 0 : _a2.compareAtPrice
        ) + ""))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(strike);
        }
      }
    };
  }
  function create_else_block$b(ctx) {
    let t;
    return {
      c() {
        t = text("+ Add");
      },
      m(target, anchor) {
        insert(target, t, anchor);
      },
      d(detaching) {
        if (detaching) {
          detach(t);
        }
      }
    };
  }
  function create_if_block_1$h(ctx) {
    let p;
    return {
      c() {
        p = element("p");
        p.textContent = "Out of Stock";
        attr(p, "class", "svelte-xh6ljj");
      },
      m(target, anchor) {
        insert(target, p, anchor);
      },
      d(detaching) {
        if (detaching) {
          detach(p);
        }
      }
    };
  }
  function create_if_block$n(ctx) {
    let p;
    return {
      c() {
        p = element("p");
        p.textContent = "Remove";
        attr(p, "class", "svelte-xh6ljj");
      },
      m(target, anchor) {
        insert(target, p, anchor);
      },
      d(detaching) {
        if (detaching) {
          detach(p);
        }
      }
    };
  }
  function create_fragment$s(ctx) {
    var _a, _b, _c;
    let div4;
    let div2;
    let div0;
    let img;
    let img_src_value;
    let img_aria_label_value;
    let t0;
    let div1;
    let tooltip;
    let t1;
    let show_if_1 = (
      /*gift*/
      ((_a = ctx[0]) == null ? void 0 : _a.variantName) && !/*defaultTitlePresent*/
      ctx[5]()
    );
    let t2;
    let div3;
    let t3;
    let span;
    let t5;
    let button;
    let show_if;
    let button_disabled_value;
    let current;
    let mounted;
    let dispose;
    tooltip = new Tooltip({
      props: {
        title: (
          /*gift*/
          (_b = ctx[0]) == null ? void 0 : _b.shopifyFreeGiftName
        ),
        $$slots: { default: [create_default_slot$4] },
        $$scope: { ctx }
      }
    });
    let if_block0 = show_if_1 && create_if_block_3$8(ctx);
    let if_block1 = (
      /*gift*/
      ((_c = ctx[0]) == null ? void 0 : _c.compareAtPrice) && create_if_block_2$b(ctx)
    );
    function select_block_type(ctx2, dirty) {
      if (
        /*isAlreadySelected*/
        ctx2[3]
      )
        return create_if_block$n;
      if (show_if == null)
        show_if = !!/*isGiftOutOfStock*/
        ctx2[6]();
      if (show_if)
        return create_if_block_1$h;
      return create_else_block$b;
    }
    let current_block_type = select_block_type(ctx);
    let if_block2 = current_block_type(ctx);
    return {
      c() {
        var _a2, _b2;
        div4 = element("div");
        div2 = element("div");
        div0 = element("div");
        img = element("img");
        t0 = space();
        div1 = element("div");
        create_component(tooltip.$$.fragment);
        t1 = space();
        if (if_block0)
          if_block0.c();
        t2 = space();
        div3 = element("div");
        if (if_block1)
          if_block1.c();
        t3 = space();
        span = element("span");
        span.textContent = "FREE";
        t5 = space();
        button = element("button");
        if_block2.c();
        if (!src_url_equal(img.src, img_src_value = /*gift*/
        (_a2 = ctx[0]) == null ? void 0 : _a2.imageUrl))
          attr(img, "src", img_src_value);
        attr(img, "alt", "");
        attr(img, "aria-label", img_aria_label_value = /*gift*/
        (_b2 = ctx[0]) == null ? void 0 : _b2.shopifyFreeGiftName);
        attr(img, "class", "product-image svelte-xh6ljj");
        attr(div0, "class", "card-left-container svelte-xh6ljj");
        attr(div1, "class", "card-right-container svelte-xh6ljj");
        attr(div2, "class", "main-container svelte-xh6ljj");
        attr(span, "class", "free-text svelte-xh6ljj");
        button.disabled = button_disabled_value = /*$store_apiLoader*/
        ctx[4] || /*isGiftOutOfStock*/
        ctx[6]() ? true : false;
        attr(button, "class", null_to_empty(`add-btn ${/*isGiftOutOfStock*/
        ctx[6]() ? "out-of-stock" : ""}`) + " svelte-xh6ljj");
        toggle_class(
          button,
          "selected",
          /*isAlreadySelected*/
          ctx[3]
        );
        attr(div3, "class", "button-container svelte-xh6ljj");
        attr(div4, "class", "card svelte-xh6ljj");
      },
      m(target, anchor) {
        insert(target, div4, anchor);
        append(div4, div2);
        append(div2, div0);
        append(div0, img);
        append(div2, t0);
        append(div2, div1);
        mount_component(tooltip, div1, null);
        append(div1, t1);
        if (if_block0)
          if_block0.m(div1, null);
        append(div4, t2);
        append(div4, div3);
        if (if_block1)
          if_block1.m(div3, null);
        append(div3, t3);
        append(div3, span);
        append(div3, t5);
        append(div3, button);
        if_block2.m(button, null);
        current = true;
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*click_handler*/
            ctx[8]
          );
          mounted = true;
        }
      },
      p(ctx2, [dirty]) {
        var _a2, _b2, _c2, _d, _e;
        if (!current || dirty & /*gift*/
        1 && !src_url_equal(img.src, img_src_value = /*gift*/
        (_a2 = ctx2[0]) == null ? void 0 : _a2.imageUrl)) {
          attr(img, "src", img_src_value);
        }
        if (!current || dirty & /*gift*/
        1 && img_aria_label_value !== (img_aria_label_value = /*gift*/
        (_b2 = ctx2[0]) == null ? void 0 : _b2.shopifyFreeGiftName)) {
          attr(img, "aria-label", img_aria_label_value);
        }
        const tooltip_changes = {};
        if (dirty & /*gift*/
        1)
          tooltip_changes.title = /*gift*/
          (_c2 = ctx2[0]) == null ? void 0 : _c2.shopifyFreeGiftName;
        if (dirty & /*$$scope, gift*/
        1025) {
          tooltip_changes.$$scope = { dirty, ctx: ctx2 };
        }
        tooltip.$set(tooltip_changes);
        if (dirty & /*gift*/
        1)
          show_if_1 = /*gift*/
          ((_d = ctx2[0]) == null ? void 0 : _d.variantName) && !/*defaultTitlePresent*/
          ctx2[5]();
        if (show_if_1) {
          if (if_block0) {
            if_block0.p(ctx2, dirty);
          } else {
            if_block0 = create_if_block_3$8(ctx2);
            if_block0.c();
            if_block0.m(div1, null);
          }
        } else if (if_block0) {
          if_block0.d(1);
          if_block0 = null;
        }
        if (
          /*gift*/
          (_e = ctx2[0]) == null ? void 0 : _e.compareAtPrice
        ) {
          if (if_block1) {
            if_block1.p(ctx2, dirty);
          } else {
            if_block1 = create_if_block_2$b(ctx2);
            if_block1.c();
            if_block1.m(div3, t3);
          }
        } else if (if_block1) {
          if_block1.d(1);
          if_block1 = null;
        }
        if (current_block_type !== (current_block_type = select_block_type(ctx2))) {
          if_block2.d(1);
          if_block2 = current_block_type(ctx2);
          if (if_block2) {
            if_block2.c();
            if_block2.m(button, null);
          }
        }
        if (!current || dirty & /*$store_apiLoader*/
        16 && button_disabled_value !== (button_disabled_value = /*$store_apiLoader*/
        ctx2[4] || /*isGiftOutOfStock*/
        ctx2[6]() ? true : false)) {
          button.disabled = button_disabled_value;
        }
        if (!current || dirty & /*isAlreadySelected*/
        8) {
          toggle_class(
            button,
            "selected",
            /*isAlreadySelected*/
            ctx2[3]
          );
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(tooltip.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(tooltip.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div4);
        }
        destroy_component(tooltip);
        if (if_block0)
          if_block0.d();
        if (if_block1)
          if_block1.d();
        if_block2.d();
        mounted = false;
        dispose();
      }
    };
  }
  function instance$s($$self, $$props, $$invalidate) {
    let isAlreadySelected;
    let $store_apiLoader;
    component_subscribe($$self, store_apiLoader, ($$value) => $$invalidate(4, $store_apiLoader = $$value));
    let { gift } = $$props;
    let { addGift } = $$props;
    let { removeGift } = $$props;
    let { selectedGifts = [] } = $$props;
    onMount(() => {
      const style = getComputedStyle(document.documentElement);
      style.getPropertyValue("--gokwik-primary-color");
    });
    const defaultTitlePresent = () => {
      var _a;
      let titlePresent = false;
      if (((_a = gift == null ? void 0 : gift.variantName) == null ? void 0 : _a.toLowerCase()) === "default title") {
        titlePresent = true;
      }
      return titlePresent;
    };
    const isGiftOutOfStock = () => {
      return isVariantAvailable(gift == null ? void 0 : gift.shopifyFreeGiftVariantId) === false;
    };
    const click_handler2 = () => isAlreadySelected ? removeGift(gift) : addGift(gift);
    $$self.$$set = ($$props2) => {
      if ("gift" in $$props2)
        $$invalidate(0, gift = $$props2.gift);
      if ("addGift" in $$props2)
        $$invalidate(1, addGift = $$props2.addGift);
      if ("removeGift" in $$props2)
        $$invalidate(2, removeGift = $$props2.removeGift);
      if ("selectedGifts" in $$props2)
        $$invalidate(7, selectedGifts = $$props2.selectedGifts);
    };
    $$self.$$.update = () => {
      if ($$self.$$.dirty & /*selectedGifts, gift*/
      129) {
        $$invalidate(3, isAlreadySelected = selectedGifts.includes(+cleanShopifyIds(gift == null ? void 0 : gift.shopifyFreeGiftVariantId)));
      }
    };
    return [
      gift,
      addGift,
      removeGift,
      isAlreadySelected,
      $store_apiLoader,
      defaultTitlePresent,
      isGiftOutOfStock,
      selectedGifts,
      click_handler2
    ];
  }
  class GiftTile extends SvelteComponent {
    constructor(options) {
      super();
      init(
        this,
        options,
        instance$s,
        create_fragment$s,
        safe_not_equal,
        {
          gift: 0,
          addGift: 1,
          removeGift: 2,
          selectedGifts: 7
        },
        add_css$q
      );
    }
  }
  function add_css$p(target) {
    append_styles(target, "svelte-7l9ubf", ".gift-list.svelte-7l9ubf.svelte-7l9ubf{padding:8px}.gift-list.svelte-7l9ubf .gift-container.svelte-7l9ubf{border-radius:4px;border:1px solid var(--Gray-Neutral-200, #e5e7eb);padding:8px;display:flex;flex-direction:column;gap:8px}");
  }
  function get_each_context$9(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[5] = list[i];
    return child_ctx;
  }
  function create_each_block$9(ctx) {
    let gifttile;
    let current;
    gifttile = new GiftTile({
      props: {
        gift: (
          /*gift*/
          ctx[5]
        ),
        addGift: (
          /*addGift*/
          ctx[2]
        ),
        removeGift: (
          /*removeGift*/
          ctx[3]
        ),
        selectedGifts: (
          /*selectedGifts*/
          ctx[1]
        )
      }
    });
    return {
      c() {
        create_component(gifttile.$$.fragment);
      },
      m(target, anchor) {
        mount_component(gifttile, target, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        const gifttile_changes = {};
        if (dirty & /*gifts*/
        1)
          gifttile_changes.gift = /*gift*/
          ctx2[5];
        if (dirty & /*selectedGifts*/
        2)
          gifttile_changes.selectedGifts = /*selectedGifts*/
          ctx2[1];
        gifttile.$set(gifttile_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(gifttile.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(gifttile.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(gifttile, detaching);
      }
    };
  }
  function create_fragment$r(ctx) {
    let div1;
    let div0;
    let current;
    let each_value = ensure_array_like(
      /*gifts*/
      ctx[0]
    );
    let each_blocks = [];
    for (let i = 0; i < each_value.length; i += 1) {
      each_blocks[i] = create_each_block$9(get_each_context$9(ctx, each_value, i));
    }
    const out = (i) => transition_out(each_blocks[i], 1, 1, () => {
      each_blocks[i] = null;
    });
    return {
      c() {
        div1 = element("div");
        div0 = element("div");
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        attr(div0, "class", "gift-container svelte-7l9ubf");
        attr(div1, "class", "gift-list svelte-7l9ubf");
      },
      m(target, anchor) {
        insert(target, div1, anchor);
        append(div1, div0);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(div0, null);
          }
        }
        current = true;
      },
      p(ctx2, [dirty]) {
        if (dirty & /*gifts, addGift, removeGift, selectedGifts*/
        15) {
          each_value = ensure_array_like(
            /*gifts*/
            ctx2[0]
          );
          let i;
          for (i = 0; i < each_value.length; i += 1) {
            const child_ctx = get_each_context$9(ctx2, each_value, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
              transition_in(each_blocks[i], 1);
            } else {
              each_blocks[i] = create_each_block$9(child_ctx);
              each_blocks[i].c();
              transition_in(each_blocks[i], 1);
              each_blocks[i].m(div0, null);
            }
          }
          group_outros();
          for (i = each_value.length; i < each_blocks.length; i += 1) {
            out(i);
          }
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        for (let i = 0; i < each_value.length; i += 1) {
          transition_in(each_blocks[i]);
        }
        current = true;
      },
      o(local) {
        each_blocks = each_blocks.filter(Boolean);
        for (let i = 0; i < each_blocks.length; i += 1) {
          transition_out(each_blocks[i]);
        }
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div1);
        }
        destroy_each(each_blocks, detaching);
      }
    };
  }
  function instance$r($$self, $$props, $$invalidate) {
    let { gifts } = $$props;
    let { numberOfGifts } = $$props;
    let selectedGifts = [];
    store_cart.subscribe((cart2) => {
      $$invalidate(1, selectedGifts = gifts.filter((gift) => cart2 == null ? void 0 : cart2.items.find((item) => {
        var _a;
        return ((_a = item == null ? void 0 : item.properties) == null ? void 0 : _a["_gokwik_freebie"]) && (item == null ? void 0 : item.id) === +cleanShopifyIds(gift == null ? void 0 : gift.shopifyFreeGiftVariantId);
      })).map((gift) => +cleanShopifyIds(gift == null ? void 0 : gift.shopifyFreeGiftVariantId)));
    });
    const addGift = async (gift) => {
      if (selectedGifts.length >= numberOfGifts) {
        store_snackbar.set({
          show: true,
          message: "Already selected maximum gifts, remove one to add another",
          error: true,
          timer: 2e3
        });
        return;
      }
      const res = await addToCart({
        id: +cleanShopifyIds(gift == null ? void 0 : gift.shopifyFreeGiftVariantId),
        quantity: gift == null ? void 0 : gift.quantity,
        properties: { "_gokwik_freebie": true }
      });
      if (res) {
        fireGokwikTrigger(TextConstants.eventNames.auto_add_to_cart, {
          event: TextConstants.eventNames.auto_add_to_cart,
          eventType: "pick_your_free_gift",
          items: res
        });
        const updatedSelected = [...selectedGifts, +cleanShopifyIds(gift == null ? void 0 : gift.shopifyFreeGiftVariantId)];
        updateCartFreebieVariantCountFromSelected(updatedSelected, gifts);
      }
      !res && store_snackbar.set({
        show: true,
        message: "Error Adding Product",
        error: true,
        timer: 3e3
      });
    };
    const removeGift = async (gift) => {
      const res = await changeCart({
        id: cleanShopifyIds(gift == null ? void 0 : gift.shopifyFreeGiftVariantId),
        quantity: 0,
        properties: { "_gokwik_freebie": true }
      });
      if (res) {
        const updatedSelected = selectedGifts.filter((id) => id !== +cleanShopifyIds(gift == null ? void 0 : gift.shopifyFreeGiftVariantId));
        updateCartFreebieVariantCountFromSelected(updatedSelected, gifts);
      }
      !res && store_snackbar.set({
        show: true,
        message: "Error Removing Product",
        error: true,
        timer: 3e3
      });
    };
    $$self.$$set = ($$props2) => {
      if ("gifts" in $$props2)
        $$invalidate(0, gifts = $$props2.gifts);
      if ("numberOfGifts" in $$props2)
        $$invalidate(4, numberOfGifts = $$props2.numberOfGifts);
    };
    return [gifts, selectedGifts, addGift, removeGift, numberOfGifts];
  }
  class GiftList extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$r, create_fragment$r, safe_not_equal, { gifts: 0, numberOfGifts: 4 }, add_css$p);
    }
  }
  function add_css$o(target) {
    append_styles(target, "svelte-49292o", ".gift-list-section.svelte-49292o.svelte-49292o{margin-bottom:8px;border-bottom:1px solid var(--border-color, #e0e0e0);padding-bottom:16px}.gift-list-section.svelte-49292o h3.svelte-49292o{font-size:16px;font-weight:600;margin-bottom:12px;color:var(--text-color, #333);padding:8px}");
  }
  function get_each_context$8(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[1] = list[i];
    return child_ctx;
  }
  function create_if_block$m(ctx) {
    let div;
    let h3;
    let t0;
    let t1_value = (
      /*info*/
      ctx[1].numberOfGifts + ""
    );
    let t1;
    let t2;
    let t3_value = (
      /*info*/
      ctx[1].numberOfGifts > 1 ? "s" : ""
    );
    let t3;
    let t4;
    let giftlist;
    let t5;
    let current;
    giftlist = new GiftList({
      props: {
        gifts: (
          /*info*/
          ctx[1].gifts
        ),
        numberOfGifts: (
          /*info*/
          ctx[1].numberOfGifts
        )
      }
    });
    return {
      c() {
        div = element("div");
        h3 = element("h3");
        t0 = text("Choose Any ");
        t1 = text(t1_value);
        t2 = text(" Free Gift");
        t3 = text(t3_value);
        t4 = space();
        create_component(giftlist.$$.fragment);
        t5 = space();
        attr(h3, "class", "svelte-49292o");
        attr(div, "class", "gift-list-section svelte-49292o");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, h3);
        append(h3, t0);
        append(h3, t1);
        append(h3, t2);
        append(h3, t3);
        append(div, t4);
        mount_component(giftlist, div, null);
        append(div, t5);
        current = true;
      },
      p(ctx2, dirty) {
        if ((!current || dirty & /*giftLists*/
        1) && t1_value !== (t1_value = /*info*/
        ctx2[1].numberOfGifts + ""))
          set_data(t1, t1_value);
        if ((!current || dirty & /*giftLists*/
        1) && t3_value !== (t3_value = /*info*/
        ctx2[1].numberOfGifts > 1 ? "s" : ""))
          set_data(t3, t3_value);
        const giftlist_changes = {};
        if (dirty & /*giftLists*/
        1)
          giftlist_changes.gifts = /*info*/
          ctx2[1].gifts;
        if (dirty & /*giftLists*/
        1)
          giftlist_changes.numberOfGifts = /*info*/
          ctx2[1].numberOfGifts;
        giftlist.$set(giftlist_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(giftlist.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(giftlist.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(giftlist);
      }
    };
  }
  function create_each_block$8(ctx) {
    var _a, _b;
    let if_block_anchor;
    let current;
    let if_block = (
      /*info*/
      ((_b = (_a = ctx[1]) == null ? void 0 : _a.gifts) == null ? void 0 : _b.length) > 0 && create_if_block$m(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        var _a2, _b2;
        if (
          /*info*/
          ((_b2 = (_a2 = ctx2[1]) == null ? void 0 : _a2.gifts) == null ? void 0 : _b2.length) > 0
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
            if (dirty & /*giftLists*/
            1) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block$m(ctx2);
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function create_fragment$q(ctx) {
    let div;
    let current;
    let each_value = ensure_array_like(
      /*giftLists*/
      ctx[0]
    );
    let each_blocks = [];
    for (let i = 0; i < each_value.length; i += 1) {
      each_blocks[i] = create_each_block$8(get_each_context$8(ctx, each_value, i));
    }
    const out = (i) => transition_out(each_blocks[i], 1, 1, () => {
      each_blocks[i] = null;
    });
    return {
      c() {
        div = element("div");
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        attr(div, "class", "gift-lists-container");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(div, null);
          }
        }
        current = true;
      },
      p(ctx2, [dirty]) {
        if (dirty & /*giftLists*/
        1) {
          each_value = ensure_array_like(
            /*giftLists*/
            ctx2[0]
          );
          let i;
          for (i = 0; i < each_value.length; i += 1) {
            const child_ctx = get_each_context$8(ctx2, each_value, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
              transition_in(each_blocks[i], 1);
            } else {
              each_blocks[i] = create_each_block$8(child_ctx);
              each_blocks[i].c();
              transition_in(each_blocks[i], 1);
              each_blocks[i].m(div, null);
            }
          }
          group_outros();
          for (i = each_value.length; i < each_blocks.length; i += 1) {
            out(i);
          }
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        for (let i = 0; i < each_value.length; i += 1) {
          transition_in(each_blocks[i]);
        }
        current = true;
      },
      o(local) {
        each_blocks = each_blocks.filter(Boolean);
        for (let i = 0; i < each_blocks.length; i += 1) {
          transition_out(each_blocks[i]);
        }
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_each(each_blocks, detaching);
      }
    };
  }
  function instance$q($$self, $$props, $$invalidate) {
    let { giftLists = [] } = $$props;
    $$self.$$set = ($$props2) => {
      if ("giftLists" in $$props2)
        $$invalidate(0, giftLists = $$props2.giftLists);
    };
    return [giftLists];
  }
  class GiftListsContainer extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$q, create_fragment$q, safe_not_equal, { giftLists: 0 }, add_css$o);
    }
  }
  function add_css$n(target) {
    append_styles(target, "svelte-1qqgzkk", ".breakdown-row.svelte-1qqgzkk.svelte-1qqgzkk{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;font-size:14px}.breakdown-row.svelte-1qqgzkk.svelte-1qqgzkk:last-child{margin-bottom:0}.breakdown-row.svelte-1qqgzkk span.svelte-1qqgzkk{color:#6c737f}.breakdown-row.svelte-1qqgzkk span.svelte-1qqgzkk:last-child{color:#1a1a1a;font-weight:500}.cashback.svelte-1qqgzkk.svelte-1qqgzkk{font-size:14px}.cashback.svelte-1qqgzkk .cashback-amount.svelte-1qqgzkk{color:#00b386}.cashback.svelte-1qqgzkk .value-with-info.svelte-1qqgzkk{display:flex;align-items:center;gap:5px}.cashback.svelte-1qqgzkk .value-with-info .info-icon.svelte-1qqgzkk{cursor:help;color:#6c737f;display:flex;align-items:center}");
  }
  function create_if_block$l(ctx) {
    let div1;
    let span;
    let t1;
    let div0;
    let t2;
    let tooltip;
    let current;
    function select_block_type(ctx2, dirty) {
      var _a, _b;
      if (
        /*cashbackSummary*/
        ((_a = ctx2[0]) == null ? void 0 : _a.type) === "static"
      )
        return create_if_block_1$g;
      if (
        /*cashbackSummary*/
        ((_b = ctx2[0]) == null ? void 0 : _b.type) === "dynamic"
      )
        return create_if_block_2$a;
    }
    let current_block_type = select_block_type(ctx);
    let if_block = current_block_type && current_block_type(ctx);
    tooltip = new Tooltip({
      props: {
        title: "You will receive cashback on successful delivery of order.",
        $$slots: { default: [create_default_slot$3] },
        $$scope: { ctx }
      }
    });
    return {
      c() {
        div1 = element("div");
        span = element("span");
        span.textContent = "Cashback Earned";
        t1 = space();
        div0 = element("div");
        if (if_block)
          if_block.c();
        t2 = space();
        create_component(tooltip.$$.fragment);
        attr(span, "class", "svelte-1qqgzkk");
        attr(div0, "class", "value-with-info svelte-1qqgzkk");
        attr(div1, "class", "breakdown-row cashback svelte-1qqgzkk");
      },
      m(target, anchor) {
        insert(target, div1, anchor);
        append(div1, span);
        append(div1, t1);
        append(div1, div0);
        if (if_block)
          if_block.m(div0, null);
        append(div0, t2);
        mount_component(tooltip, div0, null);
        current = true;
      },
      p(ctx2, dirty) {
        if (current_block_type === (current_block_type = select_block_type(ctx2)) && if_block) {
          if_block.p(ctx2, dirty);
        } else {
          if (if_block)
            if_block.d(1);
          if_block = current_block_type && current_block_type(ctx2);
          if (if_block) {
            if_block.c();
            if_block.m(div0, t2);
          }
        }
        const tooltip_changes = {};
        if (dirty & /*$$scope*/
        4) {
          tooltip_changes.$$scope = { dirty, ctx: ctx2 };
        }
        tooltip.$set(tooltip_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(tooltip.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(tooltip.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div1);
        }
        if (if_block) {
          if_block.d();
        }
        destroy_component(tooltip);
      }
    };
  }
  function create_if_block_2$a(ctx) {
    var _a;
    let span;
    let t_value = formatCurrencyDisplay(((+/*totalPayable*/
    ctx[1] < 0 ? 0 : +/*totalPayable*/
    ctx[1]) * /*cashbackSummary*/
    (((_a = ctx[0]) == null ? void 0 : _a.percentage) || 0) / 100).toFixed(2)) + "";
    let t;
    return {
      c() {
        span = element("span");
        t = text(t_value);
        attr(span, "class", "cashback-amount svelte-1qqgzkk");
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t);
      },
      p(ctx2, dirty) {
        var _a2;
        if (dirty & /*totalPayable, cashbackSummary*/
        3 && t_value !== (t_value = formatCurrencyDisplay(((+/*totalPayable*/
        ctx2[1] < 0 ? 0 : +/*totalPayable*/
        ctx2[1]) * /*cashbackSummary*/
        (((_a2 = ctx2[0]) == null ? void 0 : _a2.percentage) || 0) / 100).toFixed(2)) + ""))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_if_block_1$g(ctx) {
    var _a;
    let span;
    let t_value = formatCurrencyDisplay(
      /*cashbackSummary*/
      (((_a = ctx[0]) == null ? void 0 : _a.amount) ?? 0).toFixed(2)
    ) + "";
    let t;
    return {
      c() {
        span = element("span");
        t = text(t_value);
        attr(span, "class", "cashback-amount svelte-1qqgzkk");
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t);
      },
      p(ctx2, dirty) {
        var _a2;
        if (dirty & /*cashbackSummary*/
        1 && t_value !== (t_value = formatCurrencyDisplay(
          /*cashbackSummary*/
          (((_a2 = ctx2[0]) == null ? void 0 : _a2.amount) ?? 0).toFixed(2)
        ) + ""))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_default_slot$3(ctx) {
    let div;
    let icon;
    let current;
    icon = new Icon({
      props: {
        icon: "mdi:information-outline",
        width: "14",
        height: "14"
      }
    });
    return {
      c() {
        div = element("div");
        create_component(icon.$$.fragment);
        attr(div, "class", "info-icon svelte-1qqgzkk");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        mount_component(icon, div, null);
        current = true;
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(icon);
      }
    };
  }
  function create_fragment$p(ctx) {
    var _a, _b, _c, _d;
    let if_block_anchor;
    let current;
    let if_block = (
      /*cashbackSummary*/
      ((_a = ctx[0]) == null ? void 0 : _a.type) && /*cashbackSummary*/
      ((_b = ctx[0]) == null ? void 0 : _b.type) !== "custom" && /*cashbackSummary*/
      (((_c = ctx[0]) == null ? void 0 : _c.amount) || /*cashbackSummary*/
      ((_d = ctx[0]) == null ? void 0 : _d.percentage)) && create_if_block$l(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, [dirty]) {
        var _a2, _b2, _c2, _d2;
        if (
          /*cashbackSummary*/
          ((_a2 = ctx2[0]) == null ? void 0 : _a2.type) && /*cashbackSummary*/
          ((_b2 = ctx2[0]) == null ? void 0 : _b2.type) !== "custom" && /*cashbackSummary*/
          (((_c2 = ctx2[0]) == null ? void 0 : _c2.amount) || /*cashbackSummary*/
          ((_d2 = ctx2[0]) == null ? void 0 : _d2.percentage))
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
            if (dirty & /*cashbackSummary*/
            1) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block$l(ctx2);
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function instance$p($$self, $$props, $$invalidate) {
    let { cashbackSummary } = $$props;
    let { totalPayable: totalPayable2 } = $$props;
    $$self.$$set = ($$props2) => {
      if ("cashbackSummary" in $$props2)
        $$invalidate(0, cashbackSummary = $$props2.cashbackSummary);
      if ("totalPayable" in $$props2)
        $$invalidate(1, totalPayable2 = $$props2.totalPayable);
    };
    return [cashbackSummary, totalPayable2];
  }
  class CashbackBreakdown extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$p, create_fragment$p, safe_not_equal, { cashbackSummary: 0, totalPayable: 1 }, add_css$n);
    }
  }
  function add_css$m(target) {
    append_styles(target, "svelte-yb4nuo", ".sidecart-footer-wrapper.svelte-yb4nuo.svelte-yb4nuo{position:relative}.sidecart-footer.svelte-yb4nuo.svelte-yb4nuo{display:flex;padding:5px 20px;border-radius:15px 15px 0px 15px;background-color:#fff;flex-direction:column}.sidecart-footer.svelte-yb4nuo .gokwik-button-wrapper.svelte-yb4nuo{display:flex;flex:2}.sidecart-footer.svelte-yb4nuo .gokwik-button-wrapper .estimated-total-container.svelte-yb4nuo{text-wrap:nowrap}.sidecart-footer.svelte-yb4nuo .gokwik-button-wrapper .estimated-total-container strike.svelte-yb4nuo{color:var(--Gray-Neutral-300, #d2d6db);font-size:14px}.sidecart-footer.svelte-yb4nuo .gokwik-button-wrapper .estimated-total-container .discount-percentage.svelte-yb4nuo{color:#16a34a;font-weight:600;display:block;text-align:end;font-size:12px}.sidecart-footer.svelte-yb4nuo .gokwik-button-wrapper .total-amount.svelte-yb4nuo{width:40%;position:relative;display:flex;justify-content:center;font-size:18px;align-items:flex-start;flex-direction:column;font-weight:600}.sidecart-footer.svelte-yb4nuo .gokwik-button-wrapper .total-amount .estimated-total-section.svelte-yb4nuo{display:flex;align-items:center;gap:5px;width:100%}.sidecart-footer.svelte-yb4nuo .gokwik-button-wrapper .total-amount .estimated-total-section.svelte-yb4nuo svg{min-width:24px;width:24px;height:24px;flex-shrink:0}.sidecart-footer.svelte-yb4nuo .gokwik-button-wrapper .total-amount .estimated-total.svelte-yb4nuo{font-size:16px;font-weight:600;text-wrap:nowrap}.sidecart-footer.svelte-yb4nuo .gokwik-button-wrapper .total-amount .breakdown-toggle.svelte-yb4nuo{background:none;border:none;cursor:pointer;color:var(--Gray-Neutral-500, #6c737f);padding:2px;display:flex;align-items:center}.sidecart-footer.svelte-yb4nuo .gokwik-button-wrapper .total-amount .breakdown-toggle.svelte-yb4nuo:hover{color:var(--gokwik-primary-color)}.sidecart-footer.svelte-yb4nuo .gokwik-checkout.svelte-yb4nuo{width:100%;margin:5px 0}.sidecart-footer.svelte-yb4nuo .gokwik-checkout button.svelte-yb4nuo{padding:10px;border-radius:10px;background:var(--gokwik-primary-color);color:#fff;font-weight:600;cursor:pointer;height:55px;justify-content:space-between;text-align:left}.sidecart-footer.svelte-yb4nuo .gokwik-checkout button .btn-content.svelte-yb4nuo{display:flex;align-items:center;justify-content:space-between}.sidecart-footer.svelte-yb4nuo .gokwik-checkout button .btn-content .btn-text.svelte-yb4nuo{display:flex;flex-direction:column;flex-grow:1}.sidecart-footer.svelte-yb4nuo .gokwik-checkout button .btn-content .btn-text span.svelte-yb4nuo{color:#fff;font-size:14px;font-weight:700;line-height:normal}.sidecart-footer.svelte-yb4nuo .gokwik-checkout button .btn-content .btn-text .checkout-btn-subtitle.svelte-yb4nuo{font-size:10px;margin-top:5px;font-weight:400}.sidecart-footer.svelte-yb4nuo .gokwik-checkout button .btn-content .payment-icons.svelte-yb4nuo{display:flex;align-items:center;justify-content:flex-end;margin-left:8px}.order-breakdown.svelte-yb4nuo.svelte-yb4nuo{background:#f8f9fa;border-radius:8px;padding:15px;margin:10px 0;border:1px solid #e9ecef}.order-breakdown.svelte-yb4nuo .breakdown-header.svelte-yb4nuo{display:flex;justify-content:space-between;align-items:center;margin-bottom:15px}.order-breakdown.svelte-yb4nuo .breakdown-header h3.svelte-yb4nuo{margin:0;font-size:16px;font-weight:600;color:#1a1a1a}.order-breakdown.svelte-yb4nuo .breakdown-header .saved-amount.svelte-yb4nuo{font-size:12px;color:#00b386;background:#e8f5f0;padding:4px 8px;border-radius:4px;font-weight:500}.order-breakdown.svelte-yb4nuo .breakdown-content.svelte-yb4nuo{border-bottom:1px solid #e9ecef;padding-bottom:15px}.order-breakdown.svelte-yb4nuo .breakdown-row.svelte-yb4nuo{display:flex;justify-content:space-between;align-items:center;margin-bottom:10px;font-size:14px}.order-breakdown.svelte-yb4nuo .breakdown-row.svelte-yb4nuo:last-child{margin-bottom:0}.order-breakdown.svelte-yb4nuo .breakdown-row.discount span.svelte-yb4nuo:last-child{color:#00b386}.order-breakdown.svelte-yb4nuo .breakdown-row.total-row.svelte-yb4nuo{font-weight:600;font-size:16px;color:#1a1a1a}.order-breakdown.svelte-yb4nuo .breakdown-row span.svelte-yb4nuo{color:#6c737f}.order-breakdown.svelte-yb4nuo .breakdown-row span.svelte-yb4nuo:last-child{color:#1a1a1a;font-weight:500}.order-breakdown.svelte-yb4nuo .breakdown-row .value-with-info.svelte-yb4nuo{display:flex;align-items:center;gap:5px}.order-breakdown.svelte-yb4nuo .breakdown-row .value-with-info .freebie.svelte-yb4nuo{color:#00b386;font-weight:500}.order-breakdown.svelte-yb4nuo .breakdown-row .value-with-info .info-icon.svelte-yb4nuo{cursor:help;color:#6c737f;display:flex;align-items:center}.order-breakdown.svelte-yb4nuo .breakdown-total.svelte-yb4nuo{border-top:1px solid #e9ecef;padding-top:15px}.main-footer.svelte-yb4nuo.svelte-yb4nuo{display:flex;justify-content:center;padding:0px 10px 0px;align-items:center}.main-footer.svelte-yb4nuo .footer-info img.svelte-yb4nuo{padding-right:10px;height:20px}.main-footer.svelte-yb4nuo .footer-info img.svelte-yb4nuo:last-child{padding-right:0px}.main-footer.svelte-yb4nuo .powered-by.svelte-yb4nuo{display:flex;align-items:center;gap:0.2rem;font-size:8px;color:#666;background:transparent}.main-footer.svelte-yb4nuo .powered-by img.svelte-yb4nuo{width:57px;height:16px;background:transparent}.main-footer.svelte-yb4nuo .privacy-tnc img.svelte-yb4nuo{margin-right:6px}.double-button.svelte-yb4nuo .gokwik-button-wrapper.svelte-yb4nuo{flex-direction:column}.double-button.svelte-yb4nuo .gokwik-button-wrapper .total-amount.svelte-yb4nuo{width:100%;justify-content:space-between;margin:5px 0px;flex-direction:row-reverse;align-items:center}.double-button.svelte-yb4nuo .gokwik-button-wrapper button.svelte-yb4nuo{width:100%}.double-button.svelte-yb4nuo .gokwik-button-wrapper .shopify-native-checkout button.svelte-yb4nuo{border-radius:10px;background:var(--gokwik-primary-color);color:#fff;font-weight:600;height:55px;justify-content:space-between;margin:0 0 10px !important;outline:none;border:none;cursor:pointer;border:0;padding:10px;display:flex;align-items:center;flex-direction:column;justify-content:center;align-items:flex-start}.double-button.svelte-yb4nuo .gokwik-button-wrapper .shopify-native-checkout button .checkout-btn-subtitle.svelte-yb4nuo{font-weight:normal}.mb-2.svelte-yb4nuo.svelte-yb4nuo{margin-bottom:2px}.tnc-container.svelte-yb4nuo.svelte-yb4nuo{all:unset;display:flex;align-items:center;margin:5px 0}.margin-right-5.svelte-yb4nuo.svelte-yb4nuo{margin-right:5px}.cursor-default.svelte-yb4nuo.svelte-yb4nuo{cursor:default}");
  }
  function create_if_block_19(ctx) {
    let saveamountbanner;
    let current;
    saveamountbanner = new SaveAmountBanner({
      props: {
        savedAmount: (
          /*savedAmount*/
          ctx[7]
        ),
        cashbackText: (
          /*cashbackText*/
          ctx[18]
        )
      }
    });
    saveamountbanner.$on(
      "height",
      /*handleRibbonHeight*/
      ctx[22]
    );
    return {
      c() {
        create_component(saveamountbanner.$$.fragment);
      },
      m(target, anchor) {
        mount_component(saveamountbanner, target, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        const saveamountbanner_changes = {};
        if (dirty[0] & /*savedAmount*/
        128)
          saveamountbanner_changes.savedAmount = /*savedAmount*/
          ctx2[7];
        if (dirty[0] & /*cashbackText*/
        262144)
          saveamountbanner_changes.cashbackText = /*cashbackText*/
          ctx2[18];
        saveamountbanner.$set(saveamountbanner_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(saveamountbanner.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(saveamountbanner.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(saveamountbanner, detaching);
      }
    };
  }
  function create_else_block_4(ctx) {
    let span;
    let t_value = formatCurrencyDisplay(+/*totalPayable*/
    ctx[1] < 0 ? 0 : +/*totalPayable*/
    ctx[1]) + "";
    let t;
    return {
      c() {
        span = element("span");
        t = text(t_value);
        attr(span, "class", "svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t);
      },
      p(ctx2, dirty) {
        if (dirty[0] & /*totalPayable*/
        2 && t_value !== (t_value = formatCurrencyDisplay(+/*totalPayable*/
        ctx2[1] < 0 ? 0 : +/*totalPayable*/
        ctx2[1]) + ""))
          set_data(t, t_value);
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_if_block_18(ctx) {
    let strike;
    let t0_value = formatCurrencyDisplay(+/*cartTotal*/
    ctx[2]) + "";
    let t0;
    let t1;
    let span0;
    let t2_value = formatCurrencyDisplay(+/*totalPayable*/
    ctx[1] < 0 ? 0 : +/*totalPayable*/
    ctx[1]) + "";
    let t2;
    let t3;
    let span1;
    let t4_value = `(${/*discountInPercentage*/
    ctx[16].toFixed(0)}% OFF)`;
    let t4;
    return {
      c() {
        strike = element("strike");
        t0 = text(t0_value);
        t1 = space();
        span0 = element("span");
        t2 = text(t2_value);
        t3 = space();
        span1 = element("span");
        t4 = text(t4_value);
        attr(strike, "class", "svelte-yb4nuo");
        attr(span0, "class", "svelte-yb4nuo");
        attr(span1, "class", "discount-percentage svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, strike, anchor);
        append(strike, t0);
        insert(target, t1, anchor);
        insert(target, span0, anchor);
        append(span0, t2);
        insert(target, t3, anchor);
        insert(target, span1, anchor);
        append(span1, t4);
      },
      p(ctx2, dirty) {
        if (dirty[0] & /*cartTotal*/
        4 && t0_value !== (t0_value = formatCurrencyDisplay(+/*cartTotal*/
        ctx2[2]) + ""))
          set_data(t0, t0_value);
        if (dirty[0] & /*totalPayable*/
        2 && t2_value !== (t2_value = formatCurrencyDisplay(+/*totalPayable*/
        ctx2[1] < 0 ? 0 : +/*totalPayable*/
        ctx2[1]) + ""))
          set_data(t2, t2_value);
        if (dirty[0] & /*discountInPercentage*/
        65536 && t4_value !== (t4_value = `(${/*discountInPercentage*/
        ctx2[16].toFixed(0)}% OFF)`))
          set_data(t4, t4_value);
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(strike);
          detach(t1);
          detach(span0);
          detach(t3);
          detach(span1);
        }
      }
    };
  }
  function create_if_block_17(ctx) {
    let loadingsvg;
    let current;
    loadingsvg = new LoadingSvg({ props: { color: "#000", size: "25px" } });
    return {
      c() {
        create_component(loadingsvg.$$.fragment);
      },
      m(target, anchor) {
        mount_component(loadingsvg, target, anchor);
        current = true;
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(loadingsvg.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(loadingsvg.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(loadingsvg, detaching);
      }
    };
  }
  function create_if_block_16(ctx) {
    let button;
    let icon;
    let current;
    let mounted;
    let dispose;
    icon = new Icon({
      props: {
        icon: (
          /*showOrderBreakdown*/
          ctx[12] ? "mdi:chevron-up" : "mdi:chevron-down"
        ),
        width: "18",
        height: "18"
      }
    });
    return {
      c() {
        button = element("button");
        create_component(icon.$$.fragment);
        attr(button, "class", "breakdown-toggle svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, button, anchor);
        mount_component(icon, button, null);
        current = true;
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*toggleOrderBreakdown*/
            ctx[23]
          );
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        const icon_changes = {};
        if (dirty[0] & /*showOrderBreakdown*/
        4096)
          icon_changes.icon = /*showOrderBreakdown*/
          ctx2[12] ? "mdi:chevron-up" : "mdi:chevron-down";
        icon.$set(icon_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        destroy_component(icon);
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block_9$2(ctx) {
    var _a, _b, _c;
    let div9;
    let div0;
    let h3;
    let t1;
    let t2;
    let div6;
    let div1;
    let span0;
    let t4;
    let span1;
    let t5_value = formatCurrencyDisplay(+/*cartTotal*/
    ctx[2].toFixed(2)) + "";
    let t5;
    let t6;
    let div2;
    let span2;
    let t8;
    let span3;
    let t9_value = formatCurrencyDisplay(+/*totalSavings*/
    ctx[9].toFixed(2)) + "";
    let t9;
    let t10;
    let div3;
    let span4;
    let t12;
    let span5;
    let t13_value = formatCurrencyDisplay(
      /*$store_cart*/
      ((((_a = ctx[5]) == null ? void 0 : _a.original_total_price) || 0) / 100).toFixed(2)
    ) + "";
    let t13;
    let t14;
    let div4;
    let span6;
    let t16;
    let span7;
    let t17_value = formatCurrencyDisplay(((+/*savedAmount*/
    ctx[7] || 0) - (+/*totalSavings*/
    ctx[9] || 0)).toFixed(2)) + "";
    let t17;
    let t18;
    let cashbackbreakdown;
    let t19;
    let t20;
    let div5;
    let span8;
    let t22;
    let span9;
    let t23_value = formatCurrencyDisplay(
      /*savedAmount*/
      ctx[7].toFixed(2)
    ) + "";
    let t23;
    let t24;
    let div8;
    let div7;
    let span10;
    let t26;
    let span11;
    let t27_value = formatCurrencyDisplay((_b = +/*totalPayable*/
    ctx[1] < 0 ? 0 : +/*totalPayable*/
    ctx[1]) == null ? void 0 : _b.toFixed(2)) + "";
    let t27;
    let current;
    let if_block0 = (
      /*savedAmount*/
      ctx[7] > 0 && create_if_block_15(ctx)
    );
    cashbackbreakdown = new CashbackBreakdown({
      props: {
        cashbackSummary: (
          /*cashbackSummary*/
          ctx[19]
        ),
        totalPayable: (
          /*totalPayable*/
          ctx[1]
        )
      }
    });
    let if_block1 = (
      /*$store_configurations*/
      ((_c = ctx[4]) == null ? void 0 : _c.platform) === TextConstants.platforms.Checkout1_0 && create_if_block_10$2(ctx)
    );
    return {
      c() {
        div9 = element("div");
        div0 = element("div");
        h3 = element("h3");
        h3.textContent = "Order Summary";
        t1 = space();
        if (if_block0)
          if_block0.c();
        t2 = space();
        div6 = element("div");
        div1 = element("div");
        span0 = element("span");
        span0.textContent = "MRP total";
        t4 = space();
        span1 = element("span");
        t5 = text(t5_value);
        t6 = space();
        div2 = element("div");
        span2 = element("span");
        span2.textContent = "Discount on MRP";
        t8 = space();
        span3 = element("span");
        t9 = text(t9_value);
        t10 = space();
        div3 = element("div");
        span4 = element("span");
        span4.textContent = "Cart Subtotal";
        t12 = space();
        span5 = element("span");
        t13 = text(t13_value);
        t14 = space();
        div4 = element("div");
        span6 = element("span");
        span6.textContent = "Total discount";
        t16 = space();
        span7 = element("span");
        t17 = text(t17_value);
        t18 = space();
        create_component(cashbackbreakdown.$$.fragment);
        t19 = space();
        if (if_block1)
          if_block1.c();
        t20 = space();
        div5 = element("div");
        span8 = element("span");
        span8.textContent = "Total savings";
        t22 = space();
        span9 = element("span");
        t23 = text(t23_value);
        t24 = space();
        div8 = element("div");
        div7 = element("div");
        span10 = element("span");
        span10.textContent = "Estimated Total";
        t26 = space();
        span11 = element("span");
        t27 = text(t27_value);
        attr(h3, "class", "svelte-yb4nuo");
        attr(div0, "class", "breakdown-header svelte-yb4nuo");
        attr(span0, "class", "svelte-yb4nuo");
        attr(span1, "class", "svelte-yb4nuo");
        attr(div1, "class", "breakdown-row svelte-yb4nuo");
        attr(span2, "class", "svelte-yb4nuo");
        attr(span3, "class", "svelte-yb4nuo");
        attr(div2, "class", "breakdown-row discount svelte-yb4nuo");
        attr(span4, "class", "svelte-yb4nuo");
        attr(span5, "class", "svelte-yb4nuo");
        attr(div3, "class", "breakdown-row svelte-yb4nuo");
        attr(span6, "class", "svelte-yb4nuo");
        attr(span7, "class", "svelte-yb4nuo");
        attr(div4, "class", "breakdown-row discount svelte-yb4nuo");
        attr(span8, "class", "svelte-yb4nuo");
        attr(span9, "class", "svelte-yb4nuo");
        attr(div5, "class", "breakdown-row discount svelte-yb4nuo");
        attr(div6, "class", "breakdown-content svelte-yb4nuo");
        attr(span10, "class", "svelte-yb4nuo");
        attr(span11, "class", "svelte-yb4nuo");
        attr(div7, "class", "breakdown-row total-row svelte-yb4nuo");
        attr(div8, "class", "breakdown-total svelte-yb4nuo");
        attr(div9, "class", "order-breakdown svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, div9, anchor);
        append(div9, div0);
        append(div0, h3);
        append(div0, t1);
        if (if_block0)
          if_block0.m(div0, null);
        append(div9, t2);
        append(div9, div6);
        append(div6, div1);
        append(div1, span0);
        append(div1, t4);
        append(div1, span1);
        append(span1, t5);
        append(div6, t6);
        append(div6, div2);
        append(div2, span2);
        append(div2, t8);
        append(div2, span3);
        append(span3, t9);
        append(div6, t10);
        append(div6, div3);
        append(div3, span4);
        append(div3, t12);
        append(div3, span5);
        append(span5, t13);
        append(div6, t14);
        append(div6, div4);
        append(div4, span6);
        append(div4, t16);
        append(div4, span7);
        append(span7, t17);
        append(div6, t18);
        mount_component(cashbackbreakdown, div6, null);
        append(div6, t19);
        if (if_block1)
          if_block1.m(div6, null);
        append(div6, t20);
        append(div6, div5);
        append(div5, span8);
        append(div5, t22);
        append(div5, span9);
        append(span9, t23);
        append(div9, t24);
        append(div9, div8);
        append(div8, div7);
        append(div7, span10);
        append(div7, t26);
        append(div7, span11);
        append(span11, t27);
        current = true;
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c2;
        if (
          /*savedAmount*/
          ctx2[7] > 0
        ) {
          if (if_block0) {
            if_block0.p(ctx2, dirty);
          } else {
            if_block0 = create_if_block_15(ctx2);
            if_block0.c();
            if_block0.m(div0, null);
          }
        } else if (if_block0) {
          if_block0.d(1);
          if_block0 = null;
        }
        if ((!current || dirty[0] & /*cartTotal*/
        4) && t5_value !== (t5_value = formatCurrencyDisplay(+/*cartTotal*/
        ctx2[2].toFixed(2)) + ""))
          set_data(t5, t5_value);
        if ((!current || dirty[0] & /*totalSavings*/
        512) && t9_value !== (t9_value = formatCurrencyDisplay(+/*totalSavings*/
        ctx2[9].toFixed(2)) + ""))
          set_data(t9, t9_value);
        if ((!current || dirty[0] & /*$store_cart*/
        32) && t13_value !== (t13_value = formatCurrencyDisplay(
          /*$store_cart*/
          ((((_a2 = ctx2[5]) == null ? void 0 : _a2.original_total_price) || 0) / 100).toFixed(2)
        ) + ""))
          set_data(t13, t13_value);
        if ((!current || dirty[0] & /*savedAmount, totalSavings*/
        640) && t17_value !== (t17_value = formatCurrencyDisplay(((+/*savedAmount*/
        ctx2[7] || 0) - (+/*totalSavings*/
        ctx2[9] || 0)).toFixed(2)) + ""))
          set_data(t17, t17_value);
        const cashbackbreakdown_changes = {};
        if (dirty[0] & /*cashbackSummary*/
        524288)
          cashbackbreakdown_changes.cashbackSummary = /*cashbackSummary*/
          ctx2[19];
        if (dirty[0] & /*totalPayable*/
        2)
          cashbackbreakdown_changes.totalPayable = /*totalPayable*/
          ctx2[1];
        cashbackbreakdown.$set(cashbackbreakdown_changes);
        if (
          /*$store_configurations*/
          ((_b2 = ctx2[4]) == null ? void 0 : _b2.platform) === TextConstants.platforms.Checkout1_0
        ) {
          if (if_block1) {
            if_block1.p(ctx2, dirty);
            if (dirty[0] & /*$store_configurations*/
            16) {
              transition_in(if_block1, 1);
            }
          } else {
            if_block1 = create_if_block_10$2(ctx2);
            if_block1.c();
            transition_in(if_block1, 1);
            if_block1.m(div6, t20);
          }
        } else if (if_block1) {
          group_outros();
          transition_out(if_block1, 1, 1, () => {
            if_block1 = null;
          });
          check_outros();
        }
        if ((!current || dirty[0] & /*savedAmount*/
        128) && t23_value !== (t23_value = formatCurrencyDisplay(
          /*savedAmount*/
          ctx2[7].toFixed(2)
        ) + ""))
          set_data(t23, t23_value);
        if ((!current || dirty[0] & /*totalPayable*/
        2) && t27_value !== (t27_value = formatCurrencyDisplay((_c2 = +/*totalPayable*/
        ctx2[1] < 0 ? 0 : +/*totalPayable*/
        ctx2[1]) == null ? void 0 : _c2.toFixed(2)) + ""))
          set_data(t27, t27_value);
      },
      i(local) {
        if (current)
          return;
        transition_in(cashbackbreakdown.$$.fragment, local);
        transition_in(if_block1);
        current = true;
      },
      o(local) {
        transition_out(cashbackbreakdown.$$.fragment, local);
        transition_out(if_block1);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div9);
        }
        if (if_block0)
          if_block0.d();
        destroy_component(cashbackbreakdown);
        if (if_block1)
          if_block1.d();
      }
    };
  }
  function create_if_block_15(ctx) {
    let span;
    let t0_value = formatCurrencyDisplay(
      /*savedAmount*/
      ctx[7].toFixed(2)
    ) + "";
    let t0;
    let t1;
    return {
      c() {
        span = element("span");
        t0 = text(t0_value);
        t1 = text(" saved so far");
        attr(span, "class", "saved-amount svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t0);
        append(span, t1);
      },
      p(ctx2, dirty) {
        if (dirty[0] & /*savedAmount*/
        128 && t0_value !== (t0_value = formatCurrencyDisplay(
          /*savedAmount*/
          ctx2[7].toFixed(2)
        ) + ""))
          set_data(t0, t0_value);
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_if_block_10$2(ctx) {
    let div0;
    let span0;
    let t1;
    let current_block_type_index;
    let if_block0;
    let t2;
    let div2;
    let span1;
    let t4;
    let div1;
    let current_block_type_index_1;
    let if_block1;
    let current;
    const if_block_creators = [create_if_block_13, create_if_block_14, create_else_block_3];
    const if_blocks = [];
    function select_block_type_1(ctx2, dirty) {
      if (
        /*prepaidDiscountType*/
        ctx2[15] === "Freebie" && /*prepaidDiscount*/
        ctx2[14] !== void 0 && /*prepaidDiscount*/
        ctx2[14] >= 0
      )
        return 0;
      if (
        /*prepaidDiscountType*/
        ctx2[15] === "Non Freebie" && /*prepaidDiscount*/
        ctx2[14] !== void 0 && /*prepaidDiscount*/
        ctx2[14] >= 0
      )
        return 1;
      return 2;
    }
    current_block_type_index = select_block_type_1(ctx);
    if_block0 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
    const if_block_creators_1 = [create_if_block_11, create_if_block_12, create_else_block_2];
    const if_blocks_1 = [];
    function select_block_type_2(ctx2, dirty) {
      if (
        /*shipping*/
        ctx2[13] !== void 0 && /*shipping*/
        ctx2[13] > 0
      )
        return 0;
      if (
        /*shipping*/
        ctx2[13] !== void 0 && /*shipping*/
        ctx2[13] === 0
      )
        return 1;
      return 2;
    }
    current_block_type_index_1 = select_block_type_2(ctx);
    if_block1 = if_blocks_1[current_block_type_index_1] = if_block_creators_1[current_block_type_index_1](ctx);
    return {
      c() {
        div0 = element("div");
        span0 = element("span");
        span0.textContent = "Prepaid Discount";
        t1 = space();
        if_block0.c();
        t2 = space();
        div2 = element("div");
        span1 = element("span");
        span1.textContent = "Shipping Charges";
        t4 = space();
        div1 = element("div");
        if_block1.c();
        attr(span0, "class", "svelte-yb4nuo");
        attr(div0, "class", "breakdown-row svelte-yb4nuo");
        attr(span1, "class", "svelte-yb4nuo");
        attr(div1, "class", "value-with-info svelte-yb4nuo");
        attr(div2, "class", "breakdown-row svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, div0, anchor);
        append(div0, span0);
        append(div0, t1);
        if_blocks[current_block_type_index].m(div0, null);
        insert(target, t2, anchor);
        insert(target, div2, anchor);
        append(div2, span1);
        append(div2, t4);
        append(div2, div1);
        if_blocks_1[current_block_type_index_1].m(div1, null);
        current = true;
      },
      p(ctx2, dirty) {
        let previous_block_index = current_block_type_index;
        current_block_type_index = select_block_type_1(ctx2);
        if (current_block_type_index === previous_block_index) {
          if_blocks[current_block_type_index].p(ctx2, dirty);
        } else {
          group_outros();
          transition_out(if_blocks[previous_block_index], 1, 1, () => {
            if_blocks[previous_block_index] = null;
          });
          check_outros();
          if_block0 = if_blocks[current_block_type_index];
          if (!if_block0) {
            if_block0 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
            if_block0.c();
          } else {
            if_block0.p(ctx2, dirty);
          }
          transition_in(if_block0, 1);
          if_block0.m(div0, null);
        }
        let previous_block_index_1 = current_block_type_index_1;
        current_block_type_index_1 = select_block_type_2(ctx2);
        if (current_block_type_index_1 === previous_block_index_1) {
          if_blocks_1[current_block_type_index_1].p(ctx2, dirty);
        } else {
          group_outros();
          transition_out(if_blocks_1[previous_block_index_1], 1, 1, () => {
            if_blocks_1[previous_block_index_1] = null;
          });
          check_outros();
          if_block1 = if_blocks_1[current_block_type_index_1];
          if (!if_block1) {
            if_block1 = if_blocks_1[current_block_type_index_1] = if_block_creators_1[current_block_type_index_1](ctx2);
            if_block1.c();
          } else {
            if_block1.p(ctx2, dirty);
          }
          transition_in(if_block1, 1);
          if_block1.m(div1, null);
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block0);
        transition_in(if_block1);
        current = true;
      },
      o(local) {
        transition_out(if_block0);
        transition_out(if_block1);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div0);
          detach(t2);
          detach(div2);
        }
        if_blocks[current_block_type_index].d();
        if_blocks_1[current_block_type_index_1].d();
      }
    };
  }
  function create_else_block_3(ctx) {
    let div;
    let span;
    let t1;
    let tooltip;
    let current;
    tooltip = new Tooltip({
      props: {
        title: "Proceed to checkout",
        $$slots: { default: [create_default_slot_4] },
        $$scope: { ctx }
      }
    });
    return {
      c() {
        div = element("div");
        span = element("span");
        span.textContent = `${"To be calculated"}`;
        t1 = space();
        create_component(tooltip.$$.fragment);
        attr(span, "class", "svelte-yb4nuo");
        attr(div, "class", "value-with-info svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, span);
        append(div, t1);
        mount_component(tooltip, div, null);
        current = true;
      },
      p(ctx2, dirty) {
        const tooltip_changes = {};
        if (dirty[1] & /*$$scope*/
        1048576) {
          tooltip_changes.$$scope = { dirty, ctx: ctx2 };
        }
        tooltip.$set(tooltip_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(tooltip.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(tooltip.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(tooltip);
      }
    };
  }
  function create_if_block_14(ctx) {
    let div;
    let span;
    let t0_value = formatCurrencyDisplay(
      /*prepaidDiscount*/
      ctx[14].toFixed(2)
    ) + "";
    let t0;
    let t1;
    let tooltip;
    let current;
    tooltip = new Tooltip({
      props: {
        title: `Prepaid Discount worth ${formatCurrencyDisplay(
          /*prepaidDiscount*/
          ctx[14].toFixed(2)
        )} will be applied at checkout.`,
        $$slots: { default: [create_default_slot_3] },
        $$scope: { ctx }
      }
    });
    return {
      c() {
        div = element("div");
        span = element("span");
        t0 = text(t0_value);
        t1 = space();
        create_component(tooltip.$$.fragment);
        attr(span, "class", "freebie svelte-yb4nuo");
        attr(div, "class", "value-with-info svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, span);
        append(span, t0);
        append(div, t1);
        mount_component(tooltip, div, null);
        current = true;
      },
      p(ctx2, dirty) {
        if ((!current || dirty[0] & /*prepaidDiscount*/
        16384) && t0_value !== (t0_value = formatCurrencyDisplay(
          /*prepaidDiscount*/
          ctx2[14].toFixed(2)
        ) + ""))
          set_data(t0, t0_value);
        const tooltip_changes = {};
        if (dirty[0] & /*prepaidDiscount*/
        16384)
          tooltip_changes.title = `Prepaid Discount worth ${formatCurrencyDisplay(
            /*prepaidDiscount*/
            ctx2[14].toFixed(2)
          )} will be applied at checkout.`;
        if (dirty[1] & /*$$scope*/
        1048576) {
          tooltip_changes.$$scope = { dirty, ctx: ctx2 };
        }
        tooltip.$set(tooltip_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(tooltip.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(tooltip.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(tooltip);
      }
    };
  }
  function create_if_block_13(ctx) {
    let div;
    let span;
    let t0_value = formatCurrencyDisplay(
      /*prepaidDiscount*/
      ctx[14].toFixed(2)
    ) + "";
    let t0;
    let t1;
    let tooltip;
    let current;
    tooltip = new Tooltip({
      props: {
        title: `Freebie worth ${formatCurrencyDisplay(
          /*prepaidDiscount*/
          ctx[14].toFixed(2)
        )} will be applied at checkout.`,
        $$slots: { default: [create_default_slot_2] },
        $$scope: { ctx }
      }
    });
    return {
      c() {
        div = element("div");
        span = element("span");
        t0 = text(t0_value);
        t1 = space();
        create_component(tooltip.$$.fragment);
        attr(span, "class", "freebie svelte-yb4nuo");
        attr(div, "class", "value-with-info svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, span);
        append(span, t0);
        append(div, t1);
        mount_component(tooltip, div, null);
        current = true;
      },
      p(ctx2, dirty) {
        if ((!current || dirty[0] & /*prepaidDiscount*/
        16384) && t0_value !== (t0_value = formatCurrencyDisplay(
          /*prepaidDiscount*/
          ctx2[14].toFixed(2)
        ) + ""))
          set_data(t0, t0_value);
        const tooltip_changes = {};
        if (dirty[0] & /*prepaidDiscount*/
        16384)
          tooltip_changes.title = `Freebie worth ${formatCurrencyDisplay(
            /*prepaidDiscount*/
            ctx2[14].toFixed(2)
          )} will be applied at checkout.`;
        if (dirty[1] & /*$$scope*/
        1048576) {
          tooltip_changes.$$scope = { dirty, ctx: ctx2 };
        }
        tooltip.$set(tooltip_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(tooltip.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(tooltip.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(tooltip);
      }
    };
  }
  function create_default_slot_4(ctx) {
    let div;
    let icon;
    let current;
    icon = new Icon({
      props: {
        icon: "mdi:information-outline",
        width: "14",
        height: "14"
      }
    });
    return {
      c() {
        div = element("div");
        create_component(icon.$$.fragment);
        attr(div, "class", "info-icon svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        mount_component(icon, div, null);
        current = true;
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(icon);
      }
    };
  }
  function create_default_slot_3(ctx) {
    let div;
    let icon;
    let current;
    icon = new Icon({
      props: {
        icon: "mdi:information-outline",
        width: "14",
        height: "14"
      }
    });
    return {
      c() {
        div = element("div");
        create_component(icon.$$.fragment);
        attr(div, "class", "info-icon svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        mount_component(icon, div, null);
        current = true;
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(icon);
      }
    };
  }
  function create_default_slot_2(ctx) {
    let div;
    let icon;
    let current;
    icon = new Icon({
      props: {
        icon: "mdi:information-outline",
        width: "14",
        height: "14"
      }
    });
    return {
      c() {
        div = element("div");
        create_component(icon.$$.fragment);
        attr(div, "class", "info-icon svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        mount_component(icon, div, null);
        current = true;
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(icon);
      }
    };
  }
  function create_else_block_2(ctx) {
    let div;
    let span;
    let t1;
    let tooltip;
    let current;
    tooltip = new Tooltip({
      props: {
        title: "Proceed to checkout",
        $$slots: { default: [create_default_slot_1] },
        $$scope: { ctx }
      }
    });
    return {
      c() {
        div = element("div");
        span = element("span");
        span.textContent = `${"To be calculated"}`;
        t1 = space();
        create_component(tooltip.$$.fragment);
        attr(span, "class", "svelte-yb4nuo");
        attr(div, "class", "value-with-info svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, span);
        append(div, t1);
        mount_component(tooltip, div, null);
        current = true;
      },
      p(ctx2, dirty) {
        const tooltip_changes = {};
        if (dirty[1] & /*$$scope*/
        1048576) {
          tooltip_changes.$$scope = { dirty, ctx: ctx2 };
        }
        tooltip.$set(tooltip_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(tooltip.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(tooltip.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(tooltip);
      }
    };
  }
  function create_if_block_12(ctx) {
    let span;
    return {
      c() {
        span = element("span");
        span.textContent = "FREE";
        attr(span, "class", "freebie svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, span, anchor);
      },
      p: noop,
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_if_block_11(ctx) {
    let span;
    let t0_value = formatCurrencyDisplay(
      /*shipping*/
      ctx[13].toFixed(2)
    ) + "";
    let t0;
    let t1;
    let tooltip;
    let current;
    tooltip = new Tooltip({
      props: {
        title: "Shipping price applicable on address selection/addition on checkout",
        $$slots: { default: [create_default_slot$2] },
        $$scope: { ctx }
      }
    });
    return {
      c() {
        span = element("span");
        t0 = text(t0_value);
        t1 = space();
        create_component(tooltip.$$.fragment);
        attr(span, "class", "svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t0);
        insert(target, t1, anchor);
        mount_component(tooltip, target, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        if ((!current || dirty[0] & /*shipping*/
        8192) && t0_value !== (t0_value = formatCurrencyDisplay(
          /*shipping*/
          ctx2[13].toFixed(2)
        ) + ""))
          set_data(t0, t0_value);
        const tooltip_changes = {};
        if (dirty[1] & /*$$scope*/
        1048576) {
          tooltip_changes.$$scope = { dirty, ctx: ctx2 };
        }
        tooltip.$set(tooltip_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(tooltip.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(tooltip.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(span);
          detach(t1);
        }
        destroy_component(tooltip, detaching);
      }
    };
  }
  function create_default_slot_1(ctx) {
    let div;
    let icon;
    let current;
    icon = new Icon({
      props: {
        icon: "mdi:information-outline",
        width: "14",
        height: "14"
      }
    });
    return {
      c() {
        div = element("div");
        create_component(icon.$$.fragment);
        attr(div, "class", "info-icon svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        mount_component(icon, div, null);
        current = true;
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(icon);
      }
    };
  }
  function create_default_slot$2(ctx) {
    let div;
    let icon;
    let current;
    icon = new Icon({
      props: {
        icon: "mdi:information-outline",
        width: "14",
        height: "14"
      }
    });
    return {
      c() {
        div = element("div");
        create_component(icon.$$.fragment);
        attr(div, "class", "info-icon svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        mount_component(icon, div, null);
        current = true;
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(icon);
      }
    };
  }
  function create_if_block_7$4(ctx) {
    let previous_key = (
      /*page*/
      ctx[6]
    );
    let key_block_anchor;
    let current;
    let key_block = create_key_block$2(ctx);
    return {
      c() {
        key_block.c();
        key_block_anchor = empty();
      },
      m(target, anchor) {
        key_block.m(target, anchor);
        insert(target, key_block_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        if (dirty[0] & /*page*/
        64 && safe_not_equal(previous_key, previous_key = /*page*/
        ctx2[6])) {
          group_outros();
          transition_out(key_block, 1, 1, noop);
          check_outros();
          key_block = create_key_block$2(ctx2);
          key_block.c();
          transition_in(key_block, 1);
          key_block.m(key_block_anchor.parentNode, key_block_anchor);
        } else {
          key_block.p(ctx2, dirty);
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(key_block);
        current = true;
      },
      o(local) {
        transition_out(key_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(key_block_anchor);
        }
        key_block.d(detaching);
      }
    };
  }
  function create_if_block_8$4(ctx) {
    let switch_instance;
    let switch_instance_anchor;
    let current;
    var switch_value = (
      /*setComponentDisplay*/
      ctx[25](
        /*page*/
        ctx[6]
      )
    );
    function switch_props(ctx2, dirty) {
      return {};
    }
    if (switch_value) {
      switch_instance = construct_svelte_component(switch_value, switch_props());
    }
    return {
      c() {
        if (switch_instance)
          create_component(switch_instance.$$.fragment);
        switch_instance_anchor = empty();
      },
      m(target, anchor) {
        if (switch_instance)
          mount_component(switch_instance, target, anchor);
        insert(target, switch_instance_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        if (dirty[0] & /*page*/
        64 && switch_value !== (switch_value = /*setComponentDisplay*/
        ctx2[25](
          /*page*/
          ctx2[6]
        ))) {
          if (switch_instance) {
            group_outros();
            const old_component = switch_instance;
            transition_out(old_component.$$.fragment, 1, 0, () => {
              destroy_component(old_component, 1);
            });
            check_outros();
          }
          if (switch_value) {
            switch_instance = construct_svelte_component(switch_value, switch_props());
            create_component(switch_instance.$$.fragment);
            transition_in(switch_instance.$$.fragment, 1);
            mount_component(switch_instance, switch_instance_anchor.parentNode, switch_instance_anchor);
          } else {
            switch_instance = null;
          }
        }
      },
      i(local) {
        if (current)
          return;
        if (switch_instance)
          transition_in(switch_instance.$$.fragment, local);
        current = true;
      },
      o(local) {
        if (switch_instance)
          transition_out(switch_instance.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(switch_instance_anchor);
        }
        if (switch_instance)
          destroy_component(switch_instance, detaching);
      }
    };
  }
  function create_key_block$2(ctx) {
    let show_if = (
      /*setComponentDisplay*/
      ctx[25](
        /*page*/
        ctx[6]
      )
    );
    let if_block_anchor;
    let current;
    let if_block = show_if && create_if_block_8$4(ctx);
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        if (dirty[0] & /*page*/
        64)
          show_if = /*setComponentDisplay*/
          ctx2[25](
            /*page*/
            ctx2[6]
          );
        if (show_if) {
          if (if_block) {
            if_block.p(ctx2, dirty);
            if (dirty[0] & /*page*/
            64) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block_8$4(ctx2);
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function create_if_block_6$4(ctx) {
    var _a, _b, _c;
    let button;
    let input;
    let t;
    let span;
    let raw_value = (
      /*$store_configurations*/
      ((_c = (_b = (_a = ctx[4]) == null ? void 0 : _a.appearance) == null ? void 0 : _b.tNC) == null ? void 0 : _c.text) + ""
    );
    let mounted;
    let dispose;
    return {
      c() {
        button = element("button");
        input = element("input");
        t = space();
        span = element("span");
        attr(input, "type", "checkbox");
        attr(input, "class", "margin-right-5 svelte-yb4nuo");
        attr(span, "class", "cursor-default svelte-yb4nuo");
        attr(button, "class", "tnc-container svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, button, anchor);
        append(button, input);
        input.checked = /*tncSelected*/
        ctx[10];
        append(button, t);
        append(button, span);
        span.innerHTML = raw_value;
        if (!mounted) {
          dispose = [
            listen(
              input,
              "change",
              /*input_change_handler*/
              ctx[31]
            ),
            listen(
              button,
              "click",
              /*click_handler*/
              ctx[32]
            )
          ];
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c2;
        if (dirty[0] & /*tncSelected*/
        1024) {
          input.checked = /*tncSelected*/
          ctx2[10];
        }
        if (dirty[0] & /*$store_configurations*/
        16 && raw_value !== (raw_value = /*$store_configurations*/
        ((_c2 = (_b2 = (_a2 = ctx2[4]) == null ? void 0 : _a2.appearance) == null ? void 0 : _b2.tNC) == null ? void 0 : _c2.text) + ""))
          span.innerHTML = raw_value;
      },
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        mounted = false;
        run_all(dispose);
      }
    };
  }
  function create_else_block_1$2(ctx) {
    let loadingsvg;
    let current;
    loadingsvg = new LoadingSvg({});
    return {
      c() {
        create_component(loadingsvg.$$.fragment);
      },
      m(target, anchor) {
        mount_component(loadingsvg, target, anchor);
        current = true;
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(loadingsvg.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(loadingsvg.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(loadingsvg, detaching);
      }
    };
  }
  function create_if_block_2$9(ctx) {
    var _a, _b, _c, _d, _e, _f;
    let span1;
    let span0;
    let t0;
    let t1;
    function select_block_type_4(ctx2, dirty) {
      var _a2, _b2;
      if (
        /*footerConfigs*/
        (_b2 = (_a2 = ctx2[8]) == null ? void 0 : _a2.primary) == null ? void 0 : _b2.text
      )
        return create_if_block_5$5;
      return create_else_block$a;
    }
    let current_block_type = select_block_type_4(ctx);
    let if_block0 = current_block_type(ctx);
    let if_block1 = (
      /*footerConfigs*/
      ((_b = (_a = ctx[8]) == null ? void 0 : _a.primary) == null ? void 0 : _b.subText) && create_if_block_4$5(ctx)
    );
    let if_block2 = (
      /*footerConfigs*/
      ((_d = (_c = ctx[8]) == null ? void 0 : _c.primary) == null ? void 0 : _d.gokwikCheckout) && /*footerConfigs*/
      ((_f = (_e = ctx[8]) == null ? void 0 : _e.primary) == null ? void 0 : _f.showPaymentIcons) && create_if_block_3$7()
    );
    return {
      c() {
        span1 = element("span");
        span0 = element("span");
        if_block0.c();
        t0 = space();
        if (if_block1)
          if_block1.c();
        t1 = space();
        if (if_block2)
          if_block2.c();
        attr(span0, "class", "btn-text svelte-yb4nuo");
        attr(span1, "class", "btn-content svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, span1, anchor);
        append(span1, span0);
        if_block0.m(span0, null);
        append(span0, t0);
        if (if_block1)
          if_block1.m(span0, null);
        append(span1, t1);
        if (if_block2)
          if_block2.m(span1, null);
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c2, _d2, _e2, _f2;
        if (current_block_type === (current_block_type = select_block_type_4(ctx2)) && if_block0) {
          if_block0.p(ctx2, dirty);
        } else {
          if_block0.d(1);
          if_block0 = current_block_type(ctx2);
          if (if_block0) {
            if_block0.c();
            if_block0.m(span0, t0);
          }
        }
        if (
          /*footerConfigs*/
          (_b2 = (_a2 = ctx2[8]) == null ? void 0 : _a2.primary) == null ? void 0 : _b2.subText
        ) {
          if (if_block1) {
            if_block1.p(ctx2, dirty);
          } else {
            if_block1 = create_if_block_4$5(ctx2);
            if_block1.c();
            if_block1.m(span0, null);
          }
        } else if (if_block1) {
          if_block1.d(1);
          if_block1 = null;
        }
        if (
          /*footerConfigs*/
          ((_d2 = (_c2 = ctx2[8]) == null ? void 0 : _c2.primary) == null ? void 0 : _d2.gokwikCheckout) && /*footerConfigs*/
          ((_f2 = (_e2 = ctx2[8]) == null ? void 0 : _e2.primary) == null ? void 0 : _f2.showPaymentIcons)
        ) {
          if (if_block2)
            ;
          else {
            if_block2 = create_if_block_3$7();
            if_block2.c();
            if_block2.m(span1, null);
          }
        } else if (if_block2) {
          if_block2.d(1);
          if_block2 = null;
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(span1);
        }
        if_block0.d();
        if (if_block1)
          if_block1.d();
        if (if_block2)
          if_block2.d();
      }
    };
  }
  function create_else_block$a(ctx) {
    let span;
    return {
      c() {
        span = element("span");
        span.textContent = "Checkout";
        attr(span, "class", "svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, span, anchor);
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_if_block_5$5(ctx) {
    var _a, _b;
    let html_tag;
    let raw_value = (
      /*footerConfigs*/
      ((_b = (_a = ctx[8]) == null ? void 0 : _a.primary) == null ? void 0 : _b.text) + ""
    );
    let html_anchor;
    return {
      c() {
        html_tag = new HtmlTag(false);
        html_anchor = empty();
        html_tag.a = html_anchor;
      },
      m(target, anchor) {
        html_tag.m(raw_value, target, anchor);
        insert(target, html_anchor, anchor);
      },
      p(ctx2, dirty) {
        var _a2, _b2;
        if (dirty[0] & /*footerConfigs*/
        256 && raw_value !== (raw_value = /*footerConfigs*/
        ((_b2 = (_a2 = ctx2[8]) == null ? void 0 : _a2.primary) == null ? void 0 : _b2.text) + ""))
          html_tag.p(raw_value);
      },
      d(detaching) {
        if (detaching) {
          detach(html_anchor);
          html_tag.d();
        }
      }
    };
  }
  function create_if_block_4$5(ctx) {
    var _a, _b;
    let span;
    let raw_value = (
      /*footerConfigs*/
      ((_b = (_a = ctx[8]) == null ? void 0 : _a.primary) == null ? void 0 : _b.subText) + ""
    );
    return {
      c() {
        span = element("span");
        attr(span, "class", "checkout-btn-subtitle svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, span, anchor);
        span.innerHTML = raw_value;
      },
      p(ctx2, dirty) {
        var _a2, _b2;
        if (dirty[0] & /*footerConfigs*/
        256 && raw_value !== (raw_value = /*footerConfigs*/
        ((_b2 = (_a2 = ctx2[8]) == null ? void 0 : _a2.primary) == null ? void 0 : _b2.subText) + ""))
          span.innerHTML = raw_value;
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_if_block_3$7(ctx) {
    let span;
    return {
      c() {
        span = element("span");
        span.innerHTML = `<img src="https://pdp.gokwik.co/assets/icons/checkout-btn-icon.svg"/>`;
        attr(span, "class", "payment-icons svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, span, anchor);
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_if_block_1$f(ctx) {
    var _a, _b;
    let div;
    let raw_value = (
      /*$store_configurations*/
      ((_b = (_a = ctx[4]) == null ? void 0 : _a.appearance) == null ? void 0 : _b.additionalScripts) + ""
    );
    return {
      c() {
        div = element("div");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        div.innerHTML = raw_value;
        ctx[33](div);
      },
      p(ctx2, dirty) {
        var _a2, _b2;
        if (dirty[0] & /*$store_configurations*/
        16 && raw_value !== (raw_value = /*$store_configurations*/
        ((_b2 = (_a2 = ctx2[4]) == null ? void 0 : _a2.appearance) == null ? void 0 : _b2.additionalScripts) + ""))
          div.innerHTML = raw_value;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        ctx[33](null);
      }
    };
  }
  function create_if_block$k(ctx) {
    var _a, _b, _c;
    let div;
    let raw_value = (
      /*$store_configurations*/
      ((_c = (_b = (_a = ctx[4]) == null ? void 0 : _a.appearance) == null ? void 0 : _b.footer) == null ? void 0 : _c.text) + ""
    );
    let div_style_value;
    return {
      c() {
        var _a2, _b2;
        div = element("div");
        attr(div, "class", "mb-2 svelte-yb4nuo");
        attr(div, "style", div_style_value = getStyleObject(
          /*$store_configurations*/
          (_b2 = (_a2 = ctx[4]) == null ? void 0 : _a2.appearance) == null ? void 0 : _b2.footer
        ));
      },
      m(target, anchor) {
        insert(target, div, anchor);
        div.innerHTML = raw_value;
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c2, _d, _e;
        if (dirty[0] & /*$store_configurations*/
        16 && raw_value !== (raw_value = /*$store_configurations*/
        ((_c2 = (_b2 = (_a2 = ctx2[4]) == null ? void 0 : _a2.appearance) == null ? void 0 : _b2.footer) == null ? void 0 : _c2.text) + ""))
          div.innerHTML = raw_value;
        if (dirty[0] & /*$store_configurations*/
        16 && div_style_value !== (div_style_value = getStyleObject(
          /*$store_configurations*/
          (_e = (_d = ctx2[4]) == null ? void 0 : _d.appearance) == null ? void 0 : _e.footer
        ))) {
          attr(div, "style", div_style_value);
        }
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
      }
    };
  }
  function create_fragment$o(ctx) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q;
    let div9;
    let t0;
    let div8;
    let div5;
    let div2;
    let div0;
    let current_block_type_index;
    let if_block1;
    let t1;
    let div1;
    let icon;
    let t2;
    let span0;
    let t4;
    let t5;
    let t6;
    let div3;
    let t7;
    let t8;
    let div4;
    let button;
    let current_block_type_index_1;
    let if_block6;
    let button_style_value;
    let t9;
    let t10;
    let t11;
    let div7;
    let current;
    let mounted;
    let dispose;
    let if_block0 = (
      /*savedAmount*/
      (ctx[7] || /*cashbackText*/
      ctx[18]) && /*$store_configurations*/
      ((_c = (_b = (_a = ctx[4]) == null ? void 0 : _a.appearance) == null ? void 0 : _b.savingsBanner) == null ? void 0 : _c.enable) && create_if_block_19(ctx)
    );
    const if_block_creators = [create_if_block_17, create_if_block_18, create_else_block_4];
    const if_blocks = [];
    function select_block_type(ctx2, dirty) {
      if (
        /*$store_isShippingAndPrepaidDiscountLoading*/
        ctx2[21]
      )
        return 0;
      if (
        /*cartTotal*/
        ctx2[2] > /*totalPayable*/
        ctx2[1]
      )
        return 1;
      return 2;
    }
    current_block_type_index = select_block_type(ctx);
    if_block1 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
    icon = new Icon({
      props: {
        icon: "tabler:receipt-rupee-filled",
        width: "24",
        height: "24"
      }
    });
    let if_block2 = (
      /*$store_configurations*/
      ((_f = (_e = (_d = ctx[4]) == null ? void 0 : _d.appearance) == null ? void 0 : _e.showEstimatedTotalBreakup) == null ? void 0 : _f.enable) && create_if_block_16(ctx)
    );
    let if_block3 = (
      /*showOrderBreakdown*/
      ctx[12] && create_if_block_9$2(ctx)
    );
    let if_block4 = (
      /*page*/
      ctx[6] && create_if_block_7$4(ctx)
    );
    let if_block5 = (
      /*$store_configurations*/
      ((_i = (_h = (_g = ctx[4]) == null ? void 0 : _g.appearance) == null ? void 0 : _h.tNC) == null ? void 0 : _i.enable) && /*$store_configurations*/
      ((_l = (_k = (_j = ctx[4]) == null ? void 0 : _j.appearance) == null ? void 0 : _k.tNC) == null ? void 0 : _l.text) && create_if_block_6$4(ctx)
    );
    const if_block_creators_1 = [create_if_block_2$9, create_else_block_1$2];
    const if_blocks_1 = [];
    function select_block_type_3(ctx2, dirty) {
      var _a2, _b2;
      if (
        /*footerConfigs*/
        ((_a2 = ctx2[8].primary) == null ? void 0 : _a2.gokwikCheckout) && /*$store_platform*/
        ctx2[20] === TextConstants.platforms.Checkout1_0 || !/*footerConfigs*/
        ((_b2 = ctx2[8].primary) == null ? void 0 : _b2.gokwikCheckout) || /*$store_platform*/
        ctx2[20] !== TextConstants.platforms.Checkout1_0 || /*current_env*/
        ctx2[0] === TextConstants.environment_constants.dashboard && !/*isRedirectingToCheckout*/
        ctx2[3]
      )
        return 0;
      return 1;
    }
    current_block_type_index_1 = select_block_type_3(ctx);
    if_block6 = if_blocks_1[current_block_type_index_1] = if_block_creators_1[current_block_type_index_1](ctx);
    let if_block7 = (
      /*$store_configurations*/
      ((_n = (_m = ctx[4]) == null ? void 0 : _m.appearance) == null ? void 0 : _n.additionalScripts) && create_if_block_1$f(ctx)
    );
    let if_block8 = (
      /*$store_configurations*/
      ((_q = (_p = (_o = ctx[4]) == null ? void 0 : _o.appearance) == null ? void 0 : _p.footer) == null ? void 0 : _q.enable) && create_if_block$k(ctx)
    );
    return {
      c() {
        div9 = element("div");
        if (if_block0)
          if_block0.c();
        t0 = space();
        div8 = element("div");
        div5 = element("div");
        div2 = element("div");
        div0 = element("div");
        if_block1.c();
        t1 = space();
        div1 = element("div");
        create_component(icon.$$.fragment);
        t2 = space();
        span0 = element("span");
        span0.textContent = "Estimated Total";
        t4 = space();
        if (if_block2)
          if_block2.c();
        t5 = space();
        if (if_block3)
          if_block3.c();
        t6 = space();
        div3 = element("div");
        if (if_block4)
          if_block4.c();
        t7 = space();
        if (if_block5)
          if_block5.c();
        t8 = space();
        div4 = element("div");
        button = element("button");
        if_block6.c();
        t9 = space();
        if (if_block7)
          if_block7.c();
        t10 = space();
        if (if_block8)
          if_block8.c();
        t11 = space();
        div7 = element("div");
        div7.innerHTML = `<div class="powered-by svelte-yb4nuo"><span class="svelte-yb4nuo">Powered by</span> <img src="${powered_by}" class="svelte-yb4nuo"/></div>`;
        attr(div0, "class", "estimated-total-container svelte-yb4nuo");
        attr(span0, "class", "estimated-total svelte-yb4nuo");
        attr(div1, "class", "estimated-total-section svelte-yb4nuo");
        attr(div2, "class", "total-amount svelte-yb4nuo");
        attr(div3, "class", "checkout");
        attr(button, "style", button_style_value = `${getStyleObject(
          /*footerConfigs*/
          ctx[8].primary
        )} ${/*isRedirectingToCheckout*/
        ctx[3] ? "display: flex; justify-content: center; align-items: center; cursor: not-allowed;" : ""}`);
        attr(button, "type", "button");
        button.disabled = /*isRedirectingToCheckout*/
        ctx[3];
        attr(button, "class", "svelte-yb4nuo");
        attr(div4, "class", "gokwik-checkout svelte-yb4nuo");
        attr(div5, "class", "gokwik-button-wrapper svelte-yb4nuo");
        attr(div7, "class", "main-footer svelte-yb4nuo");
        attr(div8, "class", "sidecart-footer double-button svelte-yb4nuo");
        set_style(
          div8,
          "padding-top",
          /*footerPaddingTop*/
          ctx[17] + "px"
        );
        attr(div9, "class", "sidecart-footer-wrapper svelte-yb4nuo");
      },
      m(target, anchor) {
        insert(target, div9, anchor);
        if (if_block0)
          if_block0.m(div9, null);
        append(div9, t0);
        append(div9, div8);
        append(div8, div5);
        append(div5, div2);
        append(div2, div0);
        if_blocks[current_block_type_index].m(div0, null);
        append(div2, t1);
        append(div2, div1);
        mount_component(icon, div1, null);
        append(div1, t2);
        append(div1, span0);
        append(div1, t4);
        if (if_block2)
          if_block2.m(div1, null);
        append(div5, t5);
        if (if_block3)
          if_block3.m(div5, null);
        append(div5, t6);
        append(div5, div3);
        if (if_block4)
          if_block4.m(div3, null);
        append(div5, t7);
        if (if_block5)
          if_block5.m(div5, null);
        append(div5, t8);
        append(div5, div4);
        append(div4, button);
        if_blocks_1[current_block_type_index_1].m(button, null);
        append(div4, t9);
        if (if_block7)
          if_block7.m(div4, null);
        append(div8, t10);
        if (if_block8)
          if_block8.m(div8, null);
        append(div8, t11);
        append(div8, div7);
        current = true;
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*onCheckoutClick*/
            ctx[24]
          );
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c2, _d2, _e2, _f2, _g2, _h2, _i2, _j2, _k2, _l2, _m2, _n2, _o2, _p2, _q2;
        if (
          /*savedAmount*/
          (ctx2[7] || /*cashbackText*/
          ctx2[18]) && /*$store_configurations*/
          ((_c2 = (_b2 = (_a2 = ctx2[4]) == null ? void 0 : _a2.appearance) == null ? void 0 : _b2.savingsBanner) == null ? void 0 : _c2.enable)
        ) {
          if (if_block0) {
            if_block0.p(ctx2, dirty);
            if (dirty[0] & /*savedAmount, cashbackText, $store_configurations*/
            262288) {
              transition_in(if_block0, 1);
            }
          } else {
            if_block0 = create_if_block_19(ctx2);
            if_block0.c();
            transition_in(if_block0, 1);
            if_block0.m(div9, t0);
          }
        } else if (if_block0) {
          group_outros();
          transition_out(if_block0, 1, 1, () => {
            if_block0 = null;
          });
          check_outros();
        }
        let previous_block_index = current_block_type_index;
        current_block_type_index = select_block_type(ctx2);
        if (current_block_type_index === previous_block_index) {
          if_blocks[current_block_type_index].p(ctx2, dirty);
        } else {
          group_outros();
          transition_out(if_blocks[previous_block_index], 1, 1, () => {
            if_blocks[previous_block_index] = null;
          });
          check_outros();
          if_block1 = if_blocks[current_block_type_index];
          if (!if_block1) {
            if_block1 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
            if_block1.c();
          } else {
            if_block1.p(ctx2, dirty);
          }
          transition_in(if_block1, 1);
          if_block1.m(div0, null);
        }
        if (
          /*$store_configurations*/
          (_f2 = (_e2 = (_d2 = ctx2[4]) == null ? void 0 : _d2.appearance) == null ? void 0 : _e2.showEstimatedTotalBreakup) == null ? void 0 : _f2.enable
        ) {
          if (if_block2) {
            if_block2.p(ctx2, dirty);
            if (dirty[0] & /*$store_configurations*/
            16) {
              transition_in(if_block2, 1);
            }
          } else {
            if_block2 = create_if_block_16(ctx2);
            if_block2.c();
            transition_in(if_block2, 1);
            if_block2.m(div1, null);
          }
        } else if (if_block2) {
          group_outros();
          transition_out(if_block2, 1, 1, () => {
            if_block2 = null;
          });
          check_outros();
        }
        if (
          /*showOrderBreakdown*/
          ctx2[12]
        ) {
          if (if_block3) {
            if_block3.p(ctx2, dirty);
            if (dirty[0] & /*showOrderBreakdown*/
            4096) {
              transition_in(if_block3, 1);
            }
          } else {
            if_block3 = create_if_block_9$2(ctx2);
            if_block3.c();
            transition_in(if_block3, 1);
            if_block3.m(div5, t6);
          }
        } else if (if_block3) {
          group_outros();
          transition_out(if_block3, 1, 1, () => {
            if_block3 = null;
          });
          check_outros();
        }
        if (
          /*page*/
          ctx2[6]
        ) {
          if (if_block4) {
            if_block4.p(ctx2, dirty);
            if (dirty[0] & /*page*/
            64) {
              transition_in(if_block4, 1);
            }
          } else {
            if_block4 = create_if_block_7$4(ctx2);
            if_block4.c();
            transition_in(if_block4, 1);
            if_block4.m(div3, null);
          }
        } else if (if_block4) {
          group_outros();
          transition_out(if_block4, 1, 1, () => {
            if_block4 = null;
          });
          check_outros();
        }
        if (
          /*$store_configurations*/
          ((_i2 = (_h2 = (_g2 = ctx2[4]) == null ? void 0 : _g2.appearance) == null ? void 0 : _h2.tNC) == null ? void 0 : _i2.enable) && /*$store_configurations*/
          ((_l2 = (_k2 = (_j2 = ctx2[4]) == null ? void 0 : _j2.appearance) == null ? void 0 : _k2.tNC) == null ? void 0 : _l2.text)
        ) {
          if (if_block5) {
            if_block5.p(ctx2, dirty);
          } else {
            if_block5 = create_if_block_6$4(ctx2);
            if_block5.c();
            if_block5.m(div5, t8);
          }
        } else if (if_block5) {
          if_block5.d(1);
          if_block5 = null;
        }
        let previous_block_index_1 = current_block_type_index_1;
        current_block_type_index_1 = select_block_type_3(ctx2);
        if (current_block_type_index_1 === previous_block_index_1) {
          if_blocks_1[current_block_type_index_1].p(ctx2, dirty);
        } else {
          group_outros();
          transition_out(if_blocks_1[previous_block_index_1], 1, 1, () => {
            if_blocks_1[previous_block_index_1] = null;
          });
          check_outros();
          if_block6 = if_blocks_1[current_block_type_index_1];
          if (!if_block6) {
            if_block6 = if_blocks_1[current_block_type_index_1] = if_block_creators_1[current_block_type_index_1](ctx2);
            if_block6.c();
          } else {
            if_block6.p(ctx2, dirty);
          }
          transition_in(if_block6, 1);
          if_block6.m(button, null);
        }
        if (!current || dirty[0] & /*footerConfigs, isRedirectingToCheckout*/
        264 && button_style_value !== (button_style_value = `${getStyleObject(
          /*footerConfigs*/
          ctx2[8].primary
        )} ${/*isRedirectingToCheckout*/
        ctx2[3] ? "display: flex; justify-content: center; align-items: center; cursor: not-allowed;" : ""}`)) {
          attr(button, "style", button_style_value);
        }
        if (!current || dirty[0] & /*isRedirectingToCheckout*/
        8) {
          button.disabled = /*isRedirectingToCheckout*/
          ctx2[3];
        }
        if (
          /*$store_configurations*/
          (_n2 = (_m2 = ctx2[4]) == null ? void 0 : _m2.appearance) == null ? void 0 : _n2.additionalScripts
        ) {
          if (if_block7) {
            if_block7.p(ctx2, dirty);
          } else {
            if_block7 = create_if_block_1$f(ctx2);
            if_block7.c();
            if_block7.m(div4, null);
          }
        } else if (if_block7) {
          if_block7.d(1);
          if_block7 = null;
        }
        if (
          /*$store_configurations*/
          (_q2 = (_p2 = (_o2 = ctx2[4]) == null ? void 0 : _o2.appearance) == null ? void 0 : _p2.footer) == null ? void 0 : _q2.enable
        ) {
          if (if_block8) {
            if_block8.p(ctx2, dirty);
          } else {
            if_block8 = create_if_block$k(ctx2);
            if_block8.c();
            if_block8.m(div8, t11);
          }
        } else if (if_block8) {
          if_block8.d(1);
          if_block8 = null;
        }
        if (!current || dirty[0] & /*footerPaddingTop*/
        131072) {
          set_style(
            div8,
            "padding-top",
            /*footerPaddingTop*/
            ctx2[17] + "px"
          );
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block0);
        transition_in(if_block1);
        transition_in(icon.$$.fragment, local);
        transition_in(if_block2);
        transition_in(if_block3);
        transition_in(if_block4);
        transition_in(if_block6);
        current = true;
      },
      o(local) {
        transition_out(if_block0);
        transition_out(if_block1);
        transition_out(icon.$$.fragment, local);
        transition_out(if_block2);
        transition_out(if_block3);
        transition_out(if_block4);
        transition_out(if_block6);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div9);
        }
        if (if_block0)
          if_block0.d();
        if_blocks[current_block_type_index].d();
        destroy_component(icon);
        if (if_block2)
          if_block2.d();
        if (if_block3)
          if_block3.d();
        if (if_block4)
          if_block4.d();
        if (if_block5)
          if_block5.d();
        if_blocks_1[current_block_type_index_1].d();
        if (if_block7)
          if_block7.d();
        if (if_block8)
          if_block8.d();
        mounted = false;
        dispose();
      }
    };
  }
  function instance$o($$self, $$props, $$invalidate) {
    let freebieInfo;
    let $store_jwtToken;
    let $store_configurations;
    let $store_isBuyNowCartDataLoading;
    let $store_isBuyNowFreebieProcessing;
    let $store_isCheckoutUpdating;
    let $store_cart;
    let $store_productDetails;
    let $store_cartFreebieVariantCount;
    let $store_page;
    let $store_userType;
    let $store_showCheckoutOnCart;
    let $store_platform;
    let $store_appliedManualDiscount;
    let $store_isShippingAndPrepaidDiscountLoading;
    component_subscribe($$self, store_jwtToken, ($$value) => $$invalidate(40, $store_jwtToken = $$value));
    component_subscribe($$self, store_configurations, ($$value) => $$invalidate(4, $store_configurations = $$value));
    component_subscribe($$self, store_isBuyNowCartDataLoading, ($$value) => $$invalidate(26, $store_isBuyNowCartDataLoading = $$value));
    component_subscribe($$self, store_isBuyNowFreebieProcessing, ($$value) => $$invalidate(27, $store_isBuyNowFreebieProcessing = $$value));
    component_subscribe($$self, store_isCheckoutUpdating, ($$value) => $$invalidate(28, $store_isCheckoutUpdating = $$value));
    component_subscribe($$self, store_cart, ($$value) => $$invalidate(5, $store_cart = $$value));
    component_subscribe($$self, store_productDetails, ($$value) => $$invalidate(29, $store_productDetails = $$value));
    component_subscribe($$self, store_cartFreebieVariantCount, ($$value) => $$invalidate(41, $store_cartFreebieVariantCount = $$value));
    component_subscribe($$self, store_page, ($$value) => $$invalidate(42, $store_page = $$value));
    component_subscribe($$self, store_userType, ($$value) => $$invalidate(43, $store_userType = $$value));
    component_subscribe($$self, store_showCheckoutOnCart, ($$value) => $$invalidate(44, $store_showCheckoutOnCart = $$value));
    component_subscribe($$self, store_platform, ($$value) => $$invalidate(20, $store_platform = $$value));
    component_subscribe($$self, store_appliedManualDiscount, ($$value) => $$invalidate(30, $store_appliedManualDiscount = $$value));
    component_subscribe($$self, store_isShippingAndPrepaidDiscountLoading, ($$value) => $$invalidate(21, $store_isShippingAndPrepaidDiscountLoading = $$value));
    let page = "";
    let checkoutLoaderHidden = false;
    store_page.subscribe((res) => {
      $$invalidate(6, page = res);
    });
    let unsubCart, totalPayable2, unsubAppliedManualDiscount, savedAmount = 0, footerConfigs = {
      primary: {
        text: "",
        bgColor: "",
        textColor: "",
        subText: "",
        textAlignment: "left",
        gokwikCheckout: true,
        showPaymentIcons: true
      }
    }, gokwikCheckoutFlag = !!window.merchantInfo;
    let { current_env } = $$props;
    let cartTotal, totalSavings;
    let tncSelected = true;
    let htmlContainer;
    let isRedirectingToCheckout = false;
    let showOrderBreakdown = false;
    let shipping;
    let prepaidDiscount;
    let prepaidDiscountType = "";
    let skipMissingGiftsAlert = false;
    let discountInPercentage = 0;
    let footerPaddingTop = 5;
    let cashbackText = "";
    let cashbackSummary = { type: "" };
    function handleRibbonHeight(event) {
      const ribbonHeight = event.detail;
      if (ribbonHeight > 14) {
        $$invalidate(17, footerPaddingTop = ribbonHeight - 8);
      } else {
        $$invalidate(17, footerPaddingTop = 5);
      }
    }
    const toggleOrderBreakdown = () => {
      $$invalidate(12, showOrderBreakdown = !showOrderBreakdown);
      if (showOrderBreakdown) {
        fireGokwikTrigger("order_summary_viewed", {});
        logEvent("order_summary_viewed", {});
      }
    };
    onMount(() => {
      var _a, _b;
      store_totalPayableAmount.subscribe((res) => {
        $$invalidate(1, totalPayable2 = res);
      });
      store_totalSavings.subscribe((res) => $$invalidate(7, savedAmount = res));
      unsubAppliedManualDiscount = store_appliedManualDiscount.subscribe((res) => {
      });
      store_configurations.subscribe((res) => {
        if (res == null ? void 0 : res.appearance) {
          $$invalidate(8, footerConfigs = res.appearance.checkoutButtons);
        }
      });
      unsubCart = store_cart.subscribe(async (cart2) => {
        var _a2, _b2, _c, _d;
        if (((_a2 = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _a2.showEstimatedTotalBreakup) && cart2 && ($store_configurations == null ? void 0 : $store_configurations.platform) === TextConstants.platforms.Checkout1_0) {
          try {
            store_isShippingAndPrepaidDiscountLoading.set(true);
            const estimatedTotalResponse = await getEstimatedTotal();
            const estimatedTotalData = (estimatedTotalResponse == null ? void 0 : estimatedTotalResponse.data) || {};
            if (estimatedTotalData) {
              $$invalidate(13, shipping = (_c = (_b2 = estimatedTotalData == null ? void 0 : estimatedTotalData.shipping) == null ? void 0 : _b2[0]) == null ? void 0 : _c.price);
              let discountValue = null;
              let discountType = "";
              (_d = estimatedTotalData == null ? void 0 : estimatedTotalData.prepaidDiscounts) == null ? void 0 : _d.forEach((discount) => {
                var _a3, _b3;
                if ((discount == null ? void 0 : discount.discountType) === "Freebie" && ((_a3 = discount == null ? void 0 : discount.freebieDetails) == null ? void 0 : _a3.price) >= (discountValue ?? 0)) {
                  discountValue = ((_b3 = discount == null ? void 0 : discount.freebieDetails) == null ? void 0 : _b3.price) || 0;
                  discountType = (discount == null ? void 0 : discount.discountType) || "";
                } else if ((discount == null ? void 0 : discount.discountType) === "Non Freebie" && (discount == null ? void 0 : discount.discountAmount) >= (discountValue ?? 0)) {
                  discountValue = (discount == null ? void 0 : discount.discountAmount) || 0;
                  discountType = (discount == null ? void 0 : discount.discountType) || "";
                }
              });
              $$invalidate(14, prepaidDiscount = discountValue);
              $$invalidate(15, prepaidDiscountType = discountType);
            }
            store_isShippingAndPrepaidDiscountLoading.set(false);
          } catch (error) {
            console.error("Error getting estimated total:", error);
            $$invalidate(13, shipping = void 0);
            $$invalidate(14, prepaidDiscount = null);
            $$invalidate(15, prepaidDiscountType = "");
            store_isShippingAndPrepaidDiscountLoading.set(false);
          }
        }
      });
      if ((_b = (_a = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _a.tNC) == null ? void 0 : _b.enable) {
        fireGokwikTrigger("t&c_checkbox_shown", {});
        logEvent("t&c_checbox_shown", {});
      }
      const scripts = htmlContainer == null ? void 0 : htmlContainer.querySelectorAll("script");
      scripts == null ? void 0 : scripts.forEach((oldScript) => {
        const newScript = document.createElement("script");
        for (const { name, value } of Array.from(oldScript.attributes)) {
          newScript.setAttribute(name, value);
        }
        newScript.textContent = oldScript.textContent;
        oldScript.replaceWith(newScript);
      });
    });
    const openCheckout = async () => {
      var _a, _b, _c;
      if ((_b = (_a = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _a.disableCheckoutForUpsellOnly) == null ? void 0 : _b.enable) {
        if (containsOnlyUpsellProducts($store_cart)) {
          store_snackbar.set({
            message: "Please add another product to the cart, checkout is not available with only upsell/add on products.",
            timer: 3e3,
            show: true,
            error: true
          });
          return;
        }
      }
      if (checkoutLoaderHidden) {
        const gokwikModalWrapper = document.getElementById("gokwik-modal-wrapper");
        if (gokwikModalWrapper) {
          gokwikModalWrapper.style.display = "block";
          checkoutLoaderHidden = false;
        }
      }
      fireGokwikTrigger("checkout_button_clicked_sc", { checkout_type: $store_platform });
      logEvent("checkout_button_clicked_sc", { checkout_type: $store_platform });
      sessionStorage.setItem("GKSCOpenedCheckout", "true");
      if (window.gk_cart_domain.includes("bdd61b-2")) {
        console.log("reginald timeout");
        await new Promise((r) => setTimeout(r, 200));
      }
      if ((_c = footerConfigs.primary) == null ? void 0 : _c.gokwikCheckout) {
        if ($store_platform === TextConstants.platforms.Checkout1_0 && gokwikCheckoutFlag) {
          logEvent(
            "checkout_event",
            {
              name: "checkout_button_clicked",
              type: "event"
            },
            "stabilityEvent"
          );
          fireGokwikTrigger("gokwik_button_clicked", {});
          logEvent("gokwik-button-clicked", {}, "onGkClick");
          window.gokwikSdk.initCheckout(window.merchantInfo);
        } else if ($store_platform === TextConstants.platforms.ShopifyApps) {
          if ($store_showCheckoutOnCart) {
            createCheckoutAndInit();
            if ($store_jwtToken) {
              if ($store_userType === "new") {
                store_jwtToken.set("");
              }
              if ($store_isCheckoutUpdating) {
                $$invalidate(3, isRedirectingToCheckout = true);
                return;
              } else {
                sendMessageToiFrame("redirect-to-checkout", {});
              }
            } else if (!$store_jwtToken) {
              store_isCheckoutLoading.set(true);
              openLoginBottomSheet();
              return;
            } else if (!$store_page || $store_page === "login") {
              openLoginBottomSheet();
            }
          } else {
            initiateLogin && initiateLogin();
          }
        }
      } else {
        window.location.href = "/checkout";
      }
      window.closeGokwikSideCart();
    };
    const openFreeGiftSheetOnCheckout = () => {
      if (skipMissingGiftsAlert) {
        return false;
      }
      const freeGiftConfig2 = $store_configurations == null ? void 0 : $store_configurations.freeGifts;
      if (!((freeGiftConfig2 == null ? void 0 : freeGiftConfig2.offerType) === "USER_SELECTED" && (freeGiftConfig2 == null ? void 0 : freeGiftConfig2.autoOpenFreebieSelection))) {
        return false;
      }
      const incompleteFreebies = freebieInfo.filter((info) => {
        if (!info.isValid) {
          return false;
        }
        let giftsInCart = 0;
        info.freeGift.gifts.forEach((gift) => {
          var _a;
          if ((_a = $store_cart == null ? void 0 : $store_cart.items) == null ? void 0 : _a.find((item) => {
            var _a2;
            return ((_a2 = item == null ? void 0 : item.properties) == null ? void 0 : _a2["_gokwik_freebie"]) && (item == null ? void 0 : item.id) === +cleanShopifyIds(gift.shopifyFreeGiftVariantId);
          })) {
            giftsInCart += 1;
          }
        });
        return giftsInCart < +(info.freeGift.numberOfProduct ?? 0);
      });
      const giftLists = incompleteFreebies.map((info) => {
        return {
          gifts: info.freeGift.gifts,
          numberOfGifts: +(info.freeGift.numberOfProduct ?? 0)
        };
      });
      if (giftLists.length > 0) {
        store_bottomSheet.set({
          type: "Gift",
          title: "Choose Missed Out Free Gifts",
          component: GiftListsContainer,
          componentData: { giftLists },
          show: true,
          rightButtonText: "Skip and Checkout",
          onRightButtonClick: skipMissingGiftsAndProceedToCheckout
        });
        return true;
      }
      return false;
    };
    const skipMissingGiftsAndProceedToCheckout = () => {
      skipMissingGiftsAlert = true;
      openCheckout();
    };
    const onCheckoutClick = async (e, hideGKCheckoutLoader = false) => {
      var _a, _b, _c, _d, _e;
      e == null ? void 0 : e.preventDefault();
      if (hideGKCheckoutLoader) {
        const gokwikModalWrapper = document.getElementById("gokwik-modal-wrapper");
        if (gokwikModalWrapper) {
          gokwikModalWrapper.style.display = "none";
          checkoutLoaderHidden = true;
        }
      }
      if (openFreeGiftSheetOnCheckout()) {
        return;
      }
      const isOnlyFreeItems = ((_a = $store_cart == null ? void 0 : $store_cart.items) == null ? void 0 : _a.length) > 0 && ((_b = $store_cart == null ? void 0 : $store_cart.items) == null ? void 0 : _b.every((item) => (item == null ? void 0 : item.price) === 0));
      if (((_d = (_c = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _c.tNC) == null ? void 0 : _d.enable) && !tncSelected) {
        store_snackbar.set({
          message: "Please agree to the terms and conditions to proceed",
          timer: 2e3,
          show: true,
          error: true
        });
      } else if (isOnlyFreeItems) {
        store_snackbar.set({
          message: "Please add another product to the cart, checkout is not available with only free products.",
          timer: 3e3,
          show: true,
          error: true
        });
      } else {
        const freeGiftConfig2 = $store_configurations == null ? void 0 : $store_configurations.freeGifts;
        if (!freeGiftConfig2) {
          await removeAllFreebies();
          openCheckout();
          return;
        }
        const freeGiftVariantIds = ((freeGiftConfig2 == null ? void 0 : freeGiftConfig2.freeGifts) || []).flatMap((fg) => fg.gifts.map((gift) => String(+cleanShopifyIds(gift.shopifyFreeGiftVariantId))));
        const actualFreebiesAdded = {};
        (_e = $store_cart == null ? void 0 : $store_cart.items) == null ? void 0 : _e.forEach((item) => {
          if (freeGiftVariantIds.includes(String(item.id))) {
            actualFreebiesAdded[String(item.id)] = item.quantity;
          }
        });
        const expected = $store_cartFreebieVariantCount;
        const expectedKeys = Object.keys(expected);
        const actualKeys = Object.keys(actualFreebiesAdded);
        const allKeys = Array.from(/* @__PURE__ */ new Set([...expectedKeys, ...actualKeys]));
        const matches = allKeys.every((key) => expected[key] == actualFreebiesAdded[key]);
        if (matches || hideGKCheckoutLoader) {
          openCheckout();
          return;
        } else {
          fireGokwikTrigger("freegift_issue", {
            items: $store_cart.items,
            expected,
            actual_freebies_added: actualFreebiesAdded
          });
          if ((freeGiftConfig2 == null ? void 0 : freeGiftConfig2.offerType) === "USER_SELECTED") {
            store_snackbar.set({
              message: "Unable to checkout as the number of freebies in your cart are unexpected. Please clear cart and try again.",
              timer: 3e3,
              show: true,
              error: true
            });
            return;
          } else {
            const freebieValidation = await validateFreebiesBeforeCheckout(freeGiftConfig2, $store_cart);
            if (!freebieValidation.isValid) {
              store_snackbar.set({
                message: freebieValidation.message || "Unable to validate free gifts. Please try again.",
                timer: 3e3,
                show: true,
                error: true
              });
              return;
            }
            openCheckout();
            return;
          }
        }
      }
    };
    window.cartCheckoutClick = onCheckoutClick;
    onDestroy(() => {
      unsubAppliedManualDiscount && unsubAppliedManualDiscount();
      if (unsubCart)
        unsubCart();
    });
    const setComponentDisplay = (title) => {
      switch (title) {
        case "delivery":
          return DeliveryContainer;
      }
    };
    function input_change_handler() {
      tncSelected = this.checked;
      $$invalidate(10, tncSelected), $$invalidate(4, $store_configurations);
    }
    const click_handler2 = () => {
      var _a, _b, _c;
      return ((_a = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _a.tNC) && set_store_value(store_configurations, $store_configurations.appearance.tNC.selected = !((_c = (_b = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _b.tNC) == null ? void 0 : _c.selected), $store_configurations);
    };
    function div_binding($$value) {
      binding_callbacks[$$value ? "unshift" : "push"](() => {
        htmlContainer = $$value;
        $$invalidate(11, htmlContainer);
      });
    }
    $$self.$$set = ($$props2) => {
      if ("current_env" in $$props2)
        $$invalidate(0, current_env = $$props2.current_env);
    };
    $$self.$$.update = () => {
      var _a, _b, _c, _d, _e, _f, _g, _h, _i;
      if ($$self.$$.dirty[0] & /*$store_configurations*/
      16) {
        $$invalidate(10, tncSelected = ((_b = (_a = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _a.tNC) == null ? void 0 : _b.selected) !== void 0 ? (_d = (_c = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _c.tNC) == null ? void 0 : _d.selected : true);
      }
      if ($$self.$$.dirty[0] & /*$store_configurations, $store_cart*/
      48) {
        freebieInfo = ((_e = $store_configurations == null ? void 0 : $store_configurations.freeGifts) == null ? void 0 : _e.offerType) === "USER_SELECTED" ? checkFreebieUnlocked($store_configurations == null ? void 0 : $store_configurations.freeGifts, $store_cart) : [];
      }
      if ($$self.$$.dirty[0] & /*$store_appliedManualDiscount*/
      1073741824) {
        if ($store_appliedManualDiscount) {
          $$invalidate(18, cashbackText = getCashbackDetails());
          $$invalidate(19, cashbackSummary = getCashbackSummary());
        } else {
          $$invalidate(18, cashbackText = "");
          $$invalidate(19, cashbackSummary = { type: "" });
        }
      }
      if ($$self.$$.dirty[0] & /*$store_configurations*/
      16) {
        if ((_g = (_f = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _f.tNC) == null ? void 0 : _g.selected) {
          fireGokwikTrigger("t&c_checkbox_clicked", {});
          logEvent("t&c_checkbox_clicked", {});
        }
      }
      if ($$self.$$.dirty[0] & /*$store_cart, $store_productDetails*/
      536870944) {
        if ($store_cart && $store_productDetails) {
          $$invalidate(2, { cartTotal, totalSavings } = calculateMRPDiscount($store_cart), cartTotal, ($$invalidate(9, totalSavings), $$invalidate(5, $store_cart), $$invalidate(29, $store_productDetails)));
        }
      }
      if ($$self.$$.dirty[0] & /*isRedirectingToCheckout, $store_isCheckoutUpdating*/
      268435464) {
        if (isRedirectingToCheckout && !$store_isCheckoutUpdating) {
          $$invalidate(3, isRedirectingToCheckout = false);
          sendMessageToiFrame("redirect-to-checkout", {});
          window.closeGokwikSideCart();
        }
      }
      if ($$self.$$.dirty[0] & /*$store_isBuyNowFreebieProcessing, $store_isBuyNowCartDataLoading, $store_configurations*/
      201326608) {
        {
          if ($store_isBuyNowFreebieProcessing && !$store_isBuyNowCartDataLoading && ((_h = $store_configurations == null ? void 0 : $store_configurations.freeGifts) == null ? void 0 : _h.offerType) === "USER_SELECTED") {
            store_isBuyNowFreebieProcessing.set(false);
            (_i = window == null ? void 0 : window.cartCheckoutClick) == null ? void 0 : _i.call(window, void 0, true);
          }
        }
      }
      if ($$self.$$.dirty[0] & /*cartTotal, totalPayable*/
      6) {
        if (typeof cartTotal === "number" && typeof totalPayable2 === "number") {
          $$invalidate(16, discountInPercentage = getPercentage(cartTotal, +totalPayable2 < 0 ? 0 : +totalPayable2));
        }
      }
    };
    return [
      current_env,
      totalPayable2,
      cartTotal,
      isRedirectingToCheckout,
      $store_configurations,
      $store_cart,
      page,
      savedAmount,
      footerConfigs,
      totalSavings,
      tncSelected,
      htmlContainer,
      showOrderBreakdown,
      shipping,
      prepaidDiscount,
      prepaidDiscountType,
      discountInPercentage,
      footerPaddingTop,
      cashbackText,
      cashbackSummary,
      $store_platform,
      $store_isShippingAndPrepaidDiscountLoading,
      handleRibbonHeight,
      toggleOrderBreakdown,
      onCheckoutClick,
      setComponentDisplay,
      $store_isBuyNowCartDataLoading,
      $store_isBuyNowFreebieProcessing,
      $store_isCheckoutUpdating,
      $store_productDetails,
      $store_appliedManualDiscount,
      input_change_handler,
      click_handler2,
      div_binding
    ];
  }
  class Footer extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$o, create_fragment$o, safe_not_equal, { current_env: 0 }, add_css$m, [-1, -1]);
    }
  }
  function add_css$l(target) {
    append_styles(target, "svelte-1trpkoy", ".description.svelte-1trpkoy.svelte-1trpkoy{font-size:14px !important;line-height:normal !important;width:100% !important;display:block !important;margin-top:5px}.offer-wrapper.svelte-1trpkoy.svelte-1trpkoy{padding:20px 0px;position:relative;border-bottom:1px dashed #929ca8}.offer-wrapper.svelte-1trpkoy .apply-btn.svelte-1trpkoy{position:absolute;top:25px;right:20px}.offer-wrapper.svelte-1trpkoy .apply-btn button.svelte-1trpkoy{outline:none;border:none;position:absolute;right:0px;background:no-repeat;font-weight:600;font-size:13px;cursor:pointer;color:var(--gokwik-primary-color);white-space:nowrap}.offer-name.svelte-1trpkoy.svelte-1trpkoy{display:flex;justify-content:space-between;align-items:center}.offer-name.svelte-1trpkoy .add-items-btn.svelte-1trpkoy{background-color:transparent;color:#004b8d;border:none;font-size:14px;font-weight:600;cursor:pointer;padding:0;padding-right:5px}.offer-name.svelte-1trpkoy .add-items-btn.svelte-1trpkoy:hover{opacity:0.9}.offer.svelte-1trpkoy.svelte-1trpkoy{display:flex}.offer.svelte-1trpkoy p.svelte-1trpkoy{margin-bottom:0;font-weight:600;border:1px dashed #929ca8;padding:3px 6px;border-radius:8px;font-size:14px;width:fit-content;text-transform:uppercase;margin-top:0px}.offer.svelte-1trpkoy .offer-icon.svelte-1trpkoy{margin-right:10px;padding:5px;border-radius:50%;background:#e4e8eb;height:fit-content;max-height:30px;line-height:0px}.amount-saved.svelte-1trpkoy.svelte-1trpkoy{font-weight:600;color:rgb(6, 135, 67);font-size:13px;margin-top:5px;display:block}.offer-details-points.svelte-1trpkoy.svelte-1trpkoy{color:#697687;font-weight:500;font-size:15px;margin:5px 0px}.offer-details-points.svelte-1trpkoy li.svelte-1trpkoy{list-style:disc;font-size:12px;padding-bottom:3px}.offer-details.svelte-1trpkoy ul.svelte-1trpkoy{padding-left:20px}.missing-condn-row.svelte-1trpkoy.svelte-1trpkoy{display:flex;justify-content:space-between;align-items:center;gap:10px;margin:6px 0;flex-wrap:wrap}.missing-condn-row.svelte-1trpkoy .missing-condn.svelte-1trpkoy{color:#e31b1b;font-size:13px;margin:5px 0;display:block}");
  }
  function get_each_context$7(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[10] = list[i];
    return child_ctx;
  }
  function create_if_block_10$1(ctx) {
    let button;
    let mounted;
    let dispose;
    return {
      c() {
        button = element("button");
        button.textContent = "+ Add Item(s)";
        attr(button, "class", "add-items-btn svelte-1trpkoy");
      },
      m(target, anchor) {
        insert(target, button, anchor);
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*redirectToEligible*/
            ctx[3]
          );
          mounted = true;
        }
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block_9$1(ctx) {
    let span;
    let t0;
    let t1_value = formatCurrencyDisplay(
      /*offer*/
      ctx[0].amountSaved
    ) + "";
    let t1;
    return {
      c() {
        span = element("span");
        t0 = text("You save ");
        t1 = text(t1_value);
        attr(span, "class", "amount-saved svelte-1trpkoy");
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t0);
        append(span, t1);
      },
      p(ctx2, dirty) {
        if (dirty & /*offer*/
        1 && t1_value !== (t1_value = formatCurrencyDisplay(
          /*offer*/
          ctx2[0].amountSaved
        ) + ""))
          set_data(t1, t1_value);
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_if_block_5$4(ctx) {
    let div;
    let span;
    function select_block_type(ctx2, dirty) {
      var _a, _b, _c;
      if (
        /*offer*/
        (_a = ctx2[0]) == null ? void 0 : _a.amountMissing
      )
        return create_if_block_6$3;
      if (
        /*offer*/
        (_b = ctx2[0]) == null ? void 0 : _b.itemCountMissing
      )
        return create_if_block_7$3;
      if (
        /*offer*/
        (_c = ctx2[0]) == null ? void 0 : _c.productMissing
      )
        return create_if_block_8$3;
      return create_else_block_1$1;
    }
    let current_block_type = select_block_type(ctx);
    let if_block = current_block_type(ctx);
    return {
      c() {
        div = element("div");
        span = element("span");
        if_block.c();
        attr(span, "class", "missing-condn svelte-1trpkoy");
        attr(div, "class", "missing-condn-row svelte-1trpkoy");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, span);
        if_block.m(span, null);
      },
      p(ctx2, dirty) {
        if (current_block_type === (current_block_type = select_block_type(ctx2)) && if_block) {
          if_block.p(ctx2, dirty);
        } else {
          if_block.d(1);
          if_block = current_block_type(ctx2);
          if (if_block) {
            if_block.c();
            if_block.m(span, null);
          }
        }
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        if_block.d();
      }
    };
  }
  function create_else_block_1$1(ctx) {
    let t;
    return {
      c() {
        t = text("Add eligible items to unlock this offer");
      },
      m(target, anchor) {
        insert(target, t, anchor);
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(t);
        }
      }
    };
  }
  function create_if_block_8$3(ctx) {
    let t;
    return {
      c() {
        t = text("Required item is missing from the cart");
      },
      m(target, anchor) {
        insert(target, t, anchor);
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(t);
        }
      }
    };
  }
  function create_if_block_7$3(ctx) {
    let t0;
    let t1_value = (
      /*offer*/
      ctx[0].itemCountMissing + ""
    );
    let t1;
    let t2;
    return {
      c() {
        t0 = text("Add ");
        t1 = text(t1_value);
        t2 = text(" more items to avail");
      },
      m(target, anchor) {
        insert(target, t0, anchor);
        insert(target, t1, anchor);
        insert(target, t2, anchor);
      },
      p(ctx2, dirty) {
        if (dirty & /*offer*/
        1 && t1_value !== (t1_value = /*offer*/
        ctx2[0].itemCountMissing + ""))
          set_data(t1, t1_value);
      },
      d(detaching) {
        if (detaching) {
          detach(t0);
          detach(t1);
          detach(t2);
        }
      }
    };
  }
  function create_if_block_6$3(ctx) {
    let t0;
    let t1_value = formatCurrencyDisplay(
      /*offer*/
      ctx[0].amountMissing
    ) + "";
    let t1;
    let t2;
    return {
      c() {
        t0 = text("Add item worth ");
        t1 = text(t1_value);
        t2 = text(" amount more to avail");
      },
      m(target, anchor) {
        insert(target, t0, anchor);
        insert(target, t1, anchor);
        insert(target, t2, anchor);
      },
      p(ctx2, dirty) {
        if (dirty & /*offer*/
        1 && t1_value !== (t1_value = formatCurrencyDisplay(
          /*offer*/
          ctx2[0].amountMissing
        ) + ""))
          set_data(t1, t1_value);
      },
      d(detaching) {
        if (detaching) {
          detach(t0);
          detach(t1);
          detach(t2);
        }
      }
    };
  }
  function create_if_block_4$4(ctx) {
    let span;
    let t_value = (
      /*offer*/
      ctx[0].discountDetail + ""
    );
    let t;
    return {
      c() {
        span = element("span");
        t = text(t_value);
        attr(span, "class", "description svelte-1trpkoy");
      },
      m(target, anchor) {
        insert(target, span, anchor);
        append(span, t);
      },
      p(ctx2, dirty) {
        if (dirty & /*offer*/
        1 && t_value !== (t_value = /*offer*/
        ctx2[0].discountDetail + ""))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_if_block_2$8(ctx) {
    let ul;
    let each_value = ensure_array_like(
      /*offer*/
      ctx[0].additionalDetails.bulletPoints
    );
    let each_blocks = [];
    for (let i = 0; i < each_value.length; i += 1) {
      each_blocks[i] = create_each_block$7(get_each_context$7(ctx, each_value, i));
    }
    return {
      c() {
        ul = element("ul");
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        attr(ul, "class", "offer-details-points svelte-1trpkoy");
      },
      m(target, anchor) {
        insert(target, ul, anchor);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(ul, null);
          }
        }
      },
      p(ctx2, dirty) {
        if (dirty & /*offer*/
        1) {
          each_value = ensure_array_like(
            /*offer*/
            ctx2[0].additionalDetails.bulletPoints
          );
          let i;
          for (i = 0; i < each_value.length; i += 1) {
            const child_ctx = get_each_context$7(ctx2, each_value, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
            } else {
              each_blocks[i] = create_each_block$7(child_ctx);
              each_blocks[i].c();
              each_blocks[i].m(ul, null);
            }
          }
          for (; i < each_blocks.length; i += 1) {
            each_blocks[i].d(1);
          }
          each_blocks.length = each_value.length;
        }
      },
      d(detaching) {
        if (detaching) {
          detach(ul);
        }
        destroy_each(each_blocks, detaching);
      }
    };
  }
  function create_if_block_3$6(ctx) {
    let li;
    let t_value = (
      /*bullet_point*/
      ctx[10] + ""
    );
    let t;
    return {
      c() {
        li = element("li");
        t = text(t_value);
        attr(li, "class", "svelte-1trpkoy");
      },
      m(target, anchor) {
        insert(target, li, anchor);
        append(li, t);
      },
      p(ctx2, dirty) {
        if (dirty & /*offer*/
        1 && t_value !== (t_value = /*bullet_point*/
        ctx2[10] + ""))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(li);
        }
      }
    };
  }
  function create_each_block$7(ctx) {
    let if_block_anchor;
    let if_block = (
      /*bullet_point*/
      ctx[10] && create_if_block_3$6(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
      },
      p(ctx2, dirty) {
        if (
          /*bullet_point*/
          ctx2[10]
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block_3$6(ctx2);
            if_block.c();
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function create_if_block$j(ctx) {
    let div;
    function select_block_type_1(ctx2, dirty) {
      if (
        /*offeerApplied*/
        ctx2[2]
      )
        return create_if_block_1$e;
      return create_else_block$9;
    }
    let current_block_type = select_block_type_1(ctx);
    let if_block = current_block_type(ctx);
    return {
      c() {
        div = element("div");
        if_block.c();
        attr(div, "class", "apply-btn svelte-1trpkoy");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        if_block.m(div, null);
      },
      p(ctx2, dirty) {
        if (current_block_type === (current_block_type = select_block_type_1(ctx2)) && if_block) {
          if_block.p(ctx2, dirty);
        } else {
          if_block.d(1);
          if_block = current_block_type(ctx2);
          if (if_block) {
            if_block.c();
            if_block.m(div, null);
          }
        }
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        if_block.d();
      }
    };
  }
  function create_else_block$9(ctx) {
    let button;
    let mounted;
    let dispose;
    return {
      c() {
        button = element("button");
        button.textContent = "Apply";
        attr(button, "class", "svelte-1trpkoy");
      },
      m(target, anchor) {
        insert(target, button, anchor);
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*click_handler*/
            ctx[5]
          );
          mounted = true;
        }
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block_1$e(ctx) {
    let button;
    return {
      c() {
        button = element("button");
        button.textContent = "Applied";
        button.disabled = true;
        attr(button, "class", "svelte-1trpkoy");
      },
      m(target, anchor) {
        insert(target, button, anchor);
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(button);
        }
      }
    };
  }
  function create_fragment$n(ctx) {
    var _a, _b;
    let div6;
    let div3;
    let div2;
    let div0;
    let icon;
    let t0;
    let div1;
    let p;
    let t1_value = (
      /*offer*/
      ctx[0].discountCode + ""
    );
    let t1;
    let t2;
    let t3;
    let div5;
    let div4;
    let t4;
    let t5;
    let t6;
    let t7;
    let current;
    icon = new Icon({
      props: {
        color: "#15b79e",
        height: "16px",
        icon: "iconamoon:discount-fill"
      }
    });
    let if_block0 = (
      /*isUnavailable*/
      ctx[1] && create_if_block_10$1(ctx)
    );
    let if_block1 = (
      /*offer*/
      ctx[0].amountSaved && create_if_block_9$1(ctx)
    );
    let if_block2 = (
      /*isUnavailable*/
      ctx[1] && create_if_block_5$4(ctx)
    );
    let if_block3 = (
      /*offer*/
      ctx[0].discountDetail && create_if_block_4$4(ctx)
    );
    let if_block4 = (
      /*offer*/
      ((_b = (_a = ctx[0].additionalDetails) == null ? void 0 : _a.bulletPoints) == null ? void 0 : _b.length) && create_if_block_2$8(ctx)
    );
    let if_block5 = !/*isUnavailable*/
    ctx[1] && create_if_block$j(ctx);
    return {
      c() {
        div6 = element("div");
        div3 = element("div");
        div2 = element("div");
        div0 = element("div");
        create_component(icon.$$.fragment);
        t0 = space();
        div1 = element("div");
        p = element("p");
        t1 = text(t1_value);
        t2 = space();
        if (if_block0)
          if_block0.c();
        t3 = space();
        div5 = element("div");
        div4 = element("div");
        if (if_block1)
          if_block1.c();
        t4 = space();
        if (if_block2)
          if_block2.c();
        t5 = space();
        if (if_block3)
          if_block3.c();
        t6 = space();
        if (if_block4)
          if_block4.c();
        t7 = space();
        if (if_block5)
          if_block5.c();
        attr(div0, "class", "offer-icon svelte-1trpkoy");
        attr(p, "class", "svelte-1trpkoy");
        attr(div1, "class", "offer-title");
        attr(div2, "class", "offer svelte-1trpkoy");
        attr(div3, "class", "offer-name svelte-1trpkoy");
        attr(div4, "class", "offer-details svelte-1trpkoy");
        attr(div5, "class", "offer-details svelte-1trpkoy");
        attr(div6, "class", "offer-wrapper svelte-1trpkoy");
      },
      m(target, anchor) {
        insert(target, div6, anchor);
        append(div6, div3);
        append(div3, div2);
        append(div2, div0);
        mount_component(icon, div0, null);
        append(div2, t0);
        append(div2, div1);
        append(div1, p);
        append(p, t1);
        append(div3, t2);
        if (if_block0)
          if_block0.m(div3, null);
        append(div6, t3);
        append(div6, div5);
        append(div5, div4);
        if (if_block1)
          if_block1.m(div4, null);
        append(div4, t4);
        if (if_block2)
          if_block2.m(div4, null);
        append(div4, t5);
        if (if_block3)
          if_block3.m(div4, null);
        append(div4, t6);
        if (if_block4)
          if_block4.m(div4, null);
        append(div6, t7);
        if (if_block5)
          if_block5.m(div6, null);
        current = true;
      },
      p(ctx2, [dirty]) {
        var _a2, _b2;
        if ((!current || dirty & /*offer*/
        1) && t1_value !== (t1_value = /*offer*/
        ctx2[0].discountCode + ""))
          set_data(t1, t1_value);
        if (
          /*isUnavailable*/
          ctx2[1]
        ) {
          if (if_block0) {
            if_block0.p(ctx2, dirty);
          } else {
            if_block0 = create_if_block_10$1(ctx2);
            if_block0.c();
            if_block0.m(div3, null);
          }
        } else if (if_block0) {
          if_block0.d(1);
          if_block0 = null;
        }
        if (
          /*offer*/
          ctx2[0].amountSaved
        ) {
          if (if_block1) {
            if_block1.p(ctx2, dirty);
          } else {
            if_block1 = create_if_block_9$1(ctx2);
            if_block1.c();
            if_block1.m(div4, t4);
          }
        } else if (if_block1) {
          if_block1.d(1);
          if_block1 = null;
        }
        if (
          /*isUnavailable*/
          ctx2[1]
        ) {
          if (if_block2) {
            if_block2.p(ctx2, dirty);
          } else {
            if_block2 = create_if_block_5$4(ctx2);
            if_block2.c();
            if_block2.m(div4, t5);
          }
        } else if (if_block2) {
          if_block2.d(1);
          if_block2 = null;
        }
        if (
          /*offer*/
          ctx2[0].discountDetail
        ) {
          if (if_block3) {
            if_block3.p(ctx2, dirty);
          } else {
            if_block3 = create_if_block_4$4(ctx2);
            if_block3.c();
            if_block3.m(div4, t6);
          }
        } else if (if_block3) {
          if_block3.d(1);
          if_block3 = null;
        }
        if (
          /*offer*/
          (_b2 = (_a2 = ctx2[0].additionalDetails) == null ? void 0 : _a2.bulletPoints) == null ? void 0 : _b2.length
        ) {
          if (if_block4) {
            if_block4.p(ctx2, dirty);
          } else {
            if_block4 = create_if_block_2$8(ctx2);
            if_block4.c();
            if_block4.m(div4, null);
          }
        } else if (if_block4) {
          if_block4.d(1);
          if_block4 = null;
        }
        if (!/*isUnavailable*/
        ctx2[1]) {
          if (if_block5) {
            if_block5.p(ctx2, dirty);
          } else {
            if_block5 = create_if_block$j(ctx2);
            if_block5.c();
            if_block5.m(div6, null);
          }
        } else if (if_block5) {
          if_block5.d(1);
          if_block5 = null;
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div6);
        }
        destroy_component(icon);
        if (if_block0)
          if_block0.d();
        if (if_block1)
          if_block1.d();
        if (if_block2)
          if_block2.d();
        if (if_block3)
          if_block3.d();
        if (if_block4)
          if_block4.d();
        if (if_block5)
          if_block5.d();
      }
    };
  }
  function instance$n($$self, $$props, $$invalidate) {
    let $store_showConfetti;
    let $store_appliedAutomaticDiscounts;
    component_subscribe($$self, store_showConfetti, ($$value) => $$invalidate(6, $store_showConfetti = $$value));
    component_subscribe($$self, store_appliedAutomaticDiscounts, ($$value) => $$invalidate(7, $store_appliedAutomaticDiscounts = $$value));
    let { offer } = $$props;
    let { isUnavailable = false } = $$props;
    let offeerApplied = false;
    const offerApplied = (title) => {
      let applied = false;
      let allAppliedDiscounts = getAppliedDiscountTitles();
      if (allAppliedDiscounts.includes(title.toLowerCase())) {
        applied = true;
      }
      $store_appliedAutomaticDiscounts == null ? void 0 : $store_appliedAutomaticDiscounts.map((discount) => {
        if (discount.title.toLowerCase() === title.toLowerCase()) {
          applied = true;
        }
      });
      return applied;
    };
    const getRedirectLink = () => {
      const variantHandles = (offer == null ? void 0 : offer.entitledVariantHandles) || [];
      const productHandles = (offer == null ? void 0 : offer.entitledProductHandles) || [];
      const collectionHandles = (offer == null ? void 0 : offer.entitledCollectionHandles) || [];
      if (productHandles.length > 0) {
        return `/products/${productHandles[0]}`;
      } else if (variantHandles.length > 0) {
        return `/products/${variantHandles[0]}`;
      } else if (collectionHandles.length > 0) {
        return `/collections/${collectionHandles[0]}`;
      } else {
        return `/collections/all`;
      }
    };
    const redirectToEligible = () => {
      const link = getRedirectLink();
      window.location.href = link;
    };
    const onApplyDiscount = async (code, mode) => {
      var _a;
      const res = await applyDiscount(code, mode);
      if (((_a = res.data) == null ? void 0 : _a.isValid) && !$store_showConfetti) {
        store_showConfetti.set(true);
      }
    };
    const click_handler2 = (e) => onApplyDiscount(offer.discountCode, "inside");
    $$self.$$set = ($$props2) => {
      if ("offer" in $$props2)
        $$invalidate(0, offer = $$props2.offer);
      if ("isUnavailable" in $$props2)
        $$invalidate(1, isUnavailable = $$props2.isUnavailable);
    };
    $$self.$$.update = () => {
      if ($$self.$$.dirty & /*offer*/
      1) {
        $$invalidate(2, offeerApplied = offerApplied(offer.discountCode));
      }
    };
    return [
      offer,
      isUnavailable,
      offeerApplied,
      redirectToEligible,
      onApplyDiscount,
      click_handler2
    ];
  }
  class OfferTile extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$n, create_fragment$n, safe_not_equal, { offer: 0, isUnavailable: 1 }, add_css$l);
    }
  }
  function add_css$k(target) {
    append_styles(target, "svelte-1airb4v", ".offer-title-container.svelte-1airb4v.svelte-1airb4v{border-bottom:1px dashed #ccc;padding-bottom:16px;margin-bottom:16px}.bank-logo-with-title.svelte-1airb4v.svelte-1airb4v{display:flex;align-items:center;gap:8px;margin-bottom:6px}.bank-logo-with-title.svelte-1airb4v img.svelte-1airb4v{height:36px;width:36px;border-radius:50%;background:#f2f2f2;object-fit:contain}.bank-logo-with-title.svelte-1airb4v h2.svelte-1airb4v{font-size:14px;font-weight:700;margin:0;color:#111827;line-height:1.2}.auto-applied-text.svelte-1airb4v.svelte-1airb4v{color:#0c9b4f;font-size:12px;margin:0 0 4px 0}.desc.svelte-1airb4v.svelte-1airb4v{font-size:11px;color:#505d6f}.show-more-btn.svelte-1airb4v.svelte-1airb4v{font-size:11px;background:none;border:none;padding:0;cursor:pointer;text-decoration:underline;margin-top:4px}.bullet-points.svelte-1airb4v.svelte-1airb4v{padding-left:20px;color:#4b5563;font-size:11px;margin:0}.bullet-points.svelte-1airb4v li.svelte-1airb4v{margin-bottom:4px;list-style-type:disc}");
  }
  function get_each_context$6(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[4] = list[i];
    return child_ctx;
  }
  function create_if_block$i(ctx) {
    var _a, _b, _c;
    let div1;
    let div0;
    let t0;
    let h2;
    let t1_value = (
      /*offer*/
      ((_a = ctx[0]) == null ? void 0 : _a.paymentOfferTitle) + ""
    );
    let t1;
    let t2;
    let p0;
    let t4;
    let p1;
    let t5_value = (
      /*offer*/
      ((_b = ctx[0]) == null ? void 0 : _b.discountDetail) + ""
    );
    let t5;
    let t6;
    let if_block0 = (
      /*offer*/
      ((_c = ctx[0]) == null ? void 0 : _c.logoUrl) && create_if_block_3$5(ctx)
    );
    let if_block1 = (
      /*bulletPoints*/
      ctx[2].length && create_if_block_1$d(ctx)
    );
    return {
      c() {
        div1 = element("div");
        div0 = element("div");
        if (if_block0)
          if_block0.c();
        t0 = space();
        h2 = element("h2");
        t1 = text(t1_value);
        t2 = space();
        p0 = element("p");
        p0.textContent = "Auto applied with select payment method";
        t4 = space();
        p1 = element("p");
        t5 = text(t5_value);
        t6 = space();
        if (if_block1)
          if_block1.c();
        attr(h2, "class", "svelte-1airb4v");
        attr(div0, "class", "bank-logo-with-title svelte-1airb4v");
        attr(p0, "class", "auto-applied-text svelte-1airb4v");
        attr(p1, "class", "desc svelte-1airb4v");
        attr(div1, "class", "offer-title-container svelte-1airb4v");
      },
      m(target, anchor) {
        insert(target, div1, anchor);
        append(div1, div0);
        if (if_block0)
          if_block0.m(div0, null);
        append(div0, t0);
        append(div0, h2);
        append(h2, t1);
        append(div1, t2);
        append(div1, p0);
        append(div1, t4);
        append(div1, p1);
        append(p1, t5);
        append(div1, t6);
        if (if_block1)
          if_block1.m(div1, null);
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c2;
        if (
          /*offer*/
          (_a2 = ctx2[0]) == null ? void 0 : _a2.logoUrl
        ) {
          if (if_block0) {
            if_block0.p(ctx2, dirty);
          } else {
            if_block0 = create_if_block_3$5(ctx2);
            if_block0.c();
            if_block0.m(div0, t0);
          }
        } else if (if_block0) {
          if_block0.d(1);
          if_block0 = null;
        }
        if (dirty & /*offer*/
        1 && t1_value !== (t1_value = /*offer*/
        ((_b2 = ctx2[0]) == null ? void 0 : _b2.paymentOfferTitle) + ""))
          set_data(t1, t1_value);
        if (dirty & /*offer*/
        1 && t5_value !== (t5_value = /*offer*/
        ((_c2 = ctx2[0]) == null ? void 0 : _c2.discountDetail) + ""))
          set_data(t5, t5_value);
        if (
          /*bulletPoints*/
          ctx2[2].length
        ) {
          if (if_block1) {
            if_block1.p(ctx2, dirty);
          } else {
            if_block1 = create_if_block_1$d(ctx2);
            if_block1.c();
            if_block1.m(div1, null);
          }
        } else if (if_block1) {
          if_block1.d(1);
          if_block1 = null;
        }
      },
      d(detaching) {
        if (detaching) {
          detach(div1);
        }
        if (if_block0)
          if_block0.d();
        if (if_block1)
          if_block1.d();
      }
    };
  }
  function create_if_block_3$5(ctx) {
    let img;
    let img_src_value;
    return {
      c() {
        img = element("img");
        if (!src_url_equal(img.src, img_src_value = /*offer*/
        ctx[0].logoUrl))
          attr(img, "src", img_src_value);
        attr(img, "alt", "Bank Logo");
        attr(img, "class", "svelte-1airb4v");
      },
      m(target, anchor) {
        insert(target, img, anchor);
      },
      p(ctx2, dirty) {
        if (dirty & /*offer*/
        1 && !src_url_equal(img.src, img_src_value = /*offer*/
        ctx2[0].logoUrl)) {
          attr(img, "src", img_src_value);
        }
      },
      d(detaching) {
        if (detaching) {
          detach(img);
        }
      }
    };
  }
  function create_if_block_1$d(ctx) {
    let button;
    let t0_value = (
      /*showMore*/
      ctx[1] ? "Show Less" : "Show More"
    );
    let t0;
    let t1;
    let if_block_anchor;
    let mounted;
    let dispose;
    let if_block = (
      /*showMore*/
      ctx[1] && create_if_block_2$7(ctx)
    );
    return {
      c() {
        button = element("button");
        t0 = text(t0_value);
        t1 = space();
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
        attr(button, "class", "show-more-btn svelte-1airb4v");
      },
      m(target, anchor) {
        insert(target, button, anchor);
        append(button, t0);
        insert(target, t1, anchor);
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*click_handler*/
            ctx[3]
          );
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        if (dirty & /*showMore*/
        2 && t0_value !== (t0_value = /*showMore*/
        ctx2[1] ? "Show Less" : "Show More"))
          set_data(t0, t0_value);
        if (
          /*showMore*/
          ctx2[1]
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block_2$7(ctx2);
            if_block.c();
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
      },
      d(detaching) {
        if (detaching) {
          detach(button);
          detach(t1);
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block_2$7(ctx) {
    let ul;
    let each_value = ensure_array_like(
      /*bulletPoints*/
      ctx[2]
    );
    let each_blocks = [];
    for (let i = 0; i < each_value.length; i += 1) {
      each_blocks[i] = create_each_block$6(get_each_context$6(ctx, each_value, i));
    }
    return {
      c() {
        ul = element("ul");
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        attr(ul, "class", "bullet-points svelte-1airb4v");
      },
      m(target, anchor) {
        insert(target, ul, anchor);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(ul, null);
          }
        }
      },
      p(ctx2, dirty) {
        if (dirty & /*bulletPoints*/
        4) {
          each_value = ensure_array_like(
            /*bulletPoints*/
            ctx2[2]
          );
          let i;
          for (i = 0; i < each_value.length; i += 1) {
            const child_ctx = get_each_context$6(ctx2, each_value, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
            } else {
              each_blocks[i] = create_each_block$6(child_ctx);
              each_blocks[i].c();
              each_blocks[i].m(ul, null);
            }
          }
          for (; i < each_blocks.length; i += 1) {
            each_blocks[i].d(1);
          }
          each_blocks.length = each_value.length;
        }
      },
      d(detaching) {
        if (detaching) {
          detach(ul);
        }
        destroy_each(each_blocks, detaching);
      }
    };
  }
  function create_each_block$6(ctx) {
    let li;
    let t_value = (
      /*point*/
      ctx[4].trim() + ""
    );
    let t;
    return {
      c() {
        li = element("li");
        t = text(t_value);
        attr(li, "class", "svelte-1airb4v");
      },
      m(target, anchor) {
        insert(target, li, anchor);
        append(li, t);
      },
      p(ctx2, dirty) {
        if (dirty & /*bulletPoints*/
        4 && t_value !== (t_value = /*point*/
        ctx2[4].trim() + ""))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(li);
        }
      }
    };
  }
  function create_fragment$m(ctx) {
    let if_block_anchor;
    let if_block = (
      /*offer*/
      ctx[0] && create_if_block$i(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
      },
      p(ctx2, [dirty]) {
        if (
          /*offer*/
          ctx2[0]
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block$i(ctx2);
            if_block.c();
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function instance$m($$self, $$props, $$invalidate) {
    let bulletPoints;
    let { offer } = $$props;
    let showMore = false;
    const click_handler2 = () => $$invalidate(1, showMore = !showMore);
    $$self.$$set = ($$props2) => {
      if ("offer" in $$props2)
        $$invalidate(0, offer = $$props2.offer);
    };
    $$self.$$.update = () => {
      if ($$self.$$.dirty & /*offer*/
      1) {
        $$invalidate(2, bulletPoints = (offer == null ? void 0 : offer.tnc) ? offer.tnc.split("||") : []);
      }
    };
    return [offer, showMore, bulletPoints, click_handler2];
  }
  class PaymentOfferTitle extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$m, create_fragment$m, safe_not_equal, { offer: 0 }, add_css$k);
    }
  }
  function add_css$j(target) {
    append_styles(target, "svelte-hjytin", ".discount-input-area.svelte-hjytin.svelte-hjytin{display:flex;position:relative;align-items:center}.discount-input-area.svelte-hjytin .apply-btn.svelte-hjytin{position:absolute;right:0px;top:0px}.discount-input-area.svelte-hjytin .apply-btn button.svelte-hjytin{outline:none;border:none;position:absolute;top:7px;right:5px;cursor:pointer;background:no-repeat;font-weight:600;font-size:13px;color:var(--gokwik-primary-color);white-space:nowrap}.discount-input-area.svelte-hjytin .discount-icon.svelte-hjytin{height:fit-content;margin-right:10px;line-height:0px;position:absolute;left:10px}.discount-input-area.svelte-hjytin input.svelte-hjytin{border:1px solid #bbc2ca;border-radius:8px;height:35px;width:98%;padding:3px 10px 3px 30px;font-size:16px}.discount-input-area.svelte-hjytin input.svelte-hjytin:focus{outline:none;border:1px solid #bbc2ca}.discount-input-area.svelte-hjytin input.svelte-hjytin::placeholder{color:#929ca8}.discount-input-area.svelte-hjytin input.svelte-hjytin:focus-visible{outline:none;box-shadow:none}.mode2.svelte-hjytin.svelte-hjytin{margin-top:20px}.mode2.svelte-hjytin input.svelte-hjytin{width:100%;padding:3px 10px 3px 40px}.mode2.svelte-hjytin .apply-btn button.svelte-hjytin{right:20px}.mode2.svelte-hjytin .discount-icon.svelte-hjytin{margin-right:10px;line-height:0px;padding:5px;border-radius:50%;height:fit-content}.mode2.svelte-hjytin.svelte-hjytin{padding:0px}");
  }
  function create_if_block$h(ctx) {
    let div;
    let button;
    let mounted;
    let dispose;
    return {
      c() {
        div = element("div");
        button = element("button");
        button.textContent = "Apply";
        attr(button, "class", "svelte-hjytin");
        attr(div, "class", "apply-btn svelte-hjytin");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, button);
        if (!mounted) {
          dispose = [
            listen(
              button,
              "click",
              /*click_handler*/
              ctx[6]
            ),
            listen(
              button,
              "keypress",
              /*keypress_handler_1*/
              ctx[7]
            )
          ];
          mounted = true;
        }
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        mounted = false;
        run_all(dispose);
      }
    };
  }
  function create_fragment$l(ctx) {
    let div1;
    let div0;
    let icon;
    let t0;
    let input;
    let t1;
    let show_if = (
      /*discountInput*/
      ctx[1].trim().length > 0
    );
    let div1_class_value;
    let current;
    let mounted;
    let dispose;
    icon = new Icon({
      props: {
        color: "#15b79e",
        height: "16px",
        icon: "iconamoon:discount-fill"
      }
    });
    let if_block = show_if && create_if_block$h(ctx);
    return {
      c() {
        div1 = element("div");
        div0 = element("div");
        create_component(icon.$$.fragment);
        t0 = space();
        input = element("input");
        t1 = space();
        if (if_block)
          if_block.c();
        attr(div0, "class", "discount-icon svelte-hjytin");
        attr(input, "placeholder", "Enter Coupon Code");
        attr(input, "type", "text");
        attr(input, "class", "svelte-hjytin");
        attr(div1, "class", div1_class_value = "discount-input-area " + /*mode*/
        (ctx[0] === 2 && "mode2") + " svelte-hjytin");
      },
      m(target, anchor) {
        insert(target, div1, anchor);
        append(div1, div0);
        mount_component(icon, div0, null);
        append(div1, t0);
        append(div1, input);
        set_input_value(
          input,
          /*discountInput*/
          ctx[1]
        );
        append(div1, t1);
        if (if_block)
          if_block.m(div1, null);
        current = true;
        if (!mounted) {
          dispose = [
            listen(
              input,
              "input",
              /*input_input_handler*/
              ctx[4]
            ),
            listen(
              input,
              "keypress",
              /*keypress_handler*/
              ctx[5]
            )
          ];
          mounted = true;
        }
      },
      p(ctx2, [dirty]) {
        if (dirty & /*discountInput*/
        2 && input.value !== /*discountInput*/
        ctx2[1]) {
          set_input_value(
            input,
            /*discountInput*/
            ctx2[1]
          );
        }
        if (dirty & /*discountInput*/
        2)
          show_if = /*discountInput*/
          ctx2[1].trim().length > 0;
        if (show_if) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block$h(ctx2);
            if_block.c();
            if_block.m(div1, null);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
        if (!current || dirty & /*mode*/
        1 && div1_class_value !== (div1_class_value = "discount-input-area " + /*mode*/
        (ctx2[0] === 2 && "mode2") + " svelte-hjytin")) {
          attr(div1, "class", div1_class_value);
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div1);
        }
        destroy_component(icon);
        if (if_block)
          if_block.d();
        mounted = false;
        run_all(dispose);
      }
    };
  }
  function instance$l($$self, $$props, $$invalidate) {
    let $store_showConfetti;
    component_subscribe($$self, store_showConfetti, ($$value) => $$invalidate(8, $store_showConfetti = $$value));
    let { mode = 1 } = $$props;
    let discountInput = "";
    const onDiscountInput = async () => {
      var _a;
      const res = await applyDiscount(discountInput, mode === 2 ? "inside" : "outside");
      if (((_a = res.data) == null ? void 0 : _a.isValid) && !$store_showConfetti) {
        store_showConfetti.set(true);
        $$invalidate(1, discountInput = "");
      }
    };
    function onEnterSubmit(e) {
      if (e.key === "Enter") {
        onDiscountInput();
      }
    }
    function input_input_handler() {
      discountInput = this.value;
      $$invalidate(1, discountInput);
    }
    const keypress_handler = (e) => {
      onEnterSubmit(e);
    };
    const click_handler2 = (e) => onDiscountInput();
    const keypress_handler_1 = (e) => {
      if (e.key === "Enter") {
        onDiscountInput();
      }
    };
    $$self.$$set = ($$props2) => {
      if ("mode" in $$props2)
        $$invalidate(0, mode = $$props2.mode);
    };
    return [
      mode,
      discountInput,
      onDiscountInput,
      onEnterSubmit,
      input_input_handler,
      keypress_handler,
      click_handler2,
      keypress_handler_1
    ];
  }
  class DiscountInput extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$l, create_fragment$l, safe_not_equal, { mode: 0 }, add_css$j);
    }
  }
  function add_css$i(target) {
    append_styles(target, "svelte-13rebjd", ".offer-category.svelte-13rebjd.svelte-13rebjd,.offer-list.svelte-13rebjd.svelte-13rebjd{height:100%;overflow-y:auto;margin:0}.offer-type-buttons.svelte-13rebjd.svelte-13rebjd{display:flex;justify-content:center;gap:12px;padding-top:10px;border-radius:999px;margin-bottom:10px;width:fit-content;background-color:transparent}.offer-type-buttons.svelte-13rebjd button.svelte-13rebjd{all:unset;padding:6px 15px;font-size:16px;font-weight:500;border-radius:999px;border:1px solid #d1d5db;background-color:#ffffff;color:#111827;cursor:pointer;transition:all 0.2s ease}.offer-type-buttons.svelte-13rebjd button.active.svelte-13rebjd{background-color:#f0f0f0;border:2px solid #068743}.checkout-info-banner.svelte-13rebjd.svelte-13rebjd{background-color:#e8f0fe;color:#2962ff;font-size:14px;font-weight:500;padding:8px 12px;border-radius:6px;margin-bottom:20px;margin-top:15px;width:98%}.available.svelte-13rebjd.svelte-13rebjd,.unavailable.svelte-13rebjd.svelte-13rebjd{margin-bottom:20px}.available-offer-title.svelte-13rebjd.svelte-13rebjd{font-weight:600;font-size:16px;margin:16px 0 6px}h6.svelte-13rebjd.svelte-13rebjd{margin-bottom:0px;font-size:16px;font-weight:500}.discount-input.svelte-13rebjd.svelte-13rebjd{margin-bottom:20px;margin-top:15px}");
  }
  function get_each_context_3(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[9] = list[i];
    return child_ctx;
  }
  function get_each_context_4(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[9] = list[i];
    return child_ctx;
  }
  function get_each_context$5(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[9] = list[i];
    return child_ctx;
  }
  function get_each_context_1$1(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[9] = list[i];
    return child_ctx;
  }
  function get_each_context_2(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[9] = list[i];
    return child_ctx;
  }
  function create_else_block$8(ctx) {
    var _a, _b;
    let div1;
    let div0;
    let discountinput;
    let t0;
    let t1;
    let current;
    discountinput = new DiscountInput({});
    let if_block0 = (
      /*brandOffers*/
      ((_a = ctx[1]) == null ? void 0 : _a.length) && create_if_block_8$2(ctx)
    );
    let if_block1 = (
      /*unavailableBrandOffers*/
      ((_b = ctx[2]) == null ? void 0 : _b.length) && create_if_block_7$2(ctx)
    );
    return {
      c() {
        div1 = element("div");
        div0 = element("div");
        create_component(discountinput.$$.fragment);
        t0 = space();
        if (if_block0)
          if_block0.c();
        t1 = space();
        if (if_block1)
          if_block1.c();
        attr(div0, "class", "discount-input svelte-13rebjd");
        attr(div1, "class", "offer-list svelte-13rebjd");
      },
      m(target, anchor) {
        insert(target, div1, anchor);
        append(div1, div0);
        mount_component(discountinput, div0, null);
        append(div1, t0);
        if (if_block0)
          if_block0.m(div1, null);
        append(div1, t1);
        if (if_block1)
          if_block1.m(div1, null);
        current = true;
      },
      p(ctx2, dirty) {
        var _a2, _b2;
        if (
          /*brandOffers*/
          (_a2 = ctx2[1]) == null ? void 0 : _a2.length
        ) {
          if (if_block0) {
            if_block0.p(ctx2, dirty);
            if (dirty & /*brandOffers*/
            2) {
              transition_in(if_block0, 1);
            }
          } else {
            if_block0 = create_if_block_8$2(ctx2);
            if_block0.c();
            transition_in(if_block0, 1);
            if_block0.m(div1, t1);
          }
        } else if (if_block0) {
          group_outros();
          transition_out(if_block0, 1, 1, () => {
            if_block0 = null;
          });
          check_outros();
        }
        if (
          /*unavailableBrandOffers*/
          (_b2 = ctx2[2]) == null ? void 0 : _b2.length
        ) {
          if (if_block1) {
            if_block1.p(ctx2, dirty);
            if (dirty & /*unavailableBrandOffers*/
            4) {
              transition_in(if_block1, 1);
            }
          } else {
            if_block1 = create_if_block_7$2(ctx2);
            if_block1.c();
            transition_in(if_block1, 1);
            if_block1.m(div1, null);
          }
        } else if (if_block1) {
          group_outros();
          transition_out(if_block1, 1, 1, () => {
            if_block1 = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(discountinput.$$.fragment, local);
        transition_in(if_block0);
        transition_in(if_block1);
        current = true;
      },
      o(local) {
        transition_out(discountinput.$$.fragment, local);
        transition_out(if_block0);
        transition_out(if_block1);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div1);
        }
        destroy_component(discountinput);
        if (if_block0)
          if_block0.d();
        if (if_block1)
          if_block1.d();
      }
    };
  }
  function create_if_block$g(ctx) {
    var _a, _b;
    let div1;
    let div0;
    let button;
    let t1;
    let t2;
    let t3;
    let t4;
    let current;
    let mounted;
    let dispose;
    let if_block0 = (
      /*paymentOffers*/
      ((_a = ctx[3]) == null ? void 0 : _a.length) && create_if_block_6$2(ctx)
    );
    let if_block1 = (
      /*offerType*/
      ctx[0] === "payment" && create_if_block_5$3()
    );
    let if_block2 = (
      /*offerType*/
      ctx[0] === "brand" && create_if_block_2$6(ctx)
    );
    let if_block3 = (
      /*offerType*/
      ctx[0] === "payment" && /*paymentOffers*/
      ((_b = ctx[3]) == null ? void 0 : _b.length) && create_if_block_1$c(ctx)
    );
    return {
      c() {
        div1 = element("div");
        div0 = element("div");
        button = element("button");
        button.textContent = "Brand Offers";
        t1 = space();
        if (if_block0)
          if_block0.c();
        t2 = space();
        if (if_block1)
          if_block1.c();
        t3 = space();
        if (if_block2)
          if_block2.c();
        t4 = space();
        if (if_block3)
          if_block3.c();
        attr(button, "class", "svelte-13rebjd");
        toggle_class(
          button,
          "active",
          /*offerType*/
          ctx[0] === "brand"
        );
        attr(div0, "class", "offer-type-buttons svelte-13rebjd");
        attr(div1, "class", "offer-category svelte-13rebjd");
      },
      m(target, anchor) {
        insert(target, div1, anchor);
        append(div1, div0);
        append(div0, button);
        append(div0, t1);
        if (if_block0)
          if_block0.m(div0, null);
        append(div1, t2);
        if (if_block1)
          if_block1.m(div1, null);
        append(div1, t3);
        if (if_block2)
          if_block2.m(div1, null);
        append(div1, t4);
        if (if_block3)
          if_block3.m(div1, null);
        current = true;
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*click_handler*/
            ctx[5]
          );
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        var _a2, _b2;
        if (!current || dirty & /*offerType*/
        1) {
          toggle_class(
            button,
            "active",
            /*offerType*/
            ctx2[0] === "brand"
          );
        }
        if (
          /*paymentOffers*/
          (_a2 = ctx2[3]) == null ? void 0 : _a2.length
        ) {
          if (if_block0) {
            if_block0.p(ctx2, dirty);
          } else {
            if_block0 = create_if_block_6$2(ctx2);
            if_block0.c();
            if_block0.m(div0, null);
          }
        } else if (if_block0) {
          if_block0.d(1);
          if_block0 = null;
        }
        if (
          /*offerType*/
          ctx2[0] === "payment"
        ) {
          if (if_block1)
            ;
          else {
            if_block1 = create_if_block_5$3();
            if_block1.c();
            if_block1.m(div1, t3);
          }
        } else if (if_block1) {
          if_block1.d(1);
          if_block1 = null;
        }
        if (
          /*offerType*/
          ctx2[0] === "brand"
        ) {
          if (if_block2) {
            if_block2.p(ctx2, dirty);
            if (dirty & /*offerType*/
            1) {
              transition_in(if_block2, 1);
            }
          } else {
            if_block2 = create_if_block_2$6(ctx2);
            if_block2.c();
            transition_in(if_block2, 1);
            if_block2.m(div1, t4);
          }
        } else if (if_block2) {
          group_outros();
          transition_out(if_block2, 1, 1, () => {
            if_block2 = null;
          });
          check_outros();
        }
        if (
          /*offerType*/
          ctx2[0] === "payment" && /*paymentOffers*/
          ((_b2 = ctx2[3]) == null ? void 0 : _b2.length)
        ) {
          if (if_block3) {
            if_block3.p(ctx2, dirty);
            if (dirty & /*offerType, paymentOffers*/
            9) {
              transition_in(if_block3, 1);
            }
          } else {
            if_block3 = create_if_block_1$c(ctx2);
            if_block3.c();
            transition_in(if_block3, 1);
            if_block3.m(div1, null);
          }
        } else if (if_block3) {
          group_outros();
          transition_out(if_block3, 1, 1, () => {
            if_block3 = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block2);
        transition_in(if_block3);
        current = true;
      },
      o(local) {
        transition_out(if_block2);
        transition_out(if_block3);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div1);
        }
        if (if_block0)
          if_block0.d();
        if (if_block1)
          if_block1.d();
        if (if_block2)
          if_block2.d();
        if (if_block3)
          if_block3.d();
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block_8$2(ctx) {
    let h6;
    let t1;
    let div;
    let current;
    let each_value_4 = ensure_array_like(
      /*brandOffers*/
      ctx[1]
    );
    let each_blocks = [];
    for (let i = 0; i < each_value_4.length; i += 1) {
      each_blocks[i] = create_each_block_4(get_each_context_4(ctx, each_value_4, i));
    }
    const out = (i) => transition_out(each_blocks[i], 1, 1, () => {
      each_blocks[i] = null;
    });
    return {
      c() {
        h6 = element("h6");
        h6.textContent = "Available Offers";
        t1 = space();
        div = element("div");
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        attr(h6, "class", "available-offer-title svelte-13rebjd");
        attr(div, "class", "available svelte-13rebjd");
      },
      m(target, anchor) {
        insert(target, h6, anchor);
        insert(target, t1, anchor);
        insert(target, div, anchor);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(div, null);
          }
        }
        current = true;
      },
      p(ctx2, dirty) {
        if (dirty & /*brandOffers*/
        2) {
          each_value_4 = ensure_array_like(
            /*brandOffers*/
            ctx2[1]
          );
          let i;
          for (i = 0; i < each_value_4.length; i += 1) {
            const child_ctx = get_each_context_4(ctx2, each_value_4, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
              transition_in(each_blocks[i], 1);
            } else {
              each_blocks[i] = create_each_block_4(child_ctx);
              each_blocks[i].c();
              transition_in(each_blocks[i], 1);
              each_blocks[i].m(div, null);
            }
          }
          group_outros();
          for (i = each_value_4.length; i < each_blocks.length; i += 1) {
            out(i);
          }
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        for (let i = 0; i < each_value_4.length; i += 1) {
          transition_in(each_blocks[i]);
        }
        current = true;
      },
      o(local) {
        each_blocks = each_blocks.filter(Boolean);
        for (let i = 0; i < each_blocks.length; i += 1) {
          transition_out(each_blocks[i]);
        }
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(h6);
          detach(t1);
          detach(div);
        }
        destroy_each(each_blocks, detaching);
      }
    };
  }
  function create_each_block_4(ctx) {
    let offertile;
    let current;
    offertile = new OfferTile({ props: { offer: (
      /*offer*/
      ctx[9]
    ) } });
    return {
      c() {
        create_component(offertile.$$.fragment);
      },
      m(target, anchor) {
        mount_component(offertile, target, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        const offertile_changes = {};
        if (dirty & /*brandOffers*/
        2)
          offertile_changes.offer = /*offer*/
          ctx2[9];
        offertile.$set(offertile_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(offertile.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(offertile.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(offertile, detaching);
      }
    };
  }
  function create_if_block_7$2(ctx) {
    let h6;
    let t1;
    let div;
    let current;
    let each_value_3 = ensure_array_like(
      /*unavailableBrandOffers*/
      ctx[2]
    );
    let each_blocks = [];
    for (let i = 0; i < each_value_3.length; i += 1) {
      each_blocks[i] = create_each_block_3(get_each_context_3(ctx, each_value_3, i));
    }
    const out = (i) => transition_out(each_blocks[i], 1, 1, () => {
      each_blocks[i] = null;
    });
    return {
      c() {
        h6 = element("h6");
        h6.textContent = "Unavailable Offers";
        t1 = space();
        div = element("div");
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        attr(h6, "class", "available-offer-title svelte-13rebjd");
        attr(div, "class", "unavailable svelte-13rebjd");
      },
      m(target, anchor) {
        insert(target, h6, anchor);
        insert(target, t1, anchor);
        insert(target, div, anchor);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(div, null);
          }
        }
        current = true;
      },
      p(ctx2, dirty) {
        if (dirty & /*unavailableBrandOffers*/
        4) {
          each_value_3 = ensure_array_like(
            /*unavailableBrandOffers*/
            ctx2[2]
          );
          let i;
          for (i = 0; i < each_value_3.length; i += 1) {
            const child_ctx = get_each_context_3(ctx2, each_value_3, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
              transition_in(each_blocks[i], 1);
            } else {
              each_blocks[i] = create_each_block_3(child_ctx);
              each_blocks[i].c();
              transition_in(each_blocks[i], 1);
              each_blocks[i].m(div, null);
            }
          }
          group_outros();
          for (i = each_value_3.length; i < each_blocks.length; i += 1) {
            out(i);
          }
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        for (let i = 0; i < each_value_3.length; i += 1) {
          transition_in(each_blocks[i]);
        }
        current = true;
      },
      o(local) {
        each_blocks = each_blocks.filter(Boolean);
        for (let i = 0; i < each_blocks.length; i += 1) {
          transition_out(each_blocks[i]);
        }
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(h6);
          detach(t1);
          detach(div);
        }
        destroy_each(each_blocks, detaching);
      }
    };
  }
  function create_each_block_3(ctx) {
    let offertile;
    let current;
    offertile = new OfferTile({
      props: {
        offer: (
          /*offer*/
          ctx[9]
        ),
        isUnavailable: true
      }
    });
    return {
      c() {
        create_component(offertile.$$.fragment);
      },
      m(target, anchor) {
        mount_component(offertile, target, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        const offertile_changes = {};
        if (dirty & /*unavailableBrandOffers*/
        4)
          offertile_changes.offer = /*offer*/
          ctx2[9];
        offertile.$set(offertile_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(offertile.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(offertile.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(offertile, detaching);
      }
    };
  }
  function create_if_block_6$2(ctx) {
    let button;
    let mounted;
    let dispose;
    return {
      c() {
        button = element("button");
        button.textContent = "Payment Offers";
        attr(button, "class", "svelte-13rebjd");
        toggle_class(
          button,
          "active",
          /*offerType*/
          ctx[0] === "payment"
        );
      },
      m(target, anchor) {
        insert(target, button, anchor);
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*click_handler_1*/
            ctx[6]
          );
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        if (dirty & /*offerType*/
        1) {
          toggle_class(
            button,
            "active",
            /*offerType*/
            ctx2[0] === "payment"
          );
        }
      },
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block_5$3(ctx) {
    let div;
    return {
      c() {
        div = element("div");
        div.textContent = "Proceed to checkout to avail";
        attr(div, "class", "checkout-info-banner svelte-13rebjd");
      },
      m(target, anchor) {
        insert(target, div, anchor);
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
      }
    };
  }
  function create_if_block_2$6(ctx) {
    let div;
    let discountinput;
    let t0;
    let t1;
    let if_block1_anchor;
    let current;
    discountinput = new DiscountInput({});
    let if_block0 = (
      /*brandOffers*/
      ctx[1].length && create_if_block_4$3(ctx)
    );
    let if_block1 = (
      /*unavailableBrandOffers*/
      ctx[2].length && create_if_block_3$4(ctx)
    );
    return {
      c() {
        div = element("div");
        create_component(discountinput.$$.fragment);
        t0 = space();
        if (if_block0)
          if_block0.c();
        t1 = space();
        if (if_block1)
          if_block1.c();
        if_block1_anchor = empty();
        attr(div, "class", "discount-input svelte-13rebjd");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        mount_component(discountinput, div, null);
        insert(target, t0, anchor);
        if (if_block0)
          if_block0.m(target, anchor);
        insert(target, t1, anchor);
        if (if_block1)
          if_block1.m(target, anchor);
        insert(target, if_block1_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        if (
          /*brandOffers*/
          ctx2[1].length
        ) {
          if (if_block0) {
            if_block0.p(ctx2, dirty);
            if (dirty & /*brandOffers*/
            2) {
              transition_in(if_block0, 1);
            }
          } else {
            if_block0 = create_if_block_4$3(ctx2);
            if_block0.c();
            transition_in(if_block0, 1);
            if_block0.m(t1.parentNode, t1);
          }
        } else if (if_block0) {
          group_outros();
          transition_out(if_block0, 1, 1, () => {
            if_block0 = null;
          });
          check_outros();
        }
        if (
          /*unavailableBrandOffers*/
          ctx2[2].length
        ) {
          if (if_block1) {
            if_block1.p(ctx2, dirty);
            if (dirty & /*unavailableBrandOffers*/
            4) {
              transition_in(if_block1, 1);
            }
          } else {
            if_block1 = create_if_block_3$4(ctx2);
            if_block1.c();
            transition_in(if_block1, 1);
            if_block1.m(if_block1_anchor.parentNode, if_block1_anchor);
          }
        } else if (if_block1) {
          group_outros();
          transition_out(if_block1, 1, 1, () => {
            if_block1 = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(discountinput.$$.fragment, local);
        transition_in(if_block0);
        transition_in(if_block1);
        current = true;
      },
      o(local) {
        transition_out(discountinput.$$.fragment, local);
        transition_out(if_block0);
        transition_out(if_block1);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
          detach(t0);
          detach(t1);
          detach(if_block1_anchor);
        }
        destroy_component(discountinput);
        if (if_block0)
          if_block0.d(detaching);
        if (if_block1)
          if_block1.d(detaching);
      }
    };
  }
  function create_if_block_4$3(ctx) {
    let h6;
    let t1;
    let div;
    let current;
    let each_value_2 = ensure_array_like(
      /*brandOffers*/
      ctx[1]
    );
    let each_blocks = [];
    for (let i = 0; i < each_value_2.length; i += 1) {
      each_blocks[i] = create_each_block_2(get_each_context_2(ctx, each_value_2, i));
    }
    const out = (i) => transition_out(each_blocks[i], 1, 1, () => {
      each_blocks[i] = null;
    });
    return {
      c() {
        h6 = element("h6");
        h6.textContent = "Available Offers";
        t1 = space();
        div = element("div");
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        attr(h6, "class", "available-offer-title svelte-13rebjd");
        attr(div, "class", "available svelte-13rebjd");
      },
      m(target, anchor) {
        insert(target, h6, anchor);
        insert(target, t1, anchor);
        insert(target, div, anchor);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(div, null);
          }
        }
        current = true;
      },
      p(ctx2, dirty) {
        if (dirty & /*brandOffers*/
        2) {
          each_value_2 = ensure_array_like(
            /*brandOffers*/
            ctx2[1]
          );
          let i;
          for (i = 0; i < each_value_2.length; i += 1) {
            const child_ctx = get_each_context_2(ctx2, each_value_2, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
              transition_in(each_blocks[i], 1);
            } else {
              each_blocks[i] = create_each_block_2(child_ctx);
              each_blocks[i].c();
              transition_in(each_blocks[i], 1);
              each_blocks[i].m(div, null);
            }
          }
          group_outros();
          for (i = each_value_2.length; i < each_blocks.length; i += 1) {
            out(i);
          }
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        for (let i = 0; i < each_value_2.length; i += 1) {
          transition_in(each_blocks[i]);
        }
        current = true;
      },
      o(local) {
        each_blocks = each_blocks.filter(Boolean);
        for (let i = 0; i < each_blocks.length; i += 1) {
          transition_out(each_blocks[i]);
        }
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(h6);
          detach(t1);
          detach(div);
        }
        destroy_each(each_blocks, detaching);
      }
    };
  }
  function create_each_block_2(ctx) {
    let offertile;
    let current;
    offertile = new OfferTile({ props: { offer: (
      /*offer*/
      ctx[9]
    ) } });
    return {
      c() {
        create_component(offertile.$$.fragment);
      },
      m(target, anchor) {
        mount_component(offertile, target, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        const offertile_changes = {};
        if (dirty & /*brandOffers*/
        2)
          offertile_changes.offer = /*offer*/
          ctx2[9];
        offertile.$set(offertile_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(offertile.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(offertile.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(offertile, detaching);
      }
    };
  }
  function create_if_block_3$4(ctx) {
    let h6;
    let t1;
    let div;
    let current;
    let each_value_1 = ensure_array_like(
      /*unavailableBrandOffers*/
      ctx[2]
    );
    let each_blocks = [];
    for (let i = 0; i < each_value_1.length; i += 1) {
      each_blocks[i] = create_each_block_1$1(get_each_context_1$1(ctx, each_value_1, i));
    }
    const out = (i) => transition_out(each_blocks[i], 1, 1, () => {
      each_blocks[i] = null;
    });
    return {
      c() {
        h6 = element("h6");
        h6.textContent = "Unavailable Offers";
        t1 = space();
        div = element("div");
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        attr(h6, "class", "available-offer-title svelte-13rebjd");
        attr(div, "class", "unavailable svelte-13rebjd");
      },
      m(target, anchor) {
        insert(target, h6, anchor);
        insert(target, t1, anchor);
        insert(target, div, anchor);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(div, null);
          }
        }
        current = true;
      },
      p(ctx2, dirty) {
        if (dirty & /*unavailableBrandOffers*/
        4) {
          each_value_1 = ensure_array_like(
            /*unavailableBrandOffers*/
            ctx2[2]
          );
          let i;
          for (i = 0; i < each_value_1.length; i += 1) {
            const child_ctx = get_each_context_1$1(ctx2, each_value_1, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
              transition_in(each_blocks[i], 1);
            } else {
              each_blocks[i] = create_each_block_1$1(child_ctx);
              each_blocks[i].c();
              transition_in(each_blocks[i], 1);
              each_blocks[i].m(div, null);
            }
          }
          group_outros();
          for (i = each_value_1.length; i < each_blocks.length; i += 1) {
            out(i);
          }
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        for (let i = 0; i < each_value_1.length; i += 1) {
          transition_in(each_blocks[i]);
        }
        current = true;
      },
      o(local) {
        each_blocks = each_blocks.filter(Boolean);
        for (let i = 0; i < each_blocks.length; i += 1) {
          transition_out(each_blocks[i]);
        }
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(h6);
          detach(t1);
          detach(div);
        }
        destroy_each(each_blocks, detaching);
      }
    };
  }
  function create_each_block_1$1(ctx) {
    let offertile;
    let current;
    offertile = new OfferTile({
      props: {
        offer: (
          /*offer*/
          ctx[9]
        ),
        isUnavailable: true
      }
    });
    return {
      c() {
        create_component(offertile.$$.fragment);
      },
      m(target, anchor) {
        mount_component(offertile, target, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        const offertile_changes = {};
        if (dirty & /*unavailableBrandOffers*/
        4)
          offertile_changes.offer = /*offer*/
          ctx2[9];
        offertile.$set(offertile_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(offertile.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(offertile.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(offertile, detaching);
      }
    };
  }
  function create_if_block_1$c(ctx) {
    let div;
    let current;
    let each_value = ensure_array_like(
      /*paymentOffers*/
      ctx[3]
    );
    let each_blocks = [];
    for (let i = 0; i < each_value.length; i += 1) {
      each_blocks[i] = create_each_block$5(get_each_context$5(ctx, each_value, i));
    }
    const out = (i) => transition_out(each_blocks[i], 1, 1, () => {
      each_blocks[i] = null;
    });
    return {
      c() {
        div = element("div");
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        attr(div, "class", "available svelte-13rebjd");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(div, null);
          }
        }
        current = true;
      },
      p(ctx2, dirty) {
        if (dirty & /*paymentOffers*/
        8) {
          each_value = ensure_array_like(
            /*paymentOffers*/
            ctx2[3]
          );
          let i;
          for (i = 0; i < each_value.length; i += 1) {
            const child_ctx = get_each_context$5(ctx2, each_value, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
              transition_in(each_blocks[i], 1);
            } else {
              each_blocks[i] = create_each_block$5(child_ctx);
              each_blocks[i].c();
              transition_in(each_blocks[i], 1);
              each_blocks[i].m(div, null);
            }
          }
          group_outros();
          for (i = each_value.length; i < each_blocks.length; i += 1) {
            out(i);
          }
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        for (let i = 0; i < each_value.length; i += 1) {
          transition_in(each_blocks[i]);
        }
        current = true;
      },
      o(local) {
        each_blocks = each_blocks.filter(Boolean);
        for (let i = 0; i < each_blocks.length; i += 1) {
          transition_out(each_blocks[i]);
        }
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_each(each_blocks, detaching);
      }
    };
  }
  function create_each_block$5(ctx) {
    let paymentoffertitle;
    let current;
    paymentoffertitle = new PaymentOfferTitle({ props: { offer: (
      /*offer*/
      ctx[9]
    ) } });
    return {
      c() {
        create_component(paymentoffertitle.$$.fragment);
      },
      m(target, anchor) {
        mount_component(paymentoffertitle, target, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        const paymentoffertitle_changes = {};
        if (dirty & /*paymentOffers*/
        8)
          paymentoffertitle_changes.offer = /*offer*/
          ctx2[9];
        paymentoffertitle.$set(paymentoffertitle_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(paymentoffertitle.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(paymentoffertitle.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(paymentoffertitle, detaching);
      }
    };
  }
  function create_fragment$k(ctx) {
    let current_block_type_index;
    let if_block;
    let if_block_anchor;
    let current;
    const if_block_creators = [create_if_block$g, create_else_block$8];
    const if_blocks = [];
    function select_block_type(ctx2, dirty) {
      if (
        /*$store_offers*/
        ctx2[4].hasPaymentOffer
      )
        return 0;
      return 1;
    }
    current_block_type_index = select_block_type(ctx);
    if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
    return {
      c() {
        if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if_blocks[current_block_type_index].m(target, anchor);
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, [dirty]) {
        let previous_block_index = current_block_type_index;
        current_block_type_index = select_block_type(ctx2);
        if (current_block_type_index === previous_block_index) {
          if_blocks[current_block_type_index].p(ctx2, dirty);
        } else {
          group_outros();
          transition_out(if_blocks[previous_block_index], 1, 1, () => {
            if_blocks[previous_block_index] = null;
          });
          check_outros();
          if_block = if_blocks[current_block_type_index];
          if (!if_block) {
            if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
            if_block.c();
          } else {
            if_block.p(ctx2, dirty);
          }
          transition_in(if_block, 1);
          if_block.m(if_block_anchor.parentNode, if_block_anchor);
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if_blocks[current_block_type_index].d(detaching);
      }
    };
  }
  function instance$k($$self, $$props, $$invalidate) {
    let $store_offers;
    component_subscribe($$self, store_offers, ($$value) => $$invalidate(4, $store_offers = $$value));
    let offers = { available: [], unavailable: [] };
    let unsubOffer;
    let offerType = "brand";
    let brandOffers = [];
    let unavailableBrandOffers = [];
    let paymentOffers = [];
    onMount(() => {
      unsubOffer = store_offers.subscribe((res) => {
        var _a, _b, _c;
        offers = res || { available: [], unavailable: [] };
        $$invalidate(1, brandOffers = ((_a = offers.available) == null ? void 0 : _a.filter((offer) => offer.offerType !== "payment_offer")) || []);
        $$invalidate(2, unavailableBrandOffers = ((_b = offers.unavailable) == null ? void 0 : _b.filter((offer) => offer.offerType !== "payment_offer")) || []);
        $$invalidate(3, paymentOffers = ((_c = offers.available) == null ? void 0 : _c.filter((offer) => offer.offerType === "payment_offer" && (offer == null ? void 0 : offer.viewInListing))) || []);
      });
    });
    onDestroy(() => {
      unsubOffer == null ? void 0 : unsubOffer();
    });
    const click_handler2 = () => $$invalidate(0, offerType = "brand");
    const click_handler_1 = () => $$invalidate(0, offerType = "payment");
    return [
      offerType,
      brandOffers,
      unavailableBrandOffers,
      paymentOffers,
      $store_offers,
      click_handler2,
      click_handler_1
    ];
  }
  class OfferCategory extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$k, create_fragment$k, safe_not_equal, {}, add_css$i);
    }
  }
  function create_fragment$j(ctx) {
    let offercategory;
    let current;
    offercategory = new OfferCategory({});
    return {
      c() {
        create_component(offercategory.$$.fragment);
      },
      m(target, anchor) {
        mount_component(offercategory, target, anchor);
        current = true;
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(offercategory.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(offercategory.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(offercategory, detaching);
      }
    };
  }
  function instance$j($$self) {
    let unsubOffer;
    onMount(() => {
      unsubOffer = store_offers.subscribe(() => {
      });
    });
    onDestroy(() => {
      unsubOffer && unsubOffer();
    });
    return [];
  }
  class OfferList extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$j, create_fragment$j, safe_not_equal, {});
    }
  }
  function add_css$h(target) {
    append_styles(target, "svelte-1j6i4m1", ".offer-popup.svelte-1j6i4m1{width:100%;height:100%;padding:0px 20px 20px 20px}");
  }
  function create_if_block$f(ctx) {
    let div;
    return {
      c() {
        div = element("div");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        div.innerHTML = /*filteredAdditionalScripts*/
        ctx[0];
      },
      p(ctx2, dirty) {
        if (dirty & /*filteredAdditionalScripts*/
        1)
          div.innerHTML = /*filteredAdditionalScripts*/
          ctx2[0];
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
      }
    };
  }
  function create_fragment$i(ctx) {
    let div;
    let offerlist;
    let t;
    let current;
    offerlist = new OfferList({});
    let if_block = (
      /*filteredAdditionalScripts*/
      ctx[0] && create_if_block$f(ctx)
    );
    return {
      c() {
        div = element("div");
        create_component(offerlist.$$.fragment);
        t = space();
        if (if_block)
          if_block.c();
        attr(div, "class", "offer-popup svelte-1j6i4m1");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        mount_component(offerlist, div, null);
        append(div, t);
        if (if_block)
          if_block.m(div, null);
        current = true;
      },
      p(ctx2, [dirty]) {
        if (
          /*filteredAdditionalScripts*/
          ctx2[0]
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block$f(ctx2);
            if_block.c();
            if_block.m(div, null);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(offerlist.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(offerlist.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(offerlist);
        if (if_block)
          if_block.d();
      }
    };
  }
  function instance$i($$self, $$props, $$invalidate) {
    let filteredAdditionalScripts = "";
    store_configurations.subscribe((res) => {
      var _a;
      const additionalScripts = ((_a = res == null ? void 0 : res.appearance) == null ? void 0 : _a.additionalScripts) || "";
      $$invalidate(0, filteredAdditionalScripts = extractStyleTags(additionalScripts));
    });
    return [filteredAdditionalScripts];
  }
  class OfferPopup extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$i, create_fragment$i, safe_not_equal, {}, add_css$h);
    }
  }
  function add_css$g(target) {
    append_styles(target, "svelte-1pf7pxk", ".featured-offer.svelte-1pf7pxk.svelte-1pf7pxk{display:flex;background:var(--Gray-Neutral-100, #f3f4f6);border-radius:10px;padding:5px 10px;height:35px;align-items:center;position:relative;justify-content:space-between}.featured-offer.svelte-1pf7pxk .offer-icon.svelte-1pf7pxk{height:16px;position:absolute;line-height:0px}.featured-offer.svelte-1pf7pxk .offer-icon img.svelte-1pf7pxk{height:16px;width:16px}.featured-offer.svelte-1pf7pxk .offer-details.svelte-1pf7pxk{display:flex;font-weight:600;align-items:center;position:relative}.featured-offer.svelte-1pf7pxk .offer-details .offer-title.svelte-1pf7pxk{margin-right:10px;text-transform:uppercase;display:flex;align-items:center;margin-left:20px}.featured-offer.svelte-1pf7pxk .offer-details .offer-title p.svelte-1pf7pxk{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:120px;margin-right:5px;font-size:14px;margin-bottom:0px;line-height:14px}.featured-offer.svelte-1pf7pxk .offer-details .offer-title .applied-text.svelte-1pf7pxk{text-transform:lowercase;font-size:12px;font-weight:500}.featured-offer.svelte-1pf7pxk .offer-details .amount-saved.svelte-1pf7pxk{font-size:10px;background:rgba(6, 135, 67, 0.1);color:rgb(6, 135, 67);padding:4px 8px;border-radius:5px;line-height:normal}.featured-offer.svelte-1pf7pxk .apply-btn.svelte-1pf7pxk{position:absolute;right:10px;line-height:12px;top:10px}.featured-offer.svelte-1pf7pxk .apply-btn button.svelte-1pf7pxk{outline:none;border:none;background:none;font-weight:600;color:rgb(6, 135, 67);font-size:12px;padding:0px;cursor:pointer;white-space:nowrap}.featured-offer.svelte-1pf7pxk .apply-btn button img.svelte-1pf7pxk{width:16px;height:16px}.featured-offer.svelte-1pf7pxk .remove-btn.svelte-1pf7pxk{height:16px;width:16px;right:10px;top:10px}@media(max-width: 400px){.featured-offer.svelte-1pf7pxk .offer-icon.svelte-1pf7pxk{line-height:normal}}");
  }
  function create_if_block_5$2(ctx) {
    let span;
    return {
      c() {
        span = element("span");
        span.textContent = "applied";
        attr(span, "class", "applied-text svelte-1pf7pxk");
      },
      m(target, anchor) {
        insert(target, span, anchor);
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
      }
    };
  }
  function create_if_block_3$3(ctx) {
    let span;
    function select_block_type(ctx2, dirty) {
      if (
        /*isApplied*/
        ctx2[1]
      )
        return create_if_block_4$2;
      return create_else_block_1;
    }
    let current_block_type = select_block_type(ctx);
    let if_block = current_block_type(ctx);
    return {
      c() {
        span = element("span");
        if_block.c();
        attr(span, "class", "amount-saved svelte-1pf7pxk");
      },
      m(target, anchor) {
        insert(target, span, anchor);
        if_block.m(span, null);
      },
      p(ctx2, dirty) {
        if (current_block_type === (current_block_type = select_block_type(ctx2)) && if_block) {
          if_block.p(ctx2, dirty);
        } else {
          if_block.d(1);
          if_block = current_block_type(ctx2);
          if (if_block) {
            if_block.c();
            if_block.m(span, null);
          }
        }
      },
      d(detaching) {
        if (detaching) {
          detach(span);
        }
        if_block.d();
      }
    };
  }
  function create_else_block_1(ctx) {
    let t0;
    let t1_value = formatCurrencyDisplay(
      /*offer*/
      ctx[0].amountSaved || /*isApplied*/
      ctx[1] && /*offer*/
      ctx[0].discount.toFixed(2)
    ) + "";
    let t1;
    return {
      c() {
        t0 = text("You save ");
        t1 = text(t1_value);
      },
      m(target, anchor) {
        insert(target, t0, anchor);
        insert(target, t1, anchor);
      },
      p(ctx2, dirty) {
        if (dirty & /*offer, isApplied*/
        3 && t1_value !== (t1_value = formatCurrencyDisplay(
          /*offer*/
          ctx2[0].amountSaved || /*isApplied*/
          ctx2[1] && /*offer*/
          ctx2[0].discount.toFixed(2)
        ) + ""))
          set_data(t1, t1_value);
      },
      d(detaching) {
        if (detaching) {
          detach(t0);
          detach(t1);
        }
      }
    };
  }
  function create_if_block_4$2(ctx) {
    var _a;
    let t0;
    let t1_value = formatCurrencyDisplay(
      /*offer*/
      ctx[0].amountSaved || /*isApplied*/
      ctx[1] && /*offer*/
      (ctx[0].discount + /*offer*/
      (((_a = ctx[0]) == null ? void 0 : _a.gwpDiscount) || 0)).toFixed(2)
    ) + "";
    let t1;
    return {
      c() {
        t0 = text("Saved ");
        t1 = text(t1_value);
      },
      m(target, anchor) {
        insert(target, t0, anchor);
        insert(target, t1, anchor);
      },
      p(ctx2, dirty) {
        var _a2;
        if (dirty & /*offer, isApplied*/
        3 && t1_value !== (t1_value = formatCurrencyDisplay(
          /*offer*/
          ctx2[0].amountSaved || /*isApplied*/
          ctx2[1] && /*offer*/
          (ctx2[0].discount + /*offer*/
          (((_a2 = ctx2[0]) == null ? void 0 : _a2.gwpDiscount) || 0)).toFixed(2)
        ) + ""))
          set_data(t1, t1_value);
      },
      d(detaching) {
        if (detaching) {
          detach(t0);
          detach(t1);
        }
      }
    };
  }
  function create_if_block_2$5(ctx) {
    let div;
    let button;
    let mounted;
    let dispose;
    return {
      c() {
        div = element("div");
        button = element("button");
        button.innerHTML = `<img src="${close_btn}" class="svelte-1pf7pxk"/>`;
        attr(button, "class", "svelte-1pf7pxk");
        attr(div, "class", "apply-btn remove-btn svelte-1pf7pxk");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, button);
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*click_handler_2*/
            ctx[6]
          );
          mounted = true;
        }
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block$e(ctx) {
    let if_block_anchor;
    function select_block_type_2(ctx2, dirty) {
      if (
        /*isApplied*/
        ctx2[1]
      )
        return create_if_block_1$b;
      return create_else_block$7;
    }
    let current_block_type = select_block_type_2(ctx);
    let if_block = current_block_type(ctx);
    return {
      c() {
        if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
      },
      p(ctx2, dirty) {
        if (current_block_type === (current_block_type = select_block_type_2(ctx2)) && if_block) {
          if_block.p(ctx2, dirty);
        } else {
          if_block.d(1);
          if_block = current_block_type(ctx2);
          if (if_block) {
            if_block.c();
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        }
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if_block.d(detaching);
      }
    };
  }
  function create_else_block$7(ctx) {
    let div;
    let button;
    let mounted;
    let dispose;
    return {
      c() {
        div = element("div");
        button = element("button");
        button.textContent = "Apply";
        attr(button, "class", "svelte-1pf7pxk");
        attr(div, "class", "apply-btn svelte-1pf7pxk");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, button);
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*click_handler_1*/
            ctx[5]
          );
          mounted = true;
        }
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block_1$b(ctx) {
    let div;
    let button;
    let mounted;
    let dispose;
    return {
      c() {
        div = element("div");
        button = element("button");
        button.innerHTML = `<img src="${close_btn}" class="svelte-1pf7pxk"/>`;
        attr(button, "class", "svelte-1pf7pxk");
        attr(div, "class", "apply-btn remove-btn svelte-1pf7pxk");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, button);
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*click_handler*/
            ctx[4]
          );
          mounted = true;
        }
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_fragment$h(ctx) {
    var _a;
    let div3;
    let div2;
    let div0;
    let icon;
    let t0;
    let div1;
    let p;
    let t1_value = (
      /*offer*/
      ctx[0].discountCode + ""
    );
    let t1;
    let t2;
    let t3;
    let t4;
    let div3_class_value;
    let current;
    icon = new Icon({
      props: {
        color: "#15b79e",
        height: "16px",
        icon: "iconamoon:discount-fill"
      }
    });
    let if_block0 = (
      /*isAutomatic*/
      (ctx[2] || /*isApplied*/
      ctx[1]) && create_if_block_5$2()
    );
    let if_block1 = (
      /*offer*/
      (ctx[0].amountSaved || /*isApplied*/
      ctx[1] && /*offer*/
      (ctx[0].discount || /*offer*/
      ((_a = ctx[0]) == null ? void 0 : _a.gwpDiscount))) && create_if_block_3$3(ctx)
    );
    function select_block_type_1(ctx2, dirty) {
      if (!/*isAutomatic*/
      ctx2[2])
        return create_if_block$e;
      if (
        /*isAutomatic*/
        ctx2[2] && /*offer*/
        ctx2[0].manual
      )
        return create_if_block_2$5;
    }
    let current_block_type = select_block_type_1(ctx);
    let if_block2 = current_block_type && current_block_type(ctx);
    return {
      c() {
        div3 = element("div");
        div2 = element("div");
        div0 = element("div");
        create_component(icon.$$.fragment);
        t0 = space();
        div1 = element("div");
        p = element("p");
        t1 = text(t1_value);
        t2 = space();
        if (if_block0)
          if_block0.c();
        t3 = space();
        if (if_block1)
          if_block1.c();
        t4 = space();
        if (if_block2)
          if_block2.c();
        attr(div0, "class", "offer-icon svelte-1pf7pxk");
        attr(p, "class", "svelte-1pf7pxk");
        attr(div1, "class", "offer-title svelte-1pf7pxk");
        attr(div2, "class", "offer-details svelte-1pf7pxk");
        attr(div3, "class", div3_class_value = "featured-offer " + /*isApplied*/
        (ctx[1] && "is-applied") + " svelte-1pf7pxk");
      },
      m(target, anchor) {
        insert(target, div3, anchor);
        append(div3, div2);
        append(div2, div0);
        mount_component(icon, div0, null);
        append(div2, t0);
        append(div2, div1);
        append(div1, p);
        append(p, t1);
        append(div1, t2);
        if (if_block0)
          if_block0.m(div1, null);
        append(div2, t3);
        if (if_block1)
          if_block1.m(div2, null);
        append(div3, t4);
        if (if_block2)
          if_block2.m(div3, null);
        current = true;
      },
      p(ctx2, [dirty]) {
        var _a2;
        if ((!current || dirty & /*offer*/
        1) && t1_value !== (t1_value = /*offer*/
        ctx2[0].discountCode + ""))
          set_data(t1, t1_value);
        if (
          /*isAutomatic*/
          ctx2[2] || /*isApplied*/
          ctx2[1]
        ) {
          if (if_block0)
            ;
          else {
            if_block0 = create_if_block_5$2();
            if_block0.c();
            if_block0.m(div1, null);
          }
        } else if (if_block0) {
          if_block0.d(1);
          if_block0 = null;
        }
        if (
          /*offer*/
          ctx2[0].amountSaved || /*isApplied*/
          ctx2[1] && /*offer*/
          (ctx2[0].discount || /*offer*/
          ((_a2 = ctx2[0]) == null ? void 0 : _a2.gwpDiscount))
        ) {
          if (if_block1) {
            if_block1.p(ctx2, dirty);
          } else {
            if_block1 = create_if_block_3$3(ctx2);
            if_block1.c();
            if_block1.m(div2, null);
          }
        } else if (if_block1) {
          if_block1.d(1);
          if_block1 = null;
        }
        if (current_block_type === (current_block_type = select_block_type_1(ctx2)) && if_block2) {
          if_block2.p(ctx2, dirty);
        } else {
          if (if_block2)
            if_block2.d(1);
          if_block2 = current_block_type && current_block_type(ctx2);
          if (if_block2) {
            if_block2.c();
            if_block2.m(div3, null);
          }
        }
        if (!current || dirty & /*isApplied*/
        2 && div3_class_value !== (div3_class_value = "featured-offer " + /*isApplied*/
        (ctx2[1] && "is-applied") + " svelte-1pf7pxk")) {
          attr(div3, "class", div3_class_value);
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div3);
        }
        destroy_component(icon);
        if (if_block0)
          if_block0.d();
        if (if_block1)
          if_block1.d();
        if (if_block2) {
          if_block2.d();
        }
      }
    };
  }
  function instance$h($$self, $$props, $$invalidate) {
    let $store_showConfetti;
    component_subscribe($$self, store_showConfetti, ($$value) => $$invalidate(7, $store_showConfetti = $$value));
    let { offer } = $$props;
    let { isApplied = false } = $$props;
    let { isAutomatic = false } = $$props;
    const onApplyDiscount = async (code, mode) => {
      var _a;
      const res = await applyDiscount(code, mode);
      if (((_a = res.data) == null ? void 0 : _a.isValid) && !$store_showConfetti) {
        store_showConfetti.set(true);
      }
    };
    const click_handler2 = (e) => removeDiscount(offer.title || offer.discountCode, "outside");
    const click_handler_1 = (e) => onApplyDiscount(offer.discountCode, "outside");
    const click_handler_2 = (e) => removeDiscount(offer.title, "outside", true);
    $$self.$$set = ($$props2) => {
      if ("offer" in $$props2)
        $$invalidate(0, offer = $$props2.offer);
      if ("isApplied" in $$props2)
        $$invalidate(1, isApplied = $$props2.isApplied);
      if ("isAutomatic" in $$props2)
        $$invalidate(2, isAutomatic = $$props2.isAutomatic);
    };
    return [
      offer,
      isApplied,
      isAutomatic,
      onApplyDiscount,
      click_handler2,
      click_handler_1,
      click_handler_2
    ];
  }
  class FeaturedOfferTile extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$h, create_fragment$h, safe_not_equal, { offer: 0, isApplied: 1, isAutomatic: 2 }, add_css$g);
    }
  }
  function add_css$f(target) {
    append_styles(target, "svelte-1uev9t0", ".offer-box.svelte-1uev9t0.svelte-1uev9t0{margin:0px 10px 10px 10px;border-radius:12px;background:#fff;border:1px solid var(--Gray-Neutral-200, #e5e7eb);padding:10px;display:flex;position:relative;justify-content:center;flex-direction:column}.offer-box.svelte-1uev9t0 .better-offer.svelte-1uev9t0{background-color:#00c7b6;color:white;text-align:left;padding:9px 10px;border-radius:10px;margin-bottom:10px;font-size:14px;display:flex;justify-content:space-between;cursor:pointer}.offer-box.svelte-1uev9t0 .better-offer span.svelte-1uev9t0{border:none;outline:none;cursor:pointer;color:white;background:transparent}.offer-box.svelte-1uev9t0 .featured-offer-wrapper.svelte-1uev9t0{margin-bottom:10px}.offer-box.svelte-1uev9t0 .featured-offer-wrapper.svelte-1uev9t0:last-child{margin-bottom:0px}.offer-box.svelte-1uev9t0 .view-coupon-list.svelte-1uev9t0{all:unset;display:flex;justify-content:space-between;align-items:center;padding-top:10px;margin-top:10px;cursor:pointer;font-size:12px;width:100%}.offer-box.svelte-1uev9t0 .view-coupon-text.svelte-1uev9t0{display:flex;align-items:center}.offer-box.svelte-1uev9t0 span.svelte-1uev9t0{color:var(--gokwik-primary-color);font-weight:600}.offer-box.svelte-1uev9t0 span.svelte-1uev9t0:first-child{margin-right:5px}.offer-box.svelte-1uev9t0 .border-dashed-top.svelte-1uev9t0{border-top:1px dashed #929ca8}.mb-15.svelte-1uev9t0.svelte-1uev9t0{margin-bottom:15px}.view-offers-button.svelte-1uev9t0.svelte-1uev9t0{cursor:pointer;display:flex;align-items:center;justify-content:center;width:100%;padding:10px 0 0 0;font-size:14px;font-weight:600;color:#004b8d;background-color:#ffffff;margin:0}.view-offers-button.svelte-1uev9t0 .offers-text.svelte-1uev9t0{color:#004b8d}");
  }
  function get_each_context$4(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[21] = list[i];
    return child_ctx;
  }
  function get_each_context_1(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[24] = list[i];
    return child_ctx;
  }
  function create_if_block_10(ctx) {
    let each_1_anchor;
    let current;
    let each_value_1 = ensure_array_like(
      /*$store_appliedAutomaticDiscounts*/
      ctx[6]
    );
    let each_blocks = [];
    for (let i = 0; i < each_value_1.length; i += 1) {
      each_blocks[i] = create_each_block_1(get_each_context_1(ctx, each_value_1, i));
    }
    const out = (i) => transition_out(each_blocks[i], 1, 1, () => {
      each_blocks[i] = null;
    });
    return {
      c() {
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        each_1_anchor = empty();
      },
      m(target, anchor) {
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(target, anchor);
          }
        }
        insert(target, each_1_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        if (dirty & /*$store_appliedAutomaticDiscounts*/
        64) {
          each_value_1 = ensure_array_like(
            /*$store_appliedAutomaticDiscounts*/
            ctx2[6]
          );
          let i;
          for (i = 0; i < each_value_1.length; i += 1) {
            const child_ctx = get_each_context_1(ctx2, each_value_1, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
              transition_in(each_blocks[i], 1);
            } else {
              each_blocks[i] = create_each_block_1(child_ctx);
              each_blocks[i].c();
              transition_in(each_blocks[i], 1);
              each_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);
            }
          }
          group_outros();
          for (i = each_value_1.length; i < each_blocks.length; i += 1) {
            out(i);
          }
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        for (let i = 0; i < each_value_1.length; i += 1) {
          transition_in(each_blocks[i]);
        }
        current = true;
      },
      o(local) {
        each_blocks = each_blocks.filter(Boolean);
        for (let i = 0; i < each_blocks.length; i += 1) {
          transition_out(each_blocks[i]);
        }
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(each_1_anchor);
        }
        destroy_each(each_blocks, detaching);
      }
    };
  }
  function create_each_block_1(ctx) {
    var _a, _b, _c;
    let div;
    let featuredoffertile;
    let t;
    let div_class_value;
    let current;
    featuredoffertile = new FeaturedOfferTile({
      props: {
        offer: {
          discountCode: (
            /*automaticDiscount*/
            (_a = ctx[24]) == null ? void 0 : _a.title
          ),
          discount: (
            /*automaticDiscount*/
            (_b = ctx[24]) == null ? void 0 : _b.amount
          ),
          manual: (
            /*automaticDiscount*/
            (_c = ctx[24]) == null ? void 0 : _c.manual
          )
        },
        isApplied: true,
        isAutomatic: true
      }
    });
    return {
      c() {
        var _a2;
        div = element("div");
        create_component(featuredoffertile.$$.fragment);
        t = space();
        attr(div, "class", div_class_value = "featured-offer-wrapper " + (!/*automaticDiscount*/
        ((_a2 = ctx[24]) == null ? void 0 : _a2.manual) ? "auto-applied-discount-card" : "") + " svelte-1uev9t0");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        mount_component(featuredoffertile, div, null);
        append(div, t);
        current = true;
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c2, _d;
        const featuredoffertile_changes = {};
        if (dirty & /*$store_appliedAutomaticDiscounts*/
        64)
          featuredoffertile_changes.offer = {
            discountCode: (
              /*automaticDiscount*/
              (_a2 = ctx2[24]) == null ? void 0 : _a2.title
            ),
            discount: (
              /*automaticDiscount*/
              (_b2 = ctx2[24]) == null ? void 0 : _b2.amount
            ),
            manual: (
              /*automaticDiscount*/
              (_c2 = ctx2[24]) == null ? void 0 : _c2.manual
            )
          };
        featuredoffertile.$set(featuredoffertile_changes);
        if (!current || dirty & /*$store_appliedAutomaticDiscounts*/
        64 && div_class_value !== (div_class_value = "featured-offer-wrapper " + (!/*automaticDiscount*/
        ((_d = ctx2[24]) == null ? void 0 : _d.manual) ? "auto-applied-discount-card" : "") + " svelte-1uev9t0")) {
          attr(div, "class", div_class_value);
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(featuredoffertile.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(featuredoffertile.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(featuredoffertile);
      }
    };
  }
  function create_if_block_9(ctx) {
    var _a, _b;
    let div;
    let p;
    let t0;
    let b0;
    let t1_value = `${/*betterOffer*/
    (ctx[3].amountSaved - /*$store_appliedManualDiscount*/
    ctx[10].discount).toFixed(2)}`;
    let t1;
    let t2;
    let b1;
    let t3_value = `"${/*betterOffer*/
    (_b = (_a = ctx[3]) == null ? void 0 : _a.discountCode) == null ? void 0 : _b.toUpperCase()}"`;
    let t3;
    let t4;
    let span;
    let mounted;
    let dispose;
    return {
      c() {
        div = element("div");
        p = element("p");
        t0 = text(" Save ");
        b0 = element("b");
        t1 = text(t1_value);
        t2 = text("\n        more with ");
        b1 = element("b");
        t3 = text(t3_value);
        t4 = space();
        span = element("span");
        span.innerHTML = `<b>Apply</b>`;
        attr(span, "class", "svelte-1uev9t0");
        attr(div, "class", "better-offer svelte-1uev9t0");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, p);
        append(p, t0);
        append(p, b0);
        append(b0, t1);
        append(p, t2);
        append(p, b1);
        append(b1, t3);
        append(div, t4);
        append(div, span);
        if (!mounted) {
          dispose = listen(
            div,
            "click",
            /*click_handler*/
            ctx[14]
          );
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        var _a2, _b2;
        if (dirty & /*betterOffer, $store_appliedManualDiscount*/
        1032 && t1_value !== (t1_value = `${/*betterOffer*/
        (ctx2[3].amountSaved - /*$store_appliedManualDiscount*/
        ctx2[10].discount).toFixed(2)}`))
          set_data(t1, t1_value);
        if (dirty & /*betterOffer*/
        8 && t3_value !== (t3_value = `"${/*betterOffer*/
        (_b2 = (_a2 = ctx2[3]) == null ? void 0 : _a2.discountCode) == null ? void 0 : _b2.toUpperCase()}"`))
          set_data(t3, t3_value);
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block$d(ctx) {
    var _a, _b, _c, _d, _e, _f;
    let current_block_type_index;
    let if_block0;
    let t;
    let show_if = (
      /*$store_offers*/
      (((_b = (_a = ctx[12]) == null ? void 0 : _a.available) == null ? void 0 : _b.length) || /*$store_offers*/
      ((_d = (_c = ctx[12]) == null ? void 0 : _c.unavailable) == null ? void 0 : _d.length) || "production" === TextConstants.environment_constants.dashboard) && /*configurations*/
      ((_f = (_e = ctx[2]) == null ? void 0 : _e.discountDisplayConfig) == null ? void 0 : _f.showOfferList) && /*totalPayable*/
      ctx[5] > 0 && !isNaN(
        /*totalPayable*/
        ctx[5]
      )
    );
    let if_block1_anchor;
    let current;
    const if_block_creators = [create_if_block_4$1, create_else_block$6];
    const if_blocks = [];
    function select_block_type(ctx2, dirty) {
      if (!/*$store_appliedManualDiscount*/
      ctx2[10])
        return 0;
      return 1;
    }
    current_block_type_index = select_block_type(ctx);
    if_block0 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
    let if_block1 = show_if && create_if_block_1$a(ctx);
    return {
      c() {
        if_block0.c();
        t = space();
        if (if_block1)
          if_block1.c();
        if_block1_anchor = empty();
      },
      m(target, anchor) {
        if_blocks[current_block_type_index].m(target, anchor);
        insert(target, t, anchor);
        if (if_block1)
          if_block1.m(target, anchor);
        insert(target, if_block1_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c2, _d2, _e2, _f2;
        let previous_block_index = current_block_type_index;
        current_block_type_index = select_block_type(ctx2);
        if (current_block_type_index === previous_block_index) {
          if_blocks[current_block_type_index].p(ctx2, dirty);
        } else {
          group_outros();
          transition_out(if_blocks[previous_block_index], 1, 1, () => {
            if_blocks[previous_block_index] = null;
          });
          check_outros();
          if_block0 = if_blocks[current_block_type_index];
          if (!if_block0) {
            if_block0 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
            if_block0.c();
          } else {
            if_block0.p(ctx2, dirty);
          }
          transition_in(if_block0, 1);
          if_block0.m(t.parentNode, t);
        }
        if (dirty & /*$store_offers, configurations, totalPayable*/
        4132)
          show_if = /*$store_offers*/
          (((_b2 = (_a2 = ctx2[12]) == null ? void 0 : _a2.available) == null ? void 0 : _b2.length) || /*$store_offers*/
          ((_d2 = (_c2 = ctx2[12]) == null ? void 0 : _c2.unavailable) == null ? void 0 : _d2.length) || "production" === TextConstants.environment_constants.dashboard) && /*configurations*/
          ((_f2 = (_e2 = ctx2[2]) == null ? void 0 : _e2.discountDisplayConfig) == null ? void 0 : _f2.showOfferList) && /*totalPayable*/
          ctx2[5] > 0 && !isNaN(
            /*totalPayable*/
            ctx2[5]
          );
        if (show_if) {
          if (if_block1) {
            if_block1.p(ctx2, dirty);
            if (dirty & /*$store_offers, configurations, totalPayable*/
            4132) {
              transition_in(if_block1, 1);
            }
          } else {
            if_block1 = create_if_block_1$a(ctx2);
            if_block1.c();
            transition_in(if_block1, 1);
            if_block1.m(if_block1_anchor.parentNode, if_block1_anchor);
          }
        } else if (if_block1) {
          group_outros();
          transition_out(if_block1, 1, 1, () => {
            if_block1 = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block0);
        transition_in(if_block1);
        current = true;
      },
      o(local) {
        transition_out(if_block0);
        transition_out(if_block1);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(t);
          detach(if_block1_anchor);
        }
        if_blocks[current_block_type_index].d(detaching);
        if (if_block1)
          if_block1.d(detaching);
      }
    };
  }
  function create_else_block$6(ctx) {
    let t;
    let if_block1_anchor;
    let current;
    let if_block0 = (
      /*allAppliedDiscounts*/
      ctx[4].length > 0 && create_if_block_8$1(ctx)
    );
    let if_block1 = (
      /*$store_appliedManualDiscount*/
      ctx[10].allow_discount_application && /*totalPayable*/
      ctx[5] > 0 && create_if_block_7$1()
    );
    return {
      c() {
        if (if_block0)
          if_block0.c();
        t = space();
        if (if_block1)
          if_block1.c();
        if_block1_anchor = empty();
      },
      m(target, anchor) {
        if (if_block0)
          if_block0.m(target, anchor);
        insert(target, t, anchor);
        if (if_block1)
          if_block1.m(target, anchor);
        insert(target, if_block1_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        if (
          /*allAppliedDiscounts*/
          ctx2[4].length > 0
        ) {
          if (if_block0) {
            if_block0.p(ctx2, dirty);
            if (dirty & /*allAppliedDiscounts*/
            16) {
              transition_in(if_block0, 1);
            }
          } else {
            if_block0 = create_if_block_8$1(ctx2);
            if_block0.c();
            transition_in(if_block0, 1);
            if_block0.m(t.parentNode, t);
          }
        } else if (if_block0) {
          group_outros();
          transition_out(if_block0, 1, 1, () => {
            if_block0 = null;
          });
          check_outros();
        }
        if (
          /*$store_appliedManualDiscount*/
          ctx2[10].allow_discount_application && /*totalPayable*/
          ctx2[5] > 0
        ) {
          if (if_block1) {
            if (dirty & /*$store_appliedManualDiscount, totalPayable*/
            1056) {
              transition_in(if_block1, 1);
            }
          } else {
            if_block1 = create_if_block_7$1();
            if_block1.c();
            transition_in(if_block1, 1);
            if_block1.m(if_block1_anchor.parentNode, if_block1_anchor);
          }
        } else if (if_block1) {
          group_outros();
          transition_out(if_block1, 1, 1, () => {
            if_block1 = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block0);
        transition_in(if_block1);
        current = true;
      },
      o(local) {
        transition_out(if_block0);
        transition_out(if_block1);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(t);
          detach(if_block1_anchor);
        }
        if (if_block0)
          if_block0.d(detaching);
        if (if_block1)
          if_block1.d(detaching);
      }
    };
  }
  function create_if_block_4$1(ctx) {
    let current_block_type_index;
    let if_block;
    let if_block_anchor;
    let current;
    const if_block_creators = [create_if_block_5$1, create_if_block_6$1];
    const if_blocks = [];
    function select_block_type_1(ctx2, dirty) {
      if (
        /*oneClickCoupon*/
        ctx2[0]
      )
        return 0;
      if (
        /*totalPayable*/
        ctx2[5] > 0
      )
        return 1;
      return -1;
    }
    if (~(current_block_type_index = select_block_type_1(ctx))) {
      if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
    }
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (~current_block_type_index) {
          if_blocks[current_block_type_index].m(target, anchor);
        }
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        let previous_block_index = current_block_type_index;
        current_block_type_index = select_block_type_1(ctx2);
        if (current_block_type_index === previous_block_index) {
          if (~current_block_type_index) {
            if_blocks[current_block_type_index].p(ctx2, dirty);
          }
        } else {
          if (if_block) {
            group_outros();
            transition_out(if_blocks[previous_block_index], 1, 1, () => {
              if_blocks[previous_block_index] = null;
            });
            check_outros();
          }
          if (~current_block_type_index) {
            if_block = if_blocks[current_block_type_index];
            if (!if_block) {
              if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
              if_block.c();
            } else {
              if_block.p(ctx2, dirty);
            }
            transition_in(if_block, 1);
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          } else {
            if_block = null;
          }
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (~current_block_type_index) {
          if_blocks[current_block_type_index].d(detaching);
        }
      }
    };
  }
  function create_if_block_8$1(ctx) {
    let each_1_anchor;
    let current;
    let each_value = ensure_array_like(
      /*allAppliedDiscounts*/
      ctx[4]
    );
    let each_blocks = [];
    for (let i = 0; i < each_value.length; i += 1) {
      each_blocks[i] = create_each_block$4(get_each_context$4(ctx, each_value, i));
    }
    const out = (i) => transition_out(each_blocks[i], 1, 1, () => {
      each_blocks[i] = null;
    });
    return {
      c() {
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        each_1_anchor = empty();
      },
      m(target, anchor) {
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(target, anchor);
          }
        }
        insert(target, each_1_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        if (dirty & /*allAppliedDiscounts*/
        16) {
          each_value = ensure_array_like(
            /*allAppliedDiscounts*/
            ctx2[4]
          );
          let i;
          for (i = 0; i < each_value.length; i += 1) {
            const child_ctx = get_each_context$4(ctx2, each_value, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
              transition_in(each_blocks[i], 1);
            } else {
              each_blocks[i] = create_each_block$4(child_ctx);
              each_blocks[i].c();
              transition_in(each_blocks[i], 1);
              each_blocks[i].m(each_1_anchor.parentNode, each_1_anchor);
            }
          }
          group_outros();
          for (i = each_value.length; i < each_blocks.length; i += 1) {
            out(i);
          }
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        for (let i = 0; i < each_value.length; i += 1) {
          transition_in(each_blocks[i]);
        }
        current = true;
      },
      o(local) {
        each_blocks = each_blocks.filter(Boolean);
        for (let i = 0; i < each_blocks.length; i += 1) {
          transition_out(each_blocks[i]);
        }
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(each_1_anchor);
        }
        destroy_each(each_blocks, detaching);
      }
    };
  }
  function create_each_block$4(ctx) {
    var _a;
    let div;
    let featuredoffertile;
    let t;
    let current;
    featuredoffertile = new FeaturedOfferTile({
      props: {
        offer: {
          discountCode: (
            /*discount*/
            ctx[21].title
          ),
          discount: (
            /*discount*/
            ctx[21].discount
          ),
          gwpDiscount: (
            /*discount*/
            (_a = ctx[21]) == null ? void 0 : _a.gwpDiscount
          )
        },
        isApplied: true
      }
    });
    return {
      c() {
        div = element("div");
        create_component(featuredoffertile.$$.fragment);
        t = space();
        attr(div, "class", "featured-offer-wrapper svelte-1uev9t0");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        mount_component(featuredoffertile, div, null);
        append(div, t);
        current = true;
      },
      p(ctx2, dirty) {
        var _a2;
        const featuredoffertile_changes = {};
        if (dirty & /*allAppliedDiscounts*/
        16)
          featuredoffertile_changes.offer = {
            discountCode: (
              /*discount*/
              ctx2[21].title
            ),
            discount: (
              /*discount*/
              ctx2[21].discount
            ),
            gwpDiscount: (
              /*discount*/
              (_a2 = ctx2[21]) == null ? void 0 : _a2.gwpDiscount
            )
          };
        featuredoffertile.$set(featuredoffertile_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(featuredoffertile.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(featuredoffertile.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(featuredoffertile);
      }
    };
  }
  function create_if_block_7$1(ctx) {
    let discountinput;
    let current;
    discountinput = new DiscountInput({});
    return {
      c() {
        create_component(discountinput.$$.fragment);
      },
      m(target, anchor) {
        mount_component(discountinput, target, anchor);
        current = true;
      },
      i(local) {
        if (current)
          return;
        transition_in(discountinput.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(discountinput.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(discountinput, detaching);
      }
    };
  }
  function create_if_block_6$1(ctx) {
    let discountinput;
    let current;
    discountinput = new DiscountInput({});
    return {
      c() {
        create_component(discountinput.$$.fragment);
      },
      m(target, anchor) {
        mount_component(discountinput, target, anchor);
        current = true;
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(discountinput.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(discountinput.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(discountinput, detaching);
      }
    };
  }
  function create_if_block_5$1(ctx) {
    let featuredoffertile;
    let current;
    featuredoffertile = new FeaturedOfferTile({
      props: { offer: (
        /*oneClickCoupon*/
        ctx[0]
      ) }
    });
    return {
      c() {
        create_component(featuredoffertile.$$.fragment);
      },
      m(target, anchor) {
        mount_component(featuredoffertile, target, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        const featuredoffertile_changes = {};
        if (dirty & /*oneClickCoupon*/
        1)
          featuredoffertile_changes.offer = /*oneClickCoupon*/
          ctx2[0];
        featuredoffertile.$set(featuredoffertile_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(featuredoffertile.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(featuredoffertile.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(featuredoffertile, detaching);
      }
    };
  }
  function create_if_block_1$a(ctx) {
    let current_block_type_index;
    let if_block;
    let if_block_anchor;
    let current;
    const if_block_creators = [create_if_block_2$4, create_if_block_3$2];
    const if_blocks = [];
    function select_block_type_2(ctx2, dirty) {
      if (
        /*$store_offers*/
        ctx2[12].hasPaymentOffer
      )
        return 0;
      if (
        /*$store_offers*/
        ctx2[12].hasBrandOffer
      )
        return 1;
      return -1;
    }
    if (~(current_block_type_index = select_block_type_2(ctx))) {
      if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
    }
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (~current_block_type_index) {
          if_blocks[current_block_type_index].m(target, anchor);
        }
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        let previous_block_index = current_block_type_index;
        current_block_type_index = select_block_type_2(ctx2);
        if (current_block_type_index === previous_block_index) {
          if (~current_block_type_index) {
            if_blocks[current_block_type_index].p(ctx2, dirty);
          }
        } else {
          if (if_block) {
            group_outros();
            transition_out(if_blocks[previous_block_index], 1, 1, () => {
              if_blocks[previous_block_index] = null;
            });
            check_outros();
          }
          if (~current_block_type_index) {
            if_block = if_blocks[current_block_type_index];
            if (!if_block) {
              if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
              if_block.c();
            } else {
              if_block.p(ctx2, dirty);
            }
            transition_in(if_block, 1);
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          } else {
            if_block = null;
          }
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (~current_block_type_index) {
          if_blocks[current_block_type_index].d(detaching);
        }
      }
    };
  }
  function create_if_block_3$2(ctx) {
    var _a, _b, _c, _d;
    let button;
    let div0;
    let span0;
    let t0_value = (
      /*$store_offers*/
      ((_b = (_a = ctx[12]) == null ? void 0 : _a.available) == null ? void 0 : _b.length) ? (
        /*$store_offers*/
        ((_d = (_c = ctx[12]) == null ? void 0 : _c.available) == null ? void 0 : _d.length) + " coupons available"
      ) : ""
    );
    let t0;
    let t1;
    let div1;
    let span1;
    let t3;
    let icon;
    let current;
    let mounted;
    let dispose;
    icon = new Icon({
      props: {
        height: "14px",
        icon: "mingcute:right-fill"
      }
    });
    return {
      c() {
        button = element("button");
        div0 = element("div");
        span0 = element("span");
        t0 = text(t0_value);
        t1 = space();
        div1 = element("div");
        span1 = element("span");
        span1.textContent = "View Coupons";
        t3 = space();
        create_component(icon.$$.fragment);
        attr(span0, "class", "svelte-1uev9t0");
        attr(div0, "class", "coupon-count");
        attr(span1, "class", "svelte-1uev9t0");
        attr(div1, "class", "view-coupon-text svelte-1uev9t0");
        attr(button, "type", "button");
        attr(button, "class", "view-coupon-list border-dashed-top svelte-1uev9t0");
      },
      m(target, anchor) {
        insert(target, button, anchor);
        append(button, div0);
        append(div0, span0);
        append(span0, t0);
        append(button, t1);
        append(button, div1);
        append(div1, span1);
        append(div1, t3);
        mount_component(icon, div1, null);
        current = true;
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*handleClick*/
            ctx[13]
          );
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c2, _d2;
        if ((!current || dirty & /*$store_offers*/
        4096) && t0_value !== (t0_value = /*$store_offers*/
        ((_b2 = (_a2 = ctx2[12]) == null ? void 0 : _a2.available) == null ? void 0 : _b2.length) ? (
          /*$store_offers*/
          ((_d2 = (_c2 = ctx2[12]) == null ? void 0 : _c2.available) == null ? void 0 : _d2.length) + " coupons available"
        ) : ""))
          set_data(t0, t0_value);
      },
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        destroy_component(icon);
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block_2$4(ctx) {
    let button;
    let span;
    let t1;
    let icon;
    let current;
    let mounted;
    let dispose;
    icon = new Icon({
      props: {
        icon: "mingcute:right-fill",
        height: "16px",
        class: "arrow-icon"
      }
    });
    return {
      c() {
        button = element("button");
        span = element("span");
        span.textContent = "View All Offers";
        t1 = space();
        create_component(icon.$$.fragment);
        attr(span, "class", "offers-text svelte-1uev9t0");
        attr(button, "type", "button");
        attr(button, "class", "view-offers-button svelte-1uev9t0");
      },
      m(target, anchor) {
        insert(target, button, anchor);
        append(button, span);
        append(button, t1);
        mount_component(icon, button, null);
        current = true;
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*handleClick*/
            ctx[13]
          );
          mounted = true;
        }
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        destroy_component(icon);
        mounted = false;
        dispose();
      }
    };
  }
  function create_fragment$g(ctx) {
    var _a, _b, _c, _d, _e;
    let div;
    let t0;
    let show_if = (
      /*betterOffer*/
      ctx[3] && /*$store_appliedManualDiscount*/
      ((_a = ctx[10]) == null ? void 0 : _a.discount) && /*betterOffer*/
      (((_b = ctx[3]) == null ? void 0 : _b.amountSaved) || 0) - /*$store_appliedManualDiscount*/
      (((_c = ctx[10]) == null ? void 0 : _c.discount) || 0) > 0 && get_store_value(store_merchantId) !== "12wyqc2n2bckuwmkpz2" && ((_d = get_store_value(store_appliedManualDiscount)) == null ? void 0 : _d.title) !== /*betterOffer*/
      ((_e = ctx[3]) == null ? void 0 : _e.discountCode)
    );
    let t1;
    let current;
    let if_block0 = (
      /*$store_appliedAutomaticDiscounts*/
      ctx[6].length > 0 && create_if_block_10(ctx)
    );
    let if_block1 = show_if && create_if_block_9(ctx);
    let if_block2 = (!/*automaticDiscountApplied*/
    ctx[1] || /*$store_platform*/
    ctx[11] !== TextConstants.platforms.Checkout1_0) && create_if_block$d(ctx);
    return {
      c() {
        var _a2, _b2, _c2, _d2, _e2;
        div = element("div");
        if (if_block0)
          if_block0.c();
        t0 = space();
        if (if_block1)
          if_block1.c();
        t1 = space();
        if (if_block2)
          if_block2.c();
        attr(div, "class", "offer-box svelte-1uev9t0");
        toggle_class(
          div,
          "mb-15",
          /*$store_hideUpsellFlow*/
          ctx[7] && !/*$store_configurations*/
          ((_b2 = (_a2 = ctx[8]) == null ? void 0 : _a2.orderNotes) == null ? void 0 : _b2.enable) && /*$store_totalSavings*/
          ctx[9] && /*$store_configurations*/
          ((_e2 = (_d2 = (_c2 = ctx[8]) == null ? void 0 : _c2.appearance) == null ? void 0 : _d2.savingsBanner) == null ? void 0 : _e2.enable)
        );
      },
      m(target, anchor) {
        insert(target, div, anchor);
        if (if_block0)
          if_block0.m(div, null);
        append(div, t0);
        if (if_block1)
          if_block1.m(div, null);
        append(div, t1);
        if (if_block2)
          if_block2.m(div, null);
        current = true;
      },
      p(ctx2, [dirty]) {
        var _a2, _b2, _c2, _d2, _e2, _f, _g, _h, _i, _j;
        if (
          /*$store_appliedAutomaticDiscounts*/
          ctx2[6].length > 0
        ) {
          if (if_block0) {
            if_block0.p(ctx2, dirty);
            if (dirty & /*$store_appliedAutomaticDiscounts*/
            64) {
              transition_in(if_block0, 1);
            }
          } else {
            if_block0 = create_if_block_10(ctx2);
            if_block0.c();
            transition_in(if_block0, 1);
            if_block0.m(div, t0);
          }
        } else if (if_block0) {
          group_outros();
          transition_out(if_block0, 1, 1, () => {
            if_block0 = null;
          });
          check_outros();
        }
        if (dirty & /*betterOffer, $store_appliedManualDiscount*/
        1032)
          show_if = /*betterOffer*/
          ctx2[3] && /*$store_appliedManualDiscount*/
          ((_a2 = ctx2[10]) == null ? void 0 : _a2.discount) && /*betterOffer*/
          (((_b2 = ctx2[3]) == null ? void 0 : _b2.amountSaved) || 0) - /*$store_appliedManualDiscount*/
          (((_c2 = ctx2[10]) == null ? void 0 : _c2.discount) || 0) > 0 && get_store_value(store_merchantId) !== "12wyqc2n2bckuwmkpz2" && ((_d2 = get_store_value(store_appliedManualDiscount)) == null ? void 0 : _d2.title) !== /*betterOffer*/
          ((_e2 = ctx2[3]) == null ? void 0 : _e2.discountCode);
        if (show_if) {
          if (if_block1) {
            if_block1.p(ctx2, dirty);
          } else {
            if_block1 = create_if_block_9(ctx2);
            if_block1.c();
            if_block1.m(div, t1);
          }
        } else if (if_block1) {
          if_block1.d(1);
          if_block1 = null;
        }
        if (!/*automaticDiscountApplied*/
        ctx2[1] || /*$store_platform*/
        ctx2[11] !== TextConstants.platforms.Checkout1_0) {
          if (if_block2) {
            if_block2.p(ctx2, dirty);
            if (dirty & /*automaticDiscountApplied, $store_platform*/
            2050) {
              transition_in(if_block2, 1);
            }
          } else {
            if_block2 = create_if_block$d(ctx2);
            if_block2.c();
            transition_in(if_block2, 1);
            if_block2.m(div, null);
          }
        } else if (if_block2) {
          group_outros();
          transition_out(if_block2, 1, 1, () => {
            if_block2 = null;
          });
          check_outros();
        }
        if (!current || dirty & /*$store_hideUpsellFlow, $store_configurations, $store_totalSavings*/
        896) {
          toggle_class(
            div,
            "mb-15",
            /*$store_hideUpsellFlow*/
            ctx2[7] && !/*$store_configurations*/
            ((_g = (_f = ctx2[8]) == null ? void 0 : _f.orderNotes) == null ? void 0 : _g.enable) && /*$store_totalSavings*/
            ctx2[9] && /*$store_configurations*/
            ((_j = (_i = (_h = ctx2[8]) == null ? void 0 : _h.appearance) == null ? void 0 : _i.savingsBanner) == null ? void 0 : _j.enable)
          );
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block0);
        transition_in(if_block2);
        current = true;
      },
      o(local) {
        transition_out(if_block0);
        transition_out(if_block2);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        if (if_block0)
          if_block0.d();
        if (if_block1)
          if_block1.d();
        if (if_block2)
          if_block2.d();
      }
    };
  }
  function instance$g($$self, $$props, $$invalidate) {
    let $store_appliedAutomaticDiscounts;
    let $store_hideUpsellFlow;
    let $store_configurations;
    let $store_totalSavings;
    let $store_appliedManualDiscount;
    let $store_platform;
    let $store_offers;
    component_subscribe($$self, store_appliedAutomaticDiscounts, ($$value) => $$invalidate(6, $store_appliedAutomaticDiscounts = $$value));
    component_subscribe($$self, store_hideUpsellFlow, ($$value) => $$invalidate(7, $store_hideUpsellFlow = $$value));
    component_subscribe($$self, store_configurations, ($$value) => $$invalidate(8, $store_configurations = $$value));
    component_subscribe($$self, store_totalSavings, ($$value) => $$invalidate(9, $store_totalSavings = $$value));
    component_subscribe($$self, store_appliedManualDiscount, ($$value) => $$invalidate(10, $store_appliedManualDiscount = $$value));
    component_subscribe($$self, store_platform, ($$value) => $$invalidate(11, $store_platform = $$value));
    component_subscribe($$self, store_offers, ($$value) => $$invalidate(12, $store_offers = $$value));
    let unsubOffers, oneClickCoupon, automaticDiscountApplied = false, unsubConfig, firstLoad = true, configurations2, cart2, betterOffer, allAppliedDiscounts = [], totalPayable2;
    onMount(() => {
      unsubConfig = store_configurations.subscribe((res) => {
        if (res) {
          $$invalidate(2, configurations2 = res);
          $$invalidate(1, automaticDiscountApplied = false);
          store_cart.subscribe((cart22) => {
            validateAutomaticDiscounts();
          });
        }
      });
      store_totalPayableAmount.subscribe((res) => $$invalidate(5, totalPayable2 = res));
      unsubOffers = store_offers.subscribe((res) => {
        store_appliedAutomaticDiscounts.subscribe(() => {
          validateAutomaticDiscounts();
        });
        if (res.timestamp && firstLoad) {
          fireGokwikTrigger(TextConstants.eventNames.view_offers_shown, {
            best_offer_shown: !!oneClickCoupon,
            best_offer_value: (oneClickCoupon == null ? void 0 : oneClickCoupon.amountSaved) || "",
            best_offer_name: (oneClickCoupon == null ? void 0 : oneClickCoupon.discountCode) || "",
            additional_banner_shown: false
          });
          logEvent(TextConstants.eventNames.view_offers_shown, {
            best_offer_shown: !!oneClickCoupon,
            best_offer_value: (oneClickCoupon == null ? void 0 : oneClickCoupon.amountSaved) || "",
            best_offer_name: (oneClickCoupon == null ? void 0 : oneClickCoupon.discountCode) || "",
            additional_banner_shown: false
          });
          firstLoad = false;
        }
      });
      store_oneClickCoupon.subscribe((res) => {
        $$invalidate(0, oneClickCoupon = res);
      });
      store_cart.subscribe((res) => {
        cart2 = res;
      });
      store_appliedManualDiscount.subscribe((res) => {
        if (res) {
          $$invalidate(4, allAppliedDiscounts = [res, ...res.stacked_discounts ?? []]);
        }
        const discountTitles = getAppliedDiscountTitles();
        if (!(res == null ? void 0 : res.discount) || (res == null ? void 0 : res.title) === (betterOffer == null ? void 0 : betterOffer.discountCode) || discountTitles.includes(res.title)) {
          $$invalidate(3, betterOffer = null);
          return;
        }
        store_offers.subscribe((offers) => {
          $$invalidate(3, betterOffer = null);
          if (offers.available.length) {
            offers.available.map((offer) => {
              if (offer.amountSaved > ((betterOffer == null ? void 0 : betterOffer.amountSaved) || 0) && offer.offerType !== "payment_offer") {
                $$invalidate(3, betterOffer = offer);
              }
            });
          }
        });
      });
    });
    onDestroy(() => {
      unsubOffers && unsubOffers();
      unsubConfig && unsubConfig();
    });
    const handleClick = () => {
      store_offerPopup.set(true);
      fireGokwikTrigger(TextConstants.eventNames.view_offers_clicked, {});
      logEvent(TextConstants.eventNames.view_offers_clicked, {});
    };
    const validateAutomaticDiscounts = () => {
      var _a;
      if (!cart2 || !configurations2)
        return;
      let extraDiscountValid = ((_a = configurations2 == null ? void 0 : configurations2.dynamicAutomaticExtraDiscounts) == null ? void 0 : _a.length) && checkForExtraDiscounts(cart2, configurations2.dynamicAutomaticExtraDiscounts, configurations2.dynamicAutomaticOverwriteDiscounts);
      $$invalidate(1, automaticDiscountApplied = extraDiscountValid ? false : ($store_appliedAutomaticDiscounts == null ? void 0 : $store_appliedAutomaticDiscounts.length) > 0);
    };
    const click_handler2 = () => applyDiscount(betterOffer.discountCode, "outside", false, false);
    return [
      oneClickCoupon,
      automaticDiscountApplied,
      configurations2,
      betterOffer,
      allAppliedDiscounts,
      totalPayable2,
      $store_appliedAutomaticDiscounts,
      $store_hideUpsellFlow,
      $store_configurations,
      $store_totalSavings,
      $store_appliedManualDiscount,
      $store_platform,
      $store_offers,
      handleClick,
      click_handler2
    ];
  }
  class OfferBox extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$g, create_fragment$g, safe_not_equal, {}, add_css$f);
    }
  }
  function add_css$e(target) {
    append_styles(target, "svelte-1wm2nst", ".sidecart-empty.svelte-1wm2nst.svelte-1wm2nst{height:100%;padding:20px;display:flex;justify-content:center;align-items:center;flex-direction:column}.sidecart-empty.svelte-1wm2nst p.svelte-1wm2nst{color:#697687;font-size:18px}.sidecart-empty.svelte-1wm2nst button.svelte-1wm2nst{border-radius:10px;margin-top:10px;background:var(--gokwik-primary-color);color:#fff;font-weight:500;height:60px;cursor:pointer;width:60%;outline:none;border:none}");
  }
  function create_else_block$5(ctx) {
    let t_value = "You Cart is empty!";
    let t;
    return {
      c() {
        t = text(t_value);
      },
      m(target, anchor) {
        insert(target, t, anchor);
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(t);
        }
      }
    };
  }
  function create_if_block_1$9(ctx) {
    var _a;
    let html_tag;
    let raw_value = (
      /*emptyCartConfigs*/
      ((_a = ctx[0]) == null ? void 0 : _a.titleText) + ""
    );
    let html_anchor;
    return {
      c() {
        html_tag = new HtmlTag(false);
        html_anchor = empty();
        html_tag.a = html_anchor;
      },
      m(target, anchor) {
        html_tag.m(raw_value, target, anchor);
        insert(target, html_anchor, anchor);
      },
      p(ctx2, dirty) {
        var _a2;
        if (dirty & /*emptyCartConfigs*/
        1 && raw_value !== (raw_value = /*emptyCartConfigs*/
        ((_a2 = ctx2[0]) == null ? void 0 : _a2.titleText) + ""))
          html_tag.p(raw_value);
      },
      d(detaching) {
        if (detaching) {
          detach(html_anchor);
          html_tag.d();
        }
      }
    };
  }
  function create_if_block$c(ctx) {
    let div;
    return {
      c() {
        div = element("div");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        div.innerHTML = /*filteredAdditionalScripts*/
        ctx[1];
      },
      p(ctx2, dirty) {
        if (dirty & /*filteredAdditionalScripts*/
        2)
          div.innerHTML = /*filteredAdditionalScripts*/
          ctx2[1];
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
      }
    };
  }
  function create_fragment$f(ctx) {
    var _a;
    let div;
    let p;
    let t0;
    let button;
    let t1_value = (
      /*emptyCartConfigs*/
      (((_a = ctx[0]) == null ? void 0 : _a.ctaText) || "Contine Shopping") + ""
    );
    let t1;
    let button_style_value;
    let t2;
    let mounted;
    let dispose;
    function select_block_type(ctx2, dirty) {
      var _a2;
      if (
        /*emptyCartConfigs*/
        (_a2 = ctx2[0]) == null ? void 0 : _a2.titleText
      )
        return create_if_block_1$9;
      return create_else_block$5;
    }
    let current_block_type = select_block_type(ctx);
    let if_block0 = current_block_type(ctx);
    let if_block1 = (
      /*filteredAdditionalScripts*/
      ctx[1] && create_if_block$c(ctx)
    );
    return {
      c() {
        var _a2, _b, _c;
        div = element("div");
        p = element("p");
        if_block0.c();
        t0 = space();
        button = element("button");
        t1 = text(t1_value);
        t2 = space();
        if (if_block1)
          if_block1.c();
        attr(p, "class", "svelte-1wm2nst");
        attr(button, "style", button_style_value = `${getStyleObject(
          /*$store_configurations*/
          (_c = (_b = (_a2 = ctx[2]) == null ? void 0 : _a2.appearance) == null ? void 0 : _b.checkoutButtons) == null ? void 0 : _c.primary
        )} text-align: center`);
        attr(button, "class", "svelte-1wm2nst");
        attr(div, "class", "sidecart-empty svelte-1wm2nst");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, p);
        if_block0.m(p, null);
        append(div, t0);
        append(div, button);
        append(button, t1);
        append(div, t2);
        if (if_block1)
          if_block1.m(div, null);
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*click_handler*/
            ctx[3]
          );
          mounted = true;
        }
      },
      p(ctx2, [dirty]) {
        var _a2, _b, _c, _d;
        if (current_block_type === (current_block_type = select_block_type(ctx2)) && if_block0) {
          if_block0.p(ctx2, dirty);
        } else {
          if_block0.d(1);
          if_block0 = current_block_type(ctx2);
          if (if_block0) {
            if_block0.c();
            if_block0.m(p, null);
          }
        }
        if (dirty & /*emptyCartConfigs*/
        1 && t1_value !== (t1_value = /*emptyCartConfigs*/
        (((_a2 = ctx2[0]) == null ? void 0 : _a2.ctaText) || "Contine Shopping") + ""))
          set_data(t1, t1_value);
        if (dirty & /*$store_configurations*/
        4 && button_style_value !== (button_style_value = `${getStyleObject(
          /*$store_configurations*/
          (_d = (_c = (_b = ctx2[2]) == null ? void 0 : _b.appearance) == null ? void 0 : _c.checkoutButtons) == null ? void 0 : _d.primary
        )} text-align: center`)) {
          attr(button, "style", button_style_value);
        }
        if (
          /*filteredAdditionalScripts*/
          ctx2[1]
        ) {
          if (if_block1) {
            if_block1.p(ctx2, dirty);
          } else {
            if_block1 = create_if_block$c(ctx2);
            if_block1.c();
            if_block1.m(div, null);
          }
        } else if (if_block1) {
          if_block1.d(1);
          if_block1 = null;
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        if_block0.d();
        if (if_block1)
          if_block1.d();
        mounted = false;
        dispose();
      }
    };
  }
  function instance$f($$self, $$props, $$invalidate) {
    let $store_configurations;
    component_subscribe($$self, store_configurations, ($$value) => $$invalidate(2, $store_configurations = $$value));
    let emptyCartConfigs = {
      titleText: "",
      ctaText: "",
      ctaRedirectionLink: ""
    };
    let filteredAdditionalScripts = "";
    store_configurations.subscribe((res) => {
      var _a, _b;
      $$invalidate(0, emptyCartConfigs = (_a = res == null ? void 0 : res.appearance) == null ? void 0 : _a.emptyCart);
      const additionalScripts = ((_b = res == null ? void 0 : res.appearance) == null ? void 0 : _b.additionalScripts) || "";
      $$invalidate(1, filteredAdditionalScripts = extractStyleTags(additionalScripts));
    });
    const click_handler2 = (e) => {
      window.location.href = (emptyCartConfigs == null ? void 0 : emptyCartConfigs.ctaRedirectionLink) || "/collections/all";
      fireGokwikTrigger("empty_cart_cta_clicked_sc", {});
      logEvent("empty_cart_cta_clicked_sc", {});
    };
    return [
      emptyCartConfigs,
      filteredAdditionalScripts,
      $store_configurations,
      click_handler2
    ];
  }
  class EmptyCart extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$f, create_fragment$f, safe_not_equal, {}, add_css$e);
    }
  }
  function add_css$d(target) {
    append_styles(target, "svelte-nh3fq9", ".snackbar-wrapper.svelte-nh3fq9{position:absolute;z-index:10000000000000000000000;width:100%;bottom:200px}.sidecart-snackbar.svelte-nh3fq9{padding:8px 16px;border-radius:5px;color:#fff;font-size:12px;bottom:200px;text-align:center;margin:0 auto;width:90%;background-color:var(--green)}.red-bg.svelte-nh3fq9{background-color:red}.green-bg.svelte-nh3fq9{background-color:#1a9e4c}");
  }
  function create_if_block$b(ctx) {
    var _a;
    let div1;
    let div0;
    let span;
    let t_value = (
      /*snackbar*/
      ((_a = ctx[0]) == null ? void 0 : _a.message) + ""
    );
    let t;
    let div0_class_value;
    return {
      c() {
        var _a2, _b;
        div1 = element("div");
        div0 = element("div");
        span = element("span");
        t = text(t_value);
        attr(div0, "class", div0_class_value = "sidecart-snackbar " + /*snackbar*/
        (((_a2 = ctx[0]) == null ? void 0 : _a2.error) && "red-bg") + " " + /*snackbar*/
        (((_b = ctx[0]) == null ? void 0 : _b.success) && "green-bg") + " svelte-nh3fq9");
        attr(div1, "class", "snackbar-wrapper svelte-nh3fq9");
      },
      m(target, anchor) {
        insert(target, div1, anchor);
        append(div1, div0);
        append(div0, span);
        append(span, t);
      },
      p(ctx2, dirty) {
        var _a2, _b, _c;
        if (dirty & /*snackbar*/
        1 && t_value !== (t_value = /*snackbar*/
        ((_a2 = ctx2[0]) == null ? void 0 : _a2.message) + ""))
          set_data(t, t_value);
        if (dirty & /*snackbar*/
        1 && div0_class_value !== (div0_class_value = "sidecart-snackbar " + /*snackbar*/
        (((_b = ctx2[0]) == null ? void 0 : _b.error) && "red-bg") + " " + /*snackbar*/
        (((_c = ctx2[0]) == null ? void 0 : _c.success) && "green-bg") + " svelte-nh3fq9")) {
          attr(div0, "class", div0_class_value);
        }
      },
      d(detaching) {
        if (detaching) {
          detach(div1);
        }
      }
    };
  }
  function create_fragment$e(ctx) {
    var _a;
    let if_block_anchor;
    let if_block = (
      /*snackbar*/
      ((_a = ctx[0]) == null ? void 0 : _a.show) && create_if_block$b(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
      },
      p(ctx2, [dirty]) {
        var _a2;
        if (
          /*snackbar*/
          (_a2 = ctx2[0]) == null ? void 0 : _a2.show
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block$b(ctx2);
            if_block.c();
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function instance$e($$self, $$props, $$invalidate) {
    let unsubSnackbar, snackbar;
    onMount(() => {
      unsubSnackbar = store_snackbar.subscribe((res) => {
        $$invalidate(0, snackbar = res);
        if (res == null ? void 0 : res.show) {
          setTimeout(
            () => {
              store_snackbar.set({});
            },
            res.timer
          );
        }
      });
    });
    onDestroy(() => {
      unsubSnackbar && unsubSnackbar();
    });
    return [snackbar];
  }
  class Snackbar extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$e, create_fragment$e, safe_not_equal, {}, add_css$d);
    }
  }
  function add_css$c(target) {
    append_styles(target, "svelte-1vd69ga", ".svelte-1vd69ga .svelte-1vd69ga::-webkit-scrollbar{width:0;background:transparent}.bottom-sheet-title.svelte-1vd69ga.svelte-1vd69ga{font-family:Inter;font-weight:600;font-size:14px;line-height:100%;color:#00192F}.backdrop.svelte-1vd69ga.svelte-1vd69ga{width:100%;background-color:rgba(0, 0, 0, 0.2);position:absolute;top:0;height:100%;z-index:100001}.container.svelte-1vd69ga.svelte-1vd69ga{position:absolute;width:100%;bottom:0;background-color:#fff;left:0;z-index:99999999;box-sizing:border-box}.container.svelte-1vd69ga .sheet-wrapper.svelte-1vd69ga{background-color:var(--white)}.container.svelte-1vd69ga .sheet-wrapper .head.svelte-1vd69ga{display:flex;justify-content:space-between;align-items:center;margin-bottom:0.5rem;padding:15px;font-weight:700;font-size:18px;background:rgb(235, 241, 249);background:linear-gradient(90deg, rgb(235, 241, 249) 0%, rgb(255, 255, 255) 100%)}.container.svelte-1vd69ga .sheet-wrapper .head .right-button.svelte-1vd69ga{padding:8px;border-radius:4px;font-size:11px;font-weight:600;border:none;cursor:pointer}.container.svelte-1vd69ga .sheet-wrapper .content.svelte-1vd69ga{max-height:75vh;overflow-y:auto;min-height:15vh}.container.top-close-button.svelte-1vd69ga .sheet-wrapper.svelte-1vd69ga{position:relative;box-shadow:0px -45px 125px 30px #000}.container.top-close-button.svelte-1vd69ga .sheet-wrapper .head.svelte-1vd69ga{margin:0}.container.top-close-button.svelte-1vd69ga .sheet-wrapper .head .close-button.svelte-1vd69ga{cursor:pointer;position:absolute;z-index:1;top:-31px;right:calc((100% - 40px) / 2);border-radius:50px;border:1px solid #000;background:#000;padding:2px 10px;font-size:20px;color:#fff}");
  }
  function create_if_block$a(ctx) {
    var _a;
    let div0;
    let t0;
    let div4;
    let div3;
    let div1;
    let p;
    let t1_value = (
      /*bottomSheet*/
      ctx[0].title + ""
    );
    let t1;
    let t2;
    let button;
    let t4;
    let div1_style_value;
    let t5;
    let div2;
    let switch_instance;
    let div4_intro;
    let div4_outro;
    let current;
    let mounted;
    let dispose;
    let if_block = (
      /*bottomSheet*/
      ((_a = ctx[0]) == null ? void 0 : _a.onRightButtonClick) && create_if_block_1$8(ctx)
    );
    const switch_instance_spread_levels = [
      /*bottomSheet*/
      ctx[0].componentData
    ];
    var switch_value = (
      /*bottomSheet*/
      ctx[0].component
    );
    function switch_props(ctx2, dirty) {
      let switch_instance_props = {};
      for (let i = 0; i < switch_instance_spread_levels.length; i += 1) {
        switch_instance_props = assign(switch_instance_props, switch_instance_spread_levels[i]);
      }
      if (dirty !== void 0 && dirty & /*bottomSheet*/
      1) {
        switch_instance_props = assign(switch_instance_props, get_spread_update(switch_instance_spread_levels, [get_spread_object(
          /*bottomSheet*/
          ctx2[0].componentData
        )]));
      }
      return { props: switch_instance_props };
    }
    if (switch_value) {
      switch_instance = construct_svelte_component(switch_value, switch_props(ctx));
    }
    return {
      c() {
        div0 = element("div");
        t0 = space();
        div4 = element("div");
        div3 = element("div");
        div1 = element("div");
        p = element("p");
        t1 = text(t1_value);
        t2 = space();
        button = element("button");
        button.textContent = "x";
        t4 = space();
        if (if_block)
          if_block.c();
        t5 = space();
        div2 = element("div");
        if (switch_instance)
          create_component(switch_instance.$$.fragment);
        attr(div0, "class", "backdrop svelte-1vd69ga");
        attr(p, "class", "bottom-sheet-title svelte-1vd69ga");
        attr(button, "class", "close-button svelte-1vd69ga");
        attr(div1, "class", "head svelte-1vd69ga");
        attr(div1, "style", div1_style_value = !/*bottomSheet*/
        ctx[0].title && "padding: 0;");
        attr(div2, "class", "content svelte-1vd69ga");
        attr(div3, "class", "sheet-wrapper svelte-1vd69ga");
        attr(div4, "class", "container top-close-button svelte-1vd69ga");
      },
      m(target, anchor) {
        insert(target, div0, anchor);
        insert(target, t0, anchor);
        insert(target, div4, anchor);
        append(div4, div3);
        append(div3, div1);
        append(div1, p);
        append(p, t1);
        append(div1, t2);
        append(div1, button);
        append(div1, t4);
        if (if_block)
          if_block.m(div1, null);
        append(div3, t5);
        append(div3, div2);
        if (switch_instance)
          mount_component(switch_instance, div2, null);
        current = true;
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*click_handler*/
            ctx[4]
          );
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        var _a2;
        if ((!current || dirty & /*bottomSheet*/
        1) && t1_value !== (t1_value = /*bottomSheet*/
        ctx2[0].title + ""))
          set_data(t1, t1_value);
        if (
          /*bottomSheet*/
          (_a2 = ctx2[0]) == null ? void 0 : _a2.onRightButtonClick
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block_1$8(ctx2);
            if_block.c();
            if_block.m(div1, null);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
        if (!current || dirty & /*bottomSheet*/
        1 && div1_style_value !== (div1_style_value = !/*bottomSheet*/
        ctx2[0].title && "padding: 0;")) {
          attr(div1, "style", div1_style_value);
        }
        if (dirty & /*bottomSheet*/
        1 && switch_value !== (switch_value = /*bottomSheet*/
        ctx2[0].component)) {
          if (switch_instance) {
            group_outros();
            const old_component = switch_instance;
            transition_out(old_component.$$.fragment, 1, 0, () => {
              destroy_component(old_component, 1);
            });
            check_outros();
          }
          if (switch_value) {
            switch_instance = construct_svelte_component(switch_value, switch_props(ctx2, dirty));
            create_component(switch_instance.$$.fragment);
            transition_in(switch_instance.$$.fragment, 1);
            mount_component(switch_instance, div2, null);
          } else {
            switch_instance = null;
          }
        } else if (switch_value) {
          const switch_instance_changes = dirty & /*bottomSheet*/
          1 ? get_spread_update(switch_instance_spread_levels, [get_spread_object(
            /*bottomSheet*/
            ctx2[0].componentData
          )]) : {};
          switch_instance.$set(switch_instance_changes);
        }
      },
      i(local) {
        if (current)
          return;
        if (switch_instance)
          transition_in(switch_instance.$$.fragment, local);
        if (local) {
          add_render_callback(() => {
            if (!current)
              return;
            if (div4_outro)
              div4_outro.end(1);
            div4_intro = create_in_transition(div4, fly, { y: 10, duration: 300 });
            div4_intro.start();
          });
        }
        current = true;
      },
      o(local) {
        if (switch_instance)
          transition_out(switch_instance.$$.fragment, local);
        if (div4_intro)
          div4_intro.invalidate();
        if (local) {
          div4_outro = create_out_transition(div4, fly, { y: 10, duration: 300 });
        }
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div0);
          detach(t0);
          detach(div4);
        }
        if (if_block)
          if_block.d();
        if (switch_instance)
          destroy_component(switch_instance);
        if (detaching && div4_outro)
          div4_outro.end();
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block_1$8(ctx) {
    let button;
    let t_value = (
      /*bottomSheet*/
      (ctx[0].rightButtonText || "Done") + ""
    );
    let t;
    let mounted;
    let dispose;
    return {
      c() {
        button = element("button");
        t = text(t_value);
        attr(button, "class", "right-button svelte-1vd69ga");
        attr(button, "style", getStyleObject(
          /*stylingConfig*/
          ctx[1]
        ));
      },
      m(target, anchor) {
        insert(target, button, anchor);
        append(button, t);
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*click_handler_1*/
            ctx[5]
          );
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        if (dirty & /*bottomSheet*/
        1 && t_value !== (t_value = /*bottomSheet*/
        (ctx2[0].rightButtonText || "Done") + ""))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_fragment$d(ctx) {
    let if_block_anchor;
    let current;
    let if_block = (
      /*bottomSheet*/
      ctx[0].show && create_if_block$a(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, [dirty]) {
        if (
          /*bottomSheet*/
          ctx2[0].show
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
            if (dirty & /*bottomSheet*/
            1) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block$a(ctx2);
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function instance$d($$self, $$props, $$invalidate) {
    var _a, _b;
    let $store_configurations;
    component_subscribe($$self, store_configurations, ($$value) => $$invalidate(7, $store_configurations = $$value));
    let bottomSheet = {
      show: false,
      title: "",
      type: "",
      component: null,
      componentData: {},
      onClose: () => {
      },
      onRightButtonClick: () => {
      },
      rightButtonText: ""
    }, unsubBottomSheet;
    let stylingConfig = ((_b = (_a = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _a.checkoutButtons) == null ? void 0 : _b.primary) || { bgColor: "#000000", textColor: "#ffffff" };
    onMount(() => {
      unsubBottomSheet = store_bottomSheet.subscribe((res) => {
        $$invalidate(0, bottomSheet = res);
        res.selfDestruct && setTimeout(
          () => {
            store_bottomSheet.set({
              show: false,
              selfDestruct: 0,
              component: null,
              componentData: null,
              title: "",
              type: ""
            });
          },
          res.selfDestruct
        );
      });
    });
    onDestroy(() => {
      unsubBottomSheet && unsubBottomSheet();
    });
    const handleCloseBottomSheet2 = () => {
      closeBottomSheet2();
      if (bottomSheet.onClose) {
        bottomSheet.onClose();
      }
    };
    const closeBottomSheet2 = () => {
      store_bottomSheet.update((oldObj) => ({
        ...oldObj,
        show: false,
        type: "",
        component: null,
        title: ""
      }));
    };
    const click_handler2 = () => handleCloseBottomSheet2();
    const click_handler_1 = () => {
      bottomSheet.onRightButtonClick && bottomSheet.onRightButtonClick();
      closeBottomSheet2();
    };
    return [
      bottomSheet,
      stylingConfig,
      handleCloseBottomSheet2,
      closeBottomSheet2,
      click_handler2,
      click_handler_1
    ];
  }
  class BottomSheet extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$d, create_fragment$d, safe_not_equal, {}, add_css$c);
    }
  }
  function add_css$b(target) {
    append_styles(target, "svelte-gs9oo", ".order-note-area.svelte-gs9oo.svelte-gs9oo{margin:10px;padding-top:10px;display:flex;flex-direction:column;min-height:30vh;justify-content:space-between;height:100%;background-color:#fff}.order-note-area.svelte-gs9oo textarea.svelte-gs9oo{outline:none;border:1px solid black;border-radius:10px;height:100px;padding:5px}.order-note-area.svelte-gs9oo button.svelte-gs9oo{width:100%;background:#004b8d;border-radius:8px;outline:none;height:55px;border:none;color:#fff;font-size:16px;cursor:pointer}.order-note-area.svelte-gs9oo button.svelte-gs9oo:disabled{opacity:0.7}");
  }
  function create_fragment$c(ctx) {
    let div;
    let textarea;
    let t0;
    let button;
    let t1;
    let button_style_value;
    let button_disabled_value;
    let mounted;
    let dispose;
    return {
      c() {
        var _a, _b, _c;
        div = element("div");
        textarea = element("textarea");
        t0 = space();
        button = element("button");
        t1 = text("Add Note");
        attr(textarea, "class", "svelte-gs9oo");
        attr(button, "style", button_style_value = getStyleObject(
          /*$store_configurations*/
          (_b = (_a = ctx[1]) == null ? void 0 : _a.appearance) == null ? void 0 : _b.checkoutButtons.primary
        ));
        button.disabled = button_disabled_value = /*note*/
        ((_c = ctx[0]) == null ? void 0 : _c.trim().length) === 0;
        attr(button, "class", "svelte-gs9oo");
        attr(div, "class", "order-note-area svelte-gs9oo");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, textarea);
        set_input_value(
          textarea,
          /*note*/
          ctx[0]
        );
        append(div, t0);
        append(div, button);
        append(button, t1);
        if (!mounted) {
          dispose = [
            listen(
              textarea,
              "input",
              /*textarea_input_handler*/
              ctx[3]
            ),
            listen(
              button,
              "click",
              /*handleSubmit*/
              ctx[2]
            )
          ];
          mounted = true;
        }
      },
      p(ctx2, [dirty]) {
        var _a, _b, _c;
        if (dirty & /*note*/
        1) {
          set_input_value(
            textarea,
            /*note*/
            ctx2[0]
          );
        }
        if (dirty & /*$store_configurations*/
        2 && button_style_value !== (button_style_value = getStyleObject(
          /*$store_configurations*/
          (_b = (_a = ctx2[1]) == null ? void 0 : _a.appearance) == null ? void 0 : _b.checkoutButtons.primary
        ))) {
          attr(button, "style", button_style_value);
        }
        if (dirty & /*note*/
        1 && button_disabled_value !== (button_disabled_value = /*note*/
        ((_c = ctx2[0]) == null ? void 0 : _c.trim().length) === 0)) {
          button.disabled = button_disabled_value;
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        mounted = false;
        run_all(dispose);
      }
    };
  }
  function instance$c($$self, $$props, $$invalidate) {
    let $store_cart;
    let $store_configurations;
    component_subscribe($$self, store_cart, ($$value) => $$invalidate(4, $store_cart = $$value));
    component_subscribe($$self, store_configurations, ($$value) => $$invalidate(1, $store_configurations = $$value));
    let note = "";
    const handleSubmit = async () => {
      fireGokwikTrigger(
        $store_cart.note ? "order_notes_edited_sc" : "order_notes_added_sc",
        {}
      );
      logEvent(
        $store_cart.note ? "order_notes_edited_sc" : "order_notes_added_sc",
        {}
      );
      await updateCart({ note });
      store_bottomSheet.set({
        show: false,
        component: null,
        title: "",
        type: ""
      });
    };
    onMount(() => {
      store_cart.subscribe((res) => $$invalidate(0, note = res.note));
    });
    function textarea_input_handler() {
      note = this.value;
      $$invalidate(0, note);
    }
    return [note, $store_configurations, handleSubmit, textarea_input_handler];
  }
  class OrderNotePopup extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$c, create_fragment$c, safe_not_equal, {}, add_css$b);
    }
  }
  function add_css$a(target) {
    append_styles(target, "svelte-1a1nfg5", ".order-note-wrap.svelte-1a1nfg5.svelte-1a1nfg5{margin:8px;padding:10px 8px;border-radius:12px;background:#fff;border:1px solid var(--Gray-Neutral-200, #e5e7eb);background-color:#fff;position:relative}.order-note-wrap.svelte-1a1nfg5 .order-note-text.svelte-1a1nfg5{max-width:86%}.order-note-wrap.svelte-1a1nfg5 .edit-icon.svelte-1a1nfg5{position:absolute;right:10px;height:16px;cursor:pointer;top:10px;z-index:10;display:flex}.order-note-wrap.svelte-1a1nfg5 .edit-icon .delete.svelte-1a1nfg5{margin-left:10px}.order-note-wrap.svelte-1a1nfg5 p.svelte-1a1nfg5{font-size:14px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:block;display:-webkit-box;line-clamp:1;box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.order-note.svelte-1a1nfg5.svelte-1a1nfg5{color:var(--gokwik-primary-color);font-weight:bold;text-decoration:underline;text-align:center;margin-bottom:0.2rem;cursor:pointer}.order-note.svelte-1a1nfg5 p.svelte-1a1nfg5{font-size:14px;overflow-wrap:break-word}.responsive-padding-bottom.svelte-1a1nfg5.svelte-1a1nfg5{padding-bottom:5px}@media(max-width: 395px){.responsive-padding-bottom.svelte-1a1nfg5.svelte-1a1nfg5{padding-bottom:10px}}.mb-15.svelte-1a1nfg5.svelte-1a1nfg5{margin-bottom:15px}");
  }
  function create_if_block$9(ctx) {
    let current_block_type_index;
    let if_block;
    let if_block_anchor;
    let current;
    const if_block_creators = [create_if_block_1$7, create_else_block$4];
    const if_blocks = [];
    function select_block_type(ctx2, dirty) {
      if (
        /*$store_cart*/
        ctx2[1].note
      )
        return 0;
      return 1;
    }
    current_block_type_index = select_block_type(ctx);
    if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
    return {
      c() {
        if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if_blocks[current_block_type_index].m(target, anchor);
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        let previous_block_index = current_block_type_index;
        current_block_type_index = select_block_type(ctx2);
        if (current_block_type_index === previous_block_index) {
          if_blocks[current_block_type_index].p(ctx2, dirty);
        } else {
          group_outros();
          transition_out(if_blocks[previous_block_index], 1, 1, () => {
            if_blocks[previous_block_index] = null;
          });
          check_outros();
          if_block = if_blocks[current_block_type_index];
          if (!if_block) {
            if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
            if_block.c();
          } else {
            if_block.p(ctx2, dirty);
          }
          transition_in(if_block, 1);
          if_block.m(if_block_anchor.parentNode, if_block_anchor);
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if_blocks[current_block_type_index].d(detaching);
      }
    };
  }
  function create_else_block$4(ctx) {
    var _a, _b;
    let div;
    let p;
    let raw_value = (
      /*$store_configurations*/
      (((_b = (_a = ctx[0]) == null ? void 0 : _a.orderNotes) == null ? void 0 : _b.title) || "Add Special Instructions") + ""
    );
    let mounted;
    let dispose;
    return {
      c() {
        var _a2, _b2, _c;
        div = element("div");
        p = element("p");
        attr(p, "class", "svelte-1a1nfg5");
        attr(div, "class", "order-note svelte-1a1nfg5");
        toggle_class(
          div,
          "responsive-padding-bottom",
          /*$store_hideUpsellFlow*/
          ctx[2]
        );
        toggle_class(
          div,
          "mb-15",
          /*$store_hideUpsellFlow*/
          ctx[2] && /*$store_totalSavings*/
          ctx[3] && /*$store_configurations*/
          ((_c = (_b2 = (_a2 = ctx[0]) == null ? void 0 : _a2.appearance) == null ? void 0 : _b2.savingsBanner) == null ? void 0 : _c.enable)
        );
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, p);
        p.innerHTML = raw_value;
        if (!mounted) {
          dispose = listen(
            div,
            "click",
            /*click_handler_2*/
            ctx[7]
          );
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c, _d, _e;
        if (dirty & /*$store_configurations*/
        1 && raw_value !== (raw_value = /*$store_configurations*/
        (((_b2 = (_a2 = ctx2[0]) == null ? void 0 : _a2.orderNotes) == null ? void 0 : _b2.title) || "Add Special Instructions") + ""))
          p.innerHTML = raw_value;
        if (dirty & /*$store_hideUpsellFlow*/
        4) {
          toggle_class(
            div,
            "responsive-padding-bottom",
            /*$store_hideUpsellFlow*/
            ctx2[2]
          );
        }
        if (dirty & /*$store_hideUpsellFlow, $store_totalSavings, $store_configurations*/
        13) {
          toggle_class(
            div,
            "mb-15",
            /*$store_hideUpsellFlow*/
            ctx2[2] && /*$store_totalSavings*/
            ctx2[3] && /*$store_configurations*/
            ((_e = (_d = (_c = ctx2[0]) == null ? void 0 : _c.appearance) == null ? void 0 : _d.savingsBanner) == null ? void 0 : _e.enable)
          );
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block_1$7(ctx) {
    let div3;
    let p;
    let b;
    let t1;
    let t2_value = (
      /*$store_cart*/
      ctx[1].note + ""
    );
    let t2;
    let t3;
    let div2;
    let div0;
    let icon0;
    let t4;
    let div1;
    let icon1;
    let current;
    let mounted;
    let dispose;
    icon0 = new Icon({
      props: { height: "14px", icon: "fa-solid:edit" }
    });
    icon1 = new Icon({
      props: {
        icon: "material-symbols:delete",
        height: "16px"
      }
    });
    return {
      c() {
        var _a, _b, _c;
        div3 = element("div");
        p = element("p");
        b = element("b");
        b.textContent = "Order Note:";
        t1 = space();
        t2 = text(t2_value);
        t3 = space();
        div2 = element("div");
        div0 = element("div");
        create_component(icon0.$$.fragment);
        t4 = space();
        div1 = element("div");
        create_component(icon1.$$.fragment);
        attr(p, "class", "order-note-text svelte-1a1nfg5");
        attr(div0, "class", "edit");
        attr(div1, "class", "delete svelte-1a1nfg5");
        attr(div2, "class", "edit-icon svelte-1a1nfg5");
        attr(div3, "class", "order-note-wrap svelte-1a1nfg5");
        toggle_class(
          div3,
          "mb-15",
          /*$store_hideUpsellFlow*/
          ctx[2] && /*$store_totalSavings*/
          ctx[3] && /*$store_configurations*/
          ((_c = (_b = (_a = ctx[0]) == null ? void 0 : _a.appearance) == null ? void 0 : _b.savingsBanner) == null ? void 0 : _c.enable)
        );
      },
      m(target, anchor) {
        insert(target, div3, anchor);
        append(div3, p);
        append(p, b);
        append(p, t1);
        append(p, t2);
        append(div3, t3);
        append(div3, div2);
        append(div2, div0);
        mount_component(icon0, div0, null);
        append(div2, t4);
        append(div2, div1);
        mount_component(icon1, div1, null);
        current = true;
        if (!mounted) {
          dispose = [
            listen(
              div0,
              "click",
              /*click_handler*/
              ctx[5]
            ),
            listen(
              div1,
              "click",
              /*click_handler_1*/
              ctx[6]
            )
          ];
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        var _a, _b, _c;
        if ((!current || dirty & /*$store_cart*/
        2) && t2_value !== (t2_value = /*$store_cart*/
        ctx2[1].note + ""))
          set_data(t2, t2_value);
        if (!current || dirty & /*$store_hideUpsellFlow, $store_totalSavings, $store_configurations*/
        13) {
          toggle_class(
            div3,
            "mb-15",
            /*$store_hideUpsellFlow*/
            ctx2[2] && /*$store_totalSavings*/
            ctx2[3] && /*$store_configurations*/
            ((_c = (_b = (_a = ctx2[0]) == null ? void 0 : _a.appearance) == null ? void 0 : _b.savingsBanner) == null ? void 0 : _c.enable)
          );
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(icon0.$$.fragment, local);
        transition_in(icon1.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon0.$$.fragment, local);
        transition_out(icon1.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div3);
        }
        destroy_component(icon0);
        destroy_component(icon1);
        mounted = false;
        run_all(dispose);
      }
    };
  }
  function create_fragment$b(ctx) {
    var _a, _b;
    let if_block_anchor;
    let current;
    let if_block = (
      /*$store_configurations*/
      ((_b = (_a = ctx[0]) == null ? void 0 : _a.orderNotes) == null ? void 0 : _b.enable) && create_if_block$9(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, [dirty]) {
        var _a2, _b2;
        if (
          /*$store_configurations*/
          (_b2 = (_a2 = ctx2[0]) == null ? void 0 : _a2.orderNotes) == null ? void 0 : _b2.enable
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
            if (dirty & /*$store_configurations*/
            1) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block$9(ctx2);
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function instance$b($$self, $$props, $$invalidate) {
    let $store_configurations;
    let $store_cart;
    let $store_hideUpsellFlow;
    let $store_totalSavings;
    component_subscribe($$self, store_configurations, ($$value) => $$invalidate(0, $store_configurations = $$value));
    component_subscribe($$self, store_cart, ($$value) => $$invalidate(1, $store_cart = $$value));
    component_subscribe($$self, store_hideUpsellFlow, ($$value) => $$invalidate(2, $store_hideUpsellFlow = $$value));
    component_subscribe($$self, store_totalSavings, ($$value) => $$invalidate(3, $store_totalSavings = $$value));
    const openOrderNotePopup = () => {
      fireGokwikTrigger("order_notes_clicked_sc", {});
      logEvent("order_notes_clicked_sc", {});
      store_bottomSheet.set({
        show: true,
        component: OrderNotePopup,
        type: "order_note",
        title: "Add Note"
      });
    };
    const click_handler2 = () => openOrderNotePopup();
    const click_handler_1 = () => {
      fireGokwikTrigger("order_notes_removed_sc", {});
      logEvent("order_notes_removed_sc", {});
      updateCart({ note: "" });
    };
    const click_handler_2 = () => openOrderNotePopup();
    return [
      $store_configurations,
      $store_cart,
      $store_hideUpsellFlow,
      $store_totalSavings,
      openOrderNotePopup,
      click_handler2,
      click_handler_1,
      click_handler_2
    ];
  }
  class OrderNote extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$b, create_fragment$b, safe_not_equal, {}, add_css$a);
    }
  }
  function get_each_context$3(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[4] = list[i];
    return child_ctx;
  }
  function create_each_block$3(ctx) {
    let producttile;
    let current;
    producttile = new ProductTile({
      props: {
        item: (
          /*variant*/
          ctx[4]
        ),
        upsellComponent: true
      }
    });
    return {
      c() {
        create_component(producttile.$$.fragment);
      },
      m(target, anchor) {
        mount_component(producttile, target, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        const producttile_changes = {};
        if (dirty & /*transformedVariants*/
        1)
          producttile_changes.item = /*variant*/
          ctx2[4];
        producttile.$set(producttile_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(producttile.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(producttile.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(producttile, detaching);
      }
    };
  }
  function create_fragment$a(ctx) {
    let div;
    let current;
    let each_value = ensure_array_like(
      /*transformedVariants*/
      ctx[0]
    );
    let each_blocks = [];
    for (let i = 0; i < each_value.length; i += 1) {
      each_blocks[i] = create_each_block$3(get_each_context$3(ctx, each_value, i));
    }
    const out = (i) => transition_out(each_blocks[i], 1, 1, () => {
      each_blocks[i] = null;
    });
    return {
      c() {
        div = element("div");
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        attr(div, "class", "variant-list");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(div, null);
          }
        }
        current = true;
      },
      p(ctx2, [dirty]) {
        if (dirty & /*transformedVariants*/
        1) {
          each_value = ensure_array_like(
            /*transformedVariants*/
            ctx2[0]
          );
          let i;
          for (i = 0; i < each_value.length; i += 1) {
            const child_ctx = get_each_context$3(ctx2, each_value, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
              transition_in(each_blocks[i], 1);
            } else {
              each_blocks[i] = create_each_block$3(child_ctx);
              each_blocks[i].c();
              transition_in(each_blocks[i], 1);
              each_blocks[i].m(div, null);
            }
          }
          group_outros();
          for (i = each_value.length; i < each_blocks.length; i += 1) {
            out(i);
          }
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        for (let i = 0; i < each_value.length; i += 1) {
          transition_in(each_blocks[i]);
        }
        current = true;
      },
      o(local) {
        each_blocks = each_blocks.filter(Boolean);
        for (let i = 0; i < each_blocks.length; i += 1) {
          transition_out(each_blocks[i]);
        }
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_each(each_blocks, detaching);
      }
    };
  }
  function instance$a($$self, $$props, $$invalidate) {
    let { availableVariants } = $$props;
    let { product } = $$props;
    let transformedVariants = [];
    onMount(() => {
      transformKeys();
    });
    const transformKeys = () => {
      return $$invalidate(0, transformedVariants = availableVariants.map((variant) => {
        return {
          ...variant,
          variant_options: variant.variantName.split("/"),
          product_title: product.productName,
          image: variant.imageUrl,
          quantity: 1,
          id: variant.variantId,
          handle: product.handle,
          url: product.url ? product.url : `/products/${product.handle}?variant=${cleanShopifyIds(variant.variantId)}`
        };
      }));
    };
    $$self.$$set = ($$props2) => {
      if ("availableVariants" in $$props2)
        $$invalidate(1, availableVariants = $$props2.availableVariants);
      if ("product" in $$props2)
        $$invalidate(2, product = $$props2.product);
    };
    return [transformedVariants, availableVariants, product];
  }
  class UpsellVariantList extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$a, create_fragment$a, safe_not_equal, { availableVariants: 1, product: 2 });
    }
  }
  function add_css$9(target) {
    append_styles(target, "svelte-176ttbg", ".clickable.svelte-176ttbg.svelte-176ttbg{cursor:pointer}.card.svelte-176ttbg.svelte-176ttbg{padding:0.5rem;flex-shrink:0;display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;border-radius:10px;border:1px solid var(--Gray-Neutral-200, #e5e7eb);background:var(--Base-White, #fff);box-sizing:border-box}.product-image.svelte-176ttbg.svelte-176ttbg{height:auto;width:80px;border-radius:5px;max-height:85px}.card-right-container.svelte-176ttbg.svelte-176ttbg{font-size:14px;font-weight:400;padding:0px 8px 0 0;color:var(--Brand-900, #00192f);width:100%;display:grid;margin-left:16px}.price.svelte-176ttbg.svelte-176ttbg{margin:8px 0;font-weight:bold;max-width:5.6rem}.price.svelte-176ttbg strike.svelte-176ttbg{color:var(--Gray-Neutral-300, #d2d6db);font-weight:500}.add-btn.svelte-176ttbg.svelte-176ttbg{border-radius:8px;height:25px;border:1px solid var(--gokwik-primary-color);background:transparent;cursor:pointer}.out-of-stock.svelte-176ttbg.svelte-176ttbg{opacity:0.3}.product-name.svelte-176ttbg.svelte-176ttbg{margin:0;min-height:32px;max-width:5.6rem;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;display:block;display:-webkit-box;line-clamp:2;box-orient:vertical;overflow:hidden;text-overflow:ellipsis}.discount-banner.svelte-176ttbg.svelte-176ttbg{background:var(--Teal-500, #15b79e);font-size:11px;font-weight:bold;border-radius:5px;text-align:center;padding:2px 0}.card-left-container.svelte-176ttbg.svelte-176ttbg{height:100%;width:100%;display:flex;flex-direction:column;justify-content:space-between}.product-title-button.svelte-176ttbg.svelte-176ttbg{background:none;border:none;color:inherit;font:inherit;text-align:left;cursor:pointer;padding:0;text-decoration:none;transition:color 0.2s ease}.product-title-button.no-pointer.svelte-176ttbg.svelte-176ttbg{pointer-events:none;cursor:default}");
  }
  function create_if_block_2$3(ctx) {
    let div;
    let t0_value = (
      /*compareAtPrice*/
      ((ctx[3] - /*price*/
      ctx[1]) / /*compareAtPrice*/
      ctx[3] * 100).toFixed(0) + ""
    );
    let t0;
    let t1;
    return {
      c() {
        div = element("div");
        t0 = text(t0_value);
        t1 = text("% off");
        attr(div, "class", "discount-banner svelte-176ttbg");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, t0);
        append(div, t1);
      },
      p(ctx2, dirty) {
        if (dirty & /*compareAtPrice, price*/
        10 && t0_value !== (t0_value = /*compareAtPrice*/
        ((ctx2[3] - /*price*/
        ctx2[1]) / /*compareAtPrice*/
        ctx2[3] * 100).toFixed(0) + ""))
          set_data(t0, t0_value);
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
      }
    };
  }
  function create_default_slot$1(ctx) {
    let p;
    let t;
    let mounted;
    let dispose;
    return {
      c() {
        p = element("p");
        t = text(
          /*productName*/
          ctx[0]
        );
        attr(p, "class", "product-name svelte-176ttbg");
        toggle_class(p, "clickable", !/*isProductNotClickable*/
        ctx[8]);
      },
      m(target, anchor) {
        insert(target, p, anchor);
        append(p, t);
        if (!mounted) {
          dispose = listen(p, "click", stop_propagation(
            /*handleProductTitleClick*/
            ctx[7]
          ));
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        if (dirty & /*productName*/
        1)
          set_data(
            t,
            /*productName*/
            ctx2[0]
          );
      },
      d(detaching) {
        if (detaching) {
          detach(p);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block_1$6(ctx) {
    let strike;
    let t_value = formatCurrencyDisplay(
      /*compareAtPrice*/
      ctx[3]
    ) + "";
    let t;
    return {
      c() {
        strike = element("strike");
        t = text(t_value);
        attr(strike, "class", "svelte-176ttbg");
      },
      m(target, anchor) {
        insert(target, strike, anchor);
        append(strike, t);
      },
      p(ctx2, dirty) {
        if (dirty & /*compareAtPrice*/
        8 && t_value !== (t_value = formatCurrencyDisplay(
          /*compareAtPrice*/
          ctx2[3]
        ) + ""))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(strike);
        }
      }
    };
  }
  function create_else_block$3(ctx) {
    let button;
    let mounted;
    let dispose;
    return {
      c() {
        button = element("button");
        button.textContent = "+ Add";
        attr(button, "class", "add-btn svelte-176ttbg");
      },
      m(target, anchor) {
        insert(target, button, anchor);
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*click_handler*/
            ctx[13]
          );
          mounted = true;
        }
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block$8(ctx) {
    let button;
    return {
      c() {
        button = element("button");
        button.textContent = "Out Of Stock";
        attr(button, "class", "add-btn out-of-stock svelte-176ttbg");
      },
      m(target, anchor) {
        insert(target, button, anchor);
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(button);
        }
      }
    };
  }
  function create_key_block$1(ctx) {
    let if_block_anchor;
    function select_block_type(ctx2, dirty) {
      if (
        /*isProductOOS*/
        ctx2[6]()
      )
        return create_if_block$8;
      return create_else_block$3;
    }
    let current_block_type = select_block_type(ctx);
    let if_block = current_block_type(ctx);
    return {
      c() {
        if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
      },
      p(ctx2, dirty) {
        if_block.p(ctx2, dirty);
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if_block.d(detaching);
      }
    };
  }
  function create_fragment$9(ctx) {
    let div2;
    let button;
    let div0;
    let img;
    let img_src_value;
    let t0;
    let t1;
    let div1;
    let tooltip;
    let t2;
    let p;
    let t3;
    let br;
    let t4;
    let span;
    let t5_value = formatCurrencyDisplay(
      /*price*/
      ctx[1]
    ) + "";
    let t5;
    let t6;
    let previous_key = (
      /*$store_variantAvailabilityMap*/
      ctx[4]
    );
    let current;
    let mounted;
    let dispose;
    let if_block0 = (+/*compareAtPrice*/
    ctx[3] || 0) && (+/*compareAtPrice*/
    ctx[3] || 0) > (+/*price*/
    ctx[1] || 0) && create_if_block_2$3(ctx);
    tooltip = new Tooltip({
      props: {
        title: (
          /*productName*/
          ctx[0]
        ),
        $$slots: { default: [create_default_slot$1] },
        $$scope: { ctx }
      }
    });
    let if_block1 = (+/*compareAtPrice*/
    ctx[3] || 0) && (+/*compareAtPrice*/
    ctx[3] || 0) > (+/*price*/
    ctx[1] || 0) && create_if_block_1$6(ctx);
    let key_block = create_key_block$1(ctx);
    return {
      c() {
        div2 = element("div");
        button = element("button");
        div0 = element("div");
        img = element("img");
        t0 = space();
        if (if_block0)
          if_block0.c();
        t1 = space();
        div1 = element("div");
        create_component(tooltip.$$.fragment);
        t2 = space();
        p = element("p");
        if (if_block1)
          if_block1.c();
        t3 = space();
        br = element("br");
        t4 = space();
        span = element("span");
        t5 = text(t5_value);
        t6 = space();
        key_block.c();
        if (!src_url_equal(img.src, img_src_value = /*imageUrl*/
        ctx[2]))
          attr(img, "src", img_src_value);
        attr(
          img,
          "alt",
          /*productName*/
          ctx[0]
        );
        attr(img, "class", "product-image svelte-176ttbg");
        attr(div0, "class", "card-left-container svelte-176ttbg");
        attr(button, "class", "product-title-button svelte-176ttbg");
        attr(button, "type", "button");
        toggle_class(
          button,
          "no-pointer",
          /*isProductNotClickable*/
          ctx[8]
        );
        attr(p, "class", "price svelte-176ttbg");
        attr(div1, "class", "card-right-container svelte-176ttbg");
        attr(div2, "class", "card svelte-176ttbg");
      },
      m(target, anchor) {
        insert(target, div2, anchor);
        append(div2, button);
        append(button, div0);
        append(div0, img);
        append(div0, t0);
        if (if_block0)
          if_block0.m(div0, null);
        append(div2, t1);
        append(div2, div1);
        mount_component(tooltip, div1, null);
        append(div1, t2);
        append(div1, p);
        if (if_block1)
          if_block1.m(p, null);
        append(p, t3);
        append(p, br);
        append(p, t4);
        append(p, span);
        append(span, t5);
        append(div1, t6);
        key_block.m(div1, null);
        current = true;
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*handleProductTitleClick*/
            ctx[7]
          );
          mounted = true;
        }
      },
      p(ctx2, [dirty]) {
        if (!current || dirty & /*imageUrl*/
        4 && !src_url_equal(img.src, img_src_value = /*imageUrl*/
        ctx2[2])) {
          attr(img, "src", img_src_value);
        }
        if (!current || dirty & /*productName*/
        1) {
          attr(
            img,
            "alt",
            /*productName*/
            ctx2[0]
          );
        }
        if ((+/*compareAtPrice*/
        ctx2[3] || 0) && (+/*compareAtPrice*/
        ctx2[3] || 0) > (+/*price*/
        ctx2[1] || 0)) {
          if (if_block0) {
            if_block0.p(ctx2, dirty);
          } else {
            if_block0 = create_if_block_2$3(ctx2);
            if_block0.c();
            if_block0.m(div0, null);
          }
        } else if (if_block0) {
          if_block0.d(1);
          if_block0 = null;
        }
        const tooltip_changes = {};
        if (dirty & /*productName*/
        1)
          tooltip_changes.title = /*productName*/
          ctx2[0];
        if (dirty & /*$$scope, productName*/
        32769) {
          tooltip_changes.$$scope = { dirty, ctx: ctx2 };
        }
        tooltip.$set(tooltip_changes);
        if ((+/*compareAtPrice*/
        ctx2[3] || 0) && (+/*compareAtPrice*/
        ctx2[3] || 0) > (+/*price*/
        ctx2[1] || 0)) {
          if (if_block1) {
            if_block1.p(ctx2, dirty);
          } else {
            if_block1 = create_if_block_1$6(ctx2);
            if_block1.c();
            if_block1.m(p, t3);
          }
        } else if (if_block1) {
          if_block1.d(1);
          if_block1 = null;
        }
        if ((!current || dirty & /*price*/
        2) && t5_value !== (t5_value = formatCurrencyDisplay(
          /*price*/
          ctx2[1]
        ) + ""))
          set_data(t5, t5_value);
        if (dirty & /*$store_variantAvailabilityMap*/
        16 && safe_not_equal(previous_key, previous_key = /*$store_variantAvailabilityMap*/
        ctx2[4])) {
          key_block.d(1);
          key_block = create_key_block$1(ctx2);
          key_block.c();
          key_block.m(div1, null);
        } else {
          key_block.p(ctx2, dirty);
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(tooltip.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(tooltip.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div2);
        }
        if (if_block0)
          if_block0.d();
        destroy_component(tooltip);
        if (if_block1)
          if_block1.d();
        key_block.d(detaching);
        mounted = false;
        dispose();
      }
    };
  }
  function instance$9($$self, $$props, $$invalidate) {
    var _a, _b, _c, _d;
    let $store_configurations;
    let $store_variantAvailabilityMap;
    component_subscribe($$self, store_configurations, ($$value) => $$invalidate(14, $store_configurations = $$value));
    component_subscribe($$self, store_variantAvailabilityMap, ($$value) => $$invalidate(4, $store_variantAvailabilityMap = $$value));
    let { productName } = $$props;
    let { price } = $$props;
    let { imageUrl } = $$props;
    let { availableVariants } = $$props;
    let { compareAtPrice } = $$props;
    let { properties } = $$props;
    let { handle } = $$props;
    let { url } = $$props;
    const openBottomSheet = () => {
      var _a2, _b2, _c2, _d2, _e;
      if ((availableVariants == null ? void 0 : availableVariants.length) > 1) {
        store_bottomSheet.set({
          type: "upsell",
          title: "Select Variant",
          component: UpsellVariantList,
          componentData: {
            availableVariants,
            product: {
              productName,
              price,
              imageUrl,
              compareAtPrice,
              handle,
              url
            }
          },
          show: true
        });
      } else if ((availableVariants == null ? void 0 : availableVariants.length) === 1) {
        fireGokwikTrigger("upsell_added_sc", {
          id: cleanShopifyIds((_a2 = availableVariants == null ? void 0 : availableVariants[0]) == null ? void 0 : _a2.variantId),
          quantity: 1,
          price: (_b2 = availableVariants == null ? void 0 : availableVariants[0]) == null ? void 0 : _b2.price
        });
        logEvent("upsell_added_sc", {
          id: cleanShopifyIds((_c2 = availableVariants == null ? void 0 : availableVariants[0]) == null ? void 0 : _c2.variantId),
          quantity: 1,
          price: (_d2 = availableVariants == null ? void 0 : availableVariants[0]) == null ? void 0 : _d2.price
        });
        addToCart(
          {
            id: cleanShopifyIds((_e = availableVariants == null ? void 0 : availableVariants[0]) == null ? void 0 : _e.variantId),
            quantity: 1,
            properties: getUpsellProperties({}, true)
          },
          false
        );
      }
    };
    const isProductOOS = () => {
      return availableVariants.every((variant) => !isVariantAvailable(variant.variantId));
    };
    const handleProductTitleClick = async (event) => {
      var _a2, _b2, _c2, _d2, _e;
      event.stopPropagation();
      if (isProductNotClickable) {
        return;
      }
      const item = availableVariants == null ? void 0 : availableVariants[0];
      const transformedItem = {
        ...item,
        product_title: productName,
        handle,
        url: url ? url : `/products/${handle}?variant=${cleanShopifyIds(item == null ? void 0 : item.variantId)}`
      };
      if (((_b2 = (_a2 = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _a2.productClickBehavior) == null ? void 0 : _b2.type) === "showDescriptionModal") {
        store_apiLoader.set(true);
        const itemData = await getProductData(handle);
        if ((itemData == null ? void 0 : itemData.images) && ((_c2 = itemData == null ? void 0 : itemData.images) == null ? void 0 : _c2.length) > 1) {
          itemData.images.forEach((image) => {
            const img = new Image();
            img.src = image;
          });
        } else {
          const imageSrc = (item == null ? void 0 : item.imageUrl) || (itemData == null ? void 0 : itemData.featured_image);
          if (imageSrc) {
            const img = new Image();
            img.src = imageSrc;
          }
        }
        store_bottomSheet.set({
          show: true,
          title: "Product Details",
          type: "product-popup",
          component: ProductPopUp,
          componentData: {
            item: transformedItem,
            upsellComponent: true,
            itemData
          }
        });
        store_apiLoader.set(false);
      } else if (((_e = (_d2 = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _d2.productClickBehavior) == null ? void 0 : _e.type) === "redirect") {
        if (url) {
          window.location.href = url;
        } else {
          window.location.href = `${window.location.origin}/products/${handle}?variant=${cleanShopifyIds(item == null ? void 0 : item.variantId)}`;
        }
      }
      if (!isProductNotClickable) {
        fireGokwikTrigger("upsell_list_product_clicked", { variant_id: item == null ? void 0 : item.variantId });
        logEvent("upsell_list_product_clicked", { variant_id: item == null ? void 0 : item.variantId });
      }
    };
    const isProductNotClickable = ((_b = (_a = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _a.productClickBehavior) == null ? void 0 : _b.type) === "default" || !((_d = (_c = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _c.productClickBehavior) == null ? void 0 : _d.type) || !availableVariants || availableVariants.length === 0;
    const click_handler2 = () => openBottomSheet();
    $$self.$$set = ($$props2) => {
      if ("productName" in $$props2)
        $$invalidate(0, productName = $$props2.productName);
      if ("price" in $$props2)
        $$invalidate(1, price = $$props2.price);
      if ("imageUrl" in $$props2)
        $$invalidate(2, imageUrl = $$props2.imageUrl);
      if ("availableVariants" in $$props2)
        $$invalidate(9, availableVariants = $$props2.availableVariants);
      if ("compareAtPrice" in $$props2)
        $$invalidate(3, compareAtPrice = $$props2.compareAtPrice);
      if ("properties" in $$props2)
        $$invalidate(10, properties = $$props2.properties);
      if ("handle" in $$props2)
        $$invalidate(11, handle = $$props2.handle);
      if ("url" in $$props2)
        $$invalidate(12, url = $$props2.url);
    };
    return [
      productName,
      price,
      imageUrl,
      compareAtPrice,
      $store_variantAvailabilityMap,
      openBottomSheet,
      isProductOOS,
      handleProductTitleClick,
      isProductNotClickable,
      availableVariants,
      properties,
      handle,
      url,
      click_handler2
    ];
  }
  class UpsellProductTile extends SvelteComponent {
    constructor(options) {
      super();
      init(
        this,
        options,
        instance$9,
        create_fragment$9,
        safe_not_equal,
        {
          productName: 0,
          price: 1,
          imageUrl: 2,
          availableVariants: 9,
          compareAtPrice: 3,
          properties: 10,
          handle: 11,
          url: 12
        },
        add_css$9
      );
    }
  }
  function add_css$8(target) {
    append_styles(target, "svelte-bmzzto", ".scroll-container.svelte-bmzzto{display:flex;overflow-x:auto;padding:10px 0px;gap:1rem;align-items:flex-start;scroll-snap-type:x mandatory}.title.svelte-bmzzto{color:var(--Brand-900, #00192f);font-size:16px;font-weight:600}.upSell-container.svelte-bmzzto{margin:10px;padding:10px;border-radius:12px;background:#fff;border:1px solid var(--Gray-Neutral-200, #e5e7eb);background-color:#fff}.mb-15.svelte-bmzzto{margin-bottom:15px}");
  }
  function get_each_context$2(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[18] = list[i];
    return child_ctx;
  }
  function create_if_block$7(ctx) {
    var _a;
    let div1;
    let span;
    let raw_value = (
      /*upsellStyling*/
      ((_a = ctx[2]) == null ? void 0 : _a.titleText) + ""
    );
    let span_style_value;
    let t;
    let div0;
    let each_blocks = [];
    let each_1_lookup = /* @__PURE__ */ new Map();
    let div1_style_value;
    let current;
    let each_value = ensure_array_like(
      /*upSellProducts*/
      ctx[1] ?? []
    );
    const get_key = (ctx2) => {
      var _a2, _b;
      return (
        /*product*/
        ((_a2 = ctx2[18]) == null ? void 0 : _a2.productId) || /*product*/
        ((_b = ctx2[18]) == null ? void 0 : _b.handle)
      );
    };
    for (let i = 0; i < each_value.length; i += 1) {
      let child_ctx = get_each_context$2(ctx, each_value, i);
      let key = get_key(child_ctx);
      each_1_lookup.set(key, each_blocks[i] = create_each_block$2(key, child_ctx));
    }
    return {
      c() {
        var _a2, _b, _c;
        div1 = element("div");
        span = element("span");
        t = space();
        div0 = element("div");
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        attr(span, "style", span_style_value = getStyleObject(
          /*upsellStyling*/
          ctx[2]
        ));
        attr(span, "class", "title svelte-bmzzto");
        attr(div0, "class", "scroll-container svelte-bmzzto");
        attr(div1, "style", div1_style_value = getStyleObject(
          /*upsellStyling*/
          ctx[2]
        ));
        attr(div1, "class", "upSell-container svelte-bmzzto");
        toggle_class(
          div1,
          "mb-15",
          /*$store_totalSavings*/
          ctx[4] && /*$store_configurations*/
          ((_c = (_b = (_a2 = ctx[5]) == null ? void 0 : _a2.appearance) == null ? void 0 : _b.savingsBanner) == null ? void 0 : _c.enable)
        );
      },
      m(target, anchor) {
        insert(target, div1, anchor);
        append(div1, span);
        span.innerHTML = raw_value;
        append(div1, t);
        append(div1, div0);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(div0, null);
          }
        }
        current = true;
      },
      p(ctx2, dirty) {
        var _a2, _b, _c, _d;
        if ((!current || dirty & /*upsellStyling*/
        4) && raw_value !== (raw_value = /*upsellStyling*/
        ((_a2 = ctx2[2]) == null ? void 0 : _a2.titleText) + ""))
          span.innerHTML = raw_value;
        if (!current || dirty & /*upsellStyling*/
        4 && span_style_value !== (span_style_value = getStyleObject(
          /*upsellStyling*/
          ctx2[2]
        ))) {
          attr(span, "style", span_style_value);
        }
        if (dirty & /*$store_productDetails, upSellProducts, filterOOSVariants, isProductOOS*/
        450) {
          each_value = ensure_array_like(
            /*upSellProducts*/
            ctx2[1] ?? []
          );
          group_outros();
          each_blocks = update_keyed_each(each_blocks, dirty, get_key, 1, ctx2, each_value, each_1_lookup, div0, outro_and_destroy_block, create_each_block$2, null, get_each_context$2);
          check_outros();
        }
        if (!current || dirty & /*upsellStyling*/
        4 && div1_style_value !== (div1_style_value = getStyleObject(
          /*upsellStyling*/
          ctx2[2]
        ))) {
          attr(div1, "style", div1_style_value);
        }
        if (!current || dirty & /*$store_totalSavings, $store_configurations*/
        48) {
          toggle_class(
            div1,
            "mb-15",
            /*$store_totalSavings*/
            ctx2[4] && /*$store_configurations*/
            ((_d = (_c = (_b = ctx2[5]) == null ? void 0 : _b.appearance) == null ? void 0 : _c.savingsBanner) == null ? void 0 : _d.enable)
          );
        }
      },
      i(local) {
        if (current)
          return;
        for (let i = 0; i < each_value.length; i += 1) {
          transition_in(each_blocks[i]);
        }
        current = true;
      },
      o(local) {
        for (let i = 0; i < each_blocks.length; i += 1) {
          transition_out(each_blocks[i]);
        }
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div1);
        }
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].d();
        }
      }
    };
  }
  function create_if_block_1$5(ctx) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    let upsellproducttile;
    let current;
    upsellproducttile = new UpsellProductTile({
      props: {
        productName: (
          /*product*/
          ctx[18].productName
        ),
        price: (
          /*product*/
          (_b = (_a = ctx[18].selectedVariants) == null ? void 0 : _a[0]) == null ? void 0 : _b.price
        ),
        imageUrl: (
          /*product*/
          (_d = (_c = ctx[18].selectedVariants) == null ? void 0 : _c[0]) == null ? void 0 : _d.imageUrl
        ),
        availableVariants: (
          /*filterOOSVariants*/
          ctx[8](
            /*product*/
            ctx[18].selectedVariants
          )
        ),
        compareAtPrice: (
          /*product*/
          (_f = (_e = ctx[18].selectedVariants) == null ? void 0 : _e[0]) == null ? void 0 : _f.compareAtPrice
        ),
        properties: (
          /*product*/
          (_h = (_g = ctx[18].selectedVariants) == null ? void 0 : _g[0]) == null ? void 0 : _h.properties
        ),
        handle: (
          /*product*/
          ctx[18].handle
        ),
        url: (
          /*product*/
          ctx[18].url
        )
      }
    });
    return {
      c() {
        create_component(upsellproducttile.$$.fragment);
      },
      m(target, anchor) {
        mount_component(upsellproducttile, target, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c2, _d2, _e2, _f2, _g2, _h2;
        const upsellproducttile_changes = {};
        if (dirty & /*upSellProducts*/
        2)
          upsellproducttile_changes.productName = /*product*/
          ctx2[18].productName;
        if (dirty & /*upSellProducts*/
        2)
          upsellproducttile_changes.price = /*product*/
          (_b2 = (_a2 = ctx2[18].selectedVariants) == null ? void 0 : _a2[0]) == null ? void 0 : _b2.price;
        if (dirty & /*upSellProducts*/
        2)
          upsellproducttile_changes.imageUrl = /*product*/
          (_d2 = (_c2 = ctx2[18].selectedVariants) == null ? void 0 : _c2[0]) == null ? void 0 : _d2.imageUrl;
        if (dirty & /*upSellProducts*/
        2)
          upsellproducttile_changes.availableVariants = /*filterOOSVariants*/
          ctx2[8](
            /*product*/
            ctx2[18].selectedVariants
          );
        if (dirty & /*upSellProducts*/
        2)
          upsellproducttile_changes.compareAtPrice = /*product*/
          (_f2 = (_e2 = ctx2[18].selectedVariants) == null ? void 0 : _e2[0]) == null ? void 0 : _f2.compareAtPrice;
        if (dirty & /*upSellProducts*/
        2)
          upsellproducttile_changes.properties = /*product*/
          (_h2 = (_g2 = ctx2[18].selectedVariants) == null ? void 0 : _g2[0]) == null ? void 0 : _h2.properties;
        if (dirty & /*upSellProducts*/
        2)
          upsellproducttile_changes.handle = /*product*/
          ctx2[18].handle;
        if (dirty & /*upSellProducts*/
        2)
          upsellproducttile_changes.url = /*product*/
          ctx2[18].url;
        upsellproducttile.$set(upsellproducttile_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(upsellproducttile.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(upsellproducttile.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(upsellproducttile, detaching);
      }
    };
  }
  function create_key_block(ctx) {
    let show_if = !/*isProductOOS*/
    ctx[7](
      /*product*/
      ctx[18]
    );
    let if_block_anchor;
    let current;
    let if_block = show_if && create_if_block_1$5(ctx);
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        if (dirty & /*upSellProducts*/
        2)
          show_if = !/*isProductOOS*/
          ctx2[7](
            /*product*/
            ctx2[18]
          );
        if (show_if) {
          if (if_block) {
            if_block.p(ctx2, dirty);
            if (dirty & /*upSellProducts*/
            2) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block_1$5(ctx2);
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function create_each_block$2(key_1, ctx) {
    let first;
    let previous_key = (
      /*$store_productDetails*/
      ctx[6]
    );
    let key_block_anchor;
    let current;
    let key_block = create_key_block(ctx);
    return {
      key: key_1,
      first: null,
      c() {
        first = empty();
        key_block.c();
        key_block_anchor = empty();
        this.first = first;
      },
      m(target, anchor) {
        insert(target, first, anchor);
        key_block.m(target, anchor);
        insert(target, key_block_anchor, anchor);
        current = true;
      },
      p(new_ctx, dirty) {
        ctx = new_ctx;
        if (dirty & /*$store_productDetails*/
        64 && safe_not_equal(previous_key, previous_key = /*$store_productDetails*/
        ctx[6])) {
          group_outros();
          transition_out(key_block, 1, 1, noop);
          check_outros();
          key_block = create_key_block(ctx);
          key_block.c();
          transition_in(key_block, 1);
          key_block.m(key_block_anchor.parentNode, key_block_anchor);
        } else {
          key_block.p(ctx, dirty);
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(key_block);
        current = true;
      },
      o(local) {
        transition_out(key_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(first);
          detach(key_block_anchor);
        }
        key_block.d(detaching);
      }
    };
  }
  function create_fragment$8(ctx) {
    var _a, _b;
    let if_block_anchor;
    let current;
    let if_block = (
      /*upSell*/
      ((_a = ctx[0]) == null ? void 0 : _a.enable) && !/*$store_hideUpsellFlow*/
      ctx[3] && /*upSellProducts*/
      ((_b = ctx[1]) == null ? void 0 : _b.length) && create_if_block$7(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, [dirty]) {
        var _a2, _b2;
        if (
          /*upSell*/
          ((_a2 = ctx2[0]) == null ? void 0 : _a2.enable) && !/*$store_hideUpsellFlow*/
          ctx2[3] && /*upSellProducts*/
          ((_b2 = ctx2[1]) == null ? void 0 : _b2.length)
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
            if (dirty & /*upSell, $store_hideUpsellFlow, upSellProducts*/
            11) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block$7(ctx2);
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function instance$8($$self, $$props, $$invalidate) {
    let $store_aiProductRecommendations;
    let $store_hideUpsellFlow;
    let $store_totalSavings;
    let $store_configurations;
    let $store_productDetails;
    component_subscribe($$self, store_aiProductRecommendations, ($$value) => $$invalidate(11, $store_aiProductRecommendations = $$value));
    component_subscribe($$self, store_hideUpsellFlow, ($$value) => $$invalidate(3, $store_hideUpsellFlow = $$value));
    component_subscribe($$self, store_totalSavings, ($$value) => $$invalidate(4, $store_totalSavings = $$value));
    component_subscribe($$self, store_configurations, ($$value) => $$invalidate(5, $store_configurations = $$value));
    component_subscribe($$self, store_productDetails, ($$value) => $$invalidate(6, $store_productDetails = $$value));
    let upSell;
    let storeCart;
    let upSellProducts;
    let upsellStyling;
    let applicableStandardUpsellRuleIndex = 0;
    onMount(() => {
      store_configurations.subscribe((res) => {
        var _a, _b, _c;
        $$invalidate(0, upSell = res == null ? void 0 : res.upSell);
        setUpsellStyling(upSell);
        if ((upSell == null ? void 0 : upSell.enable) && "production" === TextConstants.environment_constants.dashboard) {
          const products = (upSell == null ? void 0 : upSell.type) === TextConstants.recommendationTypes.AI_POWERED && ($store_aiProductRecommendations == null ? void 0 : $store_aiProductRecommendations.length) ? $store_aiProductRecommendations : (_c = (_b = upSell == null ? void 0 : upSell.standard) == null ? void 0 : _b[((_a = upSell == null ? void 0 : upSell.standard) == null ? void 0 : _a.length) - 1]) == null ? void 0 : _c.suggestedUpsellProducts;
          $$invalidate(1, upSellProducts = products);
        } else if ((upSell == null ? void 0 : upSell.type) === TextConstants.recommendationTypes.AI_POWERED) {
          store_aiProductRecommendations.subscribe((res2) => {
            setUpsellProducts(res2);
          });
        } else {
          const standardUpsellProducts = getStandardUpsellRecommendations(upSell == null ? void 0 : upSell.standard);
          $$invalidate(1, upSellProducts = filterUpsellProducts(standardUpsellProducts));
          store_hideUpsellFlow.set(false);
        }
      });
      store_cart.subscribe((res) => {
        storeCart = res;
        setUpsellProducts();
      });
    });
    const setUpsellProducts = (aiRecommendations = []) => {
      var _a;
      if ((aiRecommendations == null ? void 0 : aiRecommendations.length) || ($store_aiProductRecommendations == null ? void 0 : $store_aiProductRecommendations.length)) {
        const products = aiRecommendations.length ? aiRecommendations : $store_aiProductRecommendations;
        $$invalidate(1, upSellProducts = filterUpsellProducts(products));
        store_hideUpsellFlow.set(false);
      } else if ((_a = upSell == null ? void 0 : upSell.standard) == null ? void 0 : _a.length) {
        const standardUpsellProducts = getStandardUpsellRecommendations(upSell == null ? void 0 : upSell.standard);
        $$invalidate(1, upSellProducts = filterUpsellProducts(standardUpsellProducts));
        store_hideUpsellFlow.set(false);
      } else {
        store_hideUpsellFlow.set(true);
      }
    };
    function filterUpsellProducts(upsellProducts) {
      var _a;
      const cartProductIds = (_a = storeCart == null ? void 0 : storeCart.items) == null ? void 0 : _a.map((item) => item == null ? void 0 : item.product_id.toString());
      const filteredUpsellProducts = upsellProducts == null ? void 0 : upsellProducts.filter((product) => {
        var _a2, _b;
        const productId = (_b = (_a2 = product == null ? void 0 : product.productId) == null ? void 0 : _a2.split("/")) == null ? void 0 : _b.pop();
        return !(cartProductIds == null ? void 0 : cartProductIds.includes(productId));
      });
      return filteredUpsellProducts;
    }
    function getStandardUpsellRecommendations(dataArray = []) {
      var _a;
      let upsellProducts = [];
      for (const cartItem of (storeCart == null ? void 0 : storeCart.items) ?? []) {
        if (cartItem.total_price !== 0 && !((_a = cartItem.properties) == null ? void 0 : _a["_gokwik_freebie"])) {
          upsellProducts = findUpsellProducts(cartItem, dataArray);
          if (upsellProducts == null ? void 0 : upsellProducts.length)
            break;
        }
      }
      return upsellProducts;
    }
    const findUpsellProducts = (cartItem = {}, dataArray = []) => {
      let upsellProducts = [];
      for (const [index, obj] of dataArray.entries()) {
        if ((obj == null ? void 0 : obj.applicableOn) === "ALL_PRODUCTS") {
          upsellProducts = (obj == null ? void 0 : obj.suggestedUpsellProducts) || [];
          if ((obj == null ? void 0 : obj.itemCount) < (upsellProducts == null ? void 0 : upsellProducts.length)) {
            upsellProducts = upsellProducts == null ? void 0 : upsellProducts.slice(0, obj == null ? void 0 : obj.itemCount);
          }
          break;
        }
        const addedProductId = ((obj == null ? void 0 : obj.applicableOn) === "SPECIFIC_PRODUCTS" ? cartItem == null ? void 0 : cartItem.id : cartItem == null ? void 0 : cartItem.product_id).toString();
        if (isPresentUpsellRuleApplicable(addedProductId, (obj == null ? void 0 : obj.selectedProducts) || [])) {
          $$invalidate(2, upsellStyling = obj);
          upsellProducts = (obj == null ? void 0 : obj.suggestedUpsellProducts) || [];
          if ((obj == null ? void 0 : obj.itemCount) < (upsellProducts == null ? void 0 : upsellProducts.length)) {
            upsellProducts = upsellProducts == null ? void 0 : upsellProducts.slice(0, obj == null ? void 0 : obj.itemCount);
          }
          applicableStandardUpsellRuleIndex = index;
          break;
        }
      }
      setUpsellStyling(upSell);
      return upsellProducts;
    };
    const isPresentUpsellRuleApplicable = (addedProductId = "", productsSelectedInUpsellRule = []) => {
      const selectedProductIds = productsSelectedInUpsellRule == null ? void 0 : productsSelectedInUpsellRule.flatMap((product) => {
        var _a;
        return [
          cleanShopifyIds(product == null ? void 0 : product.productId),
          ...((_a = product == null ? void 0 : product.selectedVariants) == null ? void 0 : _a.map((variant) => cleanShopifyIds(variant == null ? void 0 : variant.variantId))) || []
        ];
      });
      return selectedProductIds == null ? void 0 : selectedProductIds.includes(addedProductId);
    };
    const setUpsellStyling = (upSell2) => {
      var _a;
      const defaultConfig2 = {
        bgColor: "#ffffff",
        textColor: "#000000",
        titleText: ""
      };
      $$invalidate(2, upsellStyling = (upSell2 == null ? void 0 : upSell2.type) === TextConstants.recommendationTypes.AI_POWERED ? (upSell2 == null ? void 0 : upSell2.aiPowered) ?? defaultConfig2 : ((_a = upSell2 == null ? void 0 : upSell2.standard) == null ? void 0 : _a[applicableStandardUpsellRuleIndex]) ?? defaultConfig2);
    };
    const isProductOOS = (product) => {
      var _a;
      const isOOS = (_a = product == null ? void 0 : product.selectedVariants) == null ? void 0 : _a.every((variant) => !isVariantAvailable(variant.variantId));
      return isOOS;
    };
    const filterOOSVariants = (variants) => {
      return variants == null ? void 0 : variants.filter((variant) => isVariantAvailable(variant.variantId));
    };
    return [
      upSell,
      upSellProducts,
      upsellStyling,
      $store_hideUpsellFlow,
      $store_totalSavings,
      $store_configurations,
      $store_productDetails,
      isProductOOS,
      filterOOSVariants
    ];
  }
  class UpSell extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$8, create_fragment$8, safe_not_equal, {}, add_css$8);
    }
  }
  function add_css$7(target) {
    append_styles(target, "svelte-nuzrbq", ".progress-container.svelte-nuzrbq.svelte-nuzrbq{background-color:white;padding:7.5px;flex-direction:column;position:relative;align-items:center}.progress-container.svelte-nuzrbq .next-milestone-text.svelte-nuzrbq{text-align:center;margin-bottom:4px;font-size:14px;font-weight:600}.progress-container.svelte-nuzrbq .container.svelte-nuzrbq{width:90%}.progress-container.svelte-nuzrbq .container .milestone-wrap.svelte-nuzrbq{display:flex;flex-direction:column;width:100%;justify-content:center;align-items:center}.progress-container.svelte-nuzrbq .container .milestone-wrap .milestones.svelte-nuzrbq{display:flex;align-items:center;width:100%;height:50px;position:relative;z-index:10}.progress-container.svelte-nuzrbq .container .milestone-wrap .milestones .progress-bar-rail.svelte-nuzrbq{position:absolute;width:100%;height:6px;top:23px;background:#e0e0e0;border-radius:4px;overflow:hidden}.progress-container.svelte-nuzrbq .container .milestone-wrap .milestones .progress-bar-rail .progress-bar-fill.svelte-nuzrbq{height:100%;transition:width 0.5s ease-in-out}.progress-container.svelte-nuzrbq .container .milestone-wrap .milestones .steps-wrap.svelte-nuzrbq{position:relative;transform:translateX(-50%);display:flex;flex-direction:column;align-items:center}.progress-container.svelte-nuzrbq .container .milestone-wrap .milestones .steps-wrap .milestone-content.svelte-nuzrbq{position:absolute;display:flex;flex-direction:column;width:64px;top:-25px;gap:1px;justify-content:center;align-items:center}.progress-container.svelte-nuzrbq .container .milestone-wrap .milestones .steps-wrap .milestone-content .milestone-goal.svelte-nuzrbq{font-size:12px;color:#333}.progress-container.svelte-nuzrbq .container .milestone-wrap .milestones .steps-wrap .milestone-content .icon-wrap.svelte-nuzrbq{width:20px;height:20px;display:flex;align-items:center;justify-content:center;background:white;border-radius:50%;border:2px solid white}.progress-container.svelte-nuzrbq .container .milestone-wrap .milestones .steps-wrap .milestone-content .milestone-text.svelte-nuzrbq{font-size:12px;text-align:center;word-wrap:break-word;color:#333}");
  }
  function get_each_context$1(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[8] = list[i];
    child_ctx[10] = i;
    return child_ctx;
  }
  function create_each_block$1(ctx) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    let div4;
    let div3;
    let div0;
    let t0_value = (
      /*tieredRewards*/
      ctx[1].condition === "CART_SUBTOTAL" || /*tieredRewards*/
      ctx[1].condition === "CART_DISCOUNT_PRICE" ? `${formatCurrencyDisplay(
        /*milestone*/
        (_a = ctx[8]) == null ? void 0 : _a.goal
      )}` : `${/*milestone*/
      (_b = ctx[8]) == null ? void 0 : _b.goal} ${/*milestone*/
      ((_c = ctx[8]) == null ? void 0 : _c.suffix) && /*milestone*/
      ((_e = (_d = ctx[8]) == null ? void 0 : _d.suffix) == null ? void 0 : _e.length) > 0 ? (
        /*milestone*/
        (_f = ctx[8]) == null ? void 0 : _f.suffix
      ) : "Items"}`
    );
    let t0;
    let t1;
    let div1;
    let switch_instance;
    let t2;
    let div2;
    let t3_value = (
      /*milestone*/
      ((_g = ctx[8]) == null ? void 0 : _g.textAfterGoal) + ""
    );
    let t3;
    let t4;
    let div4_style_value;
    let current;
    var switch_value = TextConstants == null ? void 0 : TextConstants.Icons[
      /*milestone*/
      (_h = ctx[8]) == null ? void 0 : _h.type
    ];
    function switch_props(ctx2, dirty) {
      var _a2, _b2, _c2, _d2;
      return {
        props: {
          strokeColor: (
            /*cartValue*/
            ctx2[2] >= /*milestone*/
            ((_a2 = ctx2[8]) == null ? void 0 : _a2.goal) ? (
              /*tieredRewards*/
              (_b2 = ctx2[1]) == null ? void 0 : _b2.primaryColor
            ) : (
              /*tieredRewards*/
              (_c2 = ctx2[1]) == null ? void 0 : _c2.secondaryColor
            )
          ),
          fillColor: (
            /*cartValue*/
            ctx2[2] >= /*milestone*/
            ((_d2 = ctx2[8]) == null ? void 0 : _d2.goal) ? "#E0F7F4" : "none"
          )
        }
      };
    }
    if (switch_value) {
      switch_instance = construct_svelte_component(switch_value, switch_props(ctx));
    }
    return {
      c() {
        var _a2, _b2, _c2, _d2;
        div4 = element("div");
        div3 = element("div");
        div0 = element("div");
        t0 = text(t0_value);
        t1 = space();
        div1 = element("div");
        if (switch_instance)
          create_component(switch_instance.$$.fragment);
        t2 = space();
        div2 = element("div");
        t3 = text(t3_value);
        t4 = space();
        attr(div0, "class", "milestone-goal svelte-nuzrbq");
        attr(div1, "class", "icon-wrap svelte-nuzrbq");
        set_style(div1, "border", "1px solid " + /*cartValue*/
        (ctx[2] >= /*milestone*/
        ((_a2 = ctx[8]) == null ? void 0 : _a2.goal) ? (
          /*tieredRewards*/
          (_b2 = ctx[1]) == null ? void 0 : _b2.primaryColor
        ) : (
          /*tieredRewards*/
          (_c2 = ctx[1]) == null ? void 0 : _c2.secondaryColor
        )));
        attr(div2, "class", "milestone-text svelte-nuzrbq");
        attr(div3, "class", "milestone-content svelte-nuzrbq");
        attr(div4, "class", "steps-wrap svelte-nuzrbq");
        attr(div4, "style", div4_style_value = /*goalAchieved*/
        ctx[5](
          /*cartValue*/
          ctx[2],
          /*milestone*/
          (_d2 = ctx[8]) == null ? void 0 : _d2.goal,
          /*index*/
          ctx[10]
        ));
      },
      m(target, anchor) {
        insert(target, div4, anchor);
        append(div4, div3);
        append(div3, div0);
        append(div0, t0);
        append(div3, t1);
        append(div3, div1);
        if (switch_instance)
          mount_component(switch_instance, div1, null);
        append(div3, t2);
        append(div3, div2);
        append(div2, t3);
        append(div4, t4);
        current = true;
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c2, _d2, _e2, _f2, _g2, _h2, _i, _j, _k, _l, _m, _n, _o, _p;
        if ((!current || dirty & /*tieredRewards, milestones*/
        3) && t0_value !== (t0_value = /*tieredRewards*/
        ctx2[1].condition === "CART_SUBTOTAL" || /*tieredRewards*/
        ctx2[1].condition === "CART_DISCOUNT_PRICE" ? `${formatCurrencyDisplay(
          /*milestone*/
          (_a2 = ctx2[8]) == null ? void 0 : _a2.goal
        )}` : `${/*milestone*/
        (_b2 = ctx2[8]) == null ? void 0 : _b2.goal} ${/*milestone*/
        ((_c2 = ctx2[8]) == null ? void 0 : _c2.suffix) && /*milestone*/
        ((_e2 = (_d2 = ctx2[8]) == null ? void 0 : _d2.suffix) == null ? void 0 : _e2.length) > 0 ? (
          /*milestone*/
          (_f2 = ctx2[8]) == null ? void 0 : _f2.suffix
        ) : "Items"}`))
          set_data(t0, t0_value);
        if (dirty & /*milestones*/
        1 && switch_value !== (switch_value = TextConstants == null ? void 0 : TextConstants.Icons[
          /*milestone*/
          (_g2 = ctx2[8]) == null ? void 0 : _g2.type
        ])) {
          if (switch_instance) {
            group_outros();
            const old_component = switch_instance;
            transition_out(old_component.$$.fragment, 1, 0, () => {
              destroy_component(old_component, 1);
            });
            check_outros();
          }
          if (switch_value) {
            switch_instance = construct_svelte_component(switch_value, switch_props(ctx2));
            create_component(switch_instance.$$.fragment);
            transition_in(switch_instance.$$.fragment, 1);
            mount_component(switch_instance, div1, null);
          } else {
            switch_instance = null;
          }
        } else if (switch_value) {
          const switch_instance_changes = {};
          if (dirty & /*cartValue, milestones, tieredRewards*/
          7)
            switch_instance_changes.strokeColor = /*cartValue*/
            ctx2[2] >= /*milestone*/
            ((_h2 = ctx2[8]) == null ? void 0 : _h2.goal) ? (
              /*tieredRewards*/
              (_i = ctx2[1]) == null ? void 0 : _i.primaryColor
            ) : (
              /*tieredRewards*/
              (_j = ctx2[1]) == null ? void 0 : _j.secondaryColor
            );
          if (dirty & /*cartValue, milestones*/
          5)
            switch_instance_changes.fillColor = /*cartValue*/
            ctx2[2] >= /*milestone*/
            ((_k = ctx2[8]) == null ? void 0 : _k.goal) ? "#E0F7F4" : "none";
          switch_instance.$set(switch_instance_changes);
        }
        if (!current || dirty & /*cartValue, milestones, tieredRewards*/
        7) {
          set_style(div1, "border", "1px solid " + /*cartValue*/
          (ctx2[2] >= /*milestone*/
          ((_l = ctx2[8]) == null ? void 0 : _l.goal) ? (
            /*tieredRewards*/
            (_m = ctx2[1]) == null ? void 0 : _m.primaryColor
          ) : (
            /*tieredRewards*/
            (_n = ctx2[1]) == null ? void 0 : _n.secondaryColor
          )));
        }
        if ((!current || dirty & /*milestones*/
        1) && t3_value !== (t3_value = /*milestone*/
        ((_o = ctx2[8]) == null ? void 0 : _o.textAfterGoal) + ""))
          set_data(t3, t3_value);
        if (!current || dirty & /*cartValue, milestones*/
        5 && div4_style_value !== (div4_style_value = /*goalAchieved*/
        ctx2[5](
          /*cartValue*/
          ctx2[2],
          /*milestone*/
          (_p = ctx2[8]) == null ? void 0 : _p.goal,
          /*index*/
          ctx2[10]
        ))) {
          attr(div4, "style", div4_style_value);
        }
      },
      i(local) {
        if (current)
          return;
        if (switch_instance)
          transition_in(switch_instance.$$.fragment, local);
        current = true;
      },
      o(local) {
        if (switch_instance)
          transition_out(switch_instance.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div4);
        }
        if (switch_instance)
          destroy_component(switch_instance);
      }
    };
  }
  function create_fragment$7(ctx) {
    let div6;
    let div0;
    let t0_value = (
      /*getNextMilestoneText*/
      ctx[3](
        /*cartValue*/
        ctx[2],
        /*milestones*/
        ctx[0]
      ) + ""
    );
    let t0;
    let t1;
    let div5;
    let div4;
    let div3;
    let div2;
    let div1;
    let div1_style_value;
    let t2;
    let current;
    let each_value = ensure_array_like(
      /*milestones*/
      ctx[0]
    );
    let each_blocks = [];
    for (let i = 0; i < each_value.length; i += 1) {
      each_blocks[i] = create_each_block$1(get_each_context$1(ctx, each_value, i));
    }
    const out = (i) => transition_out(each_blocks[i], 1, 1, () => {
      each_blocks[i] = null;
    });
    return {
      c() {
        div6 = element("div");
        div0 = element("div");
        t0 = text(t0_value);
        t1 = space();
        div5 = element("div");
        div4 = element("div");
        div3 = element("div");
        div2 = element("div");
        div1 = element("div");
        t2 = space();
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        attr(div0, "class", "next-milestone-text svelte-nuzrbq");
        attr(div1, "class", "progress-bar-fill svelte-nuzrbq");
        attr(div1, "style", div1_style_value = /*getProgressPercentage*/
        ctx[4](
          /*cartValue*/
          ctx[2],
          /*milestones*/
          ctx[0]
        ));
        attr(div2, "class", "progress-bar-rail svelte-nuzrbq");
        attr(div3, "class", "milestones svelte-nuzrbq");
        attr(div4, "class", "milestone-wrap svelte-nuzrbq");
        attr(div5, "class", "container svelte-nuzrbq");
        set_style(
          div5,
          "height",
          /*milestones*/
          ctx[0].find(func$1) ? "70px" : ""
        );
        attr(div6, "class", "progress-container svelte-nuzrbq");
      },
      m(target, anchor) {
        insert(target, div6, anchor);
        append(div6, div0);
        append(div0, t0);
        append(div6, t1);
        append(div6, div5);
        append(div5, div4);
        append(div4, div3);
        append(div3, div2);
        append(div2, div1);
        append(div3, t2);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(div3, null);
          }
        }
        current = true;
      },
      p(ctx2, [dirty]) {
        if ((!current || dirty & /*cartValue, milestones*/
        5) && t0_value !== (t0_value = /*getNextMilestoneText*/
        ctx2[3](
          /*cartValue*/
          ctx2[2],
          /*milestones*/
          ctx2[0]
        ) + ""))
          set_data(t0, t0_value);
        if (!current || dirty & /*cartValue, milestones*/
        5 && div1_style_value !== (div1_style_value = /*getProgressPercentage*/
        ctx2[4](
          /*cartValue*/
          ctx2[2],
          /*milestones*/
          ctx2[0]
        ))) {
          attr(div1, "style", div1_style_value);
        }
        if (dirty & /*goalAchieved, cartValue, milestones, tieredRewards*/
        39) {
          each_value = ensure_array_like(
            /*milestones*/
            ctx2[0]
          );
          let i;
          for (i = 0; i < each_value.length; i += 1) {
            const child_ctx = get_each_context$1(ctx2, each_value, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
              transition_in(each_blocks[i], 1);
            } else {
              each_blocks[i] = create_each_block$1(child_ctx);
              each_blocks[i].c();
              transition_in(each_blocks[i], 1);
              each_blocks[i].m(div3, null);
            }
          }
          group_outros();
          for (i = each_value.length; i < each_blocks.length; i += 1) {
            out(i);
          }
          check_outros();
        }
        if (!current || dirty & /*milestones*/
        1) {
          set_style(
            div5,
            "height",
            /*milestones*/
            ctx2[0].find(func$1) ? "70px" : ""
          );
        }
      },
      i(local) {
        if (current)
          return;
        for (let i = 0; i < each_value.length; i += 1) {
          transition_in(each_blocks[i]);
        }
        current = true;
      },
      o(local) {
        each_blocks = each_blocks.filter(Boolean);
        for (let i = 0; i < each_blocks.length; i += 1) {
          transition_out(each_blocks[i]);
        }
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div6);
        }
        destroy_each(each_blocks, detaching);
      }
    };
  }
  const func$1 = (milestone) => (milestone == null ? void 0 : milestone.textAfterGoal.length) > 11;
  function instance$7($$self, $$props, $$invalidate) {
    let $store_previousTieredRewardsCartValue;
    component_subscribe($$self, store_previousTieredRewardsCartValue, ($$value) => $$invalidate(6, $store_previousTieredRewardsCartValue = $$value));
    let { milestones = [] } = $$props;
    let { tieredRewards } = $$props;
    let { cartValue } = $$props;
    onMount(() => {
      store_previousTieredRewardsCartValue.set(cartValue);
    });
    const getMilestonePosition = (index, totalMilestones) => {
      if (totalMilestones <= 1)
        return "100%";
      const percentage = Math.round((index + 1) / totalMilestones * 100);
      return `${percentage}%`;
    };
    const getNextMilestoneText = (cartValue2, milestones2) => {
      const nextMilestone = milestones2 == null ? void 0 : milestones2.find((milestone, index) => {
        var _a;
        const prevGoal = ((_a = milestones2[index - 1]) == null ? void 0 : _a.goal) || 0;
        return cartValue2 >= prevGoal && cartValue2 < milestone.goal;
      });
      const lastAchievedMilestone = milestones2.filter((milestone) => $store_previousTieredRewardsCartValue >= milestone.goal).pop();
      const newlyAchievedMilestone = milestones2.filter((milestone) => cartValue2 >= milestone.goal).pop();
      if (newlyAchievedMilestone && (!lastAchievedMilestone || newlyAchievedMilestone.goal > lastAchievedMilestone.goal) && cartValue2 > $store_previousTieredRewardsCartValue) {
        store_showConfetti.set(true);
        store_isInitialConfettiShown.set(true);
      }
      store_previousTieredRewardsCartValue.set(cartValue2);
      if (nextMilestone) {
        let leftValue = nextMilestone.goal - cartValue2;
        const isCurrency = tieredRewards.condition === "CART_SUBTOTAL" || tieredRewards.condition === "CART_DISCOUNT_PRICE";
        return nextMilestone.textBeforeGoal.replace("{{amount_left}}", isCurrency ? `${formatCurrencyDisplay(leftValue.toFixed(2))}` : `${leftValue}`).replace("{{goal}}", isCurrency ? `${formatCurrencyDisplay(nextMilestone.goal)}` : `${nextMilestone.goal}`);
      }
      return (tieredRewards == null ? void 0 : tieredRewards.textAfterCompletion) || "You have unlocked all rewards!";
    };
    const getProgressPercentage = (cartValue2, rewards) => {
      var _a, _b, _c;
      if (cartValue2 === 0) {
        return `width: 0%; background-color: ${tieredRewards == null ? void 0 : tieredRewards.primaryColor};`;
      }
      const milestoneGoals = rewards.map((r) => r.goal);
      const totalMilestones = milestoneGoals.length;
      if (totalMilestones === 1) {
        const milestoneGoal = milestoneGoals[0];
        const defaultTargetWidth = 50;
        const targetWidthStr = (_a = getMilestonePosition(0, totalMilestones)) == null ? void 0 : _a.replace("%", "");
        const targetWidth = targetWidthStr ? Number(targetWidthStr) : defaultTargetWidth;
        if (cartValue2 <= milestoneGoal) {
          const progressRatio = cartValue2 / milestoneGoal;
          const width = progressRatio * targetWidth;
          return `width: ${width.toFixed(2)}%; background-color: ${tieredRewards == null ? void 0 : tieredRewards.primaryColor};`;
        } else {
          return `width: ${targetWidth}%; background-color: ${tieredRewards == null ? void 0 : tieredRewards.primaryColor};`;
        }
      }
      for (let i = 0; i < milestoneGoals.length; i++) {
        const previousMilestone = milestoneGoals[i - 1] ?? 0;
        if (cartValue2 <= milestoneGoals[i] && cartValue2 > previousMilestone) {
          const milestoneGoalDiff = milestoneGoals[i] - previousMilestone;
          const value = cartValue2 - previousMilestone;
          const rangeStart = i === 0 ? 0 : Number((_b = getMilestonePosition(i - 1, totalMilestones)) == null ? void 0 : _b.replace("%", "")) || 0;
          const currentMilestonePos = Number((_c = getMilestonePosition(i, totalMilestones)) == null ? void 0 : _c.replace("%", "")) || 100;
          const rangeDiff = currentMilestonePos - rangeStart;
          const exactPtg = (rangeDiff * value / milestoneGoalDiff).toFixed(2);
          return `width: ${rangeStart + Number(exactPtg)}%; background-color: ${tieredRewards == null ? void 0 : tieredRewards.primaryColor};`;
        }
      }
      return `width: 100%; background-color: ${tieredRewards == null ? void 0 : tieredRewards.primaryColor};`;
    };
    const goalAchieved = (cartValue2, goal, index) => {
      let style = `left: ${getMilestonePosition(index, milestones.length)};`;
      if (cartValue2 >= goal) {
        style += `border: 1px solid ${tieredRewards == null ? void 0 : tieredRewards.primaryColor};`;
      } else {
        style += `border: 1px solid ${tieredRewards == null ? void 0 : tieredRewards.secondaryColor};`;
      }
      return style;
    };
    $$self.$$set = ($$props2) => {
      if ("milestones" in $$props2)
        $$invalidate(0, milestones = $$props2.milestones);
      if ("tieredRewards" in $$props2)
        $$invalidate(1, tieredRewards = $$props2.tieredRewards);
      if ("cartValue" in $$props2)
        $$invalidate(2, cartValue = $$props2.cartValue);
    };
    return [
      milestones,
      tieredRewards,
      cartValue,
      getNextMilestoneText,
      getProgressPercentage,
      goalAchieved
    ];
  }
  class TieredRewards extends SvelteComponent {
    constructor(options) {
      super();
      init(
        this,
        options,
        instance$7,
        create_fragment$7,
        safe_not_equal,
        {
          milestones: 0,
          tieredRewards: 1,
          cartValue: 2
        },
        add_css$7
      );
    }
  }
  function add_css$6(target) {
    append_styles(target, "svelte-13a7lqb", '.one-tick-upsell-container.svelte-13a7lqb.svelte-13a7lqb{margin:-30px 10px 10px 10px;position:relative;border-radius:12px;border:1px solid transparent;background-color:transparent;display:flex;justify-content:space-between;font-family:inherit;box-shadow:0 2px 4px rgba(0, 0, 0, 0.05)}.one-tick-upsell-container.svelte-13a7lqb.svelte-13a7lqb::before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:#e5e7eb;border:1px solid #e5e7eb;border-radius:12px;z-index:-1}.one-tick-upsell-container.svelte-13a7lqb .one-tick-upsell-checkbox.svelte-13a7lqb{display:flex;align-items:center;cursor:pointer;font-size:14px;margin-top:20px;position:relative;padding:10px;z-index:1}.one-tick-upsell-container.svelte-13a7lqb .one-tick-upsell-checkbox input[type=checkbox].svelte-13a7lqb{cursor:pointer;margin-right:8px;width:16px;height:16px}.one-tick-upsell-container.svelte-13a7lqb .one-tick-upsell-checkbox .label-text.svelte-13a7lqb{font-size:14px;color:#333;line-height:1.3}.one-tick-upsell-container.svelte-13a7lqb .order-note-container.svelte-13a7lqb{margin-top:30px;margin-right:8px}');
  }
  function create_if_block$6(ctx) {
    var _a, _b;
    let div1;
    let div0;
    let input;
    let t0;
    let label;
    let p;
    let raw_value = (
      /*$store_configurations*/
      ((_b = (_a = ctx[2]) == null ? void 0 : _a.oneTickUpsell.textToDisplay) == null ? void 0 : _b.trim()) + ""
    );
    let t1;
    let current;
    let mounted;
    let dispose;
    let if_block = (
      /*showOrderNote*/
      ctx[1] && create_if_block_1$4()
    );
    return {
      c() {
        div1 = element("div");
        div0 = element("div");
        input = element("input");
        t0 = space();
        label = element("label");
        p = element("p");
        t1 = space();
        if (if_block)
          if_block.c();
        attr(input, "type", "checkbox");
        attr(input, "id", "one-tick-upsell-checkbox");
        attr(input, "class", "svelte-13a7lqb");
        attr(label, "class", "label-text svelte-13a7lqb");
        attr(label, "for", "one-tick-upsell-checkbox");
        attr(div0, "class", "one-tick-upsell-checkbox svelte-13a7lqb");
        attr(div1, "class", "one-tick-upsell-container svelte-13a7lqb");
      },
      m(target, anchor) {
        insert(target, div1, anchor);
        append(div1, div0);
        append(div0, input);
        input.checked = /*isUpsellChecked*/
        ctx[0];
        append(div0, t0);
        append(div0, label);
        append(label, p);
        p.innerHTML = raw_value;
        append(div1, t1);
        if (if_block)
          if_block.m(div1, null);
        current = true;
        if (!mounted) {
          dispose = [
            listen(
              input,
              "change",
              /*input_change_handler*/
              ctx[5]
            ),
            listen(
              input,
              "change",
              /*toggleUpsell*/
              ctx[4]
            )
          ];
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        var _a2, _b2;
        if (dirty & /*isUpsellChecked*/
        1) {
          input.checked = /*isUpsellChecked*/
          ctx2[0];
        }
        if ((!current || dirty & /*$store_configurations*/
        4) && raw_value !== (raw_value = /*$store_configurations*/
        ((_b2 = (_a2 = ctx2[2]) == null ? void 0 : _a2.oneTickUpsell.textToDisplay) == null ? void 0 : _b2.trim()) + ""))
          p.innerHTML = raw_value;
        if (
          /*showOrderNote*/
          ctx2[1]
        ) {
          if (if_block) {
            if (dirty & /*showOrderNote*/
            2) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block_1$4();
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(div1, null);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div1);
        }
        if (if_block)
          if_block.d();
        mounted = false;
        run_all(dispose);
      }
    };
  }
  function create_if_block_1$4(ctx) {
    let div;
    let ordernote;
    let current;
    ordernote = new OrderNote({});
    return {
      c() {
        div = element("div");
        create_component(ordernote.$$.fragment);
        attr(div, "class", "order-note-container svelte-13a7lqb");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        mount_component(ordernote, div, null);
        current = true;
      },
      i(local) {
        if (current)
          return;
        transition_in(ordernote.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(ordernote.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(ordernote);
      }
    };
  }
  function create_fragment$6(ctx) {
    let if_block_anchor;
    let current;
    let if_block = (
      /*$store_isOneTickUpsellVisible*/
      ctx[3] && create_if_block$6(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, [dirty]) {
        if (
          /*$store_isOneTickUpsellVisible*/
          ctx2[3]
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
            if (dirty & /*$store_isOneTickUpsellVisible*/
            8) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block$6(ctx2);
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function instance$6($$self, $$props, $$invalidate) {
    let $store_configurations;
    let $store_isOneTickUpsellVisible;
    component_subscribe($$self, store_configurations, ($$value) => $$invalidate(2, $store_configurations = $$value));
    component_subscribe($$self, store_isOneTickUpsellVisible, ($$value) => $$invalidate(3, $store_isOneTickUpsellVisible = $$value));
    let isUpsellChecked = false;
    let showOrderNote = false;
    let variantsNotInCart = [];
    onMount(() => {
      store_cart.subscribe((res) => {
        var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l;
        const items = res == null ? void 0 : res.items;
        $$invalidate(1, showOrderNote = !(res == null ? void 0 : res.note) && (!((_a = $store_configurations == null ? void 0 : $store_configurations.orderNotes) == null ? void 0 : _a.title) || ((_b = $store_configurations == null ? void 0 : $store_configurations.orderNotes) == null ? void 0 : _b.title.length) <= 20 && ((_d = (_c = $store_configurations == null ? void 0 : $store_configurations.oneTickUpsell) == null ? void 0 : _c.textToDisplay) == null ? void 0 : _d.length) <= 30));
        const upsellProduct = (_e = $store_configurations == null ? void 0 : $store_configurations.oneTickUpsell) == null ? void 0 : _e.products[0];
        if ((items == null ? void 0 : items.length) && ((_f = upsellProduct == null ? void 0 : upsellProduct.selectedVariants) == null ? void 0 : _f.length) === 1) {
          const isUpsellProductInCart = items.some((item) => {
            var _a2;
            const variantId = (_a2 = upsellProduct == null ? void 0 : upsellProduct.selectedVariants[0]) == null ? void 0 : _a2.variantId.split("/").pop();
            return variantId ? item.id === +variantId : false;
          });
          if (!isUpsellProductInCart && ((_g = $store_configurations == null ? void 0 : $store_configurations.oneTickUpsell) == null ? void 0 : _g.enable) && isVariantAvailable((_h = upsellProduct == null ? void 0 : upsellProduct.selectedVariants[0]) == null ? void 0 : _h.variantId)) {
            store_isOneTickUpsellVisible.set(true);
            $$invalidate(0, isUpsellChecked = false);
            fireGokwikTrigger("one_tick_upsell_shown", {});
            logEvent("one_tick_upsell_shown", {});
          } else {
            store_isOneTickUpsellVisible.set(false);
          }
        } else if ((items == null ? void 0 : items.length) && ((_i = upsellProduct == null ? void 0 : upsellProduct.selectedVariants) == null ? void 0 : _i.length) && ((_j = upsellProduct == null ? void 0 : upsellProduct.selectedVariants) == null ? void 0 : _j.length) > 1) {
          variantsNotInCart = (_k = upsellProduct == null ? void 0 : upsellProduct.selectedVariants) == null ? void 0 : _k.filter((variant) => {
            const isVariantInCart = items.some((item) => {
              const variantId = variant.variantId.split("/").pop();
              return variantId ? item.id === +variantId : false;
            });
            return !isVariantInCart;
          });
          if ((variantsNotInCart == null ? void 0 : variantsNotInCart.length) === 1 && !isVariantAvailable(variantsNotInCart[0].variantId)) {
            variantsNotInCart = [];
          }
          if (variantsNotInCart.length > 0 && ((_l = $store_configurations == null ? void 0 : $store_configurations.oneTickUpsell) == null ? void 0 : _l.enable)) {
            store_isOneTickUpsellVisible.set(true);
            $$invalidate(0, isUpsellChecked = false);
            fireGokwikTrigger("one_tick_upsell_shown", {});
            logEvent("one_tick_upsell_shown", {});
          } else {
            store_isOneTickUpsellVisible.set(false);
          }
        }
      });
    });
    const toggleUpsell = async (event) => {
      var _a, _b, _c, _d;
      event.preventDefault();
      $$invalidate(0, isUpsellChecked = event.target.checked);
      if (isUpsellChecked) {
        const product = (_a = $store_configurations == null ? void 0 : $store_configurations.oneTickUpsell) == null ? void 0 : _a.products[0];
        if (((_b = product == null ? void 0 : product.selectedVariants) == null ? void 0 : _b.length) === 1 || (variantsNotInCart == null ? void 0 : variantsNotInCart.length) === 1) {
          const variant = (variantsNotInCart == null ? void 0 : variantsNotInCart.length) === 1 ? variantsNotInCart[0] : product == null ? void 0 : product.selectedVariants[0];
          let properties = {};
          if (variant.variantName && variant.variantName.toLowerCase() !== "default title") {
            properties["variant"] = variant.variantName;
          }
          properties = getUpsellProperties(properties, true);
          fireGokwikTrigger("one_tick_upsell_clicked", {
            id: cleanShopifyIds(variant.variantId),
            quantity: 1
          });
          logEvent("one_tick_upsell_clicked", {
            id: cleanShopifyIds(variant.variantId),
            quantity: 1
          });
          const response = await addToCart(
            {
              id: cleanShopifyIds(variant.variantId),
              quantity: 1,
              properties
            },
            false
          );
          if (response) {
            store_isOneTickUpsellVisible.set(false);
            fireGokwikTrigger(TextConstants.eventNames.auto_add_to_cart, {
              event: TextConstants.eventNames.auto_add_to_cart,
              eventType: "one_tick_Upsell",
              items: response
            });
          } else {
            $$invalidate(0, isUpsellChecked = false);
          }
        } else if (((_c = product == null ? void 0 : product.selectedVariants) == null ? void 0 : _c.length) && ((_d = product == null ? void 0 : product.selectedVariants) == null ? void 0 : _d.length) > 1) {
          openBottomSheet();
        }
      }
    };
    const openBottomSheet = () => {
      var _a;
      if ((variantsNotInCart == null ? void 0 : variantsNotInCart.length) > 1) {
        const product = (_a = $store_configurations == null ? void 0 : $store_configurations.oneTickUpsell) == null ? void 0 : _a.products[0];
        store_bottomSheet.set({
          type: "upsell",
          title: "Select Variant",
          component: UpsellVariantList,
          componentData: {
            availableVariants: variantsNotInCart,
            product: {
              productName: product == null ? void 0 : product.productName,
              handle: product == null ? void 0 : product.handle
            }
          },
          show: true
        });
      }
    };
    function input_change_handler() {
      isUpsellChecked = this.checked;
      $$invalidate(0, isUpsellChecked);
    }
    return [
      isUpsellChecked,
      showOrderNote,
      $store_configurations,
      $store_isOneTickUpsellVisible,
      toggleUpsell,
      input_change_handler
    ];
  }
  class OneTickUpsell extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$6, create_fragment$6, safe_not_equal, {}, add_css$6);
    }
  }
  function add_css$5(target) {
    append_styles(target, "svelte-ur1xke", '.offers-slider.svelte-ur1xke.svelte-ur1xke{margin:0 auto;background-color:#fff;padding:8px;margin:8px;border-radius:12px}.offers-slider.svelte-ur1xke .slider-window.svelte-ur1xke{display:flex;overflow-x:auto;padding:8px 0px;gap:1rem;align-items:stretch;scroll-snap-type:x mandatory}h2.svelte-ur1xke.svelte-ur1xke{text-align:left;font-size:16px}.card.svelte-ur1xke.svelte-ur1xke{flex-shrink:0;display:flex;flex-direction:row;align-items:stretch;justify-content:space-between;border-radius:4px;border:1px solid var(--Gray-Neutral-200, #e5e7eb);background:var(--Base-White, #fff);box-sizing:border-box}.card.svelte-ur1xke .gift-image-section.svelte-ur1xke{position:relative;max-width:83px;max-height:108px}.card.svelte-ur1xke .gift-image-section .gift-image.svelte-ur1xke{max-width:100%;max-height:100%;aspect-ratio:10/13}.card.svelte-ur1xke .gift-image-section .gift-locked.svelte-ur1xke{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:28px;height:28px}.card.svelte-ur1xke img.svelte-ur1xke{object-fit:cover;border-radius:4px 0 0 4px;height:100%}.card-content.svelte-ur1xke.svelte-ur1xke{padding:10px;width:150px;display:flex;flex-direction:column;gap:10px}.card-content.svelte-ur1xke .card-title.svelte-ur1xke{overflow:hidden;text-overflow:ellipsis;font-size:12px;font-weight:400;line-clamp:2;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}.card-content.svelte-ur1xke .completed-text.svelte-ur1xke{display:flex;justify-content:flex-start;align-items:center;font-size:10px;font-weight:400;vertical-align:middle;color:var(--gokwik-primary-color);display:flex;align-items:center;gap:5px}.card-content.svelte-ur1xke .add-btn.svelte-ur1xke{width:fit-content;text-align:center;border-radius:4px;padding-right:6px;padding-left:6px;height:25px;border:1px solid var(--gokwik-primary-color);background:transparent;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;cursor:pointer}.progress-bar.svelte-ur1xke.svelte-ur1xke{background-color:#eee;border-radius:4px;height:2px;margin-top:0.5rem}.progress-fill.svelte-ur1xke.svelte-ur1xke{background-color:#0c6;height:100%;border-radius:4px;transition:width 0.3s ease;position:relative}.progress-fill.svelte-ur1xke.svelte-ur1xke::after{content:"";position:absolute;right:-1px;top:0;background-color:#fff;height:100%;width:2px}');
  }
  function get_each_context(ctx, list, i) {
    const child_ctx = ctx.slice();
    child_ctx[7] = list[i];
    child_ctx[9] = i;
    return child_ctx;
  }
  function create_if_block_2$2(ctx) {
    let img;
    let img_src_value;
    return {
      c() {
        img = element("img");
        attr(img, "class", "gift-locked svelte-ur1xke");
        if (!src_url_equal(img.src, img_src_value = lockedIcon))
          attr(img, "src", img_src_value);
        attr(img, "alt", "locked");
      },
      m(target, anchor) {
        insert(target, img, anchor);
      },
      d(detaching) {
        if (detaching) {
          detach(img);
        }
      }
    };
  }
  function create_else_block$2(ctx) {
    let div1;
    let div0;
    return {
      c() {
        div1 = element("div");
        div0 = element("div");
        attr(div0, "class", "progress-fill svelte-ur1xke");
        set_style(
          div0,
          "width",
          /*card*/
          ctx[7].progressPercentage + "%"
        );
        attr(div1, "class", "progress-bar svelte-ur1xke");
      },
      m(target, anchor) {
        insert(target, div1, anchor);
        append(div1, div0);
      },
      p(ctx2, dirty) {
        if (dirty & /*freebieInfo*/
        1) {
          set_style(
            div0,
            "width",
            /*card*/
            ctx2[7].progressPercentage + "%"
          );
        }
      },
      i: noop,
      o: noop,
      d(detaching) {
        if (detaching) {
          detach(div1);
        }
      }
    };
  }
  function create_if_block_1$3(ctx) {
    let div;
    let tickicon;
    let t0;
    let p;
    let current;
    tickicon = new TickIcon({
      props: { color: "#0c6", height: 10, width: 10 }
    });
    return {
      c() {
        div = element("div");
        create_component(tickicon.$$.fragment);
        t0 = space();
        p = element("p");
        p.textContent = "Selected";
        attr(div, "class", "completed-text svelte-ur1xke");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        mount_component(tickicon, div, null);
        append(div, t0);
        append(div, p);
        current = true;
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(tickicon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(tickicon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(tickicon);
      }
    };
  }
  function create_default_slot(ctx) {
    let p;
    let t_value = (
      /*card*/
      (ctx[7].isValid ? " Congrats! Free Gifts Unlocked" : (
        /*textBeforeGoal*/
        ctx[4](
          /*card*/
          ctx[7]
        )
      )) + ""
    );
    let t;
    return {
      c() {
        p = element("p");
        t = text(t_value);
        attr(p, "class", "card-title svelte-ur1xke");
      },
      m(target, anchor) {
        insert(target, p, anchor);
        append(p, t);
      },
      p(ctx2, dirty) {
        if (dirty & /*freebieInfo*/
        1 && t_value !== (t_value = /*card*/
        (ctx2[7].isValid ? " Congrats! Free Gifts Unlocked" : (
          /*textBeforeGoal*/
          ctx2[4](
            /*card*/
            ctx2[7]
          )
        )) + ""))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(p);
        }
      }
    };
  }
  function create_if_block$5(ctx) {
    let button;
    let t_value = (
      /*selectedGifts*/
      (ctx[2][
        /*i*/
        ctx[9]
      ] ?? []).length === +/*card*/
      (ctx[7].freeGift.numberOfProduct ?? 0) ? "Change" : `Select ${/*card*/
      (ctx[7].freeGift.numberOfProduct ?? 0) - /*selectedGifts*/
      (ctx[2][
        /*i*/
        ctx[9]
      ] ?? []).length} Free Gift`
    );
    let t;
    let mounted;
    let dispose;
    function click_handler2() {
      return (
        /*click_handler*/
        ctx[6](
          /*card*/
          ctx[7]
        )
      );
    }
    return {
      c() {
        button = element("button");
        t = text(t_value);
        attr(button, "class", "add-btn svelte-ur1xke");
      },
      m(target, anchor) {
        insert(target, button, anchor);
        append(button, t);
        if (!mounted) {
          dispose = listen(button, "click", click_handler2);
          mounted = true;
        }
      },
      p(new_ctx, dirty) {
        ctx = new_ctx;
        if (dirty & /*selectedGifts, freebieInfo*/
        5 && t_value !== (t_value = /*selectedGifts*/
        (ctx[2][
          /*i*/
          ctx[9]
        ] ?? []).length === +/*card*/
        (ctx[7].freeGift.numberOfProduct ?? 0) ? "Change" : `Select ${/*card*/
        (ctx[7].freeGift.numberOfProduct ?? 0) - /*selectedGifts*/
        (ctx[2][
          /*i*/
          ctx[9]
        ] ?? []).length} Free Gift`))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_each_block(ctx) {
    let div2;
    let div0;
    let img;
    let img_src_value;
    let t0;
    let t1;
    let div1;
    let current_block_type_index;
    let if_block1;
    let t2;
    let tooltip;
    let t3;
    let t4;
    let current;
    let if_block0 = !/*card*/
    ctx[7].isValid && create_if_block_2$2();
    const if_block_creators = [create_if_block_1$3, create_else_block$2];
    const if_blocks = [];
    function select_block_type(ctx2, dirty) {
      if (
        /*selectedGifts*/
        (ctx2[2][
          /*i*/
          ctx2[9]
        ] ?? []).length === +/*card*/
        (ctx2[7].freeGift.numberOfProduct ?? 0)
      )
        return 0;
      return 1;
    }
    current_block_type_index = select_block_type(ctx);
    if_block1 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
    tooltip = new Tooltip({
      props: {
        title: (
          /*card*/
          ctx[7].isValid ? " Congrats! Free Gifts Unlocked" : (
            /*textBeforeGoal*/
            ctx[4](
              /*card*/
              ctx[7]
            )
          )
        ),
        $$slots: { default: [create_default_slot] },
        $$scope: { ctx }
      }
    });
    let if_block2 = (
      /*card*/
      ctx[7].isValid && create_if_block$5(ctx)
    );
    return {
      c() {
        var _a;
        div2 = element("div");
        div0 = element("div");
        img = element("img");
        t0 = space();
        if (if_block0)
          if_block0.c();
        t1 = space();
        div1 = element("div");
        if_block1.c();
        t2 = space();
        create_component(tooltip.$$.fragment);
        t3 = space();
        if (if_block2)
          if_block2.c();
        t4 = space();
        if (!src_url_equal(img.src, img_src_value = /*card*/
        ((_a = ctx[7].freeGiftImageUrl) == null ? void 0 : _a.length) > 0 ? (
          /*card*/
          ctx[7].freeGiftImageUrl
        ) : gift_image))
          attr(img, "src", img_src_value);
        attr(img, "class", "gift-image svelte-ur1xke");
        attr(img, "alt", "gift");
        attr(div0, "class", "gift-image-section svelte-ur1xke");
        attr(div1, "class", "card-content svelte-ur1xke");
        attr(div2, "class", "card svelte-ur1xke");
      },
      m(target, anchor) {
        insert(target, div2, anchor);
        append(div2, div0);
        append(div0, img);
        append(div0, t0);
        if (if_block0)
          if_block0.m(div0, null);
        append(div2, t1);
        append(div2, div1);
        if_blocks[current_block_type_index].m(div1, null);
        append(div1, t2);
        mount_component(tooltip, div1, null);
        append(div1, t3);
        if (if_block2)
          if_block2.m(div1, null);
        append(div2, t4);
        current = true;
      },
      p(ctx2, dirty) {
        var _a;
        if (!current || dirty & /*freebieInfo*/
        1 && !src_url_equal(img.src, img_src_value = /*card*/
        ((_a = ctx2[7].freeGiftImageUrl) == null ? void 0 : _a.length) > 0 ? (
          /*card*/
          ctx2[7].freeGiftImageUrl
        ) : gift_image)) {
          attr(img, "src", img_src_value);
        }
        if (!/*card*/
        ctx2[7].isValid) {
          if (if_block0)
            ;
          else {
            if_block0 = create_if_block_2$2();
            if_block0.c();
            if_block0.m(div0, null);
          }
        } else if (if_block0) {
          if_block0.d(1);
          if_block0 = null;
        }
        let previous_block_index = current_block_type_index;
        current_block_type_index = select_block_type(ctx2);
        if (current_block_type_index === previous_block_index) {
          if_blocks[current_block_type_index].p(ctx2, dirty);
        } else {
          group_outros();
          transition_out(if_blocks[previous_block_index], 1, 1, () => {
            if_blocks[previous_block_index] = null;
          });
          check_outros();
          if_block1 = if_blocks[current_block_type_index];
          if (!if_block1) {
            if_block1 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
            if_block1.c();
          } else {
            if_block1.p(ctx2, dirty);
          }
          transition_in(if_block1, 1);
          if_block1.m(div1, t2);
        }
        const tooltip_changes = {};
        if (dirty & /*freebieInfo*/
        1)
          tooltip_changes.title = /*card*/
          ctx2[7].isValid ? " Congrats! Free Gifts Unlocked" : (
            /*textBeforeGoal*/
            ctx2[4](
              /*card*/
              ctx2[7]
            )
          );
        if (dirty & /*$$scope, freebieInfo*/
        1025) {
          tooltip_changes.$$scope = { dirty, ctx: ctx2 };
        }
        tooltip.$set(tooltip_changes);
        if (
          /*card*/
          ctx2[7].isValid
        ) {
          if (if_block2) {
            if_block2.p(ctx2, dirty);
          } else {
            if_block2 = create_if_block$5(ctx2);
            if_block2.c();
            if_block2.m(div1, null);
          }
        } else if (if_block2) {
          if_block2.d(1);
          if_block2 = null;
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block1);
        transition_in(tooltip.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(if_block1);
        transition_out(tooltip.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div2);
        }
        if (if_block0)
          if_block0.d();
        if_blocks[current_block_type_index].d();
        destroy_component(tooltip);
        if (if_block2)
          if_block2.d();
      }
    };
  }
  function create_fragment$5(ctx) {
    var _a, _b;
    let div1;
    let h2;
    let t0_value = (
      /*$store_configurations*/
      (((_b = (_a = ctx[1]) == null ? void 0 : _a.freeGifts) == null ? void 0 : _b.offerTitle) ?? "") + ""
    );
    let t0;
    let t1;
    let div0;
    let current;
    let each_value = ensure_array_like(
      /*freebieInfo*/
      ctx[0]
    );
    let each_blocks = [];
    for (let i = 0; i < each_value.length; i += 1) {
      each_blocks[i] = create_each_block(get_each_context(ctx, each_value, i));
    }
    const out = (i) => transition_out(each_blocks[i], 1, 1, () => {
      each_blocks[i] = null;
    });
    return {
      c() {
        var _a2, _b2;
        div1 = element("div");
        h2 = element("h2");
        t0 = text(t0_value);
        t1 = space();
        div0 = element("div");
        for (let i = 0; i < each_blocks.length; i += 1) {
          each_blocks[i].c();
        }
        attr(h2, "class", "svelte-ur1xke");
        attr(div0, "class", "slider-window svelte-ur1xke");
        attr(div1, "class", "offers-slider svelte-ur1xke");
        set_style(
          div1,
          "background-color",
          /*$store_configurations*/
          ((_b2 = (_a2 = ctx[1]) == null ? void 0 : _a2.freeGifts) == null ? void 0 : _b2.primaryColor) ?? "#fff"
        );
      },
      m(target, anchor) {
        insert(target, div1, anchor);
        append(div1, h2);
        append(h2, t0);
        append(div1, t1);
        append(div1, div0);
        for (let i = 0; i < each_blocks.length; i += 1) {
          if (each_blocks[i]) {
            each_blocks[i].m(div0, null);
          }
        }
        current = true;
      },
      p(ctx2, [dirty]) {
        var _a2, _b2, _c, _d;
        if ((!current || dirty & /*$store_configurations*/
        2) && t0_value !== (t0_value = /*$store_configurations*/
        (((_b2 = (_a2 = ctx2[1]) == null ? void 0 : _a2.freeGifts) == null ? void 0 : _b2.offerTitle) ?? "") + ""))
          set_data(t0, t0_value);
        if (dirty & /*openBottomSheet, freebieInfo, selectedGifts, textBeforeGoal*/
        29) {
          each_value = ensure_array_like(
            /*freebieInfo*/
            ctx2[0]
          );
          let i;
          for (i = 0; i < each_value.length; i += 1) {
            const child_ctx = get_each_context(ctx2, each_value, i);
            if (each_blocks[i]) {
              each_blocks[i].p(child_ctx, dirty);
              transition_in(each_blocks[i], 1);
            } else {
              each_blocks[i] = create_each_block(child_ctx);
              each_blocks[i].c();
              transition_in(each_blocks[i], 1);
              each_blocks[i].m(div0, null);
            }
          }
          group_outros();
          for (i = each_value.length; i < each_blocks.length; i += 1) {
            out(i);
          }
          check_outros();
        }
        if (!current || dirty & /*$store_configurations*/
        2) {
          set_style(
            div1,
            "background-color",
            /*$store_configurations*/
            ((_d = (_c = ctx2[1]) == null ? void 0 : _c.freeGifts) == null ? void 0 : _d.primaryColor) ?? "#fff"
          );
        }
      },
      i(local) {
        if (current)
          return;
        for (let i = 0; i < each_value.length; i += 1) {
          transition_in(each_blocks[i]);
        }
        current = true;
      },
      o(local) {
        each_blocks = each_blocks.filter(Boolean);
        for (let i = 0; i < each_blocks.length; i += 1) {
          transition_out(each_blocks[i]);
        }
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div1);
        }
        destroy_each(each_blocks, detaching);
      }
    };
  }
  function instance$5($$self, $$props, $$invalidate) {
    let freebieInfo;
    let selectedGifts;
    let $store_configurations;
    let $store_cart;
    component_subscribe($$self, store_configurations, ($$value) => $$invalidate(1, $store_configurations = $$value));
    component_subscribe($$self, store_cart, ($$value) => $$invalidate(5, $store_cart = $$value));
    const openBottomSheet = (gifts, numberOfGifts) => {
      store_bottomSheet.set({
        type: "Gift",
        title: `Choose Any ${numberOfGifts} Free Gift`,
        component: GiftList,
        componentData: { gifts, numberOfGifts },
        show: true
      });
    };
    onMount(() => {
      var _a;
      const cart2 = $store_cart;
      const freebiesStatus = checkFreebieUnlocked($store_configurations == null ? void 0 : $store_configurations.freeGifts, cart2);
      if (Array.isArray((_a = $store_configurations == null ? void 0 : $store_configurations.freeGifts) == null ? void 0 : _a.freeGifts)) {
        $store_configurations.freeGifts.freeGifts.forEach((freeGiftConfig2) => {
          const thisFreebieStatus = freebiesStatus.find((f) => f.freeGift === freeGiftConfig2);
          const isUnlocked = thisFreebieStatus == null ? void 0 : thisFreebieStatus.isValid;
          const maxAllowed = Number((freeGiftConfig2 == null ? void 0 : freeGiftConfig2.numberOfProduct) ?? freeGiftConfig2.gifts.length);
          const selected = freeGiftConfig2.gifts.filter((gift) => {
            var _a2;
            return isUnlocked && ((_a2 = cart2 == null ? void 0 : cart2.items) == null ? void 0 : _a2.find((item) => {
              var _a3;
              return ((_a3 = item == null ? void 0 : item.properties) == null ? void 0 : _a3["_gokwik_freebie"]) && (item == null ? void 0 : item.id) === +cleanShopifyIds(gift == null ? void 0 : gift.shopifyFreeGiftVariantId);
            }));
          }).slice(0, maxAllowed).map((gift) => +cleanShopifyIds(gift == null ? void 0 : gift.shopifyFreeGiftVariantId));
          updateCartFreebieVariantCountFromSelected(selected, freeGiftConfig2.gifts);
        });
      }
    });
    const textBeforeGoal = (card) => {
      if (card.freeGift.conditions.length === 0) {
        return "";
      }
      const { field } = card.freeGift.conditions[0];
      const currentCartValue = {
        CART_QUANTITY: card.quantity,
        CART_DISCOUNT_PRICE: card.discountedPrice,
        CART_SUBTOTAL: card.subtotal
      }[field] || card.subtotal;
      return (card.freeGift.textBeforeGoal ?? "").replace("{{amount_left}}", (+card.freeGift.conditions[0].value + 1 - currentCartValue).toString());
    };
    const click_handler2 = (card) => {
      var _a;
      return openBottomSheet(card.freeGift.gifts, +(((_a = card == null ? void 0 : card.freeGift) == null ? void 0 : _a.numberOfProduct) ?? 0));
    };
    $$self.$$.update = () => {
      if ($$self.$$.dirty & /*$store_configurations, $store_cart*/
      34) {
        $$invalidate(0, freebieInfo = checkFreebieUnlocked($store_configurations == null ? void 0 : $store_configurations.freeGifts, $store_cart));
      }
      if ($$self.$$.dirty & /*freebieInfo, $store_cart*/
      33) {
        {
          const allGifts = [];
          freebieInfo.forEach((freebie) => {
            freebie.freeGift.gifts.forEach((gift) => {
              const variantId = +cleanShopifyIds(gift == null ? void 0 : gift.shopifyFreeGiftVariantId);
              const isGiftQuantity = allGifts.find((item) => item.id === variantId);
              if (isGiftQuantity) {
                if (freebie.isValid) {
                  isGiftQuantity.quantity += +((gift == null ? void 0 : gift.quantity) ?? 1);
                }
              } else {
                allGifts.push({
                  id: variantId,
                  quantity: freebie.isValid ? +((gift == null ? void 0 : gift.quantity) ?? 1) : 0
                });
              }
            });
          });
          allGifts.forEach((gift) => {
            const cartItem = $store_cart == null ? void 0 : $store_cart.items.find((item) => {
              var _a;
              return ((_a = item == null ? void 0 : item.properties) == null ? void 0 : _a["_gokwik_freebie"]) && (item == null ? void 0 : item.id) === gift.id;
            });
            if (cartItem && gift.quantity === 0) {
              changeCart({
                id: gift.id + "",
                quantity: 0,
                properties: { "_gokwik_freebie": true }
              });
            } else if (cartItem && cartItem.quantity > gift.quantity) {
              changeCart({
                id: gift.id + "",
                quantity: gift.quantity,
                properties: { "_gokwik_freebie": true }
              });
            }
          });
        }
      }
      if ($$self.$$.dirty & /*freebieInfo, $store_cart*/
      33) {
        $$invalidate(2, selectedGifts = freebieInfo.map((freebie) => {
          const giftsInCart = [];
          if (!freebie.isValid) {
            updateCartFreebieVariantCountFromSelected(giftsInCart, freebie.freeGift.gifts);
            return giftsInCart;
          }
          freebie.freeGift.gifts.forEach((gift) => {
            if ($store_cart == null ? void 0 : $store_cart.items.find((item) => {
              var _a;
              return ((_a = item == null ? void 0 : item.properties) == null ? void 0 : _a["_gokwik_freebie"]) && (item == null ? void 0 : item.id) === +cleanShopifyIds(gift == null ? void 0 : gift.shopifyFreeGiftVariantId);
            })) {
              giftsInCart.push(+cleanShopifyIds(gift == null ? void 0 : gift.shopifyFreeGiftVariantId));
            }
          });
          updateCartFreebieVariantCountFromSelected(giftsInCart, freebie.freeGift.gifts);
          return giftsInCart;
        }));
      }
    };
    return [
      freebieInfo,
      $store_configurations,
      selectedGifts,
      openBottomSheet,
      textBeforeGoal,
      $store_cart,
      click_handler2
    ];
  }
  class FreeGiftSection extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$5, create_fragment$5, safe_not_equal, {}, add_css$5);
    }
  }
  function add_css$4(target) {
    append_styles(target, "svelte-1nlkjzs", '.top-section.svelte-1nlkjzs.svelte-1nlkjzs{position:relative;height:calc(100% - 140px);overflow:scroll;scrollbar-width:none;-ms-overflow-style:none}.top-section.svelte-1nlkjzs.svelte-1nlkjzs::-webkit-scrollbar{display:none}.offer-popup.svelte-1nlkjzs.svelte-1nlkjzs{height:120% !important;justify-content:unset !important}.sidecart.svelte-1nlkjzs.svelte-1nlkjzs{z-index:9999999;position:fixed;top:0;right:0;width:400px;background:var(--Gray-100, #f2f4f7);height:100%;border-radius:15px 0 0 15px;display:flex;flex-direction:column;justify-content:space-between;font-family:var(--gokwik-font-style), "Inter"}.sidecart.svelte-1nlkjzs .instruction.svelte-1nlkjzs{background:#f7e6d2;border-radius:10px;margin:0px 10px;border:1px solid}.sidecart.svelte-1nlkjzs .confetti-canvas.svelte-1nlkjzs{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;z-index:50}.side-cart-content-wrapper.svelte-1nlkjzs.svelte-1nlkjzs{display:flex;flex-direction:column;height:calc(100% - 10px);overflow:scroll}.hide-scrollbar.svelte-1nlkjzs.svelte-1nlkjzs{scrollbar-width:none;-ms-overflow-style:none}.hide-scrollbar.svelte-1nlkjzs.svelte-1nlkjzs::-webkit-scrollbar{display:none}.show-scrollbar.svelte-1nlkjzs.svelte-1nlkjzs{scrollbar-width:thin;-ms-overflow-style:auto}@media(max-width: 400px){.sidecart.svelte-1nlkjzs.svelte-1nlkjzs{width:100%;border-radius:0px}.side-cart-content-wrapper.svelte-1nlkjzs.svelte-1nlkjzs{padding-bottom:20px}}.overlay-screen.svelte-1nlkjzs.svelte-1nlkjzs{position:absolute;width:400px;height:100vh;background:black;right:0px;top:0;z-index:99999999;opacity:0.2}');
  }
  function create_if_block_8(ctx) {
    var _a, _b, _c, _d;
    let tieredrewards;
    let current;
    tieredrewards = new TieredRewards({
      props: {
        cartValue: (
          /*tieredRewardsCartValue*/
          ctx[7]
        ),
        tieredRewards: (
          /*$store_configurations*/
          (_a = ctx[3]) == null ? void 0 : _a.tieredRewards
        ),
        milestones: (
          /*$store_configurations*/
          ((_d = (_c = (_b = ctx[3]) == null ? void 0 : _b.tieredRewards) == null ? void 0 : _c.rewards) == null ? void 0 : _d.sort(func)) || []
        )
      }
    });
    return {
      c() {
        create_component(tieredrewards.$$.fragment);
      },
      m(target, anchor) {
        mount_component(tieredrewards, target, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c2, _d2;
        const tieredrewards_changes = {};
        if (dirty & /*tieredRewardsCartValue*/
        128)
          tieredrewards_changes.cartValue = /*tieredRewardsCartValue*/
          ctx2[7];
        if (dirty & /*$store_configurations*/
        8)
          tieredrewards_changes.tieredRewards = /*$store_configurations*/
          (_a2 = ctx2[3]) == null ? void 0 : _a2.tieredRewards;
        if (dirty & /*$store_configurations*/
        8)
          tieredrewards_changes.milestones = /*$store_configurations*/
          ((_d2 = (_c2 = (_b2 = ctx2[3]) == null ? void 0 : _b2.tieredRewards) == null ? void 0 : _c2.rewards) == null ? void 0 : _d2.sort(func)) || [];
        tieredrewards.$set(tieredrewards_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(tieredrewards.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(tieredrewards.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(tieredrewards, detaching);
      }
    };
  }
  function create_if_block_7(ctx) {
    let emptycart;
    let current;
    emptycart = new EmptyCart({});
    return {
      c() {
        create_component(emptycart.$$.fragment);
      },
      m(target, anchor) {
        mount_component(emptycart, target, anchor);
        current = true;
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(emptycart.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(emptycart.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(emptycart, detaching);
      }
    };
  }
  function create_if_block_2$1(ctx) {
    let current_block_type_index;
    let if_block;
    let if_block_anchor;
    let current;
    const if_block_creators = [create_if_block_3$1, create_else_block$1];
    const if_blocks = [];
    function select_block_type_1(ctx2, dirty) {
      if (
        /*$store_offerPopup*/
        ctx2[10]
      )
        return 0;
      return 1;
    }
    current_block_type_index = select_block_type_1(ctx);
    if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
    return {
      c() {
        if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if_blocks[current_block_type_index].m(target, anchor);
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        let previous_block_index = current_block_type_index;
        current_block_type_index = select_block_type_1(ctx2);
        if (current_block_type_index === previous_block_index) {
          if_blocks[current_block_type_index].p(ctx2, dirty);
        } else {
          group_outros();
          transition_out(if_blocks[previous_block_index], 1, 1, () => {
            if_blocks[previous_block_index] = null;
          });
          check_outros();
          if_block = if_blocks[current_block_type_index];
          if (!if_block) {
            if_block = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
            if_block.c();
          } else {
            if_block.p(ctx2, dirty);
          }
          transition_in(if_block, 1);
          if_block.m(if_block_anchor.parentNode, if_block_anchor);
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if_blocks[current_block_type_index].d(detaching);
      }
    };
  }
  function create_else_block$1(ctx) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    let div;
    let productlist;
    let t0;
    let onetickupsell;
    let t1;
    let t2;
    let t3;
    let t4;
    let upsell;
    let div_class_value;
    let current;
    productlist = new ProductList({});
    onetickupsell = new OneTickUpsell({});
    let if_block0 = (
      /*$store_configurations*/
      ((_b = (_a = ctx[3]) == null ? void 0 : _a.discountDisplayConfig) == null ? void 0 : _b.enabled) && /*$store_configurations*/
      (((_d = (_c = ctx[3]) == null ? void 0 : _c.discountDisplayConfig) == null ? void 0 : _d.showInputOnly) || /*$store_configurations*/
      ((_f = (_e = ctx[3]) == null ? void 0 : _e.discountDisplayConfig) == null ? void 0 : _f.showOfferList)) && create_if_block_6()
    );
    let if_block1 = (
      /*showOrderNote*/
      ctx[5] && create_if_block_5()
    );
    let if_block2 = (
      /*$store_configurations*/
      ((_h = (_g = ctx[3]) == null ? void 0 : _g.freeGifts) == null ? void 0 : _h.offerType) === "USER_SELECTED" && create_if_block_4()
    );
    upsell = new UpSell({});
    return {
      c() {
        var _a2, _b2, _c2;
        div = element("div");
        create_component(productlist.$$.fragment);
        t0 = space();
        create_component(onetickupsell.$$.fragment);
        t1 = space();
        if (if_block0)
          if_block0.c();
        t2 = space();
        if (if_block1)
          if_block1.c();
        t3 = space();
        if (if_block2)
          if_block2.c();
        t4 = space();
        create_component(upsell.$$.fragment);
        attr(div, "class", div_class_value = null_to_empty(`side-cart-content-wrapper ${/*$store_configurations*/
        ((_c2 = (_b2 = (_a2 = ctx[3]) == null ? void 0 : _a2.appearance) == null ? void 0 : _b2.showAllProducts) == null ? void 0 : _c2.enable) ? "show-scrollbar" : "hide-scrollbar"}`) + " svelte-1nlkjzs");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        mount_component(productlist, div, null);
        append(div, t0);
        mount_component(onetickupsell, div, null);
        append(div, t1);
        if (if_block0)
          if_block0.m(div, null);
        append(div, t2);
        if (if_block1)
          if_block1.m(div, null);
        append(div, t3);
        if (if_block2)
          if_block2.m(div, null);
        append(div, t4);
        mount_component(upsell, div, null);
        current = true;
      },
      p(ctx2, dirty) {
        var _a2, _b2, _c2, _d2, _e2, _f2, _g2, _h2, _i, _j, _k;
        if (
          /*$store_configurations*/
          ((_b2 = (_a2 = ctx2[3]) == null ? void 0 : _a2.discountDisplayConfig) == null ? void 0 : _b2.enabled) && /*$store_configurations*/
          (((_d2 = (_c2 = ctx2[3]) == null ? void 0 : _c2.discountDisplayConfig) == null ? void 0 : _d2.showInputOnly) || /*$store_configurations*/
          ((_f2 = (_e2 = ctx2[3]) == null ? void 0 : _e2.discountDisplayConfig) == null ? void 0 : _f2.showOfferList))
        ) {
          if (if_block0) {
            if (dirty & /*$store_configurations*/
            8) {
              transition_in(if_block0, 1);
            }
          } else {
            if_block0 = create_if_block_6();
            if_block0.c();
            transition_in(if_block0, 1);
            if_block0.m(div, t2);
          }
        } else if (if_block0) {
          group_outros();
          transition_out(if_block0, 1, 1, () => {
            if_block0 = null;
          });
          check_outros();
        }
        if (
          /*showOrderNote*/
          ctx2[5]
        ) {
          if (if_block1) {
            if (dirty & /*showOrderNote*/
            32) {
              transition_in(if_block1, 1);
            }
          } else {
            if_block1 = create_if_block_5();
            if_block1.c();
            transition_in(if_block1, 1);
            if_block1.m(div, t3);
          }
        } else if (if_block1) {
          group_outros();
          transition_out(if_block1, 1, 1, () => {
            if_block1 = null;
          });
          check_outros();
        }
        if (
          /*$store_configurations*/
          ((_h2 = (_g2 = ctx2[3]) == null ? void 0 : _g2.freeGifts) == null ? void 0 : _h2.offerType) === "USER_SELECTED"
        ) {
          if (if_block2) {
            if (dirty & /*$store_configurations*/
            8) {
              transition_in(if_block2, 1);
            }
          } else {
            if_block2 = create_if_block_4();
            if_block2.c();
            transition_in(if_block2, 1);
            if_block2.m(div, t4);
          }
        } else if (if_block2) {
          group_outros();
          transition_out(if_block2, 1, 1, () => {
            if_block2 = null;
          });
          check_outros();
        }
        if (!current || dirty & /*$store_configurations*/
        8 && div_class_value !== (div_class_value = null_to_empty(`side-cart-content-wrapper ${/*$store_configurations*/
        ((_k = (_j = (_i = ctx2[3]) == null ? void 0 : _i.appearance) == null ? void 0 : _j.showAllProducts) == null ? void 0 : _k.enable) ? "show-scrollbar" : "hide-scrollbar"}`) + " svelte-1nlkjzs")) {
          attr(div, "class", div_class_value);
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(productlist.$$.fragment, local);
        transition_in(onetickupsell.$$.fragment, local);
        transition_in(if_block0);
        transition_in(if_block1);
        transition_in(if_block2);
        transition_in(upsell.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(productlist.$$.fragment, local);
        transition_out(onetickupsell.$$.fragment, local);
        transition_out(if_block0);
        transition_out(if_block1);
        transition_out(if_block2);
        transition_out(upsell.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        destroy_component(productlist);
        destroy_component(onetickupsell);
        if (if_block0)
          if_block0.d();
        if (if_block1)
          if_block1.d();
        if (if_block2)
          if_block2.d();
        destroy_component(upsell);
      }
    };
  }
  function create_if_block_3$1(ctx) {
    let offerpopup;
    let current;
    offerpopup = new OfferPopup({});
    return {
      c() {
        create_component(offerpopup.$$.fragment);
      },
      m(target, anchor) {
        mount_component(offerpopup, target, anchor);
        current = true;
      },
      p: noop,
      i(local) {
        if (current)
          return;
        transition_in(offerpopup.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(offerpopup.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(offerpopup, detaching);
      }
    };
  }
  function create_if_block_6(ctx) {
    let offerbox;
    let current;
    offerbox = new OfferBox({});
    return {
      c() {
        create_component(offerbox.$$.fragment);
      },
      m(target, anchor) {
        mount_component(offerbox, target, anchor);
        current = true;
      },
      i(local) {
        if (current)
          return;
        transition_in(offerbox.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(offerbox.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(offerbox, detaching);
      }
    };
  }
  function create_if_block_5(ctx) {
    let ordernote;
    let current;
    ordernote = new OrderNote({});
    return {
      c() {
        create_component(ordernote.$$.fragment);
      },
      m(target, anchor) {
        mount_component(ordernote, target, anchor);
        current = true;
      },
      i(local) {
        if (current)
          return;
        transition_in(ordernote.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(ordernote.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(ordernote, detaching);
      }
    };
  }
  function create_if_block_4(ctx) {
    let freegiftsection;
    let current;
    freegiftsection = new FreeGiftSection({});
    return {
      c() {
        create_component(freegiftsection.$$.fragment);
      },
      m(target, anchor) {
        mount_component(freegiftsection, target, anchor);
        current = true;
      },
      i(local) {
        if (current)
          return;
        transition_in(freegiftsection.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(freegiftsection.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(freegiftsection, detaching);
      }
    };
  }
  function create_if_block_1$2(ctx) {
    let footer;
    let current;
    footer = new Footer({
      props: { current_env: (
        /*current_env*/
        ctx[0]
      ) }
    });
    return {
      c() {
        create_component(footer.$$.fragment);
      },
      m(target, anchor) {
        mount_component(footer, target, anchor);
        current = true;
      },
      p(ctx2, dirty) {
        const footer_changes = {};
        if (dirty & /*current_env*/
        1)
          footer_changes.current_env = /*current_env*/
          ctx2[0];
        footer.$set(footer_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(footer.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(footer.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(footer, detaching);
      }
    };
  }
  function create_if_block$4(ctx) {
    let loader;
    let current;
    loader = new Loader({});
    return {
      c() {
        create_component(loader.$$.fragment);
      },
      m(target, anchor) {
        mount_component(loader, target, anchor);
        current = true;
      },
      i(local) {
        if (current)
          return;
        transition_in(loader.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(loader.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(loader, detaching);
      }
    };
  }
  function create_fragment$4(ctx) {
    var _a, _b, _c, _d, _e, _f;
    let div1;
    let canvas_1;
    let t0;
    let header;
    let t1;
    let t2;
    let div0;
    let current_block_type_index;
    let if_block1;
    let t3;
    let t4;
    let t5;
    let snackbar;
    let t6;
    let bottomsheet;
    let div1_class_value;
    let current;
    let mounted;
    let dispose;
    header = new Header({});
    let if_block0 = (
      /*$store_configurations*/
      ((_b = (_a = ctx[3]) == null ? void 0 : _a.tieredRewards) == null ? void 0 : _b.enable) && /*cartTotal*/
      ctx[9] && /*cartCount*/
      ctx[8] && /*$store_configurations*/
      ((_e = (_d = (_c = ctx[3]) == null ? void 0 : _c.tieredRewards) == null ? void 0 : _d.rewards) == null ? void 0 : _e.length) > 0 && !/*$store_offerPopup*/
      ctx[10] && create_if_block_8(ctx)
    );
    const if_block_creators = [create_if_block_2$1, create_if_block_7];
    const if_blocks = [];
    function select_block_type(ctx2, dirty) {
      var _a2, _b2;
      if (
        /*cart*/
        (_a2 = ctx2[4]) == null ? void 0 : _a2.item_count
      )
        return 0;
      if (!/*cart*/
      ((_b2 = ctx2[4]) == null ? void 0 : _b2.item_count))
        return 1;
      return -1;
    }
    if (~(current_block_type_index = select_block_type(ctx))) {
      if_block1 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
    }
    let if_block2 = !/*$store_offerPopup*/
    ctx[10] && /*cart*/
    ((_f = ctx[4]) == null ? void 0 : _f.item_count) && create_if_block_1$2(ctx);
    let if_block3 = (
      /*$store_freeGiftLoading*/
      (ctx[11] || /*cartDataLoader*/
      ctx[1] || /*$store_apiLoader*/
      ctx[12]) && create_if_block$4()
    );
    snackbar = new Snackbar({});
    bottomsheet = new BottomSheet({});
    return {
      c() {
        div1 = element("div");
        canvas_1 = element("canvas");
        t0 = space();
        create_component(header.$$.fragment);
        t1 = space();
        if (if_block0)
          if_block0.c();
        t2 = space();
        div0 = element("div");
        if (if_block1)
          if_block1.c();
        t3 = space();
        if (if_block2)
          if_block2.c();
        t4 = space();
        if (if_block3)
          if_block3.c();
        t5 = space();
        create_component(snackbar.$$.fragment);
        t6 = space();
        create_component(bottomsheet.$$.fragment);
        attr(canvas_1, "class", "confetti-canvas svelte-1nlkjzs");
        attr(div0, "class", "top-section svelte-1nlkjzs");
        attr(div1, "class", div1_class_value = "sidecart " + /*$store_offerPopup*/
        (ctx[10] && "offer-popup") + " svelte-1nlkjzs");
        set_style(
          div1,
          "pointer-events",
          /*current_env*/
          ctx[0] === TextConstants.environment_constants.dashboard ? "none" : "auto"
        );
      },
      m(target, anchor) {
        insert(target, div1, anchor);
        append(div1, canvas_1);
        ctx[17](canvas_1);
        append(div1, t0);
        mount_component(header, div1, null);
        append(div1, t1);
        if (if_block0)
          if_block0.m(div1, null);
        append(div1, t2);
        append(div1, div0);
        if (~current_block_type_index) {
          if_blocks[current_block_type_index].m(div0, null);
        }
        append(div1, t3);
        if (if_block2)
          if_block2.m(div1, null);
        append(div1, t4);
        if (if_block3)
          if_block3.m(div1, null);
        append(div1, t5);
        mount_component(snackbar, div1, null);
        append(div1, t6);
        mount_component(bottomsheet, div1, null);
        ctx[18](div1);
        current = true;
        if (!mounted) {
          dispose = listen(div1, "click", click_handler);
          mounted = true;
        }
      },
      p(ctx2, [dirty]) {
        var _a2, _b2, _c2, _d2, _e2, _f2;
        if (
          /*$store_configurations*/
          ((_b2 = (_a2 = ctx2[3]) == null ? void 0 : _a2.tieredRewards) == null ? void 0 : _b2.enable) && /*cartTotal*/
          ctx2[9] && /*cartCount*/
          ctx2[8] && /*$store_configurations*/
          ((_e2 = (_d2 = (_c2 = ctx2[3]) == null ? void 0 : _c2.tieredRewards) == null ? void 0 : _d2.rewards) == null ? void 0 : _e2.length) > 0 && !/*$store_offerPopup*/
          ctx2[10]
        ) {
          if (if_block0) {
            if_block0.p(ctx2, dirty);
            if (dirty & /*$store_configurations, cartTotal, cartCount, $store_offerPopup*/
            1800) {
              transition_in(if_block0, 1);
            }
          } else {
            if_block0 = create_if_block_8(ctx2);
            if_block0.c();
            transition_in(if_block0, 1);
            if_block0.m(div1, t2);
          }
        } else if (if_block0) {
          group_outros();
          transition_out(if_block0, 1, 1, () => {
            if_block0 = null;
          });
          check_outros();
        }
        let previous_block_index = current_block_type_index;
        current_block_type_index = select_block_type(ctx2);
        if (current_block_type_index === previous_block_index) {
          if (~current_block_type_index) {
            if_blocks[current_block_type_index].p(ctx2, dirty);
          }
        } else {
          if (if_block1) {
            group_outros();
            transition_out(if_blocks[previous_block_index], 1, 1, () => {
              if_blocks[previous_block_index] = null;
            });
            check_outros();
          }
          if (~current_block_type_index) {
            if_block1 = if_blocks[current_block_type_index];
            if (!if_block1) {
              if_block1 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
              if_block1.c();
            } else {
              if_block1.p(ctx2, dirty);
            }
            transition_in(if_block1, 1);
            if_block1.m(div0, null);
          } else {
            if_block1 = null;
          }
        }
        if (!/*$store_offerPopup*/
        ctx2[10] && /*cart*/
        ((_f2 = ctx2[4]) == null ? void 0 : _f2.item_count)) {
          if (if_block2) {
            if_block2.p(ctx2, dirty);
            if (dirty & /*$store_offerPopup, cart*/
            1040) {
              transition_in(if_block2, 1);
            }
          } else {
            if_block2 = create_if_block_1$2(ctx2);
            if_block2.c();
            transition_in(if_block2, 1);
            if_block2.m(div1, t4);
          }
        } else if (if_block2) {
          group_outros();
          transition_out(if_block2, 1, 1, () => {
            if_block2 = null;
          });
          check_outros();
        }
        if (
          /*$store_freeGiftLoading*/
          ctx2[11] || /*cartDataLoader*/
          ctx2[1] || /*$store_apiLoader*/
          ctx2[12]
        ) {
          if (if_block3) {
            if (dirty & /*$store_freeGiftLoading, cartDataLoader, $store_apiLoader*/
            6146) {
              transition_in(if_block3, 1);
            }
          } else {
            if_block3 = create_if_block$4();
            if_block3.c();
            transition_in(if_block3, 1);
            if_block3.m(div1, t5);
          }
        } else if (if_block3) {
          group_outros();
          transition_out(if_block3, 1, 1, () => {
            if_block3 = null;
          });
          check_outros();
        }
        if (!current || dirty & /*$store_offerPopup*/
        1024 && div1_class_value !== (div1_class_value = "sidecart " + /*$store_offerPopup*/
        (ctx2[10] && "offer-popup") + " svelte-1nlkjzs")) {
          attr(div1, "class", div1_class_value);
        }
        if (dirty & /*current_env*/
        1) {
          set_style(
            div1,
            "pointer-events",
            /*current_env*/
            ctx2[0] === TextConstants.environment_constants.dashboard ? "none" : "auto"
          );
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(header.$$.fragment, local);
        transition_in(if_block0);
        transition_in(if_block1);
        transition_in(if_block2);
        transition_in(if_block3);
        transition_in(snackbar.$$.fragment, local);
        transition_in(bottomsheet.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(header.$$.fragment, local);
        transition_out(if_block0);
        transition_out(if_block1);
        transition_out(if_block2);
        transition_out(if_block3);
        transition_out(snackbar.$$.fragment, local);
        transition_out(bottomsheet.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div1);
        }
        ctx[17](null);
        destroy_component(header);
        if (if_block0)
          if_block0.d();
        if (~current_block_type_index) {
          if_blocks[current_block_type_index].d();
        }
        if (if_block2)
          if_block2.d();
        if (if_block3)
          if_block3.d();
        destroy_component(snackbar);
        destroy_component(bottomsheet);
        ctx[18](null);
        mounted = false;
        dispose();
      }
    };
  }
  const func = (a, b) => a.goal - b.goal;
  const click_handler = (event) => {
    event == null ? void 0 : event.stopPropagation();
  };
  function instance$4($$self, $$props, $$invalidate) {
    let cartTotal;
    let cartCount;
    let $store_totalPayableAmount;
    let $store_configurations;
    let $store_cart;
    let $store_isOneTickUpsellVisible;
    let $store_showConfetti;
    let $store_isInitialConfettiShown;
    let $store_appliedAutomaticDiscounts;
    let $store_platform;
    let $store_isBuyNowCartDataLoading;
    let $store_isBuyNowFreebieProcessing;
    let $store_previousTieredRewardsCartValue;
    let $store_offerPopup;
    let $store_freeGiftLoading;
    let $store_apiLoader;
    component_subscribe($$self, store_totalPayableAmount, ($$value) => $$invalidate(13, $store_totalPayableAmount = $$value));
    component_subscribe($$self, store_configurations, ($$value) => $$invalidate(3, $store_configurations = $$value));
    component_subscribe($$self, store_cart, ($$value) => $$invalidate(14, $store_cart = $$value));
    component_subscribe($$self, store_isOneTickUpsellVisible, ($$value) => $$invalidate(15, $store_isOneTickUpsellVisible = $$value));
    component_subscribe($$self, store_showConfetti, ($$value) => $$invalidate(16, $store_showConfetti = $$value));
    component_subscribe($$self, store_isInitialConfettiShown, ($$value) => $$invalidate(24, $store_isInitialConfettiShown = $$value));
    component_subscribe($$self, store_appliedAutomaticDiscounts, ($$value) => $$invalidate(25, $store_appliedAutomaticDiscounts = $$value));
    component_subscribe($$self, store_platform, ($$value) => $$invalidate(26, $store_platform = $$value));
    component_subscribe($$self, store_isBuyNowCartDataLoading, ($$value) => $$invalidate(27, $store_isBuyNowCartDataLoading = $$value));
    component_subscribe($$self, store_isBuyNowFreebieProcessing, ($$value) => $$invalidate(28, $store_isBuyNowFreebieProcessing = $$value));
    component_subscribe($$self, store_previousTieredRewardsCartValue, ($$value) => $$invalidate(29, $store_previousTieredRewardsCartValue = $$value));
    component_subscribe($$self, store_offerPopup, ($$value) => $$invalidate(10, $store_offerPopup = $$value));
    component_subscribe($$self, store_freeGiftLoading, ($$value) => $$invalidate(11, $store_freeGiftLoading = $$value));
    component_subscribe($$self, store_apiLoader, ($$value) => $$invalidate(12, $store_apiLoader = $$value));
    let unsubCart, cart2, unsubLoader;
    let { current_env } = $$props;
    let { cartDataLoader } = $$props;
    let canvas;
    let showOrderNote = false;
    let sideCartRef;
    let tieredRewardsCartValue = $store_previousTieredRewardsCartValue;
    let oldAutomaticDiscounts = [];
    let skipAutomaticDiscountsConfetti = false;
    onMount(async () => {
      var _a, _b;
      unsubCart = store_cart.subscribe(async (res) => {
        var _a2, _b2, _c, _d, _e;
        $$invalidate(4, cart2 = res);
        ((_b2 = (_a2 = $store_configurations == null ? void 0 : $store_configurations.freeGifts) == null ? void 0 : _a2.freeGifts) == null ? void 0 : _b2.some((gift) => {
          var _a3;
          return (_a3 = gift == null ? void 0 : gift.conditions) == null ? void 0 : _a3.some((condition) => (condition == null ? void 0 : condition.field) === "CART_DISCOUNT_PRICE");
        })) && calculateTotalPayable(res);
        res.items && ((_c = $store_configurations == null ? void 0 : $store_configurations.freeGifts) == null ? void 0 : _c.offerType) !== "USER_SELECTED" && await checkAndAddFreebie($store_configurations == null ? void 0 : $store_configurations.freeGifts, res, false);
        removeInvalidProductsFromCart(cart2);
        if ($store_isBuyNowFreebieProcessing && !$store_isBuyNowCartDataLoading && ((_d = $store_configurations == null ? void 0 : $store_configurations.freeGifts) == null ? void 0 : _d.offerType) !== "USER_SELECTED") {
          store_isBuyNowFreebieProcessing.set(false);
          (_e = window == null ? void 0 : window.cartCheckoutClick) == null ? void 0 : _e.call(window, void 0, true);
        }
      });
      let loaderTimeout = null;
      unsubLoader = store_freeGiftLoading.subscribe((res) => {
        if (res) {
          if (loaderTimeout)
            clearTimeout(loaderTimeout);
          loaderTimeout = setTimeout(
            () => {
              store_freeGiftLoading.set(false);
            },
            4e3
          );
        } else {
          if (loaderTimeout) {
            clearTimeout(loaderTimeout);
            loaderTimeout = 0;
          }
        }
      });
      await getCart();
      fireGokwikTrigger(TextConstants.eventNames.sidecart_open, {
        banner_shown: false,
        banner_message: "",
        cart_subtotal: cart2.original_total_price / 100,
        automatic_discount: cart2.total_discount / 100,
        total: cart2.total_price / 100
      });
      logEvent(TextConstants.eventNames.sidecart_open, {
        banner_shown: false,
        banner_message: "",
        cart_subtotal: cart2.original_total_price / 100,
        automatic_discount: cart2.total_discount / 100,
        total: cart2.total_price / 100
      });
      let appliedDiscount2 = getCookie$1("discount_code") || getCookie$1("coupon_applied");
      if (appliedDiscount2 && $store_platform === TextConstants.platforms.Checkout1_0 && !($store_appliedAutomaticDiscounts == null ? void 0 : $store_appliedAutomaticDiscounts.some((discount) => discount.title === appliedDiscount2))) {
        const res = await applyMultipleDiscounts(appliedDiscount2.split(","));
        if (((_a = res == null ? void 0 : res.data) == null ? void 0 : _a.isValid) && !$store_showConfetti) {
          store_showConfetti.set(true);
        }
      }
      if (oldAutomaticDiscounts.length === 0 && $store_isInitialConfettiShown && ((_b = getDiscountsFromCart($store_cart)) == null ? void 0 : _b.length) > 0) {
        skipAutomaticDiscountsConfetti = true;
      }
      store_appliedAutomaticDiscounts.subscribe((res) => {
        if (skipAutomaticDiscountsConfetti) {
          skipAutomaticDiscountsConfetti = false;
          oldAutomaticDiscounts = res.map((discount) => discount.title);
          return;
        }
        const isNewDiscountApplied = res.find((discount) => !oldAutomaticDiscounts.includes(discount.title));
        if (isNewDiscountApplied && !$store_showConfetti && !skipAutomaticDiscountsConfetti) {
          store_showConfetti.set(true);
        }
        oldAutomaticDiscounts = res.map((discount) => discount.title);
      });
      store_sideCartRef.set(sideCartRef);
    });
    onDestroy(() => {
      if (unsubCart)
        unsubCart();
      if (unsubLoader)
        unsubLoader();
    });
    loadGoogleFonts();
    function getMatchingProducts2(cartItems, tieredRewards) {
      const selectedProducts = [];
      const selectedVariants = [];
      if ((tieredRewards == null ? void 0 : tieredRewards.selectedProducts) && (tieredRewards == null ? void 0 : tieredRewards.itemCategory) !== "all") {
        tieredRewards.selectedProducts.forEach((product) => {
          if (product.selectedVariants) {
            product.selectedVariants.forEach((variant) => {
              selectedVariants.push(cleanShopifyIds(variant.variantId));
            });
          } else {
            selectedProducts.push(cleanShopifyIds(product.productId));
          }
        });
      } else {
        return cartItems;
      }
      const matchingProducts = (cartItems == null ? void 0 : cartItems.filter((item) => selectedProducts.includes(`${item.product_id}`) || selectedVariants.includes(`${item.variant_id}`))) || [];
      return matchingProducts;
    }
    function canvas_1_binding($$value) {
      binding_callbacks[$$value ? "unshift" : "push"](() => {
        canvas = $$value;
        $$invalidate(2, canvas);
      });
    }
    function div1_binding($$value) {
      binding_callbacks[$$value ? "unshift" : "push"](() => {
        sideCartRef = $$value;
        $$invalidate(6, sideCartRef);
      });
    }
    $$self.$$set = ($$props2) => {
      if ("current_env" in $$props2)
        $$invalidate(0, current_env = $$props2.current_env);
      if ("cartDataLoader" in $$props2)
        $$invalidate(1, cartDataLoader = $$props2.cartDataLoader);
    };
    $$self.$$.update = () => {
      var _a, _b, _c, _d, _e, _f, _g, _h, _i;
      if ($$self.$$.dirty & /*canvas, $store_configurations, $store_showConfetti*/
      65548) {
        if (canvas && ((_a = $store_configurations == null ? void 0 : $store_configurations.tieredRewards) == null ? void 0 : _a.showConfetti) && $store_showConfetti) {
          const myConfetti = confetti.create(canvas, { resize: true });
          myConfetti({
            particleCount: 150,
            spread: 100,
            origin: { y: 0.5 }
          });
          setTimeout(
            () => {
              store_showConfetti.set(false);
            },
            2e3
          );
        }
      }
      if ($$self.$$.dirty & /*$store_cart*/
      16384) {
        $$invalidate(9, cartTotal = ($store_cart == null ? void 0 : $store_cart.total_price) / 100);
      }
      if ($$self.$$.dirty & /*$store_cart*/
      16384) {
        $$invalidate(8, cartCount = (_b = $store_cart == null ? void 0 : $store_cart.items) == null ? void 0 : _b.reduce(
          (acc, item) => {
            var _a2;
            if (!((_a2 = item == null ? void 0 : item.properties) == null ? void 0 : _a2["_gokwik_freebie"])) {
              acc += item.quantity;
            }
            return acc;
          },
          0
        ));
      }
      if ($$self.$$.dirty & /*$store_isOneTickUpsellVisible, $store_cart, $store_configurations*/
      49160) {
        $$invalidate(5, showOrderNote = !$store_isOneTickUpsellVisible || ($store_cart == null ? void 0 : $store_cart.note) || ((_c = $store_configurations == null ? void 0 : $store_configurations.orderNotes) == null ? void 0 : _c.title) && (((_d = $store_configurations == null ? void 0 : $store_configurations.orderNotes) == null ? void 0 : _d.title.length) > 20 || ((_f = (_e = $store_configurations == null ? void 0 : $store_configurations.oneTickUpsell) == null ? void 0 : _e.textToDisplay) == null ? void 0 : _f.length) > 30));
      }
      if ($$self.$$.dirty & /*$store_cart, $store_configurations, $store_totalPayableAmount*/
      24584) {
        {
          let eligibleItems = ((_g = $store_cart == null ? void 0 : $store_cart.items) == null ? void 0 : _g.filter((item) => {
            var _a2;
            return !((_a2 = item == null ? void 0 : item.properties) == null ? void 0 : _a2["_gokwik_freebie"]);
          })) || [];
          eligibleItems = getMatchingProducts2(eligibleItems, $store_configurations == null ? void 0 : $store_configurations.tieredRewards);
          if (((_h = $store_configurations == null ? void 0 : $store_configurations.tieredRewards) == null ? void 0 : _h.condition) === "CART_SUBTOTAL") {
            $$invalidate(7, tieredRewardsCartValue = (eligibleItems == null ? void 0 : eligibleItems.reduce(
              (acc, item) => {
                var _a2;
                return acc + ((((_a2 = $store_configurations == null ? void 0 : $store_configurations.tieredRewards) == null ? void 0 : _a2.excludeAutomaticDiscounts) ? item == null ? void 0 : item.line_price : item == null ? void 0 : item.original_line_price) ?? 0);
              },
              0
            )) / 100);
          } else if (((_i = $store_configurations == null ? void 0 : $store_configurations.tieredRewards) == null ? void 0 : _i.condition) === "CART_DISCOUNT_PRICE") {
            $$invalidate(7, tieredRewardsCartValue = +$store_totalPayableAmount);
          } else {
            $$invalidate(7, tieredRewardsCartValue = eligibleItems == null ? void 0 : eligibleItems.reduce(
              (acc, item) => {
                return acc + ((item == null ? void 0 : item.quantity) ?? 0);
              },
              0
            ));
          }
        }
      }
    };
    return [
      current_env,
      cartDataLoader,
      canvas,
      $store_configurations,
      cart2,
      showOrderNote,
      sideCartRef,
      tieredRewardsCartValue,
      cartCount,
      cartTotal,
      $store_offerPopup,
      $store_freeGiftLoading,
      $store_apiLoader,
      $store_totalPayableAmount,
      $store_cart,
      $store_isOneTickUpsellVisible,
      $store_showConfetti,
      canvas_1_binding,
      div1_binding
    ];
  }
  class SideCart extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$4, create_fragment$4, safe_not_equal, { current_env: 0, cartDataLoader: 1 }, add_css$4);
    }
  }
  const setLocalVariables = () => {
    store_cart.set({ "token": "Z2NwLWFzaWEtc291dGhlYXN0MTowMUpNMDRZQUZIWlJaS1IzQzVNNlkzWVo1RQ?key=751a5420c8b2b7373b47a6c6d69b8fec", "note": "", "attributes": {}, "original_total_price": 137990, "total_price": 137990, "total_discount": 0, "total_weight": 0, "item_count": 2, "items": [{ "id": 41949349511254, "properties": {}, "quantity": 1, "variant_id": 41949349511254, "key": "41949349511254:fb4a80f8b9598a4669aef1fd372807db", "title": "The Collection Snowboard: Liquid", "price": 74995, "original_price": 74995, "presentment_price": 749.95, "discounted_price": 74995, "line_price": 74995, "original_line_price": 74995, "total_discount": 0, "discounts": [], "sku": null, "grams": 0, "vendor": "Hydrogen Vendor", "taxable": true, "product_id": 7455521636438, "product_has_only_default_variant": true, "gift_card": false, "final_price": 74995, "final_line_price": 74995, "url": "/products/the-collection-snowboard-liquid?variant=41949349511254", "featured_image": { "aspect_ratio": 1, "alt": "Top and bottom view of a snowboard. The top view shows a stylized scene of water, trees, mountains,\n        sky and a moon in blue colours. The bottom view has a blue liquid, drippy background with the text liquid in\n        a stylized script typeface.", "height": 1600, "url": "https://cdn.shopify.com/s/files/1/0624/6347/5798/files/Main_b13ad453-477c-4ed1-9b43-81f3345adfd6.jpg?v=1732737144", "width": 1600 }, "image": "https://cdn.shopify.com/s/files/1/0624/6347/5798/files/Main_b13ad453-477c-4ed1-9b43-81f3345adfd6.jpg?v=1732737144", "handle": "the-collection-snowboard-liquid", "requires_shipping": true, "product_type": "snowboard", "product_title": "The Collection Snowboard: Liquid", "product_description": null, "variant_title": null, "variant_options": ["Default Title"], "options_with_values": [{ "name": "Title", "value": "Default Title" }], "line_level_discount_allocations": [], "line_level_total_discount": 0, "quantity_rule": { "min": 1, "max": null, "increment": 1 }, "has_components": false }, { "id": 41949349478486, "properties": {}, "quantity": 1, "variant_id": 41949349478486, "key": "41949349478486:ede759ad15da5cdec154652d8f03cffc", "title": "The Multi-managed Snowboard", "price": 62995, "original_price": 62995, "presentment_price": 629.95, "discounted_price": 62995, "line_price": 62995, "original_line_price": 62995, "total_discount": 0, "discounts": [], "sku": "sku-managed-1", "grams": 0, "vendor": "Multi-managed Vendor", "taxable": true, "product_id": 7455521603670, "product_has_only_default_variant": true, "gift_card": false, "final_price": 62995, "final_line_price": 62995, "url": "/products/the-multi-managed-snowboard?variant=41949349478486", "featured_image": { "aspect_ratio": 1, "alt": "Top and bottom view of a snowboard. The top view shows an illustration with varied outlined shapes\n        in black. The bottom view shows a black box character with an H pointing, and surrounded by black outlined\n        illustrative elements.", "height": 1600, "url": "https://cdn.shopify.com/s/files/1/0624/6347/5798/files/Main_9129b69a-0c7b-4f66-b6cf-c4222f18028a.jpg?v=1732737144", "width": 1600 }, "image": "https://cdn.shopify.com/s/files/1/0624/6347/5798/files/Main_9129b69a-0c7b-4f66-b6cf-c4222f18028a.jpg?v=1732737144", "handle": "the-multi-managed-snowboard", "requires_shipping": true, "product_type": "snowboard", "product_title": "The Multi-managed Snowboard", "product_description": null, "variant_title": null, "variant_options": ["Default Title"], "options_with_values": [{ "name": "Title", "value": "Default Title" }], "line_level_discount_allocations": [], "line_level_total_discount": 0, "quantity_rule": { "min": 1, "max": null, "increment": 1 }, "has_components": false }], "requires_shipping": true, "currency": "INR", "items_subtotal_price": 137990, "cart_level_discount_applications": [] });
    store_originalCartJS.set({ "token": "hWN1HtlFk1ULnTdBAmWEr72q?key=65c304f57044a4109729064e3944bddf", "note": "", "attributes": { "GoKwik-Cart": true }, "original_total_price": 599661, "total_price": 203487, "total_discount": 396174, "total_weight": 4500, "item_count": 6, "items": [{ "id": 40008004206800, "properties": { "Engraving": "", "_modifyPayloadQB": "true", "_modifyPayloadPB": "true" }, "quantity": 3, "variant_id": 40008004206800, "key": "40008004206800:2e542b93c7dc4ba19196ca918358c675", "title": "Alex Twill Pant in Mariner - Mariner / 29", "price": 1800, "original_price": 1800, "presentment_price": 18, "discounted_price": 1800, "line_price": 5400, "original_line_price": 5400, "total_discount": 0, "discounts": [{ "amount": 0, "title": "V2BWXV9RGX46" }], "sku": "18406", "grams": 1500, "vendor": "Homecore", "taxable": true, "product_id": 6715488600272, "product_has_only_default_variant": false, "gift_card": false, "final_price": 1800, "final_line_price": 5400, "url": "/products/alex-twill-pant-mariner?variant=40008004206800", "featured_image": { "aspect_ratio": 0.714, "alt": "Alex Twill Pant in Mariner", "height": 2048, "url": "https://cdn.shopify.com/s/files/1/0576/7158/1904/products/2014-09-04_Addis_Look_05_33_e5bd1ec6-f6f0-41b1-b0b1-afd6f0e527be.jpg?v=1628172833", "width": 1462 }, "image": "https://cdn.shopify.com/s/files/1/0576/7158/1904/products/2014-09-04_Addis_Look_05_33_e5bd1ec6-f6f0-41b1-b0b1-afd6f0e527be.jpg?v=1628172833", "handle": "alex-twill-pant-mariner", "requires_shipping": true, "product_type": "men's trousers", "product_title": "Alex Twill Pant in Mariner", "product_description": "\nRichly dyed cotton sets off cleanly styled, incredibly soft pants cut with a straight leg and classic five-pocket style by Homecore. Color Mariner. 98% Cotton. Addis is wearing a size 31. Addis is 62, Chest 38.5, Waist 31, Inseam 32.\nAlso available in Sand, Bordeaux, Dark Grey, and Navy. \nShop our collection of Homecore.", "variant_title": "Mariner / 29", "variant_options": ["Mariner", "29"], "options_with_values": [{ "name": "COLOR", "value": "Mariner" }, { "name": "SIZE", "value": "29" }], "line_level_discount_allocations": [{ "amount": 0, "discount_application": { "type": "", "key": "f06b6571-9e66-44e3-bf53-c5da494ddc25", "title": "V2BWXV9RGX46", "description": null, "value": "100.0", "created_at": "2025-10-09T08:16:47.103Z", "value_type": "percentage", "allocation_method": "each", "target_selection": "entitled", "target_type": "line_item", "total_allocated_amount": 396174 } }], "line_level_total_discount": 0, "quantity_rule": { "min": 1, "max": null, "increment": 1 }, "has_components": false }, { "id": 40008003518672, "properties": { "Engraving": "", "_modifyPayloadQB": "true", "_modifyPayloadPB": "true" }, "quantity": 1, "variant_id": 40008003518672, "key": "40008003518672:f6f257327fcf3da8189af826146e85c7", "title": "Alex Twill Pant in Navy - Navy / 29", "price": 198087, "original_price": 198087, "presentment_price": 1980.87, "discounted_price": 198087, "line_price": 198087, "original_line_price": 198087, "total_discount": 0, "discounts": [], "sku": "18399", "grams": 0, "vendor": "Homecore", "taxable": true, "product_id": 6715488239824, "product_has_only_default_variant": false, "gift_card": false, "final_price": 198087, "final_line_price": 198087, "url": "/products/alex-twill-pant-navy?variant=40008003518672", "featured_image": { "aspect_ratio": 0.667, "alt": "Alex Twill Pant in Navy", "height": 2048, "url": "https://cdn.shopify.com/s/files/1/0576/7158/1904/products/2014_11_3_Addis_Look14_01.jpg?v=1628172829", "width": 1366 }, "image": "https://cdn.shopify.com/s/files/1/0576/7158/1904/products/2014_11_3_Addis_Look14_01.jpg?v=1628172829", "handle": "alex-twill-pant-navy", "requires_shipping": true, "product_type": "men's trousers", "product_title": "Alex Twill Pant in Navy", "product_description": " \nRichly dyed cotton sets off cleanly styled, incredibly soft pants cut with a straight leg and classic five-pocket style by Homecore. Color Navy. 98% Cotton. Addis is wearing a size 31. Addis is 62, Chest 38.5, Waist 31, Inseam 32.\nAlso available in Sand, Bordeaux, Dark Grey, and Mariner.\nShop our collection of Homecore.\nc", "variant_title": "Navy / 29", "variant_options": ["Navy", "29"], "options_with_values": [{ "name": "COLOR", "value": "Navy" }, { "name": "SIZE", "value": "29" }], "line_level_discount_allocations": [], "line_level_total_discount": 0, "quantity_rule": { "min": 1, "max": null, "increment": 1 }, "has_components": false }, { "id": 40008003518672, "properties": { "Engraving": "", "_modifyPayloadQB": "true", "_modifyPayloadPB": "true" }, "quantity": 2, "variant_id": 40008003518672, "key": "40008003518672:81aecabfef3db3aef1e0485969252fa2", "title": "Alex Twill Pant in Navy - Navy / 29", "price": 198087, "original_price": 198087, "presentment_price": 1980.87, "discounted_price": 0, "line_price": 0, "original_line_price": 396174, "total_discount": 396174, "discounts": [{ "amount": 396174, "title": "V2BWXV9RGX46" }], "sku": "18399", "grams": 0, "vendor": "Homecore", "taxable": true, "product_id": 6715488239824, "product_has_only_default_variant": false, "gift_card": false, "final_price": 0, "final_line_price": 0, "url": "/products/alex-twill-pant-navy?variant=40008003518672", "featured_image": { "aspect_ratio": 0.667, "alt": "Alex Twill Pant in Navy", "height": 2048, "url": "https://cdn.shopify.com/s/files/1/0576/7158/1904/products/2014_11_3_Addis_Look14_01.jpg?v=1628172829", "width": 1366 }, "image": "https://cdn.shopify.com/s/files/1/0576/7158/1904/products/2014_11_3_Addis_Look14_01.jpg?v=1628172829", "handle": "alex-twill-pant-navy", "requires_shipping": true, "product_type": "men's trousers", "product_title": "Alex Twill Pant in Navy", "product_description": " \nRichly dyed cotton sets off cleanly styled, incredibly soft pants cut with a straight leg and classic five-pocket style by Homecore. Color Navy. 98% Cotton. Addis is wearing a size 31. Addis is 62, Chest 38.5, Waist 31, Inseam 32.\nAlso available in Sand, Bordeaux, Dark Grey, and Mariner.\nShop our collection of Homecore.\nc", "variant_title": "Navy / 29", "variant_options": ["Navy", "29"], "options_with_values": [{ "name": "COLOR", "value": "Navy" }, { "name": "SIZE", "value": "29" }], "line_level_discount_allocations": [{ "amount": 396174, "discount_application": { "type": "", "key": "f06b6571-9e66-44e3-bf53-c5da494ddc25", "title": "V2BWXV9RGX46", "description": null, "value": "100.0", "created_at": "2025-10-09T08:16:47.103Z", "value_type": "percentage", "allocation_method": "each", "target_selection": "entitled", "target_type": "line_item", "total_allocated_amount": 396174 } }], "line_level_total_discount": 396174, "quantity_rule": { "min": 1, "max": null, "increment": 1 }, "has_components": false }], "requires_shipping": true, "currency": "INR", "items_subtotal_price": 203487, "cart_level_discount_applications": [], "discount_codes": [] });
  };
  let freeGiftConfig;
  let appearenceConfig;
  store_configurations.subscribe((res) => {
    freeGiftConfig = res == null ? void 0 : res.freeGifts;
    appearenceConfig = res == null ? void 0 : res.appearance;
  });
  const addInterceptors = async (addToCart2, stickyCart) => {
    if (!addToCart2 && !stickyCart) {
      return;
    }
    const cartObserver = new PerformanceObserver(async (list) => {
      list.getEntries().forEach(async (entry) => {
        var _a, _b, _c, _d, _e;
        const isValidRequestType = ["xmlhttprequest", "fetch"].includes(
          entry.initiatorType
        );
        const isCartChangeRequest = /\/cart\//.test(entry.name);
        if (isValidRequestType && isCartChangeRequest) {
          const pauseExecution = get_store_value(store_pauseInterceptorExecution);
          if (entry.name.includes("/cart/add") && addToCart2 && !pauseExecution) {
            if (window.location.href.includes("stazebeauty") && window.location.href.includes("easybundle")) {
              return;
            }
            if (((_a = appearenceConfig == null ? void 0 : appearenceConfig.atcBehaviour) == null ? void 0 : _a.type) === "OPENCART") {
              window.openGokwikSideCart();
            } else if (((_b = appearenceConfig == null ? void 0 : appearenceConfig.atcBehaviour) == null ? void 0 : _b.type) === "POPUP") {
              store_toastMsgConfig.set({
                showToast: true,
                msg: ((_c = appearenceConfig == null ? void 0 : appearenceConfig.atcBehaviour) == null ? void 0 : _c.text) || "Item added to cart successfully!",
                type: "success",
                backgroundColor: ((_d = appearenceConfig == null ? void 0 : appearenceConfig.atcBehaviour) == null ? void 0 : _d.backgroundColor) ?? "",
                textColor: ((_e = appearenceConfig == null ? void 0 : appearenceConfig.atcBehaviour) == null ? void 0 : _e.textColor) ?? ""
              });
            }
          }
          if ((entry.name.includes("/cart/add") || entry.name.includes("/cart/change") || entry.name.includes("/cart/clear")) && !pauseExecution) {
            const latestCart = await getCart();
            (entry.name.includes("cart/add") || entry.name.includes("cart/change")) && await checkAndAddFreebie(freeGiftConfig, latestCart, true);
          }
        }
      });
    });
    cartObserver.observe({ entryTypes: ["resource"] });
  };
  let domObserver = null;
  let cartIconSelector;
  const gkProcessedIcons = /* @__PURE__ */ new Set();
  const cartIconReRenderObserver = (selector) => {
    if (window.gk_cart_domain !== "miarcus.myshopify.com")
      return;
    cartIconSelector = selector;
    const checkAndUpdateIcon = () => {
      const newElements = document.querySelectorAll(cartIconSelector);
      newElements.forEach((el) => {
        if (!gkProcessedIcons.has(el)) {
          console.log("cart icon element rendered");
          gkProcessedIcons.add(el);
          addCartIconFunction(el);
        }
      });
    };
    checkAndUpdateIcon();
    if (domObserver)
      return;
    domObserver = new MutationObserver(() => {
      checkAndUpdateIcon();
    });
    domObserver.observe(document.body, {
      childList: true,
      subtree: true
    });
  };
  function add_css$3(target) {
    append_styles(target, "svelte-knso62", ".sticky-cart.svelte-knso62.svelte-knso62{position:fixed;bottom:0px;left:0px;z-index:9999999;display:flex;flex-direction:row;align-items:center;justify-content:space-between;padding:15px 20px;background:black;right:0px;color:#fff}.sticky-cart.svelte-knso62 .total-price-wrap.svelte-knso62{display:flex;align-items:center;font-size:18px;position:relative}.sticky-cart.svelte-knso62 .total-price-wrap .total-price.svelte-knso62{display:flex;align-items:center;margin-left:5px}.sticky-cart.svelte-knso62 .total-price-wrap .total-price strike.svelte-knso62{font-size:16px;margin-left:10px}.sticky-cart.svelte-knso62 .total-price-wrap p.svelte-knso62{margin:0px;padding-left:10px}.sticky-cart.svelte-knso62 .total-price-wrap .item-count.svelte-knso62{position:absolute;top:-5px;left:15px;background:#fff;font-size:10px;color:black;padding:0px 3px;border-radius:10px}.sticky-cart.svelte-knso62 button.svelte-knso62{padding:5px 20px;outline:none;border:none;background:#fff;border-radius:5px}@media(min-width: 600px){.sticky-cart.svelte-knso62.svelte-knso62{display:none}}");
  }
  function create_if_block$3(ctx) {
    let div2;
    let div1;
    let icon;
    let t0;
    let span;
    let t1_value = (
      /*cart*/
      ctx[0].item_count + ""
    );
    let t1;
    let t2;
    let div0;
    let t3;
    let p;
    let t4_value = formatCurrencyDisplay(
      /*totalPayable*/
      ctx[1].toFixed(2)
    ) + "";
    let t4;
    let t5;
    let button;
    let t6;
    let button_style_value;
    let div2_style_value;
    let current;
    let mounted;
    let dispose;
    icon = new Icon({
      props: { "font-size": 20, icon: "mdi:cart" }
    });
    let if_block = (
      /*cart*/
      ctx[0].original_total_price / 100 - /*totalPayable*/
      ctx[1] > 0 && create_if_block_1$1(ctx)
    );
    return {
      c() {
        var _a, _b, _c, _d, _e;
        div2 = element("div");
        div1 = element("div");
        create_component(icon.$$.fragment);
        t0 = space();
        span = element("span");
        t1 = text(t1_value);
        t2 = space();
        div0 = element("div");
        if (if_block)
          if_block.c();
        t3 = space();
        p = element("p");
        t4 = text(t4_value);
        t5 = space();
        button = element("button");
        t6 = text("VIEW CART");
        attr(span, "class", "item-count svelte-knso62");
        attr(p, "class", "svelte-knso62");
        attr(div0, "class", "total-price svelte-knso62");
        attr(div1, "class", "total-price-wrap svelte-knso62");
        attr(button, "style", button_style_value = getStyleObject({
          bgColor: (
            /*$store_configurations*/
            (_c = (_b = (_a = ctx[2]) == null ? void 0 : _a.appearance) == null ? void 0 : _b.stickyBar) == null ? void 0 : _c.ctaColor
          )
        }));
        attr(button, "class", "svelte-knso62");
        attr(div2, "class", "sticky-cart svelte-knso62");
        attr(div2, "style", div2_style_value = getStyleObject(
          /*$store_configurations*/
          (_e = (_d = ctx[2]) == null ? void 0 : _d.appearance) == null ? void 0 : _e.stickyBar
        ));
      },
      m(target, anchor) {
        insert(target, div2, anchor);
        append(div2, div1);
        mount_component(icon, div1, null);
        append(div1, t0);
        append(div1, span);
        append(span, t1);
        append(div1, t2);
        append(div1, div0);
        if (if_block)
          if_block.m(div0, null);
        append(div0, t3);
        append(div0, p);
        append(p, t4);
        append(div2, t5);
        append(div2, button);
        append(button, t6);
        current = true;
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*click_handler*/
            ctx[4]
          );
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        var _a, _b, _c, _d, _e;
        if ((!current || dirty & /*cart*/
        1) && t1_value !== (t1_value = /*cart*/
        ctx2[0].item_count + ""))
          set_data(t1, t1_value);
        if (
          /*cart*/
          ctx2[0].original_total_price / 100 - /*totalPayable*/
          ctx2[1] > 0
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block_1$1(ctx2);
            if_block.c();
            if_block.m(div0, t3);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
        if ((!current || dirty & /*totalPayable*/
        2) && t4_value !== (t4_value = formatCurrencyDisplay(
          /*totalPayable*/
          ctx2[1].toFixed(2)
        ) + ""))
          set_data(t4, t4_value);
        if (!current || dirty & /*$store_configurations*/
        4 && button_style_value !== (button_style_value = getStyleObject({
          bgColor: (
            /*$store_configurations*/
            (_c = (_b = (_a = ctx2[2]) == null ? void 0 : _a.appearance) == null ? void 0 : _b.stickyBar) == null ? void 0 : _c.ctaColor
          )
        }))) {
          attr(button, "style", button_style_value);
        }
        if (!current || dirty & /*$store_configurations*/
        4 && div2_style_value !== (div2_style_value = getStyleObject(
          /*$store_configurations*/
          (_e = (_d = ctx2[2]) == null ? void 0 : _d.appearance) == null ? void 0 : _e.stickyBar
        ))) {
          attr(div2, "style", div2_style_value);
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(icon.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(icon.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div2);
        }
        destroy_component(icon);
        if (if_block)
          if_block.d();
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block_1$1(ctx) {
    let strike;
    let t_value = formatCurrencyDisplay(
      /*cart*/
      (ctx[0].original_total_price / 100).toFixed(2)
    ) + "";
    let t;
    return {
      c() {
        strike = element("strike");
        t = text(t_value);
        attr(strike, "class", "svelte-knso62");
      },
      m(target, anchor) {
        insert(target, strike, anchor);
        append(strike, t);
      },
      p(ctx2, dirty) {
        if (dirty & /*cart*/
        1 && t_value !== (t_value = formatCurrencyDisplay(
          /*cart*/
          (ctx2[0].original_total_price / 100).toFixed(2)
        ) + ""))
          set_data(t, t_value);
      },
      d(detaching) {
        if (detaching) {
          detach(strike);
        }
      }
    };
  }
  function create_fragment$3(ctx) {
    let if_block_anchor;
    let current;
    let if_block = (
      /*cart*/
      ctx[0] && create_if_block$3(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
        current = true;
      },
      p(ctx2, [dirty]) {
        if (
          /*cart*/
          ctx2[0]
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
            if (dirty & /*cart*/
            1) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block$3(ctx2);
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function instance$3($$self, $$props, $$invalidate) {
    let $store_configurations;
    let $store_cart;
    component_subscribe($$self, store_configurations, ($$value) => $$invalidate(2, $store_configurations = $$value));
    component_subscribe($$self, store_cart, ($$value) => $$invalidate(3, $store_cart = $$value));
    let cart2, totalPayable2 = 0;
    onMount(() => {
      store_totalPayableAmount.subscribe((res) => $$invalidate(1, totalPayable2 = res));
      store_cart.subscribe((res) => {
        $$invalidate(0, cart2 = res);
      });
    });
    const click_handler2 = () => {
      fireGokwikTrigger("sticky_cart_clicked_sc", {});
      logEvent("sticky_cart_clicked_sc", {});
      store_sideCartOpen.set(true);
      fireGokwikTrigger(TextConstants.eventNames.sticky_cart_clicked, {
        event: TextConstants.eventNames.sticky_cart_clicked,
        cart: $store_cart
      });
    };
    return [cart2, totalPayable2, $store_configurations, $store_cart, click_handler2];
  }
  class StickyCart extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$3, create_fragment$3, safe_not_equal, {}, add_css$3);
    }
  }
  function add_css$2(target) {
    append_styles(target, "svelte-lswkbk", ".overlay.svelte-lswkbk{position:fixed;top:0;left:0;width:100%;height:100%;background:var(--semi-transparent-black);display:flex;align-items:center;justify-content:center;z-index:999999}.popup.svelte-lswkbk{background:white;padding:0.2rem 1.3rem;border-radius:24px;position:relative;min-width:300px;max-width:80%;box-shadow:0 0 10px rgba(0, 0, 0, 0.1)}.close-icon.svelte-lswkbk{position:absolute;top:20px;right:20px;cursor:pointer;width:14px}");
  }
  function create_if_block$2(ctx) {
    let button;
    let mounted;
    let dispose;
    return {
      c() {
        button = element("button");
        button.innerHTML = `<img class="close-icon svelte-lswkbk" src="${images.close}" alt="Close"/>`;
        attr(button, "class", "visually-hidden");
      },
      m(target, anchor) {
        insert(target, button, anchor);
        if (!mounted) {
          dispose = listen(
            button,
            "click",
            /*closePopup*/
            ctx[3]
          );
          mounted = true;
        }
      },
      p: noop,
      d(detaching) {
        if (detaching) {
          detach(button);
        }
        mounted = false;
        dispose();
      }
    };
  }
  function create_fragment$2(ctx) {
    let div1;
    let div0;
    let t;
    let switch_instance;
    let current;
    let if_block = (
      /*showCancelButton*/
      ctx[2] && create_if_block$2(ctx)
    );
    const switch_instance_spread_levels = [
      /*props*/
      ctx[1]
    ];
    var switch_value = (
      /*component*/
      ctx[0]
    );
    function switch_props(ctx2, dirty) {
      let switch_instance_props = {};
      for (let i = 0; i < switch_instance_spread_levels.length; i += 1) {
        switch_instance_props = assign(switch_instance_props, switch_instance_spread_levels[i]);
      }
      if (dirty !== void 0 && dirty & /*props*/
      2) {
        switch_instance_props = assign(switch_instance_props, get_spread_update(switch_instance_spread_levels, [get_spread_object(
          /*props*/
          ctx2[1]
        )]));
      }
      return { props: switch_instance_props };
    }
    if (switch_value) {
      switch_instance = construct_svelte_component(switch_value, switch_props(ctx));
    }
    return {
      c() {
        div1 = element("div");
        div0 = element("div");
        if (if_block)
          if_block.c();
        t = space();
        if (switch_instance)
          create_component(switch_instance.$$.fragment);
        attr(div0, "class", "popup svelte-lswkbk");
        attr(div1, "class", "overlay svelte-lswkbk");
      },
      m(target, anchor) {
        insert(target, div1, anchor);
        append(div1, div0);
        if (if_block)
          if_block.m(div0, null);
        append(div0, t);
        if (switch_instance)
          mount_component(switch_instance, div0, null);
        current = true;
      },
      p(ctx2, [dirty]) {
        if (
          /*showCancelButton*/
          ctx2[2]
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
          } else {
            if_block = create_if_block$2(ctx2);
            if_block.c();
            if_block.m(div0, t);
          }
        } else if (if_block) {
          if_block.d(1);
          if_block = null;
        }
        if (dirty & /*component*/
        1 && switch_value !== (switch_value = /*component*/
        ctx2[0])) {
          if (switch_instance) {
            group_outros();
            const old_component = switch_instance;
            transition_out(old_component.$$.fragment, 1, 0, () => {
              destroy_component(old_component, 1);
            });
            check_outros();
          }
          if (switch_value) {
            switch_instance = construct_svelte_component(switch_value, switch_props(ctx2, dirty));
            create_component(switch_instance.$$.fragment);
            transition_in(switch_instance.$$.fragment, 1);
            mount_component(switch_instance, div0, null);
          } else {
            switch_instance = null;
          }
        } else if (switch_value) {
          const switch_instance_changes = dirty & /*props*/
          2 ? get_spread_update(switch_instance_spread_levels, [get_spread_object(
            /*props*/
            ctx2[1]
          )]) : {};
          switch_instance.$set(switch_instance_changes);
        }
      },
      i(local) {
        if (current)
          return;
        if (switch_instance)
          transition_in(switch_instance.$$.fragment, local);
        current = true;
      },
      o(local) {
        if (switch_instance)
          transition_out(switch_instance.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div1);
        }
        if (if_block)
          if_block.d();
        if (switch_instance)
          destroy_component(switch_instance);
      }
    };
  }
  function instance$2($$self, $$props, $$invalidate) {
    let { component } = $$props;
    let { props } = $$props;
    let { showCancelButton } = $$props;
    function closePopup() {
      store_showAddressAppliedPopup.set(false);
    }
    onMount(() => {
      setTimeout(
        () => {
          store_showAddressAppliedPopup.set(false);
        },
        3e3
      );
    });
    $$self.$$set = ($$props2) => {
      if ("component" in $$props2)
        $$invalidate(0, component = $$props2.component);
      if ("props" in $$props2)
        $$invalidate(1, props = $$props2.props);
      if ("showCancelButton" in $$props2)
        $$invalidate(2, showCancelButton = $$props2.showCancelButton);
    };
    return [component, props, showCancelButton, closePopup];
  }
  class Popup extends SvelteComponent {
    constructor(options) {
      super();
      init(
        this,
        options,
        instance$2,
        create_fragment$2,
        safe_not_equal,
        {
          component: 0,
          props: 1,
          showCancelButton: 2
        },
        add_css$2
      );
    }
  }
  function add_css$1(target) {
    append_styles(target, "svelte-1oj423r", ".toast.svelte-1oj423r{font-size:13px;font-weight:500;font-family:var(--font-family);padding:16px;color:white;border-radius:4px;margin:8px 0;display:flex;justify-content:space-between;align-items:center;z-index:999999;position:fixed;bottom:20px;left:50%;transform:translateX(-50%);text-align:center;width:max-content;max-width:80%}.close.svelte-1oj423r{margin-left:16px;cursor:pointer;font-weight:bold}.success.svelte-1oj423r{background-color:green}.error.svelte-1oj423r{background-color:black}.info.svelte-1oj423r{background-color:blue}.warning.svelte-1oj423r{background-color:orange}.default.svelte-1oj423r{background-color:gray}");
  }
  function create_if_block$1(ctx) {
    let div;
    let span;
    let t_value = (
      /*textmsg*/
      (ctx[2] || defaultErrorMessage) + ""
    );
    let t;
    let span_style_value;
    let div_class_value;
    let div_style_value;
    let div_transition;
    let current;
    return {
      c() {
        div = element("div");
        span = element("span");
        t = text(t_value);
        attr(span, "style", span_style_value = `color: ${/*textColor*/
        ctx[4]};`);
        attr(div, "class", div_class_value = "toast font-small-medium " + /*type*/
        ctx[1] + " svelte-1oj423r");
        attr(div, "style", div_style_value = `background-color: ${/*backgroundColor*/
        ctx[3]};`);
      },
      m(target, anchor) {
        insert(target, div, anchor);
        append(div, span);
        append(span, t);
        current = true;
      },
      p(ctx2, dirty) {
        if ((!current || dirty & /*textmsg*/
        4) && t_value !== (t_value = /*textmsg*/
        (ctx2[2] || defaultErrorMessage) + ""))
          set_data(t, t_value);
        if (!current || dirty & /*textColor*/
        16 && span_style_value !== (span_style_value = `color: ${/*textColor*/
        ctx2[4]};`)) {
          attr(span, "style", span_style_value);
        }
        if (!current || dirty & /*type*/
        2 && div_class_value !== (div_class_value = "toast font-small-medium " + /*type*/
        ctx2[1] + " svelte-1oj423r")) {
          attr(div, "class", div_class_value);
        }
        if (!current || dirty & /*backgroundColor*/
        8 && div_style_value !== (div_style_value = `background-color: ${/*backgroundColor*/
        ctx2[3]};`)) {
          attr(div, "style", div_style_value);
        }
      },
      i(local) {
        if (current)
          return;
        if (local) {
          add_render_callback(() => {
            if (!current)
              return;
            if (!div_transition)
              div_transition = create_bidirectional_transition(div, fly, { y: 100, duration: 300 }, true);
            div_transition.run(1);
          });
        }
        current = true;
      },
      o(local) {
        if (local) {
          if (!div_transition)
            div_transition = create_bidirectional_transition(div, fly, { y: 100, duration: 300 }, false);
          div_transition.run(0);
        }
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        if (detaching && div_transition)
          div_transition.end();
      }
    };
  }
  function create_fragment$1(ctx) {
    let if_block_anchor;
    let if_block = (
      /*showToast*/
      ctx[0] && create_if_block$1(ctx)
    );
    return {
      c() {
        if (if_block)
          if_block.c();
        if_block_anchor = empty();
      },
      m(target, anchor) {
        if (if_block)
          if_block.m(target, anchor);
        insert(target, if_block_anchor, anchor);
      },
      p(ctx2, [dirty]) {
        if (
          /*showToast*/
          ctx2[0]
        ) {
          if (if_block) {
            if_block.p(ctx2, dirty);
            if (dirty & /*showToast*/
            1) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block$1(ctx2);
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(if_block_anchor.parentNode, if_block_anchor);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
      },
      i(local) {
        transition_in(if_block);
      },
      o(local) {
        transition_out(if_block);
      },
      d(detaching) {
        if (detaching) {
          detach(if_block_anchor);
        }
        if (if_block)
          if_block.d(detaching);
      }
    };
  }
  function instance$1($$self, $$props, $$invalidate) {
    let type = "error";
    let textmsg = "";
    let showToast = false;
    let timeout;
    let backgroundColor = "";
    let textColor = "";
    store_toastMsgConfig.subscribe(async (res) => {
      $$invalidate(0, showToast = res.showToast);
      $$invalidate(1, type = res.type);
      $$invalidate(2, textmsg = res.msg);
      $$invalidate(3, backgroundColor = res.backgroundColor || "");
      $$invalidate(4, textColor = res.textColor || "white");
    });
    const closeToast = () => {
      store_toastMsgConfig.update((config) => ({ ...config, showToast: false }));
    };
    $$self.$$.update = () => {
      if ($$self.$$.dirty & /*showToast, timeout*/
      33) {
        if (showToast) {
          clearTimeout(timeout);
          $$invalidate(5, timeout = setTimeout(
            () => {
              closeToast();
            },
            3e3
          ));
        }
      }
    };
    return [showToast, type, textmsg, backgroundColor, textColor, timeout];
  }
  class ToastMsg extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance$1, create_fragment$1, safe_not_equal, {}, add_css$1);
    }
  }
  const updateConfigurationObject = (updates, config) => {
    if (!config) {
      console.warn("Configuration object is null, cannot update");
      return config;
    }
    const updatedConfig = JSON.parse(JSON.stringify(config));
    for (const [path, value] of Object.entries(updates)) {
      const keys = path.split(".");
      let current = updatedConfig;
      for (let i = 0; i < keys.length - 1; i++) {
        const key = keys[i];
        if (!(key in current)) {
          current[key] = {};
        }
        current = current[key];
      }
      const finalKey = keys[keys.length - 1];
      if (typeof value === "object" && value !== null) {
        if (Array.isArray(value)) {
          current[finalKey] = value;
        } else {
          if (current[finalKey] && typeof current[finalKey] === "object" && !Array.isArray(current[finalKey])) {
            current[finalKey] = { ...current[finalKey], ...value };
          } else {
            current[finalKey] = value;
          }
        }
      } else {
        current[finalKey] = value;
      }
    }
    return updatedConfig;
  };
  function add_css(target) {
    append_styles(target, "svelte-m1mmvl", '@import url("https://fonts.googleapis.com/css2?family=Inter:slnt,wght@-10..0,100..900&display=swap");:root{--primary-color:#3e3e3e}.gokwik-sidecart-container.svelte-m1mmvl{display:flex;flex-direction:column;min-height:100%;background-color:#e6edf4;position:relative;margin:0 auto;max-height:100dvh;overflow:hidden;z-index:10000000}@media(max-width: 768px){.gokwik-fixed-width.svelte-m1mmvl{width:100%}}.overlay.svelte-m1mmvl{background-color:rgba(0, 0, 0, 0.5);width:100%;height:100%;position:fixed;top:0;left:0;display:block;z-index:9999998}');
  }
  function create_else_block(ctx) {
    return {
      c: noop,
      m: noop,
      p: noop,
      i: noop,
      o: noop,
      d: noop
    };
  }
  function create_if_block_3(ctx) {
    let div;
    let t;
    let sidecart;
    let current;
    let mounted;
    let dispose;
    sidecart = new SideCart({
      props: {
        current_env: (
          /*current_env*/
          ctx[7]
        ),
        cartDataLoader: (
          /*cartDataLoader*/
          ctx[4]
        )
      }
    });
    return {
      c() {
        div = element("div");
        t = space();
        create_component(sidecart.$$.fragment);
        attr(div, "class", "overlay svelte-m1mmvl");
        set_style(
          div,
          "pointer-events",
          /*current_env*/
          ctx[7] === TextConstants.environment_constants.dashboard ? "none" : "auto"
        );
      },
      m(target, anchor) {
        insert(target, div, anchor);
        insert(target, t, anchor);
        mount_component(sidecart, target, anchor);
        current = true;
        if (!mounted) {
          dispose = listen(
            div,
            "click",
            /*handleCloseClick*/
            ctx[8]
          );
          mounted = true;
        }
      },
      p(ctx2, dirty) {
        const sidecart_changes = {};
        if (dirty & /*cartDataLoader*/
        16)
          sidecart_changes.cartDataLoader = /*cartDataLoader*/
          ctx2[4];
        sidecart.$set(sidecart_changes);
      },
      i(local) {
        if (current)
          return;
        transition_in(sidecart.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(sidecart.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
          detach(t);
        }
        destroy_component(sidecart, detaching);
        mounted = false;
        dispose();
      }
    };
  }
  function create_if_block_2(ctx) {
    let stickycart;
    let current;
    stickycart = new StickyCart({});
    return {
      c() {
        create_component(stickycart.$$.fragment);
      },
      m(target, anchor) {
        mount_component(stickycart, target, anchor);
        current = true;
      },
      i(local) {
        if (current)
          return;
        transition_in(stickycart.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(stickycart.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(stickycart, detaching);
      }
    };
  }
  function create_if_block(ctx) {
    let div;
    let t;
    let toastmsg;
    let current;
    let if_block = (
      /*showDeletePopup*/
      ctx[5] && create_if_block_1()
    );
    toastmsg = new ToastMsg({});
    return {
      c() {
        div = element("div");
        if (if_block)
          if_block.c();
        t = space();
        create_component(toastmsg.$$.fragment);
        attr(div, "class", "gokwik-sidecart-container gokwik-fixed-width svelte-m1mmvl");
      },
      m(target, anchor) {
        insert(target, div, anchor);
        if (if_block)
          if_block.m(div, null);
        append(div, t);
        mount_component(toastmsg, div, null);
        current = true;
      },
      p(ctx2, dirty) {
        if (
          /*showDeletePopup*/
          ctx2[5]
        ) {
          if (if_block) {
            if (dirty & /*showDeletePopup*/
            32) {
              transition_in(if_block, 1);
            }
          } else {
            if_block = create_if_block_1();
            if_block.c();
            transition_in(if_block, 1);
            if_block.m(div, t);
          }
        } else if (if_block) {
          group_outros();
          transition_out(if_block, 1, 1, () => {
            if_block = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block);
        transition_in(toastmsg.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(if_block);
        transition_out(toastmsg.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(div);
        }
        if (if_block)
          if_block.d();
        destroy_component(toastmsg);
      }
    };
  }
  function create_if_block_1(ctx) {
    let popup;
    let current;
    popup = new Popup({
      props: {
        component: ConfirmDeletePopup,
        props: {},
        showCancelButton: false
      }
    });
    return {
      c() {
        create_component(popup.$$.fragment);
      },
      m(target, anchor) {
        mount_component(popup, target, anchor);
        current = true;
      },
      i(local) {
        if (current)
          return;
        transition_in(popup.$$.fragment, local);
        current = true;
      },
      o(local) {
        transition_out(popup.$$.fragment, local);
        current = false;
      },
      d(detaching) {
        destroy_component(popup, detaching);
      }
    };
  }
  function create_fragment(ctx) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i;
    let current_block_type_index;
    let if_block0;
    let t0;
    let show_if = (
      /*cart*/
      ((_a = ctx[0]) == null ? void 0 : _a.item_count) > 0 && !/*sideCartOpen*/
      ctx[1] && /*$store_configurations*/
      ((_d = (_c = (_b = ctx[6]) == null ? void 0 : _b.appearance) == null ? void 0 : _c.stickyBar) == null ? void 0 : _d.enable) && /*loadStickyCart*/
      ctx[3] && !window.location.href.includes("products")
    );
    let t1;
    let if_block2_anchor;
    let current;
    const if_block_creators = [create_if_block_3, create_else_block];
    const if_blocks = [];
    function select_block_type(ctx2, dirty) {
      if (
        /*sideCartOpen*/
        ctx2[1] && /*loadSidecart*/
        ctx2[2]
      )
        return 0;
      return 1;
    }
    current_block_type_index = select_block_type(ctx);
    if_block0 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx);
    let if_block1 = show_if && create_if_block_2();
    let if_block2 = (
      /*$store_configurations*/
      (((_f = (_e = ctx[6]) == null ? void 0 : _e.appearance) == null ? void 0 : _f.checkoutFromCart) || /*$store_configurations*/
      ((_i = (_h = (_g = ctx[6]) == null ? void 0 : _g.appearance) == null ? void 0 : _h.atcBehaviour) == null ? void 0 : _i.type) === "POPUP") && create_if_block(ctx)
    );
    return {
      c() {
        if_block0.c();
        t0 = space();
        if (if_block1)
          if_block1.c();
        t1 = space();
        if (if_block2)
          if_block2.c();
        if_block2_anchor = empty();
      },
      m(target, anchor) {
        if_blocks[current_block_type_index].m(target, anchor);
        insert(target, t0, anchor);
        if (if_block1)
          if_block1.m(target, anchor);
        insert(target, t1, anchor);
        if (if_block2)
          if_block2.m(target, anchor);
        insert(target, if_block2_anchor, anchor);
        current = true;
      },
      p(ctx2, [dirty]) {
        var _a2, _b2, _c2, _d2, _e2, _f2, _g2, _h2, _i2;
        let previous_block_index = current_block_type_index;
        current_block_type_index = select_block_type(ctx2);
        if (current_block_type_index === previous_block_index) {
          if_blocks[current_block_type_index].p(ctx2, dirty);
        } else {
          group_outros();
          transition_out(if_blocks[previous_block_index], 1, 1, () => {
            if_blocks[previous_block_index] = null;
          });
          check_outros();
          if_block0 = if_blocks[current_block_type_index];
          if (!if_block0) {
            if_block0 = if_blocks[current_block_type_index] = if_block_creators[current_block_type_index](ctx2);
            if_block0.c();
          } else {
            if_block0.p(ctx2, dirty);
          }
          transition_in(if_block0, 1);
          if_block0.m(t0.parentNode, t0);
        }
        if (dirty & /*cart, sideCartOpen, $store_configurations, loadStickyCart*/
        75)
          show_if = /*cart*/
          ((_a2 = ctx2[0]) == null ? void 0 : _a2.item_count) > 0 && !/*sideCartOpen*/
          ctx2[1] && /*$store_configurations*/
          ((_d2 = (_c2 = (_b2 = ctx2[6]) == null ? void 0 : _b2.appearance) == null ? void 0 : _c2.stickyBar) == null ? void 0 : _d2.enable) && /*loadStickyCart*/
          ctx2[3] && !window.location.href.includes("products");
        if (show_if) {
          if (if_block1) {
            if (dirty & /*cart, sideCartOpen, $store_configurations, loadStickyCart*/
            75) {
              transition_in(if_block1, 1);
            }
          } else {
            if_block1 = create_if_block_2();
            if_block1.c();
            transition_in(if_block1, 1);
            if_block1.m(t1.parentNode, t1);
          }
        } else if (if_block1) {
          group_outros();
          transition_out(if_block1, 1, 1, () => {
            if_block1 = null;
          });
          check_outros();
        }
        if (
          /*$store_configurations*/
          ((_f2 = (_e2 = ctx2[6]) == null ? void 0 : _e2.appearance) == null ? void 0 : _f2.checkoutFromCart) || /*$store_configurations*/
          ((_i2 = (_h2 = (_g2 = ctx2[6]) == null ? void 0 : _g2.appearance) == null ? void 0 : _h2.atcBehaviour) == null ? void 0 : _i2.type) === "POPUP"
        ) {
          if (if_block2) {
            if_block2.p(ctx2, dirty);
            if (dirty & /*$store_configurations*/
            64) {
              transition_in(if_block2, 1);
            }
          } else {
            if_block2 = create_if_block(ctx2);
            if_block2.c();
            transition_in(if_block2, 1);
            if_block2.m(if_block2_anchor.parentNode, if_block2_anchor);
          }
        } else if (if_block2) {
          group_outros();
          transition_out(if_block2, 1, 1, () => {
            if_block2 = null;
          });
          check_outros();
        }
      },
      i(local) {
        if (current)
          return;
        transition_in(if_block0);
        transition_in(if_block1);
        transition_in(if_block2);
        current = true;
      },
      o(local) {
        transition_out(if_block0);
        transition_out(if_block1);
        transition_out(if_block2);
        current = false;
      },
      d(detaching) {
        if (detaching) {
          detach(t0);
          detach(t1);
          detach(if_block2_anchor);
        }
        if_blocks[current_block_type_index].d(detaching);
        if (if_block1)
          if_block1.d(detaching);
        if (if_block2)
          if_block2.d(detaching);
      }
    };
  }
  function instance($$self, $$props, $$invalidate) {
    let showDeletePopup;
    let $store_configurations;
    let $store_sideCartOpen;
    let $store_offerPopup;
    let $store_confirmDeletePopup;
    let $store_appliedAutomaticDiscounts;
    let $store_platform;
    let $store_oneClickCoupon;
    component_subscribe($$self, store_configurations, ($$value) => $$invalidate(6, $store_configurations = $$value));
    component_subscribe($$self, store_sideCartOpen, ($$value) => $$invalidate(16, $store_sideCartOpen = $$value));
    component_subscribe($$self, store_offerPopup, ($$value) => $$invalidate(17, $store_offerPopup = $$value));
    component_subscribe($$self, store_confirmDeletePopup, ($$value) => $$invalidate(10, $store_confirmDeletePopup = $$value));
    component_subscribe($$self, store_appliedAutomaticDiscounts, ($$value) => $$invalidate(18, $store_appliedAutomaticDiscounts = $$value));
    component_subscribe($$self, store_platform, ($$value) => $$invalidate(19, $store_platform = $$value));
    component_subscribe($$self, store_oneClickCoupon, ($$value) => $$invalidate(20, $store_oneClickCoupon = $$value));
    let sideCartOpen = false, cart2 = null, loadSidecart = false, loadStickyCart = false, manualDiscount2 = null;
    let unsubSideCart, unsubCart, unsubOffers, unsubManualDiscount;
    let observers = [];
    const current_env = "production";
    let cartDataLoader = false;
    let checkoutOnCartInitialized = false;
    window.addItemtoCartFromForm = addItemtoCartFromForm;
    window.refreshSideCart = getCart;
    window.removeAllFreebies = () => removeAllFreebies(true);
    let cartIconElements = [];
    onMount(async () => {
      var _a, _b, _c, _d;
      try {
        const configSavedInCookie = sessionStorage.getItem("kwik-cart-request-data");
        if (configSavedInCookie) {
          const config = JSON.parse(configSavedInCookie);
          if (config.appearance.sideCart) {
            config.appearance.atcBehaviour = {
              type: config.appearance.sideCart.enable ? "OPENCART" : "DEFAULT"
            };
            delete config.appearance.sideCart;
          }
          if (window.customGKCartConfig) {
            const newConfig = updateConfigurationObject(window.customGKCartConfig, config);
            store_configurations.set(newConfig);
          } else
            store_configurations.set(config);
        }
        store_shopDomain.set(window.gk_cart_domain);
        if (![TextConstants.environment_constants.dashboard].some((env) => current_env.includes(env))) {
          try {
            const configLoaded = await loadConfigurations();
            if (!configLoaded) {
              console.error("[GK-DEBUG] Configuration loading failed, but continuing with default settings");
            }
          } catch (error) {
            console.error("[GK-DEBUG] Error loading configurations:", error);
            ;
          }
        }
        ;
        setInitialValues();
        unsubSideCart = store_sideCartOpen.subscribe((res) => {
          $$invalidate(1, sideCartOpen = res);
          ;
        });
        window == null ? void 0 : window.addSidecartEventListener();
        unsubCart = store_cart.subscribe((res) => {
          var _a2, _b2, _c2, _d2, _e, _f, _g, _h;
          $$invalidate(0, cart2 = res);
          if (((_a2 = cart2 == null ? void 0 : cart2.items) == null ? void 0 : _a2.length) && !checkoutOnCartInitialized && ((_b2 = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _b2.checkoutFromCart)) {
            createCheckoutAndInit();
            checkoutOnCartInitialized = true;
          }
          $$invalidate(4, cartDataLoader = false);
          const lastAddedItem = (_c2 = cart2 == null ? void 0 : cart2.items) == null ? void 0 : _c2.find((item) => {
            var _a3;
            return !((_a3 = item == null ? void 0 : item.properties) == null ? void 0 : _a3["_gokwik_freebie"]);
          });
          if (res) {
            fetchProductDetails();
            if (((_d2 = $store_configurations == null ? void 0 : $store_configurations.upSell) == null ? void 0 : _d2.type) === TextConstants.recommendationTypes.AI_POWERED && lastAddedItem) {
              fetchAIProductRecommendations(lastAddedItem.product_id, (_f = (_e = $store_configurations == null ? void 0 : $store_configurations.upSell) == null ? void 0 : _e.aiPowered) == null ? void 0 : _f.intent, (_h = (_g = $store_configurations == null ? void 0 : $store_configurations.upSell) == null ? void 0 : _g.aiPowered) == null ? void 0 : _h.maxProducts);
            }
            let automaticDiscounts = getDiscountsFromCart(cart2);
            store_appliedAutomaticDiscounts.set(automaticDiscounts);
            calculateTotalPayable(res);
            unsubManualDiscount = store_appliedManualDiscount.subscribe((discountData) => {
              $$invalidate(9, manualDiscount2 = discountData);
              calculateTotalPayable(res);
            });
          } else {
            store_appliedAutomaticDiscounts.set([]);
          }
        });
        unsubOffers = store_offers.subscribe(async (res) => {
          var _a2, _b2, _c2;
          if (($store_configurations == null ? void 0 : $store_configurations.oneClickOffer) && ((_a2 = res == null ? void 0 : res.available) == null ? void 0 : _a2.length)) {
            const oneClickCoupon = await setOneClickOffer($store_configurations == null ? void 0 : $store_configurations.oneClickOffer, (_b2 = res == null ? void 0 : res.available) == null ? void 0 : _b2.filter((offer) => (offer == null ? void 0 : offer.offerType) !== "payment_offer"));
            store_oneClickCoupon.set(oneClickCoupon);
          } else {
            if (!((_c2 = res == null ? void 0 : res.available) == null ? void 0 : _c2.length) && $store_oneClickCoupon) {
              store_appliedManualDiscount.set(null);
              setCookie("discount_code", "", -1);
              setCookie("coupon_applied", "", -1);
            }
            store_oneClickCoupon.set(null);
          }
        });
        if ("production" === TextConstants.environment_constants.dashboard)
          ;
        store_productDetails.subscribe((res) => {
          calculateTotalPayable(cart2);
        });
        if ([
          TextConstants.environment_constants.local,
          TextConstants.environment_constants.dashboard
        ].some((env) => current_env.includes(env))) {
          setLocalVariables();
          if (current_env === TextConstants.environment_constants.dashboard)
            ;
        }
        addInterceptors(["OPENCART", "POPUP"].includes(((_b = (_a = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _a.atcBehaviour) == null ? void 0 : _b.type) || "DEFAULT"), !!((_d = (_c = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _c.stickyBar) == null ? void 0 : _d.enable));
        ;
        $$invalidate(2, loadSidecart = true);
        if (current_env === "local")
          ;
        else {
          await updateCart({ attributes: { "GoKwik-Cart": true } });
          await getDiscounts();
        }
        let appliedDiscount2 = getCookie$1("discount_code") || getCookie$1("coupon_applied");
        if (appliedDiscount2 && $store_platform === TextConstants.platforms.Checkout1_0 && !($store_appliedAutomaticDiscounts == null ? void 0 : $store_appliedAutomaticDiscounts.some((discount) => discount.title === appliedDiscount2))) {
          await applyDiscount(appliedDiscount2, "outside");
        }
        ;
        $$invalidate(3, loadStickyCart = true);
        history.pushState(null, null, window.location.href);
        window.addEventListener("popstate", function(event) {
          if (sideCartOpen) {
            closeGokwikSideCart(true);
            history.pushState(null, null, window.location.href);
          }
        });
      } catch (error) {
        if (!loadSidecart) {
          $$invalidate(2, loadSidecart = true);
        }
      }
      loadGoogleFonts();
    });
    onDestroy(() => {
      unsubSideCart && unsubSideCart();
      unsubOffers && unsubOffers();
      unsubCart && unsubCart();
      unsubManualDiscount && unsubManualDiscount();
      observers.forEach((observer) => {
        observer.disconnect();
      });
    });
    const handleCloseClick = () => {
      if ($store_offerPopup) {
        store_offerPopup.set(false);
        fireGokwikTrigger(TextConstants.eventNames.view_offers_closed, {});
        logEvent(TextConstants.eventNames.view_offers_closed, {});
      } else {
        closeGokwikSideCart(true);
      }
    };
    window.openGokwikSideCart = async function() {
      $$invalidate(4, cartDataLoader = true);
      if ($store_sideCartOpen) {
        await getCart();
      }
      store_sideCartOpen.set(true);
      const bodyEl = document.querySelector("body");
      if (bodyEl) {
        bodyEl.style.overflowY = "hidden";
      }
      const htmlEl = document.querySelector("html");
      if (htmlEl) {
        htmlEl.style.overflowY = "hidden";
      }
    };
    window.closeGokwikSideCart = function(isClosedByUser = false) {
      if (isClosedByUser) {
        fireGokwikTrigger(TextConstants.eventNames.sidecart_close, {});
        logEvent(TextConstants.eventNames.sidecart_close, {});
      }
      store_sideCartOpen.set(false);
      const bodyEl = document.querySelector("body");
      if (bodyEl) {
        const overflow = JSON.parse(sessionStorage.getItem("body-el-overflow") || "{}");
        bodyEl.style.setProperty("overflow-y", overflow, "important");
      }
      const htmlEl = document.querySelector("html");
      if (htmlEl) {
        const overflow = JSON.parse(sessionStorage.getItem("html-el-overflow") || "{}");
        htmlEl.style.setProperty("overflow-y", overflow, "important");
      }
    };
    window.buyNowCheckoutClick = () => {
      store_isBuyNowFreebieProcessing.set(true);
      window.openGokwikSideCart();
    };
    const loadConfigurations = async () => {
      var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s;
      const response = await fetchConfigurations();
      if ((_b = (_a = response.data) == null ? void 0 : _a.appearance) == null ? void 0 : _b.checkoutFromCart) {
        store_showCheckoutOnCart.set(true);
        const style = document.createElement("style");
        style.innerHTML = `
        #gk-modal {
          display: none !important;
        }
      `;
        document.head.appendChild(style);
        checkoutOnCart();
        openCheckoutInBg();
      }
      updateVariantAvailability(response.data);
      if (((_d = (_c = response.data) == null ? void 0 : _c.appearance) == null ? void 0 : _d.sideCart) && !((_f = (_e = response == null ? void 0 : response.data) == null ? void 0 : _e.appearance) == null ? void 0 : _f.atcBehaviour)) {
        response.data.appearance.atcBehaviour = {
          type: ((_g = response.data) == null ? void 0 : _g.appearance.sideCart.enable) ? "OPENCART" : "DEFAULT"
        };
        (_h = response.data) == null ? true : delete _h.appearance.sideCart;
      } else if (((_j = (_i = response == null ? void 0 : response.data) == null ? void 0 : _i.appearance) == null ? void 0 : _j.sideCart) && ((_l = (_k = response == null ? void 0 : response.data) == null ? void 0 : _k.appearance) == null ? void 0 : _l.atcBehaviour)) {
        (_m = response.data) == null ? true : delete _m.appearance.sideCart;
      }
      if (window.gkMerchantId === "19g6ile2fwbcy") {
        store_platform.set(TextConstants.platforms.Checkout1_0);
      } else {
        store_platform.set((_n = response == null ? void 0 : response.data) == null ? void 0 : _n.platform);
      }
      if (window.customGKCartConfig) {
        const newConfig = updateConfigurationObject(window.customGKCartConfig, response.data);
        store_configurations.set(newConfig);
      } else
        store_configurations.update((oldObj) => ({ ...oldObj, ...response.data }));
      setTimeout(
        () => {
          if (window.customGKCartConfig) {
            const newConfig = updateConfigurationObject(window.customGKCartConfig, response.data);
            store_configurations.set(newConfig);
          }
        },
        1e3
      );
      response.data && sessionStorage.setItem("kwik-cart-request-data", JSON.stringify(response.data));
      const bodyEl = document.querySelector("body");
      if (bodyEl) {
        const overflowY = getComputedStyle(bodyEl).overflowY;
        sessionStorage.setItem("body-el-overflow", JSON.stringify(overflowY));
      }
      const htmlEl = document.querySelector("html");
      if (htmlEl) {
        const htmlOverflowY = getComputedStyle(htmlEl).overflowY;
        sessionStorage.setItem("html-el-overflow", JSON.stringify(htmlOverflowY));
      }
      if ((_q = (_p = (_o = response == null ? void 0 : response.data) == null ? void 0 : _o.appearance) == null ? void 0 : _p.disableCartPage) == null ? void 0 : _q.enable) {
        if (location.pathname.split("/")[1].split("?")[0] === "cart") {
          location.href = "/?openCart=true";
        }
        const url = new URL(window.location.href);
        const params = new URLSearchParams(url.search);
        const openCart = params.get("openCart");
        if (openCart) {
          openGokwikSideCart();
        }
      }
      if (window.gk_selected_product_id) {
        let freebieProductIds = getShopifyFreeGiftProductIds((_s = (_r = response == null ? void 0 : response.data) == null ? void 0 : _r.freeGifts) == null ? void 0 : _s.freeGifts);
        if (freebieProductIds == null ? void 0 : freebieProductIds.includes(window.gk_selected_product_id)) {
          window.location.href = "/?openCart=true";
        }
      }
      store_merchantId.set(response.data.merchantId);
      store_requestId.set(response.data.requestId);
      window.gk_cart_currency && TextConstants.currencies[window.gk_cart_currency] && store_currency.set({
        short_name: window.gk_cart_currency || "INR",
        symbol: TextConstants.currencies[window.gk_cart_currency] || ""
      });
      setThemeStyles(response.data);
      return !!response.data;
    };
    window.addSidecartEventListener = () => {
      var _a, _b;
      hideOtherCarts(TextConstants.otherSideCarts);
      if (!window.gkCartIconListenerAdded) {
        const merchantSelectorString = ((_a = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _a.merchantCartIconSelector) ?? "";
        const defaultSelectors = TextConstants.cartIconQuerySelectors;
        const globalSelectorString = ((_b = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _b.globalCartIconSelector) ?? "";
        const merchantSelectors = merchantSelectorString ? merchantSelectorString.split(",").map((s) => s.trim()).filter(Boolean) : [];
        const globalSelectors = globalSelectorString ? globalSelectorString.split(",").map((s) => s.trim()).filter(Boolean) : [];
        let foundElements = [];
        const cartIconElementsParent = [];
        if (merchantSelectors.length > 0) {
          merchantSelectors.forEach((selector) => {
            const elements = Array.from(document.querySelectorAll(selector));
            if (elements.length) {
              foundElements.push(...elements);
            }
          });
        }
        if (foundElements.length === 0) {
          defaultSelectors.forEach((selector) => {
            const elements = Array.from(document.querySelectorAll(selector));
            if (elements.length) {
              foundElements.push(...elements);
            }
          });
        }
        if (foundElements.length === 0 && globalSelectors.length > 0) {
          globalSelectors.forEach((selector) => {
            const elements = Array.from(document.querySelectorAll(selector));
            if (elements.length) {
              foundElements.push(...elements);
            }
          });
        }
        const uniqueElements = [...new Set(foundElements)];
        uniqueElements.forEach((element2) => {
          var _a2;
          addCartIconFunction(element2);
          const matchedSelector = merchantSelectors.find((s) => element2.matches(s)) || defaultSelectors.find((s) => element2.matches(s)) || globalSelectors.find((s) => element2.matches(s)) || "";
          if (matchedSelector) {
            cartIconReRenderObserver(matchedSelector);
          }
          cartIconElementsParent.push({
            elementSelector: matchedSelector || "",
            parentClassNameSelector: ((_a2 = element2 == null ? void 0 : element2.parentElement) == null ? void 0 : _a2.className) ?? ""
          });
          cartIconElements.push(element2);
        });
        if (!localStorage.getItem("gokwik-sidecart-cart-icon-element")) {
          localStorage.setItem("gokwik-sidecart-cart-icon-element", JSON.stringify(cartIconElementsParent));
        }
        window.gkCartIconListenerAdded = true;
      }
      setupCommonEventHandlers();
    };
    const setupCommonEventHandlers = () => {
      var _a;
      if (window.gkAddtoCartEventListener && ((_a = $store_configurations == null ? void 0 : $store_configurations.appearance) == null ? void 0 : _a.atcModification)) {
        if (document.readyState === "complete") {
          window.gkAddtoCartEventListener();
        } else {
          window.addEventListener("load", () => {
            window.gkAddtoCartEventListener();
          });
        }
      }
      if (window.gkMerchantId === "19g6ilw07wkt1")
        runCartHideMO();
      if (window.gk_cart_domain === "miarcus.myshopify.com") {
        const observersList = runCartIconMO();
        observers.push(...observersList);
      }
    };
    const updateCartIconElementCount = (cartItemCount) => {
      if (cartIconElements.length) {
        cartIconElements.forEach((element2) => {
          var _a;
          try {
            const descendants = element2.querySelectorAll("*");
            let countElement = null;
            if ((_a = element2 == null ? void 0 : element2.innerHTML) == null ? void 0 : _a.match(/^\d+$/)) {
              countElement = element2;
            } else {
              countElement = Array.from(descendants).find((descendant) => {
                var _a2, _b, _c;
                return (descendant == null ? void 0 : descendant.offsetParent) !== null && ((_a2 = descendant == null ? void 0 : descendant.children) == null ? void 0 : _a2.length) === 0 && ((_c = (_b = descendant == null ? void 0 : descendant.textContent) == null ? void 0 : _b.trim()) == null ? void 0 : _c.match(/^\d+$/));
              });
            }
            if (countElement) {
              countElement.innerHTML = String(cartItemCount);
            }
          } catch (err) {
            console.warn("Failed to update cart count for element:", element2, err);
          }
        });
      }
    };
    window.startGkCartLoader = () => {
      store_freeGiftLoading.set(true);
    };
    window.stopGkCartLoader = () => {
      store_freeGiftLoading.set(false);
    };
    $$self.$$.update = () => {
      if ($$self.$$.dirty & /*cart, manualDiscount*/
      513) {
        {
          const totalItemCount = ((cart2 == null ? void 0 : cart2.item_count) || 0) + ((manualDiscount2 == null ? void 0 : manualDiscount2.freeCount) || 0);
          updateCartIconElementCount(totalItemCount);
        }
      }
      if ($$self.$$.dirty & /*$store_confirmDeletePopup*/
      1024) {
        $$invalidate(5, showDeletePopup = $store_confirmDeletePopup);
      }
    };
    return [
      cart2,
      sideCartOpen,
      loadSidecart,
      loadStickyCart,
      cartDataLoader,
      showDeletePopup,
      $store_configurations,
      current_env,
      handleCloseClick,
      manualDiscount2,
      $store_confirmDeletePopup
    ];
  }
  class App extends SvelteComponent {
    constructor(options) {
      super();
      init(this, options, instance, create_fragment, safe_not_equal, {}, add_css);
    }
  }
  const container = document.createElement("shadow-dom-container");
  const shadowRoot = container.attachShadow({ mode: "open" });
  const fontStyle = document.createElement("style");
  fontStyle.innerHTML = `
.sidecart * {
  margin: 0px;
  box-sizing: border-box;
  line-height: normal;
  letter-spacing: normal;
  font-family: var(--gokwik-font-style), Inter;
}

.sidecart {
  color: var(--gokwik-text-color, inherit);
}

.sidecart button {
  outline: none;
  border: none;
}`;
  const removeThirdPartyListeners = (gkShadowDom) => {
    const events = [
      "mousedown",
      "click",
      "touchstart",
      "touchmove",
      "touchend",
      "touchcancel"
    ];
    events.forEach((event) => {
      gkShadowDom.addEventListener(event, (e) => {
        e.stopPropagation();
      });
    });
  };
  if (document.body) {
    document.body.appendChild(container);
    container.shadowRoot.appendChild(fontStyle);
    removeThirdPartyListeners(container);
    new App({
      target: shadowRoot
    });
  } else {
    window.addEventListener("load", () => {
      document.body.appendChild(container);
      container.shadowRoot.appendChild(fontStyle);
      removeThirdPartyListeners(container);
      new App({
        target: shadowRoot
      });
    });
  }
  window.addEventListener("load", () => {
    var _a, _b;
    const gkCartConfigAtc = (_b = (_a = JSON.parse(
      sessionStorage.getItem("kwik-cart-request-data") || "{}"
    )) == null ? void 0 : _a.appearance) == null ? void 0 : _b.atcModification;
    if (window.gkAddtoCartEventListener && gkCartConfigAtc) {
      window.gkAddtoCartEventListener();
    }
  });
})();
//# sourceMappingURL=side-cart.js.map
